//
//     KeyLines v5.8.1-41455 eval
//     Licensed to Projectai for Pulse expires on Mon Jan 06 2020
//
//     Copyright © 2011-2019 Cambridge Intelligence Limited.
//     All rights reserved.
//
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.KeyLines=t()}(this,function(){"use strict";var e=null;function t(e,t,n){if(e){e.parentNode&&e.parentNode.removeChild(e);t&&t.appendChild(e);n()}}function n(e,t){if(e&&"object"==typeof e)if(Array.isArray(e))e.forEach(t);else for(var n=Object.keys(e),r=n.length,i=0;i<r;i++){var o=n[i];t(e[o],o)}}function r(e){return"rtl"===window.getComputedStyle(e).direction}function i(e){if(null===e)return null;switch(typeof e){case"object":if(Array.isArray(e))return e.slice();if(f(e))return u(e);if(e instanceof Date)return new Date(e.getTime());var t={};n(e,function(e,n){t[n]=e});return t;case"boolean":case"string":case"number":return e;default:return}}function o(e){return e*(Math.PI/180)}function a(e,t,r){var i,o=t,s=r;if(2===arguments.length&&"string"==typeof o){s=o;o=!0}if(null===e)return null;function l(e,t){o&&"_"===t.charAt(0)||(i[t]=a(e,o&&t!==s))}if("object"==typeof e){if(Array.isArray(e)){for(var c=[],d=0;d<e.length;d++)c.push(a(e[d],o,s));return c}if(f(e))return u(e,!0);if(e instanceof Date)return new Date(e.getTime());i={};n(e,l);return i}return"boolean"==typeof e||"string"==typeof e||"number"==typeof e?e:void 0}function u(e,t){void 0===t&&(t=!1);var n,r=Object.getPrototypeOf(e).constructor;if(t){n=new r;a(Array.from(e)).forEach(function(e){n.add?n.add(e):n.set(e[0],e[1])})}else n=new r(e);return n}function s(){return Object.isPrototypeOf&&Array.from&&"undefined"!=typeof Set&&"undefined"!=typeof Map}function f(t){null==e&&s&&(e=s());return!!e&&(Object.prototype.isPrototypeOf.call(Map.prototype,t)||Object.prototype.isPrototypeOf.call(Set.prototype,t))}var l=1e3/60,c="undefined"!=typeof requestAnimationFrame;function d(e){return c?requestAnimationFrame(e):setTimeout(e,l)}function h(e){c?cancelAnimationFrame(e):clearTimeout(e)}function v(e,t){void 0===t&&(t=0);return A(e)?setTimeout(e,t):null}function g(e,t){if(A(e))return setInterval(e,t)}function p(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];KeyLines._loggerDisabled||console.log([].slice.call(e).join(" "))}var m=Number.isNaN||y;function y(e){return e!=e}var b=Number.isFinite||x;function x(e){return"number"==typeof e&&isFinite(e)}function w(e){return e>>>0===parseFloat(e)}function A(e){return"function"==typeof e}function M(e,t){var n=t||"";return n.slice(Math.max(n.length-5,0))==="."+e}function I(e){return!("object"!=typeof e||e instanceof Date||Array.isArray(e)||V(e))}function E(e){return"[object Date]"===Object.prototype.toString.call(e)&&!m(e.getTime())}function C(e,t){return void 0===e&&void 0===t||(!(!m(e)||!m(t)||"number"!=typeof e||"number"!=typeof t)||(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(function(e,n){return S(e,t[n])}):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e===t))}function S(e,t){return I(e)&&I(t)?Object.keys(t).every(function(n){return S(e[n],t[n])}):C(e,t)}function k(e,t){A(e)&&v(function(){e(t)})}function R(e,t){A(e)&&e(t)}var T=Number.isInteger||B;function B(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function G(e,t){try{t(null,e())}catch(e){t(e)}}function Z(e){if("object"==typeof e&&e&&!Array.isArray(e)){var t=e;if(t.items)return t.items}return e}function O(e){return Array.isArray(e)?e:[e]}function F(e,t){for(var n=[],r=O(e),i=0;i<r.length;i++)t[r[i]]&&n.push(r[i]);return n}function z(e,t){var r=a(e)||{};if("string"==typeof e)return e;n(t,function(e,t){Y(r,t)&&!V(r[t])||(r[t]=e)});return r}function D(e){return void 0!==e}function Y(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function V(e){return null==e}function P(e){return!("number"!=typeof e||!m(e))||null==e}function W(){return"✄"}function X(e){return e.lastIndexOf(W())}function N(e){if(V(e))return null;var t=""+e,n=X(t);-1!==n&&(t=t.substring(0,n));return t}function U(e){if(V(e))return null;var t=""+e,n=X(t);return-1!==n?t.substring(n+1):null}function K(e,t){return e.indexOf(t)>-1}var j=Object.values||H;function H(e){return Object.keys(e).map(function(t){return e[t]})}function _(e){return Object.keys(e)}function Q(e){return Object.keys(e).length>0}function J(e){return O(e).reduce(function(e,t){e[N(t)]=!0;return e},{})}function q(e){return O(e).reduce(function(e,t){e.add(N(t));return e},new Set)}function $(e){var t={};e.forEach(function(e){t[e.id]=e});return t}function ee(e){var t={};e.forEach(function(e){t[e]=e});return t}function te(e){return e.map(function(e){return e.id})}function ne(e,t){if(e){n(t,function(t,n){e[n]=t});return e}return t}var re=Number.assign||ie;function ie(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),i=function(e){var n=t[e];null!=n&&Object.keys(n).forEach(function(e){r[e]=n[e]})},o=0;o<t.length;o++)i(o);return r}function oe(e,t){return Math.max(1e-4,Math.sqrt(e*e+t*t))}function ue(e,t){var n=e,r=t,i=oe(n,r);return[n/=i,r/=i]}function se(e,t,n,r){var i=ue(e,t),o=ue(n,r);return i[0]*o[0]+i[1]*o[1]}function fe(){}function le(e,t,n){var r=!e();function i(){r||(r=t())||(r=!e());r?n():v(i,0)}i()}function ce(e,t){var n,r,i;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var u=Date.now();i=o;function s(){r=Date.now();e.apply(void 0,i)}if(!n)if(!r||u-r>=t)s();else{n=v(function(){n=null;s()},t-(u-r))}}}function de(e){void 0===e&&(e=null);var t=e,n=48271,r=2147483647,i=r/n,o=r%n,a=1/r;return{setSeed:function(e){t=e},next:function(){if(t){var e=n*(t%i)-o*(t/i);return(t=e>0?e:e+r)*a}return Math.random()}}}var he,ve={};function ge(e){if(!ve[e]){var t=e;e.match(/'/)&&(t=e.replace(/'/g,"\\'"));t.match(/\s/)&&(t="'"+t+"'");ve[e]=t}return ve[e]}function pe(e,t,n){void 0===n&&(n=function(e){return e});var r=new Map,i=[],o=[];e.forEach(function(e){var t=n(e);t&&r.set(t,{item:e,inDegree:0})});e.forEach(function(e){var i=t(e),o=n(e);i&&i.forEach(function(e){r.has(e)&&e!==o&&r.get(e).inDegree++})});e.forEach(function(e){var t=n(e);t&&0===r.get(t).inDegree&&o.push(e)});for(;o.length>0;){var a=o.shift();i.push(a);var u=t(a);if(u)for(var s=0;s<u.length;s++){var f=r.get(u[s]);f&&1==f.inDegree--&&o.push(f.item)}}if(i.length<r.size)throw new Error("Cycle detected");return i}function me(e){return I(e.pos)&&!V(e.pos.lat)&&!V(e.pos.lng)}function ye(e,t){for(var n=e.split("."),r=t.split("."),i=0;i<n.length&&i<r.length;i++){var o=parseInt(n[i],10),a=parseInt(r[i],10);if(o!==a)return o-a}return n.length!==r.length?n.length-r.length:0}function be(e){return 0===e?0:e<0?-1:1}function xe(e){for(var t=0,n=e.length;t<n;t++){var r=e.charCodeAt(t);if(r>=1536&&(r<=1791||r>=64336&&r<=65023||r>=65136&&r<=65279||r>=1872&&r<=1919||r>=2208&&r<=2303))return!0}return!1}function we(e){return Math.floor(e*(11/14))}function Ae(e){var t=e.charCodeAt(0);return t<=55295||t>=57344?t:1024*(t-55296)+(e.charCodeAt(1)-56320)+65536}function Me(e){return[[169,169],[174,174],[8252,8252],[8265,8265],[8419,8419],[8482,8482],[8505,8505],[8596,8601],[8617,8618],[8986,8987],[9e3,9e3],[9096,9096],[9167,9167],[9193,9203],[9208,9210],[9410,9410],[9642,9643],[9654,9654],[9664,9664],[9723,9726],[9728,9733],[9735,9746],[9748,9861],[9872,9989],[9992,10002],[10004,10004],[10006,10006],[10013,10013],[10017,10017],[10024,10024],[10035,10036],[10052,10052],[10055,10055],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10083,10087],[10133,10135],[10145,10145],[10160,10160],[10175,10175],[10548,10549],[11013,11015],[11035,11036],[11088,11088],[11093,11093],[12336,12336],[12349,12349],[12951,12951],[12953,12953],[65039,65039],[126976,127231],[127245,127247],[127279,127279],[127340,127345],[127358,127359],[127374,127374],[127377,127386],[127405,127487],[127489,127503],[127514,127514],[127535,127535],[127538,127546],[127548,127551],[127561,128317],[128326,128591],[128640,128767],[128884,128895],[128981,129023],[129036,129039],[129096,129103],[129114,129119],[129160,129167],[129198,129279],[129292,129338],[129340,129349],[129351,131069],[917536,917631]].some(function(t){return e>=t[0]&&e<=t[1]})}function Ie(e){return Ee(e).some(function(e){return Me(Ae(e))})}function Ee(e){for(var t,n=0,r=e.length,i=[];n<r;++n){t=!1;var o=e.charCodeAt(n);if(o>=55296&&o<=56319&&n+1<r&&(o=e.charCodeAt(n+1))>=56320&&o<=57343){i.push(e.slice(n,n+2));++n;t=!0}t||i.push(e.charAt(n))}return i}function Ce(e){var t,n,r,i=[],o=e.length;for(t=0;t<o;t++){r=Ae(n=e[t]);if(0===t)i.push(n);else if(s(r))i[i.length-1]+=n;else if(65038===r||65039===r)i[i.length-1]+=n;else if(a(r))i[i.length-1]+=n;else if(u(r)&&2===i[i.length-1].length&&u(Ae(i[i.length-1])))i[i.length-1]+=n;else if(8205===r&&Ie(i[i.length-1])&&t<o-1&&Me(Ae(e[t+1]))){i[i.length-1]+=n;i[i.length-1]+=e[++t]}else r>=917536&&r<=917631?i[i.length-1]+=n:i.push(n)}function a(e){return e>=127995&&e<=127999}function u(e){return e>=127462&&e<=127487}function s(e){return e>=768&&e<=879||e>=8400&&e<=8447}return i}!function(e){e[e.Neutral=0]="Neutral";e[e.Ltr=1]="Ltr";e[e.Rtl=2]="Rtl"}(he||(he={}));var Se,ke={};!function(e){e[e.L=0]="L";e[e.R=1]="R";e[e.EN=2]="EN";e[e.AN=3]="AN";e[e.ON=4]="ON";e[e.B=5]="B";e[e.S=6]="S";e[e.AL=7]="AL";e[e.WS=8]="WS";e[e.CS=9]="CS";e[e.ES=10]="ES";e[e.ET=11]="ET";e[e.NSM=12]="NSM";e[e.LRE=13]="LRE";e[e.RLE=14]="RLE";e[e.PDF=15]="PDF";e[e.LRO=16]="LRO";e[e.RLO=17]="RLO";e[e.BN=18]="BN"}(Se||(Se={}));var Re,Te=Se.L,Le=Se.R,Be=Se.EN,Ge=Se.AN,Ze=Se.ON,Oe=Se.B,Fe=Se.S,ze=Se.AL,De=Se.WS,Ye=Se.CS,Ve=Se.ES,Pe=Se.ET,We=Se.NSM,Xe=Se.LRE,Ne=Se.RLE,Ue=Se.PDF,Ke=Se.LRO,je=Se.RLO,He=Se.BN;!function(e){e[e.D=2]="D";e[e.C=3]="C";e[e.U=4]="U";e[e.T=5]="T"}(Re||(Re={}));var _e=Re.D,Qe=Re.T,Je=[9,He,10,Fe,11,Oe,12,Fe,13,De,14,Oe,28,He,31,Oe,32,Fe,33,De,35,Ze,38,Pe,43,Ze,44,Ve,45,Ye,46,Ve,48,Ye,58,Be,59,Ye,65,Ze,91,Te,97,Ze,123,Te,127,Ze,133,He,134,Oe,160,He,161,Ye,162,Ze,166,Pe,170,Ze,171,Te,173,Ze,174,He,176,Ze,178,Pe,180,Be,181,Ze,182,Te,185,Ze,186,Be,187,Te,192,Ze,215,Te,216,Ze,247,Te,248,Ze,697,Te,699,Ze,706,Te,720,Ze,722,Te,736,Ze,741,Te,750,Ze,751,Te,768,Ze,880,We,884,Te,886,Ze,894,Te,895,Ze,900,Te,902,Ze,903,Te,904,Ze,1014,Te,1015,Ze,1155,Te,1162,We,1418,Te,1423,Ze,1425,Pe,1470,We,1471,Le,1472,We,1473,Le,1475,We,1476,Le,1478,We,1479,Le,1488,We,1536,Le,1542,Ge,1544,Ze,1545,ze,1547,Pe,1548,ze,1549,Ye,1550,ze,1552,Ze,1563,We,1611,ze,1632,We,1642,Ge,1643,Pe,1645,Ge,1648,ze,1649,We,1750,ze,1757,We,1758,Ge,1759,Ze,1765,We,1767,ze,1769,We,1770,Ze,1774,We,1776,ze,1786,Be,1809,ze,1810,We,1840,ze,1869,We,1958,ze,1969,We,1984,ze,2027,Le,2036,We,2038,Le,2042,Ze,2070,Le,2074,We,2075,Le,2084,We,2085,Le,2088,We,2089,Le,2096,We,2137,Le,2142,We,2208,Le,2260,ze,2274,We,2275,Ge,2307,We,2362,Te,2363,We,2364,Te,2365,We,2369,Te,2377,We,2381,Te,2382,We,2385,Te,2392,We,2402,Te,2404,We,2433,Te,2434,We,2492,Te,2493,We,2497,Te,2503,We,2509,Te,2510,We,2530,Te,2534,We,2546,Te,2548,Pe,2555,Te,2561,Pe,2563,We,2620,Te,2622,We,2625,Te,2649,We,2672,Te,2674,We,2677,Te,2691,We,2748,Te,2749,We,2753,Te,2761,We,2765,Te,2768,We,2786,Te,2790,We,2801,Te,2809,Pe,2817,Te,2818,We,2876,Te,2877,We,2879,Te,2880,We,2881,Te,2887,We,2893,Te,2903,We,2914,Te,2918,We,2946,Te,2947,We,3008,Te,3009,We,3021,Te,3024,We,3059,Te,3065,Ze,3066,Pe,3072,Ze,3073,We,3134,Te,3137,We,3142,Te,3160,We,3170,Te,3174,We,3192,Te,3199,Ze,3201,Te,3202,We,3260,Te,3261,We,3276,Te,3285,We,3298,Te,3302,We,3329,Te,3330,We,3393,Te,3398,We,3405,Te,3406,We,3426,Te,3430,We,3530,Te,3535,We,3538,Te,3544,We,3633,Te,3634,We,3636,Te,3647,We,3648,Pe,3655,Te,3663,We,3761,Te,3762,We,3764,Te,3773,We,3784,Te,3792,We,3864,Te,3866,We,3893,Te,3894,We,3895,Te,3896,We,3897,Te,3898,We,3902,Ze,3953,Te,3967,We,3968,Te,3973,We,3974,Te,3976,We,3981,Te,4030,We,4038,Te,4039,We,4141,Te,4145,We,4146,Te,4152,We,4153,Te,4155,We,4157,Te,4159,We,4184,Te,4186,We,4190,Te,4193,We,4209,Te,4213,We,4226,Te,4227,We,4229,Te,4231,We,4237,Te,4238,We,4253,Te,4254,We,4957,Te,4960,We,5008,Te,5024,Ze,5120,Te,5121,Ze,5760,Te,5761,De,5787,Te,5792,Ze,5906,Te,5920,We,5938,Te,5941,We,5970,Te,5984,We,6002,Te,6016,We,6068,Te,6070,We,6071,Te,6078,We,6086,Te,6087,We,6089,Te,6100,We,6107,Te,6108,Pe,6109,Te,6112,We,6128,Te,6155,Ze,6158,We,6160,He,6277,Te,6279,We,6313,Te,6314,We,6432,Te,6435,We,6439,Te,6441,We,6450,Te,6451,We,6457,Te,6464,We,6470,Ze,6622,Te,6656,Ze,6679,Te,6681,We,6683,Te,6686,We,6742,Te,6743,We,6744,Te,6753,We,6754,Te,6755,We,6757,Te,6765,We,6771,Te,6784,We,6832,Te,6916,We,6964,Te,6965,We,6966,Te,6971,We,6972,Te,6973,We,6978,Te,6979,We,7019,Te,7028,We,7040,Te,7042,We,7074,Te,7078,We,7080,Te,7082,We,7083,Te,7086,We,7142,Te,7143,We,7144,Te,7146,We,7149,Te,7150,We,7151,Te,7154,We,7212,Te,7220,We,7222,Te,7227,We,7376,Te,7379,We,7380,Te,7393,We,7394,Te,7401,We,7405,Te,7406,We,7412,Te,7413,We,7416,Te,7424,We,7616,Te,7680,We,8125,Te,8126,Ze,8127,Te,8130,Ze,8141,Te,8144,Ze,8157,Te,8160,Ze,8173,Te,8178,Ze,8189,Te,8192,Ze,8203,De,8206,He,8207,Te,8208,Le,8232,Ze,8233,De,8234,Oe,8235,Xe,8236,Ne,8237,Ue,8238,Ke,8239,je,8240,Ye,8245,Pe,8260,Ze,8261,Ye,8287,Ze,8288,De,8294,He,8298,Ze,8304,He,8305,Be,8308,Te,8314,Be,8316,Ve,8319,Ze,8320,Te,8330,Be,8332,Ve,8336,Ze,8352,Te,8400,Pe,8448,We,8450,Ze,8451,Te,8455,Ze,8456,Te,8458,Ze,8468,Te,8469,Ze,8470,Te,8473,Ze,8478,Te,8484,Ze,8485,Te,8486,Ze,8487,Te,8488,Ze,8489,Te,8490,Ze,8494,Te,8495,Pe,8506,Te,8508,Ze,8512,Te,8517,Ze,8522,Te,8526,Ze,8528,Te,8544,Ze,8585,Te,8722,Ze,8723,Ve,8724,Pe,9014,Ze,9083,Te,9109,Ze,9110,Te,9352,Ze,9372,Be,9450,Te,9900,Ze,9901,Te,10240,Ze,10496,Te,11264,Ze,11493,Te,11499,Ze,11503,Te,11506,We,11513,Te,11520,Ze,11647,Te,11648,We,11744,Te,11776,We,12288,Ze,12289,De,12293,Ze,12296,Te,12321,Ze,12330,Te,12334,We,12336,Te,12337,Ze,12342,Te,12344,Ze,12349,Te,12353,Ze,12441,Te,12443,We,12445,Ze,12448,Te,12449,Ze,12539,Te,12540,Ze,12736,Te,12784,Ze,12829,Te,12832,Ze,12880,Te,12896,Ze,12924,Te,12927,Ze,12977,Te,12992,Ze,13004,Te,13008,Ze,13175,Te,13179,Ze,13278,Te,13280,Ze,13311,Te,13312,Ze,19904,Te,19968,Ze,42128,Te,42192,Ze,42509,Te,42512,Ze,42607,Te,42611,We,42612,Ze,42622,We,42624,Ze,42654,Te,42656,We,42736,Te,42738,We,42752,Te,42786,Ze,42888,Te,42889,Ze,43010,Te,43011,We,43014,Te,43015,We,43019,Te,43020,We,43045,Te,43047,We,43048,Te,43056,Ze,43064,Te,43072,Pe,43124,Te,43136,Ze,43204,Te,43214,We,43232,Te,43250,We,43302,Te,43310,We,43335,Te,43346,We,43392,Te,43395,We,43443,Te,43444,We,43446,Te,43450,We,43452,Te,43453,We,43493,Te,43494,We,43561,Te,43567,We,43569,Te,43571,We,43573,Te,43584,We,43587,Te,43588,We,43596,Te,43597,We,43644,Te,43645,We,43696,Te,43697,We,43698,Te,43701,We,43703,Te,43705,We,43710,Te,43712,We,43713,Te,43714,We,43756,Te,43758,We,43766,Te,43777,We,44005,Te,44006,We,44008,Te,44009,We,44013,Te,44016,We,64285,Te,64286,Le,64287,We,64297,Le,64298,Ve,64336,Le,64830,ze,64848,Ze,65021,ze,65024,Ze,65040,We,65056,Ze,65072,We,65104,Ze,65105,Ye,65106,Ze,65108,Ye,65109,Ze,65110,Ye,65119,Ze,65120,Pe,65122,Ze,65124,Ve,65129,Ze,65131,Pe,65136,Ze,65279,ze,65281,He,65283,Ze,65286,Pe,65291,Ze,65292,Ve,65293,Ye,65294,Ve,65296,Ye,65306,Be,65307,Ye,65313,Ze,65339,Te,65345,Ze,65371,Te,65382,Ze,65504,Te,65506,Pe,65509,Ze,65512,Pe,1114109,Ze],qe={1536:{t:4},1537:{t:4},1538:{t:4},1539:{t:4},1540:{t:4},1541:{t:4},1544:{t:4},1547:{t:4},1568:{t:2},1569:{t:4,isolated:65152},1570:{t:1,isolated:65153,initial:65154},1571:{t:1,isolated:65155,initial:65156},1572:{t:1,isolated:65157,initial:65158},1573:{t:1,isolated:65159,initial:65160},1574:{t:2,isolated:65161,final:65163,median:65164,initial:65162},1575:{t:1,isolated:65165,initial:65166},1576:{t:2,isolated:65167,final:65169,median:65170,initial:65168},1577:{t:1,isolated:65171,initial:65172},1578:{t:2,isolated:65173,final:65175,median:65176,initial:65174},1579:{t:2,isolated:65177,final:65179,median:65180,initial:65178},1580:{t:2,isolated:65181,final:65183,median:65184,initial:65182},1581:{t:2,isolated:65185,final:65187,median:65188,initial:65186},1582:{t:2,isolated:65189,final:65191,median:65192,initial:65190},1583:{t:1,isolated:65193,initial:65194},1584:{t:1,isolated:65195,initial:65196},1585:{t:1,isolated:65197,initial:65198},1586:{t:1,isolated:65199,initial:65200},1587:{t:2,isolated:65201,final:65203,median:65204,initial:65202},1588:{t:2,isolated:65205,final:65207,median:65208,initial:65206},1589:{t:2,isolated:65209,final:65211,median:65212,initial:65210},1590:{t:2,isolated:65213,final:65215,median:65216,initial:65214},1591:{t:2,isolated:65217,final:65219,median:65220,initial:65218},1592:{t:2,isolated:65221,final:65223,median:65224,initial:65222},1593:{t:2,isolated:65225,final:65227,median:65228,initial:65226},1594:{t:2,isolated:65229,final:65231,median:65232,initial:65230},1595:{t:2},1596:{t:2},1597:{t:2},1598:{t:2},1599:{t:2},1600:{t:3,isolated:1600,final:1600,median:1600,initial:1600},1601:{t:2,isolated:65233,final:65235,median:65236,initial:65234},1602:{t:2,isolated:65237,final:65239,median:65240,initial:65238},1603:{t:2,isolated:65241,final:65243,median:65244,initial:65242},1604:{t:2,isolated:65245,final:65247,median:65248,initial:65246},1605:{t:2,isolated:65249,final:65251,median:65252,initial:65250},1606:{t:2,isolated:65253,final:65255,median:65256,initial:65254},1607:{t:2,isolated:65257,final:65259,median:65260,initial:65258},1608:{t:1,isolated:65261,initial:65262},1609:{t:2,isolated:65263,initial:65264},1610:{t:2,isolated:65265,final:65267,median:65268,initial:65266},1646:{t:2},1647:{t:2},1649:{t:1},1650:{t:1},1651:{t:1},1652:{t:4},1653:{t:1},1654:{t:1},1655:{t:1},1656:{t:2},1657:{t:2},1658:{t:2},1659:{t:2},1660:{t:2},1661:{t:2},1662:{t:2,isolated:64342,final:64344,median:64345,initial:64343},1663:{t:2},1664:{t:2},1665:{t:2},1666:{t:2},1667:{t:2},1668:{t:2},1669:{t:2},1670:{t:2,isolated:64378,final:64380,median:64381,initial:64379},1671:{t:2},1672:{t:1},1673:{t:1},1674:{t:1},1675:{t:1},1676:{t:1},1677:{t:1},1678:{t:1},1679:{t:1},1680:{t:1},1681:{t:1},1682:{t:1},1683:{t:1},1684:{t:1},1685:{t:1},1686:{t:1},1687:{t:1},1688:{t:1,isolated:64394,initial:64395},1689:{t:1},1690:{t:2},1691:{t:2},1692:{t:2},1693:{t:2},1694:{t:2},1695:{t:2},1696:{t:2},1697:{t:2},1698:{t:2},1699:{t:2},1700:{t:2},1701:{t:2},1702:{t:2},1703:{t:2},1704:{t:2},1705:{t:2,isolated:64398,final:64400,median:64401,initial:64399},1706:{t:2},1707:{t:2},1708:{t:2},1709:{t:2},1710:{t:2},1711:{t:2,isolated:64402,final:64404,median:64405,initial:64403},1712:{t:2},1713:{t:2},1714:{t:2},1715:{t:2},1716:{t:2},1717:{t:2},1718:{t:2},1719:{t:2},1720:{t:2},1721:{t:2},1722:{t:2},1723:{t:2},1724:{t:2},1725:{t:2},1726:{t:2},1727:{t:2},1728:{t:1},1729:{t:2},1730:{t:2},1731:{t:1},1732:{t:1},1733:{t:1},1734:{t:1},1735:{t:1},1736:{t:1},1737:{t:1},1738:{t:1},1739:{t:1},1740:{t:2,isolated:64508,final:64510,median:64511,initial:64509},1741:{t:1},1742:{t:2},1743:{t:1},1744:{t:2},1745:{t:2},1746:{t:1},1747:{t:1},1749:{t:1},1757:{t:4},1774:{t:1},1775:{t:1},1786:{t:2},1787:{t:2},1788:{t:2},1791:{t:2},1808:{t:1},1810:{t:2},1811:{t:2},1812:{t:2},1813:{t:1},1814:{t:1},1815:{t:1},1816:{t:1},1817:{t:1},1818:{t:2},1819:{t:2},1820:{t:2},1821:{t:2},1822:{t:1},1823:{t:2},1824:{t:2},1825:{t:2},1826:{t:2},1827:{t:2},1828:{t:2},1829:{t:2},1830:{t:2},1831:{t:2},1832:{t:1},1833:{t:2},1834:{t:1},1835:{t:2},1836:{t:1},1837:{t:2},1838:{t:2},1839:{t:1},1869:{t:1},1870:{t:2},1871:{t:2},1872:{t:2},1873:{t:2},1874:{t:2},1875:{t:2},1876:{t:2},1877:{t:2},1878:{t:2},1879:{t:2},1880:{t:2},1881:{t:1},1882:{t:1},1883:{t:1},1884:{t:2},1885:{t:2},1886:{t:2},1887:{t:2},1888:{t:2},1889:{t:2},1890:{t:2},1891:{t:2},1892:{t:2},1893:{t:2},1894:{t:2},1895:{t:2},1896:{t:2},1897:{t:2},1898:{t:2},1899:{t:1},1900:{t:1},1901:{t:2},1902:{t:2},1903:{t:2},1904:{t:2},1905:{t:1},1906:{t:2},1907:{t:1},1908:{t:1},1909:{t:2},1910:{t:2},1911:{t:2},1912:{t:1},1913:{t:1},1914:{t:2},1915:{t:2},1916:{t:2},1917:{t:2},1918:{t:2},1919:{t:2},2208:{t:2},2209:{t:2},2210:{t:2},2211:{t:2},2212:{t:2},2213:{t:2},2214:{t:2},2215:{t:2},2216:{t:2},2217:{t:2},2218:{t:1},2219:{t:1},2220:{t:1},2221:{t:4},2222:{t:1},2223:{t:2},2224:{t:2},2225:{t:1},2226:{t:1},2227:{t:2},2228:{t:2},2230:{t:2},2231:{t:2},2232:{t:2},2233:{t:1},2234:{t:2},2235:{t:2},2236:{t:2},2237:{t:2},2274:{t:4},8204:{t:4},8205:{t:3},8239:{t:4},8294:{t:4},8295:{t:4},8296:{t:4},8297:{t:4},65269:{t:1,isolated:65269,initial:65270},65271:{t:1,isolated:65271,initial:65272},65273:{t:1,isolated:65273,initial:65274},65275:{t:1,isolated:65275,initial:65276}},$e={1611:!0,1612:!0,1613:!0,1614:!0,1615:!0,1616:!0,1617:!0,1618:!0,1619:!0,1620:!0,1621:!0,1648:!0},et={1456:!0,1457:!0,1458:!0,1459:!0,1460:!0,1461:!0,1462:!0,1463:!0,1464:!0,1465:!0,1466:!0,1467:!0,1473:!0,1474:!0},tt={"ل":{"ا":"ﻻ","آ":"ﻵ","أ":"ﻷ","إ":"ﻹ"},"ا":{"ل":{"ل":{"ه":"ﷲ"}}}},nt={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{",">":"<","<":">"},rt=63;function it(e,t){if(ke[t])return ke[t];var n={characters:[],logicalOrder:e,result:[]},r=ot(e),i=ft(e,r),o=i.length;i.forEach(function(e,t){lt(e);st(e);if(0!==e.characters.length){at(e);ut(e);xt(e);wt(e);Et(e);Ct(e);At(e);kt(e,et,!1);St(e);n.result=n.result.concat(e.reorderedCharacters);t<o-1&&n.result.push({text:"\n",level:0,type:Oe,index:0});n.characters=n.characters.concat(e.characters)}});n.types=r;ke[t]=n;return n}function ot(e){return e.map(function(e){return Zt(e)||0})}function at(e){ct(e);dt(e);ht(e);vt(e);gt(e);pt(e);mt(e)}function ut(e){yt(e);bt(e)}function st(e){var t=e.level,n=[];n.push({level:e.level,override:he.Neutral});var r=0,i=n[0],o=i.level,a=[];function u(e,t){if(e<rt){n.push({level:e,override:t});return e}}e.characters.forEach(function(e){var s=e.type;if(s===Ne){o+=Ft(o)?2:1;t=u(o,he.Neutral)}else if(s===Xe){o+=Ot(o)?2:1;t=u(o,he.Neutral)}else if(s===je){o+=Ft(o)?2:1;t=u(o,he.Rtl)}else if(s===Ke){o+=Ot(o)?2:1;t=u(o,he.Ltr)}s===Ue?n.length>1&&(i=n.pop()):i=n[n.length-1];t=i.level;o=t;if(-1===[He,Ne,Xe,je,Ke,Ue].indexOf(s)){i.override>he.Neutral&&(e.type=i.override===he.Rtl?Le:Te);e.embeddingLevel=t;e.index=r++;a.push(e)}});e.characters=a}function ft(e,t){var n=0,r=[],i=[];t.forEach(function(e){if(e!==Oe)i.push(e);else if(i.length>0){o(i);n++;i.length=0}});i.length>0&&o(i);function o(t){var i=n,o=t.map(function(t){return{text:e[n++],level:0,embeddingLevel:void 0,type:t,index:0}}),a=e.slice(i,i+t.length);r.push({symbols:a,level:0,characters:o})}return r}function lt(e){e.level=1}function ct(e){e.characters.filter(zt(We)).forEach(function(t){t.isNSM=!0;if(t.index>0){var n=e.characters[t.index-1].type;n===ze&&(t.type=ze);Le===n&&(t.type=Le)}})}function dt(e){e.characters.filter(zt(Be)).forEach(function(t){for(var n=t.index-1;n>=0;n--){var r=e.characters[n].type;if(r===ze){t.type=Ge;break}if([Le,Te].indexOf(r)>-1)break}})}function ht(e){e.characters.filter(zt(ze)).forEach(function(e){e.type=Le;e.isAL=!0})}function vt(e){e.characters.filter(zt([Ve,Ye])).forEach(function(t){var n=t.index;if(n>0&&n<e.characters.length-1){var r=e.characters[n-1].type;r!==e.characters[n+1].type||r!==Be&&r!==Ge||(t.type=r)}})}function gt(e){e.characters.filter(zt(Pe)).forEach(function(t){var n=t.index,r=n;if(n>0){for(var i=e.characters[n-1].type;r-- >0&&i===Pe;)i=e.characters[r].type;if(i===Be){t.type=Be;return}}if(n<e.characters.length-1){var o=e.characters[n+1].type;r=n;for(;r++<e.characters.length-1&&o===Pe;)o=e.characters[r].type;o===Be&&(t.type=Be)}})}function pt(e){e.characters.filter(zt([Pe,Ye,Ve,Ge])).forEach(function(e){e.type=Ze})}function mt(e){e.characters.filter(zt(Be)).forEach(function(t){for(var n=t.index-1;n>=0;n--){var r=e.characters[n].type;if(r===Le)return;if(r===Te){t.type=Te;return}}})}function yt(e){e.characters.filter(zt([Oe,Fe,De,Ze])).forEach(function(t){var n=t.index;if(e.level<t.embeddingLevel)t.type=Ot(t.embeddingLevel)?Te:Le;else if(0!==n&&n!==e.characters.length-1&&n>0&&n<e.characters.length-1){for(var r=e.characters[n-1].type,i=e.characters[n+1].type,o=n;o-- >0&&-1===[Le,ze,Be,Ge,Te].indexOf(r);)r=e.characters[o].type;o=n;for(;o++<e.characters.length-1&&-1===[Le,ze,Be,Ge,Te].indexOf(i);)i=e.characters[o].type;[Le,ze,Be,Ge].indexOf(r)>-1&&[Le,ze,Be,Ge].indexOf(i)>-1?t.type=Le:t.type=r===Te&&i===Te?Te:Ot(t.embeddingLevel)?Te:Le}})}function bt(e){e.characters.filter(zt([Oe,Fe,De,Ze])).forEach(function(e){e.type=Ot(e.embeddingLevel)?Te:Le})}function xt(e){var t;e.characters.forEach(function(e){var n=e.type;t=e.embeddingLevel;n===Te?Ft(t)&&t++:n===Le||n===ze?Ot(t)&&t++:n!==Be&&n!==Ge||(Ot(t)?t+=2:t++);e.level=t})}function wt(e){e.characters.filter(function(e){return nt[e.text]&&Ft(e.level)}).forEach(function(e){e.text=nt[e.text]})}function At(e){var t=e.highestLevel;e.reorderedCharacters=a(e.characters);for(;t>0;){Mt(e,t);t--}}function Mt(e,t){var n,r=[];e.levelRuns.forEach(function(e){if(e.level>=t)if(n)n.endIndex+=e.length;else{n={startIndex:e.idx,endIndex:e.idx+e.length};r.push(n)}else n=null});r.forEach(function(t){It(e,t)})}function It(e,t){var n=t.startIndex,r=t.endIndex,i=e.reorderedCharacters.slice(n,r).reverse();e.reorderedCharacters=e.reorderedCharacters.slice(0,n).concat(i).concat(e.reorderedCharacters.slice(r))}function Et(e){var t=0;e.characters.forEach(function(e){e.level>t&&(t=e.level)});e.highestLevel=t}function Ct(e){var t=[],n=0,r=0,i={idx:0,length:0,level:e.characters[0].level};e.characters.forEach(function(e){if(e.level!==n&&0!==r){t.push(i);i={idx:r,length:0,level:e.level}}i.length++;r++;n=e.level});t.push(i);e.levelRuns=t}function St(e){kt(e,$e,!0);Tt(e);Bt(e);Gt(e)}function kt(e,t,n){for(var r=e.reorderedCharacters.reverse(),i=[],o=0,a=r.length;o<a;o++){var u=r[o],s=Rt(o,r,t);o+=s.length;n||(u.text+=s.join(""));i.push(u)}var f=0;e.reorderedCharacters=i.reverse();e.reorderedCharacters.forEach(function(e){e.index=f++})}function Rt(e,t,n){for(var r=[],i=e+1;i<t.length;i++){if(!n[t[i].text.charCodeAt(0)])return r;r.push(t[i].text)}return r}function Tt(e){for(var t=e.reorderedCharacters.reverse(),n=[],r=0,i=t.length;r<i;r++){var o=t[r],a=tt[o.text[0]];if(a){var u=Lt(r,a,t);if(u){r+=u.length;o.text=u.text}}n.push(o)}var s=0;e.reorderedCharacters=n.reverse();e.reorderedCharacters.forEach(function(e){e.index=s++})}function Lt(e,t,n){for(var r=0,i=t,o=e+1;o<n.length;o++){var a=i[n[o].text[0]];if(!a)return!1;r++;if("string"==typeof a)return{text:a,length:r};i=a}return!1}function Bt(e){var t,n=function(){e.arabicTextRuns.push(t);t=void 0},r=e.reorderedCharacters;e.arabicTextRuns=[];for(var i=0,o=r.length;i<o;i++){var a=r[i].text.charCodeAt(0),u=qe[a];if(u&&[Le,_e,Te].indexOf(u.t)>-1){t?t.endIndex=i+1:t={startIndex:i,endIndex:i+1};if(i+1<o){var s=r[i+1].text.charCodeAt(0),f=qe[s];f&&f.t===Le&&n()}else n();u.t===Te&&n()}else u&&u.t===Qe||t&&n()}t&&n()}function Gt(e){e.arabicTextRuns.forEach(function(t){for(var n,r=t.startIndex,i=t.endIndex,o=r;o<i;o++){var a=e.reorderedCharacters[o],u=qe[a.text.charCodeAt(0)];n=null;i-r>1?o===r?n=u.initial:o===i-1?n=u.final:o>r&&o<i-1&&(n=u.median):n=u.isolated;n&&(a.text=String.fromCharCode(n)+a.text.substring(1))}})}function Zt(e){for(var t=e.charCodeAt(0),n=0;n<Je.length;n+=2)if(t<Je[n])return Je[n+1];return Ze}function Ot(e){return e%2==0}function Ft(e){return e%2!=0}function zt(e){var t=O(e);return function(e){return t.indexOf(e.type)>-1}}var Dt={},Yt={},Vt="rgb(128, 128, 128)",Pt={aqua:"rgb(0, 255, 255)",black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",fuchsia:"rgb(255, 0, 255)",green:"rgb(0, 128, 0)",grey:Vt,gray:Vt,lime:"rgb(0, 255, 0)",maroon:"rgb(128, 0, 0)",navy:"rgb(0, 0, 128)",olive:"rgb(128, 128, 0)",orange:"rgb(255,165,0)",purple:"rgb(128, 0, 128)",red:"rgb(255, 0, 0)",silver:"rgb(192, 192, 192)",teal:"rgb(0, 128, 128)",yellow:"rgb(255, 255, 0)",white:"rgb(255, 255, 255)",ci:"rgb(0, 174, 239)",cia:"rgba(0, 174, 239, 0.5)",keyline:"rgb(88, 89, 91)",midgrey:"rgb(145, 146, 149)",lightgrey:"rgb(208, 209, 211)",edit:"rgb(114, 179, 0)",attention:"rgb(220, 0, 0)",information:"rgb(0, 150, 255)",description:"rgb(255, 175, 0)",textback:"rgba(255,255,255,0.6)",transparent:"rgba(255,255,255,0.0)",touch:"rgba(255,0,0,0.6)"};function Wt(e,t,n){return"rgb("+e+","+t+","+n+")"}function Xt(e,t,n,r){return"rgba("+e+","+t+","+n+","+r+")"}var Nt=/^(?:rgb)?\(\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?\)$/i,Ut=/^(?:rgba)?\(\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),\s?(0|1|0\.\d{0,20}|1\.0)\)$/i,Kt=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i,jt=/^#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])$/i;function Ht(e){return!!_t(e).length}function _t(e){var t=[];if("string"!=typeof e)return t;var n=Pt[e.toLowerCase()]||e,r=n.match(Nt);r||(r=n.match(Ut));if(r){for(var i=1;i<4;i++)t.push(parseInt(r[i],10));void 0!==r[4]&&t.push(+r[4])}else{if(!(r=n.match(jt))&&(r=n.match(Kt)))for(i=1;i<4;i++)r[i]+=r[i];if(r)for(i=1;i<4;i++)t.push(parseInt(r[i],16))}return t}function Qt(e){if("transparent"===e)return 0;var t=e.match(Ut);return t?parseFloat(t[4]):1}function Jt(e){var t=_t(e),n=nn(t[0],t[1],t[2]);n.push(Qt(e));return n}function qt(e){var t=on(e[0],e[1],e[2]);return Xt(t[0],t[1],t[2],e[3])}function $t(e,t){return 1===t?e:un(e,t)}function en(e){function t(){return Math.floor(239*Math.random())+1}var n=Wt(t(),t(),t());return e&&n in e?en(e):n}function tn(e,t,n){var r=null;e&&(e.bg&&e.gh?r=t*n:e.bg?r=t:e.gh&&(r=n));return 0===r?1e-6:r}function nn(e,t,n){var r,i=e/255,o=t/255,a=n/255,u=Math.max(i,o,a),s=Math.min(i,o,a),f=0,l=(u+s)/2;if(u===s){f=0;r=0}else{var c=u-s;r=l>.5?c/(2-u-s):c/(u+s);switch(u){case i:f=(o-a)/c+(o<a?6:0);break;case o:f=(a-i)/c+2;break;case a:f=(i-o)/c+4}f/=6}return[f,r,l]}function rn(e,t,n){var r=n;r<0&&(r+=1);r>1&&(r-=1);return r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function on(e,t,n){var r,i,o;if(0===t){r=n;i=n;o=n}else{var a=n<.5?n*(1+t):n+t-n*t,u=2*n-a;r=rn(u,a,e+1/3);i=rn(u,a,e);o=rn(u,a,e-1/3)}return[Math.round(255*r),Math.round(255*i),Math.round(255*o)]}function an(e,t){for(var n=["c","fc","bc"],r=0;r<n.length;r++){var i=n[r];if(e[i]){var o=_t(e[i]);e[i]=Xt(o[0],o[1],o[2],t);e["w"+i][3]=255*t}}}function un(e,t){var n=e+t;if(!Dt[n]){var r=_t(e),i=Qt(e);Dt[n]=Xt(r[0],r[1],r[2],i*t)}return Dt[n]}function sn(e){var t=_t(e),n=Qt(e)
;return[t[0],t[1],t[2],Math.floor(255*n)]}function fn(e,t){void 0===t&&(t=!1);if(e){if(t)return sn(e);var n=Yt[e];if(!n){n=sn(e);Yt[e]=n}return n}}function ln(){Dt={};Yt={}}function cn(e,t){var n=_t(e),r=n[0],i=n[1],o=n[2],a=n[3],u=nn(r,i,o),s=u[0],f=u[1],l=u[2],c=on(s,f,Math.min(l*t,1)),d=c[0],h=c[1],v=c[2];return void 0===a?Wt(d,h,v):Xt(d,h,v,a)}function dn(e,t){var n=_t(e),r=n[0],i=n[1],o=n[2],a=n[3];return Xt(r,i,o,Math.min((void 0!==a?a:1)*t,1))}var hn={arc:"A",circle:"C",image:"I",line:"L",rect:"R",roundrect:"RR",text:"T",triangle:"TR"},vn=14,gn=26,pn=Math.PI/2,mn={};var uB=new Date().getTime()/36774;var lr={a:"LTMxLC02NCwtNTgsLTYwLDgsLTY4LC02OSwtNjIsLTU3LC02NywtNzAsNDIsNCw1MCwxOSwtMzcsLTQ2LC00Mw==",b:"LTIyLC01NiwtNTgsLTUsLTEyLC02MywtNjUsLTExLDEsLTY0LC03Myw1MiwyNSw0LDczLC0yLC0xNCw2LDE2LC0yMiwtNDYsLTcxLDM0LDEwLC01NA=="};var yn={};function bn(){yn={}}var xn="sans-serif",wn={browserMinimumFontSize:1,minimumFontChecked:!1};function An(e){wn.browserMinimumFontSize=e}function Mn(e){wn.minimumFontChecked=e}function In(e,t,n,r){var i=!!n,o=ge(r||xn);if(e!==yn.context||t!==yn.fontSize||i!==yn.bold||o!==yn.family){yn.context=e;yn.fontSize=t;yn.bold=i;yn.family=o;var a="normal"+" "+(i?"bold":"normal")+" "+t+"px"+" "+o;e.font=a;e.textBaseline="bottom"}}function En(e,t,n,r,i,o){var a,u,s=t,f=n,l=r,c=i,d=Cn(e);s-=d.x;f-=d.y;l-=d.x;c-=d.y;s=Math.round(s);f=Math.round(f);l=Math.round(l);c=Math.round(c);switch(e.p){case hn.circle:a=Math.abs((l-s)/2);u=Math.abs((c-f)/2);e.x=Math.floor(Math.min(s,l)+a);e.y=Math.floor(Math.min(f,c)+u);e.r=o;break;case hn.line:case hn.rect:case hn.roundrect:e.x1=Math.min(s,l);e.x2=Math.max(s,l);e.y1=Math.min(f,c);e.y2=Math.max(f,c);break;case hn.text:e.x=Math.min(s,l);e.y=Math.max(f,c);break;case hn.image:e.x1=Math.min(s,l);e.y1=Math.min(f,c);e.x2=Math.max(s,l);e.y2=Math.max(f,c);break;case hn.triangle:}}function Cn(e){var t={x:0,y:0},n=e.a;if(n.hiddenByGenerator)return t;if(e.anchorIndex>-1){var r=n.positionIndex[e.anchorIndex];if(r>-1){t.x=n.anchorBuffer.getData()[r];t.y=n.anchorBuffer.getData()[r+1]}}return t}function Sn(e,t){var n=0,r=0,i=0,o=0,a=Cn(t);switch(t.p){case hn.circle:n=t.x-t.r;r=t.x+t.r;i=t.y-t.r;o=t.y+t.r;break;case hn.line:case hn.rect:case hn.roundrect:case hn.image:n=Math.min(t.x1,t.x2);r=Math.max(t.x1,t.x2);i=Math.min(t.y1,t.y2);o=Math.max(t.y1,t.y2);break;case hn.text:var u=_n(e,t.t,t.fs,t.bo,t.ff);n=t.x-(t.xc?u.width/2:0);i=t.y-u.height;r=n+u.width;o=t.y;break;case hn.triangle:n=Math.min(t.x1,t.x2,t.x3);r=Math.max(t.x1,t.x2,t.x3);i=Math.min(t.y1,t.y2,t.y3);o=Math.max(t.y1,t.y2,t.y3);break;case hn.arc:var s=t.x+t.r*Math.cos(t.sa),f=t.y+t.r*Math.sin(t.sa),l=t.x+t.r*Math.cos(t.ea),c=t.y+t.r*Math.sin(t.ea);n=Math.min(s,l);r=Math.max(s,l);i=Math.min(f,c);o=Math.max(f,c);for(var d=(Math.floor(t.sa/pn)+1)*pn;d<t.ea;){var h=t.x+t.r*Math.cos(d),v=t.y+t.r*Math.sin(d);n=Math.min(n,h);r=Math.max(r,h);i=Math.min(i,v);o=Math.max(o,v);d+=pn}}return{x1:n+=a.x,y1:i+=a.y,x2:r+=a.x,y2:o+=a.y}}function kn(e,t){return{x1:Math.min(e.x1,t.x1),y1:Math.min(e.y1,t.y1),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Rn(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2}function Tn(e,t,n,r,i,o){var a=o||0;return Math.sqrt((e-r)*(e-r)+(t-i)*(t-i))+a<n}function Ln(e,t,n,r,i){return e.x1<t&&r<e.x2&&e.y1<n&&i<e.y2}function Bn(e,t,n,r,i,o,a){var u=n*n;return(e-r)*(e-r)+(t-i)*(t-i)<u&&(e-r)*(e-r)+(t-a)*(t-a)<u&&(e-o)*(e-o)+(t-i)*(t-i)<u&&(e-o)*(e-o)+(t-a)*(t-a)<u}function Gn(e,t,n,r,i,o,a){var u=Math.floor((n.x2-n.x1)/2),s=Math.floor((n.y2-n.y1)/2),f=1,l="-resize",c=Math.floor(4*r);Fn(e,t,{x:n.x1,y:n.y1},c,f,i+a+"nw"+l,o);On(e,t,{x:n.x1+u,y:n.y1},c,f,i+a+"n"+l,o);Fn(e,t,{x:n.x2,y:n.y1},c,f,i+a+"ne"+l,o);On(e,t,{x:n.x2,y:n.y1+s},c,f,i+a+"e"+l,o);Fn(e,t,{x:n.x2,y:n.y2},c,f,i+a+"se"+l,o);On(e,t,{x:n.x2-u,y:n.y2},c,f,i+a+"s"+l,o);Fn(e,t,{x:n.x1,y:n.y2},c,f,i+a+"sw"+l,o);On(e,t,{x:n.x1,y:n.y2-s},c,f,i+a+"w"+l,o)}function Zn(e){return"transparent"===e||e===Pt.transparent}function On(e,t,n,r,i,o,a){var u=t.x(n.x),s=t.y(n.y),f=Zn(a)?Pt.transparent:Pt.white;e.rect(u-r,s-r,u+r,s+r,a,i,f,!0,o,-1)}function Fn(e,t,n,r,i,o,a){var u=Zn(a)?Pt.transparent:Pt.white;e.circle(t.x(n.x),t.y(n.y),r+1,a,i,u,!0,o,-1,void 0,!1)}function zn(e,t,n,r,i,o,a,u){Gn(e,n,Sn(t,r),i,o,a,u)}function Dn(e,t,n,r,i,o){var a=$t(t,n);if(o){e.fillStyle=a;e.fillRect(0,0,r,i)}else{var u=e;(u.webgl?u.webglCanvas:e.canvas).style.background=a}}function Yn(e,t,n,r,i,o){if(t)if(o){for(var a=e.createLinearGradient(0,0,0,i),u=0;u<t.length;u++)a.addColorStop(t[u].r,$t(t[u].c,n));e.fillStyle=a;e.fillRect(0,0,r,i)}else{var s=e;Vn(s.webgl?s.webglCanvas:e.canvas,t,n)}}function Vn(e,t,n){for(var r="linear-gradient(",i=0,o=t.length;i<o;i++){var a=t[i];r+=$t(a.c,n);r+=" "+100*a.r+"%";i+1<o&&(r+=",")}r+=")";e.style.background=r}function Pn(e){var t;"string"==typeof e&&(t=e.split(",")[0]);return t}function Wn(e,t){if("number"==typeof e&&T(e))return e;var n=Nn();t?document.getElementById(t).appendChild(n):document.body.appendChild(n);var r=e.replace(/\./g,"");n.className!==r&&(n.className=r);var i=window.getComputedStyle(n,":before").getPropertyValue("content");n.parentNode&&n.parentNode.removeChild(n);n.className="";return i.charCodeAt(1)||i.charCodeAt(0)}var Xn=null;function Nn(){if(Xn)return Xn;var e=document.createElement("span");e.style.position="absolute";e.style.left="-10000px";e.style.top="-10000px";e.style.visibility="hidden";e.style.lineHeight="normal";e.style.fontSize="200px";e.style.fontVariant="normal";e.style.fontStyle="normal";e.style.letterSpacing="0";e.style.width="auto";e.style.height="auto";e.style.display="block";e.style.margin="0";e.style.padding="0";e.style.whiteSpace="nowrap";Xn=e;return e}function Un(e,t,n){e.style.fontFamily=n;e.innerText=t}function Kn(e,t,n){var r=Nn();document.body.appendChild(r);Un(r,e,n);var i=r.offsetHeight;Un(r,"",null);return i/200*t||t}var jn={},Hn={};function _n(e,t,n,r,i,o){var a=i||xn,u=t+!!r+a,s=0,f=0,l=jn[u],c=(b(n)?n:vn)/gn;Hn[a]||(Hn[a]=Kn("|M",gn,a));f=Hn[a];if(void 0===l){In(e,gn,r,i);o&&(f=Kn(t,gn,a));if(e.webgl){xe(t)&&(f=we(gn));s=Jn(e,t,f,gn,r,a)}else s=e.measureText(t).width;l={width:s,height:f};jn[u]=l}return{width:Math.round(l.width*c),height:Math.round(l.height*c)}}function Qn(){jn={};Hn={}}function Jn(e,t,n,r,i,o){var a,u,s=0,f=Ce(Ee(t));if(xe(t)){var l=it(f,t).result;for(a=0,u=l.length;a<u;a++){var c=l[a];xe(c.text)?In(e,n,i,o):In(e,r,i,o);s+=e.measureText(c.text).width}}else for(a=0,u=f.length;a<u;a++)s+=e.measureText(f[a]).width;return s}function qn(e){var t=e.id||"canvas";void 0===mn[t]&&(mn[t]=r(e));return mn[t]}function $n(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}function er(e){var t=/[\d.]+/g;return Math.round(e.match(t).map(Number)[0])}function tr(e,t,n,r){var i=window.devicePixelRatio,o=e.width,a=e.height;if(r){e.style.width="100%";e.style.height="100%";e.style.display="block";var u=window.getComputedStyle(e),s=Math.round(e.clientWidth-o),f=Math.round(e.clientHeight-a);o=er(u.width)-s;a=er(u.height)-f}e.style.width=o+"px";e.style.height=a+"px";e.width=Math.round(o*i);e.height=Math.round(a*i);n||t.scale(i,i);bn()}function nr(e,t,n){var r=Math.max(n-e,0),i=Math.max(1e-4,t-e);return Math.min(1,r/i)}function rr(e,t,n){return e*(1-n)+t*n}function ir(e){return e>.15?rr(.75,1,nr(.15,.2,e)):e>.08?rr(.4,.75,nr(.08,.15,e)):rr(.2,.4,nr(.01,.08,e))}function or(e){var t=null;if(e)if("string"==typeof e){if(!(t=document.getElementById(e)))throw new Error("container element not found with id: "+e)}else{if("object"!=typeof e||!e||void 0===e.parentNode)throw new Error("container must be valid DOM element or element id");t=e}return t}function ar(e,t,n){var r=Date.now(),i=Math.floor(r/1e3),o=0,a=!1,u=l(),s=!0,f=0;return{frameRate:function(){return f},update:function(){var l=Date.now(),d=Math.floor(l/1e3);if(d>i){f=Math.round(o/(d-i));o=0;i=d}else o++;var h=t(l-r);r=l;if(a=a||h){var v=n();if(v){var g=v.canvas;v.webgl&&(g=v.webglCanvas);if(g&&g.clientWidth>0&&g.clientHeight>0){a=!1;if(s){e(!1,u);a||c()}}}}},redraw:function(e){a=!0;var t=e||l();u.all||(u.all=t.all);u.positions||(u.positions=t.positions);u.shadow||(u.shadow=t.shadow);u.textures||(u.textures=t.textures);u.colours||(u.colours=t.colours)},allowDraw:function(e){e&&!s&&(a=!0);s=e}};function l(){return{all:!0,colours:!0,textures:!0,positions:!0,shadow:!0}}function c(){u.all=!1;u.colours=!1;u.textures=!1;u.positions=!1;u.shadow=!1}}function ur(e,t){var n=!0;return{rebuild:t,animate:function(t){var r=e(t,n);n=!1;return r}}}function sr(e){var t=[],n=[];return{push:function(e,r){if(e){e.queue=r;r?n.push(e):t.push(e)}},cancel:function(){t=[];n=[];e()},animate:function(r,i,o){var a=!1,u=!1;if(t.length>0){var s=t;t=[];for(var f=0;f<s.length;f++){var l=s[f].rebuild;if(s[f].animate(r)){u=u||s[f].queue;t.push(s[f])}e(l)}a=!0}if(!u&&n.length>0){t.push(n.shift());a=!0}if(i&&i.animate){i.animate(r);a=!0}o&&(a=a||o.animated());return a}}}function fr(e,t){var n,r,i,o=null;return function(a,u,s){var f=t();if(f===a||o&&r===a);else{n=f;r=a;i=0;if(!o){o=ur(function(e){i=Math.min(u,i+e);t(u<=0?r:n+(r-n)*i/u);var a=i<u;if(!a){o=null;R(s)}return a});e.push(o,!1)}}}}function cr(){var e;function t(e,t){for(var n=e.replace(/^\s*|\s*$/g,"").split(/[(\s*,\s*)|(\s+)]/),r=0;r<n.length;r++)t(n[r])}function n(n,r,i,o){var a=(e=e||{public:{},private:{}})[o];t(n,function(e){a[e]=a[e]||[];a[e].push({handler:r,context:i})})}function r(e,t,r){n(e,t,r,"public")}function i(e,t,r){n(e,t,r,"private")}function o(n,r,i){if(e&&e[i])if(n){var o=e[i];t(n,function(e){if(r){if(o[e]){for(var t=[],n=0;n<o[e].length;n++)r!==o[e][n].handler&&t.push(o[e][n]);o[e]=t}}else o[e]=[]})}else e[i]={}}function a(e,t){o(e,t,"public")}function u(e,t){o(e,t,"private")}function s(e,t){var n=e[0],r=!1;if(t)for(var i=2,o=void 0;i--;){var a=i?n:"all",u=i?e.slice(1):e;if(t[a]){var s=t[a].slice(0);for(o=0;o<s.length;o++){var f=s[o];try{r=f.handler.apply(f.context||this,u)||r}catch(e){g(n,e)}}}}return r}function f(t,n){var r=!1,i=Array.prototype.slice.call(t);if(e){r=s(i,e.private);n&&(r=s(i,e.public)||r)}return r}function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f(e,!0)}function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f(e,!1)}function d(){return v}var h=10,v=[];function g(e,t){var n=(new Date).toString()+" Function bound to '"+e+"' threw error: "+t.toString();l("error",n,t);p(n);v.push(n);v.length>h&&v.shift()}function m(e,t,n,r,i,o){var a=3*t,u=3*(r-t)-a,s=1-a-u,f=3*n,l=3*(i-n)-f,c=1-f-l;function d(e){return((s*e+u)*e+a)*e}function h(e,t){var n=v(e,t);return((c*n+l)*n+f)*n}function v(e,t){var n,r,i,o,f,l;for(i=e,l=0;l<8;l++){o=d(i)-e;if(Math.abs(o)<t)return i;f=(3*s*i+2*u)*i+a;if(Math.abs(f)<1e-6)break;i-=o/f}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){o=d(i);if(Math.abs(o-e)<t)return i;e>o?n=i:r=i;i=(r-n)/2+n}return i}return h(e,1/(200*o))}function y(e){return e<0?0:e>1?1:e}function b(e){return e<0?0:e>1?1:m(e,.25,.01,.25,1,1)}var x=1;function w(e){return Math.atan(x*(e-.5))/(2*Math.atan(.5*x))+.5}return{atanEasing:w,bind:r,cubicEasing:b,getErrors:d,linearEasing:y,privateBind:i,privateTrigger:c,privateUnbind:u,trigger:l,unbind:a}}var dr=[0,0],hr=[];function vr(e){if(dr[0]){dr[0]=0;e.setLineDash(hr);e.lineCap="butt"}}function gr(e){return!!e&&"solid"!==e&&"flow"!==e}function pr(e,t,n,r,i){void 0===i&&(i=!1);var o,a;if("dotted"===r){o=.5;a=2*n}else a=(o=Math.max(2,2*n))/2;var u=Math.round(i?t/(o+a):(t+a)/(o+a));if(u>1&&(a=i?(t-u*o)/u:(t-u*o)/(u-1))>0){e.lineCap=o>1?"butt":"round";dr[0]=o;dr[1]=a;e.setLineDash(dr)}return{dash:o,gap:a}}function mr(e){var t=0,n=0,r=[],i={bg:!1,gh:!1,anchorBuffer:e,dirty:0,positionIndex:[-1,-1,-1],hiddenByGenerator:!1,isHitTested:!0,goToBeginning:function(){n=0},reset:function(){t=0;n=0;i.hiddenByGenerator=!1},getNext:function(){return r[n++]},getPrevious:function(){return n>0?r[n-1]:null},add:function(e){r[t++]=e;i.dirty=t;n++},forEach:function(e){for(var n=0;n<t;n++)e(r[n])},setAnchorPosition:function(n,r,o,a){var u=i.positionIndex[a];if(-1===u){u=e.getUsedSize();i.positionIndex[a]=u;e.add()}var s=e.getData();s[u]=n;s[u+1]=r;s[u+2]=o;i.dirty=t},getAnchorPosition:function(e){var t=i.positionIndex[e],n=i.anchorBuffer.getData();return{x:n[t],y:n[t+1]}},getAnchorAngle:function(e){var t=i.positionIndex[e];return i.anchorBuffer.getData()[t+2]}};return i}function yr(e,t,n,r,i){e[0]=t;e[1]=n;e[2]=0;var o=r.anchorBuffer.getData();if(i>-1){var a=r.positionIndex[i];if(a>-1){var u=o[a+2];if(u){var s=Math.sin(-u),f=Math.cos(-u);e[0]=t*f+n*s;e[1]=n*f-t*s}e[0]+=o[a];e[1]+=o[a+1];e[2]=u}}}function br(e,t,n,r,i,o,a){e[0]=t;e[1]=n;e[2]=r;e[3]=n;e[4]=t;e[5]=i;e[6]=r;e[7]=i;var u=o.anchorBuffer.getData();if(a>-1){var s=o.positionIndex[a];if(s>-1){var f=u[s],l=u[s+1],c=u[s+2];if(c){var d=Math.sin(-c),h=Math.cos(-c),v=t*h+n*d,g=n*h-t*d;e[0]=v;e[1]=g;v=r*h+n*d;g=n*h-r*d;e[2]=v;e[3]=g;v=t*h+i*d;g=i*h-t*d;e[4]=v;e[5]=g;v=r*h+i*d;g=i*h-r*d;e[6]=v;e[7]=g}e[0]+=f;e[1]+=l;e[2]+=f;e[3]+=l;e[4]+=f;e[5]+=l;e[6]+=f;e[7]+=l}}}function xr(e,t,n,r,i,o,a){e[0]=t;e[1]=n;e[2]=r;e[3]=i;e[4]=0;var u=o.anchorBuffer.getData();if(a>-1){var s=o.positionIndex[a];if(s>-1){var f=u[s],l=u[s+1],c=u[s+2];e[0]+=f;e[1]+=l;e[2]+=f;e[3]+=l;e[4]=c}}}var wr=15,Ar=30;function Mr(e,t,n,r){var i=e*wr*t;return(i=be(e)*Math.min(16*n,Math.abs(i)))*(r/1e3)%n}function Ir(e,t,n,r,i,o){var a=Math.max(Ar*i,3*n)/3,u=2*a,s=-(t/2-a+Mr(r,i,u+a,o));e.lineDashOffset=s;e.setLineDash([u,a]);return s}function Er(e,t,n,r){return e+n<0||e-n>r.scale(r.width())||(t+n<0||t-n>r.scale(r.height()))}function Cr(e,t,n,r,i){return e>i.scale(i.width())||n<0||(t>i.scale(i.height())||r<0)}function Sr(e,t,n,r,i,o){var a=i/2;return e+a<0&&n+a<0||(t+a<0&&r+a<0||(e-a>o.scale(o.width())&&n-a>o.scale(o.width())||t-a>o.scale(o.height())&&r-a>o.scale(o.height())))}var kr=new Float32Array(3);function Rr(e,t,n,r,i,o,a,u,s,f){yr(kr,t.x,t.y,t.a,t.anchorIndex);var l,c,d,h,v,g=n.x(kr[0]),p=n.y(kr[1]),m=n.worldToViewDistance(t.r);if(r){l=t.bc&&t.sc;c=void 0;d=n.sw(t.bw);v=0}else{l=t.bc;c=t.bc2;var y=tn(t.a,o,a);if(y){l=un(l,y);c&&(c=un(c,y))}d=n.w(t.bw);h=t.ls;v=t.flowVelocity}var b=u.zoom&&u.zoom.adaptiveStyling;d=Math.max(b?ir(n.getZoomScale()):1,d);u._rendering&&u._rendering.canvasSkipItemsOutOfView&&Er(g,p,m+d,n)||Tr(e,g,p,m,t.sa,t.ea,l,c,d,h,t.off,u,s,f,v)}function Tr(e,t,n,r,i,o,a,u,s,f,l,c,d,h,v){e.lineWidth=s;var g,p=o-i,m=0;if("flow"===f||gr(f)){var y=p*r;if("flow"===f){m=Ir(e,y,s,v*be(l),d,h)}else g=pr(e,y,s,f)}if(u){var b=c.linkStyle.transition,x=void 0,w=void 0;if(l>0){x=a;w=u}else{x=u;w=a}if(0===b){Gr(e,t,n,r,i,o,Br(e,t,n,r,i,o,.5,x,.5,w))}else Lr(e,t,n,r,i,x,o,w,b,g,v,m)}else Gr(e,t,n,r,i,o,a);if("flow"===f){e.lineDashOffset=0;e.setLineDash([])}else f&&vr(e)}function Lr(e,t,n,r,i,o,a,u,s,f,l,c){var d=a-i,h=_t(o);3===h.length&&h.push(1);var v=_t(u);3===v.length&&v.push(1);var g=0;s<1&&(g=d*(1-s)/2);var p=d-2*g,m=g*r,y=0;void 0!==l&&(y+=c);s<1&&Gr(e,t,n,r,i,i+g,o,y);(void 0!==l||f)&&(y+=m);for(var b=Math.ceil(p/(Math.PI/2)),x=(v[0]-h[0])/b,w=(v[1]-h[1])/b,A=(v[2]-h[2])/b,M=(v[3]-h[3])/b,I=h[0],E=h[1],C=h[2],S=h[3],k=1/r,R=Xt(I,E,C,S),T=p/b,L=0;L<b;L++){var B=i+g+L*T-.25*k,G=i+g+(L+1)*T;L===b-1&&(G+=.25*k);I+=x;E+=w;C+=A;S+=M;Gr(e,t,n,r,B,G,Br(e,t,n,r,B,G,0,R,1,R=Xt(Math.floor(I),Math.floor(E),Math.floor(C),S)),y);if(void 0!==l||f){y+=T*r}}s<1&&Gr(e,t,n,r,a-g,a,u,y)}function Br(e,t,n,r,i,o,a,u,s,f){var l=t+r*Math.cos(i),c=t+r*Math.cos(o),d=n+r*Math.sin(i),h=n+r*Math.sin(o),v=e.createLinearGradient(l,d,c,h);v.addColorStop(a,u);v.addColorStop(s,f);return v}function Gr(e,t,n,r,i,o,a,u){e.beginPath();e.strokeStyle=a;u&&(e.lineDashOffset=u);e.arc(t,n,r,i,o,!1);e.stroke();e.closePath();u&&(e.lineDashOffset=0)}function Zr(e,t,n){if(n)return t>=0?Math.max(1,t):-1;var r=4;return t>0?e-t<r?Math.max(.2,t*((e-t)/r)):Math.max(1,t):-1}var Or=2*Math.PI,Fr=new Float32Array(3);function zr(e,t,n,r,i,o,a,u){var s,f=n.worldToViewDistance(t.r);s=r?n.sw(t.bw):n.worldToViewDistance(t.bw);var l=tn(t.a,o,a);yr(Fr,t.x,t.y,t.a,t.anchorIndex);var c=n.x(Fr[0]),d=n.y(Fr[1]);if(!(u._rendering&&u._rendering.canvasSkipItemsOutOfView)||!Er(c,d,f,n)){s=t.noMinBorderWidth?Math.max(1,s):Zr(f,s,r);r?Dr(e,c,d,f,t.bc&&t.sc,s,t.fc&&t.sc,t.fi):Dr(e,c,d,f,l?un(t.bc,l):t.bc,s,l?un(t.fc,l):t.fc,t.fi,t.bs)}}function Dr(e,t,n,r,i,o,a,u,s){void 0===s&&(s=void 0);e.fillStyle=u?a:Pt.transparent;if(o>=0){gr(s)&&pr(e,Or*r,o,s,!0);e.lineWidth=o;e.strokeStyle=i}e.beginPath();e.arc(t,n,r,0,Or,!1);e.closePath();u&&e.fill();if(o>=0){e.stroke();s&&vr(e)}}var Yr=new Float32Array(5);function Vr(e,t,n,r,i,o,a,u,s,f){xr(Yr,t.x1,t.y1,t.x2,t.y2,t.a,t.anchorIndex);var l=n.x(Yr[0]),c=n.y(Yr[1]),d=n.x(Yr[2]),h=n.y(Yr[3]),v=u.zoom&&u.zoom.adaptiveStyling?ir(n.getZoomScale()):1,g=Math.max(v,r?n.sw(t.w):n.w(t.w));if(!(u._rendering&&u._rendering.canvasSkipItemsOutOfView)||!Sr(l,c,d,h,g,n))if(r)Pr(e,l,c,d,h,t.c&&t.sc,null,g,void 0,u,s,0,0);else{var p=tn(t.a,o,a),m=t.c,y=t.c2;if(p){m=un(m,p);y&&(y=un(t.c2,p))}Pr(e,l,c,d,h,m,y,g,t.ls,u,s,f,t.flowVelocity)}}function Pr(e,t,n,r,i,o,a,u,s,f,l,c,d){e.lineWidth=u;if(a){var h=e.createLinearGradient(t,n,r,i),v=f.linkStyle.transition;h.addColorStop((1-v)/2,o);h.addColorStop((1+v)/2,a);e.strokeStyle=h}else e.strokeStyle=o;if("flow"===s||gr(s)){var g=r-t,p=i-n,m=Math.sqrt(g*g+p*p);"flow"===s?Ir(e,m,u,d,l,c):pr(e,m,u,s)}e.beginPath();e.moveTo(t,n);e.lineTo(r,i);e.stroke();e.closePath();if("flow"===s){e.lineDashOffset=0;e.setLineDash([])}else s&&vr(e)}var Wr=new Float32Array(5);function Xr(e,t,n,r,i,o,a,u){var s=r?n.sw(t.bw):n.w(t.bw);yr(Wr,0,0,t.a,t.anchorIndex);var f,l,c,d,h,v,g=t.anchorIndex>-1&&Wr[2],p=u._rendering&&u._rendering.canvasSkipItemsOutOfView;if(g){f=n.worldToViewDistance(t.x1);l=n.worldToViewDistance(t.y1);c=n.worldToViewDistance(t.x2);d=n.worldToViewDistance(t.y2);h=n.x(Wr[0]);v=n.y(Wr[1]);if(p&&Cr(f+h,l+v,c+h,d+v,n))return}else{xr(Wr,t.x1,t.y1,t.x2,t.y2,t.a,t.anchorIndex);f=n.x(Wr[0]);l=n.y(Wr[1]);c=n.x(Wr[2]);d=n.y(Wr[3]);if(p&&Cr(f,l,c,d,n))return}if(s>=0){s=Zr(Math.min(c-f,d-l)/2,s,r)}if(r)Nr(e,f,l,c,d,t.bc&&t.sc,s,t.fc&&t.sc,t.fi,void 0,g,h,v);else{var m=tn(t.a,o,a);Nr(e,f,l,c,d,m?un(t.bc,m):t.bc,s,m?un(t.fc,m):t.fc,t.fi,t.bs,g,h,v)}}function Nr(e,t,n,r,i,o,a,u,s,f,l,c,d){void 0===f&&(f=void 0);var h=t,v=n,g=r,p=i;if(l){e.save();e.translate(c,d);e.rotate(l)}else if(c||d){h+=c;v+=d;g+=c;p+=d}if(s){e.fillStyle=u;e.fillRect(h,v,g-h,p-v)}if(a>=0)if(gr(f)){var m=a/2;Pr(e,h-m,v,g+m,v,o,null,a,f,void 0,0,0,0);Pr(e,g,v-m,g,p+m,o,null,a,f,void 0,0,0,0);Pr(e,g+m,p,h-m,p,o,null,a,f,void 0,0,0,0);Pr(e,h,p+m,h,v-m,o,null,a,f,void 0,0,0,0)}else{e.lineWidth=a;e.strokeStyle=o;e.strokeRect(h,v,g-h,p-v)}l&&e.restore()}var Ur=new Float32Array(5);function Kr(e,t,n,r,i,o,a,u){yr(Ur,0,0,t.a,t.anchorIndex);var s,f,l,c,d,h,v=t.anchorIndex>-1&&Ur[2],g=u._rendering&&u._rendering.canvasSkipItemsOutOfView;if(v){s=n.worldToViewDistance(t.x1);f=n.worldToViewDistance(t.y1);l=n.worldToViewDistance(t.x2);c=n.worldToViewDistance(t.y2);d=n.x(Ur[0]);h=n.y(Ur[1]);if(g&&Cr(s+d,f+h,l+d,c+h,n))return}else{xr(Ur,t.x1,t.y1,t.x2,t.y2,t.a,t.anchorIndex);s=n.x(Ur[0]);f=n.y(Ur[1]);l=n.x(Ur[2]);c=n.y(Ur[3]);if(g&&Cr(s,f,l,c,n))return}if(t.vx){s-=t.vx;f-=t.vx;l+=t.vx;c+=t.vx}if(r)Nr(e,s,f,l,c,t.sc,-1,t.sc,!0,void 0,v,d,h);else{var p=tn(t.a,o,a),m=e.globalAlpha;e.globalAlpha=null===p?1:p;jr(e,"ci"===t.s?i.getCutoutImage(t.u):i.get(t.u),s,f,l,c,t.s,v,d,h);e.globalAlpha=m}}function jr(e,t,n,r,i,o,a,u,s,f){if(t.isLoaded){var l=t.im;a&&t[a]&&(l=t[a]);if(u){e.save();e.translate(s,f);e.rotate(u)}e.imageSmoothingQuality="high";e.drawImage(l,n,r,i-n,o-r);u&&e.restore()}}var Hr=new Float32Array(5);function _r(e,t,n,r,i,o,a,u){yr(Hr,0,0,t.a,t.anchorIndex);var s,f,l,c,d,h,v=t.anchorIndex>-1&&Hr[2],g=u._rendering&&u._rendering.canvasSkipItemsOutOfView;if(v){s=n.worldToViewDistance(t.x1);f=n.worldToViewDistance(t.y1);l=n.worldToViewDistance(t.x2);c=n.worldToViewDistance(t.y2);d=n.x(Hr[0]);h=n.y(Hr[1]);if(g&&Cr(s+d,f+h,l+d,c+h,n))return}else{xr(Hr,t.x1,t.y1,t.x2,t.y2,t.a,t.anchorIndex);s=n.x(Hr[0]);f=n.y(Hr[1]);l=n.x(Hr[2]);c=n.y(Hr[3]);if(g&&Cr(s,f,l,c,n))return}if(r)Qr(e,s,f,l,c,n.worldToViewDistance(t.r),t.bc&&t.sc,n.sw(t.bw),t.fc&&t.sc,t.fi,v,d,h);else{var p=tn(t.a,o,a);Qr(e,s,f,l,c,n.worldToViewDistance(t.r),p?un(t.bc,p):t.bc,n.w(t.bw),p?un(t.fc,p):t.fc,t.fi,v,d,h)}}function Qr(e,t,n,r,i,o,a,u,s,f,l,c,d){var h=t,v=n,g=r,p=i;if(l){e.save();e.translate(c,d);e.rotate(l)}else if(c||d){h+=c;v+=d;g+=c;p+=d}e.beginPath();e.moveTo(h+o,v);e.lineTo(g-o,v);e.arcTo(g,v,g,v+o,o);e.lineTo(g,p-o);e.arcTo(g,p,g-o,p,o);e.lineTo(h+o,p);e.arcTo(h,p,h,p-o,o);e.lineTo(h,v+o);e.arcTo(h,v,h+o,v,o);e.closePath();if(f){e.fillStyle=s;e.fill()}if(u>=0){e.lineWidth=Math.max(1,u);e.strokeStyle=a;e.stroke()}l&&e.restore()}var Jr=new Float32Array(3);function qr(e,t,n,r,i,o,a,u){var s;yr(Jr,0,0,t.a,t.anchorIndex);var f=n.x(Jr[0]),l=n.y(Jr[1]),c=n.worldToViewDistance(t.x1),d=n.worldToViewDistance(t.y1),h=n.worldToViewDistance(t.x2),v=n.worldToViewDistance(t.y2),g=u.linkStyle&&u.linkStyle.inline,p=g&&Jr[2],m=Math.max(Math.abs(c),Math.abs(d),Math.abs(h),Math.abs(v));if(!(u._rendering&&u._rendering.canvasSkipItemsOutOfView)||!Cr(f-m,l-m,f+m,l+m,n))if(r){s=n.worldToViewDistance(t.fs)*t.pf;t.back&&Nr(e,c,d,h,v+s,t.sc,-1,t.sc,!0,void 0,p,f,l)}else{var y=void 0,b=n.worldToViewDistance(t.x),x=n.worldToViewDistance(t.y),w=t.xc,A=n.worldToViewDistance(t.fs);s=A*t.pf;g||(x+=n.worldToViewDistance(t.yOffset));var M=tn(t.a,o,a),I=M?un(t.c,M):t.c,E=1;if(u.zoom&&u.zoom.adaptiveStyling){if(!t.isfi&&A<=5){if(0===(E=Math.max(0,A-3)/2))return;I=un(I,E)}}else if(t.w&&(A<=3||A<wn.browserMinimumFontSize)){var C=n.worldToViewDistance(t.w),S=t.isSel?t.bc:un(t.c,.4);S=M?un(S,M):S;w&&(b-=Math.floor(C/2));t.back&&t.bc!==Pt.textback&&Nr(e,b,x-A,b+C,x+s,y=M?un(t.bc,M):t.bc,-1,y,!0,void 0,p,f,l);Nr(e,b,x-A,b+C,x+s,S,-1,S,!0,void 0,p,f,l);return}t.back&&Nr(e,c,d,h,v+s,y=un(t.bc,M?M*E:E),-1,y,!0,void 0,p,f,l);$r(e,b,x+s/2,t.t,I,A,t.bo,t.ff,w,p,f,l)}}function $r(e,t,n,r,i,o,a,u,s,f,l,c){In(e,o,a,u);e.fillStyle=i;e.textAlign=s?"center":"left";var d=t,h=n;if(f){e.save();e.translate(l,c);e.rotate(f)}else if(l||c){d+=l;h+=c}e.fillText(r,d,h);f&&e.restore()}var ei=1,ti=new Float32Array(3);function ni(e,t,n,r,i,o,a,u){yr(ti,0,0,t.a,t.anchorIndex);var s=n.worldToViewDistance(t.x1),f=n.worldToViewDistance(t.y1),l=n.worldToViewDistance(t.x2),c=n.worldToViewDistance(t.y2),d=n.worldToViewDistance(t.x3),h=n.worldToViewDistance(t.y3),v=n.x(ti[0]),g=n.y(ti[1]),p=t.anchorIndex>-1&&ti[2],m=Math.min(s,Math.min(l,d)),y=Math.min(f,Math.min(c,h)),b=Math.max(s,Math.max(l,d)),x=Math.max(f,Math.max(c,h));if(!(u._rendering&&u._rendering.canvasSkipItemsOutOfView)||!Cr(m+v,y+g,b+v,x+g,n))if(r)ri(e,s,f,l,c,d,h,t.bc&&t.sc,n.sw(t.bw),t.fc&&t.sc,t.fi,p,v,g);else{var w=tn(t.a,o,a);ri(e,s,f,l,c,d,h,w?un(t.bc,w):t.bc,n.w(t.bw),w?un(t.fc,w):t.fc,t.fi,p,v,g)}}function ri(e,t,n,r,i,o,a,u,s,f,l,c,d,h){var v=t,g=n,p=r,m=i,y=o,b=a;if(c){e.save();e.translate(d,h);e.rotate(c)}else if(d||h){v+=d;g+=h;p+=d;m+=h;y+=d;b+=h}if(Math.abs(p-v)>ei||Math.abs(m-g)>ei){e.beginPath();e.moveTo(v,g);e.lineTo(p,m);e.lineTo(y,b);e.lineTo(v,g);e.closePath();if(l){e.fillStyle=f;e.fill()}if(s>=0){e.lineWidth=Math.max(1,s);e.strokeStyle=u;e.stroke()}}c&&e.restore()}function ii(e){return e}var oi={getZoomScale:function(){return 1},height:function(){return 1/0},scale:ii,sw:ii,viewToWorldDistance:ii,w:ii,width:function(){return 1/0},worldToViewDistance:ii,x:ii,y:ii};function ai(e){var t={};Object.keys(e).forEach(function(n){t[hn[n]]=e[n]});return t}var ui,si,fi=ai({arc:Rr,circle:zr,image:Kr,line:Vr,rect:Xr,roundrect:_r,text:qr,triangle:ni});function li(e,t,n,r,i,o,a,u,s,f,l,c){if(!n.a.hiddenByGenerator){var d=void 0;if(a){var h=a.shadowType;d=i?n.sc&&(!h||h>-1):!h||h<1}else d=!i||n.sc;if(d){var v=t&&t[n.p]||fi[n.p];if(v){var g=n.a;v(e,n,r,i,o,g.bg?u:1,g.gh?s:1,f,l,c)}}}}function ci(e){e.save();e.setTransform(1,0,0,1,0,0);e.clearRect(0,0,e.canvas.width,e.canvas.height);e.restore()}function di(e,t,n){e.globalAlpha=n;e.drawImage(t,0,0,t.width,t.height);e.globalAlpha=1}function hi(e,t,n,r,i,o,a,u,s,f,l,c,d,h){var v,g,p,m=n,y=t,b=!1,x="boolean"==typeof d;a&&ci(g=a.getContext("2d"));var w=n?n.settings().zoom:1,A=performance.now();function M(e,r){v=e;s&&e.blatOverview&&!f&&s(t,n);b=e.overview||!1;if(a&&r.bg){var i=!e.bg;if(i&&p){di(t,a,l);ci(g)}p=!1;y=i?t:g}m=e.useView&&n?n:oi}function I(e){if(!u||b){p=!0;var t=!0;x&&!o&&(t=d?m!==oi:m===oi);t&&li(y,h,e,m,o,r,v,l,c,i,w,A)}}e.forEach(I,M,!1,!1)}function vi(e,t,n,r){var i,o,a=en(),u=!0,s=5,f=null,l={webgl:[0,0,0,0],rgb:void 0},c=(i={},o={},{getColour:function(e){if(!e)return l;var t=i[e];if(!t){var n=en(o);t={rgb:n,webgl:fn(n,!0)};i[e]=t;o[n]=e}return t},getId:function(e){return o[e]||null}});function d(i,o,l,h){var v;if(t.webgl)v=r.drawShadowCanvas(Math.floor(i),Math.floor(o));else{if(u){f&&l.drawShadowCanvas(t,n);l.drawShadowCanvas(e,n);u=!1}v=e.getImageData(Math.floor(i),Math.floor(o),1,1).data}var g=Wt(v[0],v[1],v[2]);if(g===a)return null;var p=c.getId(g);if(p)return p;if(r)return null;var m=h||1;return m>s?null:i+m>s&&o+m>s?d(i-1,o-1,l,++m):d(i+1,o+1,l,++m)}function h(){u=!0}function v(e){f=e}function g(){return c}return{dirty:h,debugCanvas:v,getShadowColourMap:g,test:d}}function gi(e,t,n){var r=new Map,i=re({},e,{isStart:!0,isGroup:!0}),o=re({},e,{isStart:!1,isGroup:!0});i.endMarker=o;o.startMarker=i;return{insert:function(e){n.insertBefore(o,e)},getStartMarker:function(){return i},getEndMarker:function(){return o},getValue:function(){return e},getParent:function(){return t},getChildren:function(){return r}}}function pi(e){var t=new Map;function n(n,r){var i=gi(n,r,e);if(r){r.getChildren().set(n.id,i);e.insertBefore(r.getEndMarker(),i.getStartMarker());e.insertAfter(i.getStartMarker(),i.getEndMarker())}else{t.set(n.id,i);e.append(i.getStartMarker());e.append(i.getEndMarker())}return i}function r(e){var n;return e.every(function(e){return!!(n=n?n.getChildren().get(e):t.get(e))})}function i(e){var n,r;if(!e.every(function(e){(n=n?n.getChildren().get(e):t.get(e))&&(r=e);return!!n}))throw new Error("Path not found: "+e+". Last entry: "+r);return n}return{append:n,hasPath:r,get:i}}function mi(){var e=null,t=null;function n(e){f(t,e)}function r(){e=null;t=null}function i(n){var r=n;r._prev?r._prev._next=r._next:e=r._next;r._next?r._next._prev=r._prev:t=r._prev}function o(){return e}function a(){return t}function u(e){return e._next}function s(e){return e._prev}function f(n,r){if(!r||"object"!=typeof r)throw new Error("Object Required");var i=r;i._prev=n||null;if(n){i._next=n._next;n._next=i}else{i._next=e;e=i}i._next?i._next._prev=i:t=i}function l(e,t){e?f(e._prev||null,t):n(t)}function c(t){for(var n=e;n;n=n._next){var r=t(n);r&&(n=r)}}function d(){for(var t=[],n=e;n;n=n._next)t.push(n);return t}return{append:n,clear:r,forEach:c,getFirst:o,getLast:a,getNext:u,getPrevious:s,insertAfter:f,insertBefore:l,remove:i,toArray:d}}!function(e){e[e.None=0]="None";e[e.Line=1]="Line";e[e.Arc=2]="Arc"}(ui||(ui={}));!function(e){e[e.MoveTo=0]="MoveTo";e[e.LineTo=1]="LineTo"}(si||(si={}));function yi(e){return{a:null,arrowhead:ui.None,back:!1,bc:void 0,bc2:void 0,bo:!1,bs:void 0,bw:0,c:void 0,c2:void 0,custom:void 0,id:e,isDonut:!1,ea:0,fc:void 0,ff:void 0,fi:!1,flowVelocity:0,fs:0,hi:!1,isfi:!1,isSel:!1,ls:void 0,noMinBorderWidth:!1,off:0,p:"",pf:0,r:0,anchorIndex:0,s:null,sa:0,sc:"",t:"",u:"",vx:0,w:0,wbc:void 0,wbc2:void 0,wc:void 0,wc2:void 0,wfc:void 0,wsc:void 0,wmargin:0,x:0,x1:0,x2:0,x3:0,xc:!1,y:0,y1:0,y2:0,y3:0,yOffset:0}}function bi(e,t){function n(n,r,i,o,a,u,s,f,l,c,d,h,v){var g=t(l,hn.arc);g.x=n;g.y=r;g.r=i;g.sa=o;g.ea=a;g.bw=f;g.ls=c;g.anchorIndex=-1;if(u!==g.bc){g.bc=u;g.wbc=fn(u)}if(s){if(s!==g.bc2){g.bc2=s;g.wbc2=fn(s)}}else{g.bc2=void 0;g.wbc2=void 0}g.isDonut=!!d;g.anchorIndex=d?0:-1;g.off=h;if(v){g.ls="flow";g.flowVelocity=v.velocity||0}else{g.ls=c;g.flowVelocity=0}e(g)}return n}function xi(e,t){function n(n,r,i,o,a,u,s,f,l,c,d){var h=t(f,hn.circle);h.x=n;h.y=r;h.anchorIndex=l;h.r=i;h.bw=a;h.fi=s;h.bs=c;h.noMinBorderWidth=!!d;if(o!==h.bc){h.bc=o;h.wbc=fn(o)}if(u!==h.fc){h.fc=u;h.wfc=fn(u)}e(h)}return n}function wi(e,t){function n(n,r,i,o,a,u,s,f,l,c){var d=t(u,hn.image);d.x1=n;d.y1=r;d.x2=i;d.y2=o;d.anchorIndex=s;d.u=a;d.s=f;d.vx=l;d.hi=c;e(d)}return n}function Ai(e,t){function n(n,r,i,o,a,u,s,f,l,c){var d=t(f,hn.line);d.x1=n;d.y1=r;d.x2=i;d.y2=o;d.anchorIndex=-1;if(a!==d.c){d.c=a;d.wc=fn(a)}if(u){if(u!==d.c2){d.c2=u;d.wc2=fn(u)}}else{d.c2=void 0;d.wc2=void 0}d.w=s;if(c){d.ls="flow";d.flowVelocity=c.velocity||0}else{d.ls=l;d.flowVelocity=0}e(d)}return n}function Mi(e,t){function n(n,r,i,o,a,u,s,f,l,c,d){var h=t(l,hn.rect);h.x1=n;h.y1=r;h.x2=i;h.y2=o;h.bw=u;h.fi=f;h.bs=d;h.anchorIndex=c;if(a!==h.bc){h.bc=a;h.wbc=fn(a)}if(s!==h.fc){h.fc=s;h.wfc=fn(s)}e(h)}return n}function Ii(e,t){function n(n,r,i,o,a,u,s,f,l,c,d){var h=t(c,hn.roundrect);h.x1=n;h.y1=r;h.x2=i;h.y2=o;h.r=a;h.bw=s;h.fi=l;h.anchorIndex=d;if(u!==h.bc){h.bc=u;h.wbc=fn(u)}if(f!==h.fc){h.fc=f;h.wfc=fn(f)}e(h)}return n}function Ei(e,t){function n(n,r,i,o,a,u,s,f,l,c,d,h,v,g,p,m,y,b,x,w,A){void 0===x&&(x=!1);var M=t(s,hn.text);M.x=n;M.y=r;M.yOffset=0|(A||0);M.t=i;M.anchorIndex=f;M.fs=a;M.bo=u;M.ff=l;M.wmargin=w||0;M.xc=c;M.w=d;M.isfi=h;M.isSel=x;if(o!==M.c){M.c=o;M.wc=fn(o)}M.x1=g;M.y1=p;M.x2=m;M.y2=y;M.back=v;if(v&&b!==M.bc){M.wbc=fn(b);M.bc=b}M.pf=.08;e(M)}return n}function Ci(e,t){function n(n,r,i,o,a,u,s,f,l,c,d,h,v){var g=t(d,hn.triangle);g.x1=n;g.y1=r;g.x2=i;g.y2=o;g.x3=a;g.y3=u;g.anchorIndex=h;g.bw=f;g.fi=c;g.arrowhead=v;if(s!==g.bc){g.bc=s;g.wbc=fn(s)}if(l!==g.fc){g.fc=l;g.wfc=fn(l)}e(g)}return n}var Si=[8,16,32,64,128,256,512,1024,2048,4096],ki=3;function Ri(){var e=8,t=new Float32Array(e*e),n=0;return{getData:function(){return t},add:function(){if(n+ki>t.length){var r=t;e=Ti(n+ki);(t=new Float32Array(e*e)).set(r)}n+=ki},getUsedSize:function(){return n},getTextureSize:function(){return e}}}function Ti(e){for(var t=Math.ceil(Math.sqrt(e)),n=8,r=1,i=Si.length;r<i&&!(t<=n);r++)n=Si[r];return n}function Li(e,t,r){var o,a,u,s,f,l,c,d,h,v,g=e||{},p={isContentLayer:!1,alwaysUpdate:!1},m=z(t,p),y=Object.keys(m),b=!1;try{var LL=new Date()/12636}catch(e){}function x(e,t){var n;if(b)n=d.getNext();else{
n=yi(e);if(d.isHitTested){var r=w(e);n.wsc=r.webgl;n.sc=r.rgb}n.a=d}n.p=t;return n}function w(e){return u.getColour(e)}function A(e,t,n,r){var i=yi(e);i.p="R";var o=w(e);i.wsc=o.webgl;i.sc=o.rgb;if("circle"===r){var a=Math.min(t,n);i.x1=-a;i.y1=-a;i.x2=a;i.y2=a}else{i.x1=-t;i.y1=-n;i.x2=t;i.y2=n}i.a=d;return i}function M(e){return a.hasPath(e)}function I(e){return a.get(e)}function E(e,t){var n="";t&&(n=t.getValue().data.path+".");var r={id:e,data:re({path:n+=e},g[e])};t&&(r.data=z(r.data,t.getValue().data));r.data=z(r.data,m);r.data.bg=r.data.bg&&!r.data.perItemAlpha;return a.append(r,t)}function C(){c=new Map;v=Ri();c.set("_extras",mr(v));o=mi();a=pi(o)}function S(e){if(!b){d.add(e);f.insert(e)}}function k(e){var t=c.get(e);if(t){t.forEach(o.remove);t.reset()}}function R(e,t,n){var r=t[n];if(e[n]!==r){e[n]=r;return!0}return!1}function T(e,t,n,r){var i,a,u,s,f=re({},m),l={};function c(o){if(o.isGroup){if(o.isStart){var c=o;if(r)return t(c.data);if(n&&!c.data.alwaysUpdate)return o.endMarker._prev;for(a=0,u=y.length;a<u;a++){s=y[a];var d=R(f,c.data,s);d&&(l[s]=!0);i=i||d}if(i&&c.data.isContentLayer){t(c.data,l);i=!1;for(a=0,u=y.length;a<u;a++){s=y[a];l[s]=!1}}}}else e(o);return!1}var ae=124909401-LL;if(ae!==Math.abs(ae)){return;}ae=0;o.forEach(c)}function L(){d=c.get("_extras");b=!1}function B(e,t){return D(e).getAnchorPosition(t)}function G(e,t,n,r,i){D(e).setAnchorPosition(t,n,r,i)}function Z(){d.hiddenByGenerator=!0}function O(){L();k("_extras")}function F(e){k(e);c.delete(e)}function D(e){return c.get(e)}function Y(){return v}function V(e,t){d=D(e);b=t;if(d)t?d.goToBeginning():k(e);else{d=mr(v);c.set(e,d)}return d}function P(e){s=e}function W(e){u=e}function X(){return h}function N(e){h=e;l=e?a.get(e):null}function U(e){if(e){if(!(f=l?l.getChildren().get(e)||null:a.get([e])))throw new Error("Layer: "+e+" at "+h+" not found")}else f=null}function K(){return f?f.getValue().id:null}function j(e){var t=x(e.id,e.p);n(e,function(e,n){t[n]=e});S(t)}function H(e){e.sc=void 0;e.wsc=void 0}function _(e,t){var n=c.get(e);if(n){n.isHitTested=t;t||n.forEach(H)}}function Q(){return d?i(d.getPrevious()):null}function J(e,t){var n=null;c.forEach(function(r,i){"_extras"===i||e&&!e.has(i)||r.forEach(function(e){if(!e.a.hiddenByGenerator){var r=Sn(t,e);r&&(n=n?kn(n,r):r)}})});return n}function q(){c&&c.clear();g={};p={};m={};y=[];o.clear();a=pi(o);u=null;f=null;l=null;c=new Map;d=null;h=null;var e=ee;Object.keys(e).forEach(function(t){e[t]=void 0;delete e[t]});ee=void 0}function $(e,t){ci(e);hi(ee,e,t,{},{},!0,null,!1,null,!1,0,0,!1,s||void 0)}C();var ee={arc:bi(S,x),circle:xi(S,x),image:wi(S,x),line:Ai(S,x),rect:Mi(S,x),roundRect:Ii(S,x),text:Ei(S,x),triangle:Ci(S,x),clonePreviousPrimitive:Q,copyPrimitive:j,createDummyShapePrimitive:A,createLayer:E,destroy:q,drawShadowCanvas:$,forEach:T,getAnchorBuffer:Y,getAnchorPosition:B,getItem:D,getLayer:K,getLayerAt:I,getLayerPath:X,hasLayerPathAt:M,itemExtents:J,removeItem:F,resetExtras:O,setAnchorPosition:G,setHiddenByGenerator:Z,setHitTesting:_,setLayer:U,setLayerPath:N,setShadowColourMap:W,setShadowCustomCanvasPrimitives:P,setup:C,startGeneratingForExtras:L,useItem:V};r&&r(S,x);return ee}var Bi=-1,Gi=1,Zi={MAIN:"MAIN",BG:"BG",FG:"FG",COMBOS:"COMBOS",REVEALED:"REVEALED",TRANSIENT:"TRANSIENT",OVERVIEW_IMAGE:"OVERVIEW_IMAGE",COMBO_CONTAINER:"COMBO_CONTAINER",TIMEBAR:"TIMEBAR",BANDS:"BANDS",UNDERLAYS:"UNDERLAYS",SHAPES_SEL_BORDER:"SHAPES_SEL_BORDER",SHAPES:"SHAPES",HALOS:"HALOS",HANDLES:"HANDLES",NODES_SEL_BORDER:"NODES_SEL_BORDER",LINKS:"LINKS",NODES:"NODES",DRAGGERS:"DRAGGERS",BUBBLES:"BUBBLES",NODESSEL:"NODESSEL",BUBBLESSEL:"BUBBLESSEL",BANDLABELS:"BANDLABELS",OVERLAYS:"OVERLAYS",OVERLAYSSHADOW:"OVERLAYSSHADOW",OVERVIEW:"OVERVIEW",OVERVIEWSHADOW:"OVERVIEWSHADOW",WAIT:"WAIT"},Oi={};Oi[Zi.COMBO_CONTAINER]=Zi.NODES_SEL_BORDER;Oi[Zi.NODES]=Zi.NODES_SEL_BORDER;Oi[Zi.SHAPES]=Zi.SHAPES_SEL_BORDER;var Fi={UNDERLAYS:{alwaysUpdate:!0,isContentLayer:!0,useView:!1},BANDLABELS:{alwaysUpdate:!0,isContentLayer:!0,useView:!1},BANDS:{alwaysUpdate:!0,isContentLayer:!0,useView:!1},MAIN:{overview:!0},COMBOS:{perItemAlpha:!0,overview:!0},COMBO_CONTAINER:{isContentLayer:!0,overview:!0},REVEALED:{},OVERLAYS:{shadowType:Bi,useView:!1,alwaysUpdate:!0,isContentLayer:!0},HANDLES:{useView:!1,alwaysUpdate:!0,isContentLayer:!0},OVERLAYSSHADOW:{shadowType:Gi,useView:!1,alwaysUpdate:!0,isContentLayer:!0},OVERVIEWSHADOW:{shadowType:Gi,useView:!1,alwaysUpdate:!0,isContentLayer:!0},WAIT:{useView:!1,alwaysUpdate:!0,isContentLayer:!0},OVERVIEW:{shadowType:Bi,useView:!1,alwaysUpdate:!0,isContentLayer:!0},OVERVIEW_IMAGE:{shadowType:Bi,blatOverview:!0,useView:!1,alwaysUpdate:!0,isContentLayer:!0},DRAGGERS:{alwaysUpdate:!0,isContentLayer:!0},BG:{bg:!0,overview:!1},FG:{bg:!1,overview:!0},SHAPES_SEL_BORDER:{isContentLayer:!0},NODES_SEL_BORDER:{isContentLayer:!0},LINKS:{isContentLayer:!0,newDrawCall:!0},SHAPES:{isContentLayer:!0},NODES:{isContentLayer:!0},HALOS:{isContentLayer:!0},BUBBLES:{isContentLayer:!0}},zi=[Zi.SHAPES_SEL_BORDER,Zi.SHAPES,Zi.HALOS,Zi.NODES_SEL_BORDER,Zi.LINKS,Zi.NODES,Zi.BUBBLES],Di={shadowType:0,bg:!1,blatOverview:!1,useView:!0,alwaysUpdate:!1,isContentLayer:!1,overview:!1,newDrawCall:!1,perItemAlpha:!1};function Yi(e){var t=Fi;e&&(t=re({},t,e));var n=Li(t,Di),r="COMBO_";function i(e){return r+e}function o(e){return 0===e.indexOf(r)}function a(e){var t,r=[],i=null;e.forEach(function(e){r.push(e);var a=r;o(e)&&(a=a.concat([Zi.FG]));if(n.hasLayerPathAt(a))t=n.getLayerAt(r);else{t=n.createLayer(e,i);n.createLayer(Zi.COMBO_CONTAINER,t);u(t)}i=t})}function u(e){var t=n.createLayer(Zi.BG,e);zi.forEach(function(e){return n.createLayer(e,t)});var r=n.createLayer(Zi.FG,e);zi.forEach(function(e){return n.createLayer(e,r)})}function s(){n.setup();n.createLayer(Zi.BANDS,null);n.createLayer(Zi.UNDERLAYS,null);u(n.createLayer(Zi.MAIN,null));n.createLayer(Zi.COMBOS,null);var e=n.createLayer(Zi.TRANSIENT,null);u(n.createLayer(Zi.MAIN,e));n.createLayer(Zi.COMBOS,e);var t=n.createLayer(Zi.REVEALED,null);u(n.createLayer(Zi.MAIN,t));n.createLayer(Zi.COMBOS,t);[Zi.DRAGGERS,Zi.HANDLES,Zi.BANDLABELS,Zi.OVERLAYS,Zi.OVERVIEW_IMAGE,Zi.OVERVIEW,Zi.OVERLAYSSHADOW,Zi.OVERVIEWSHADOW,Zi.WAIT].forEach(function(e){n.createLayer(e,null)})}function f(e,t,r){var i=n.useItem(e.id,t);i.hiddenByGenerator=!1;i.gh=!!e.gh;i.bg=r&&!!e.bg}function l(e){n.setShadowColourMap(e);s()}function c(){n.destroy();n=null}function d(e,t,r){n.setAnchorPosition(e.id,t,r,0,0);e._sx=t;e._sy=r}s();return $n({},n,{createComboSegment:i,createItemLayersAt:a,destroy:c,hasPath:n.hasLayerPathAt,removeAllItems:s,setNodeAnchorPosition:d,setShadowColourMap:l,startGeneratingFor:f})}var Vi=8,Pi="_combo_",Wi="_combolink_",Xi={small:6,normal:10,large:20,xlarge:30};function Ni(e,t,n,r){return t*(1.7*e+n*(b(Xi[r])?Xi[r]:Xi.normal))}var Ui=Math.PI/7,Ki=Math.cos(Ui);function ji(e,t,n,r){return Ki*Ni(e,t,n,r)}function Hi(e,t,n,r,i,o,a,u,s,f,l){var c=Ni(r,i,f,l.arrows),d=o+Math.PI;e.triangle(t+c*Math.cos(d+Ui),n+c*Math.sin(d+Ui),t+c*Math.cos(d-Ui),n+c*Math.sin(d-Ui),t,n,a,-1,a,!0,u,-1,s)}function _i(e){return Math.abs(e)<1e-5}function Qi(e){return e&&e.length>0&&Array.isArray(e)}function Ji(e){return Qi(e.g)}function qi(e){return isFinite(e.w)&&isFinite(e.h)||e._combo&&e._combo.open}function $i(e){return e._combo&&e._combo.open}function eo(){return new Float32Array(6)}function to(e,t,n,r){if(t){e[4]=t.dx/100*n;e[5]=t.dy/100*r;var i=t.e*n,o=t.e*r;e[0]=-i+e[4];e[1]=-o+e[5];e[2]=i+e[4];e[3]=o+e[5]}else{e[0]=-n;e[1]=-r;e[2]=n;e[3]=r;e[4]=0;e[5]=0}}function no(e,t){return e.oc&&(void 0===e.oc.bw?t.defaultOpenComboStyle.bw:e.oc.bw)||0}function ro(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}function io(e){return!!Qi(e.g)||(!(!e.t1||!Qi(e.t1.g))||!(!e.t2||!Qi(e.t2.g)))}var oo=34,ao=9,uo=2;function so(e){return"b"in e?e.b:Pt.keyline}function fo(e){var t=ao;so(e)&&(t+=uo/2);e.e&&(t*=e.e);return t}var lo=3,co=1;function ho(e){return fo(e)+lo}function vo(e,t){return fo(e)+co+fo(t)}function go(e,t){return ro(e,t,0,0)}var po=eo();function mo(e,t,n,r,i,o,a,u,s,f,l){e.rect(o-u,a-u,o+u,a+u,Pt.transparent,-1,Pt.transparent,!0,r,i,void 0);var c=2*u,d=_n(n,s,c,!1,l||t.fontFamily,!0),h=go(d.width,d.height),v=c-(h-c)/2;h=go((d=_n(n,s,v,!1,l||t.fontFamily,!0)).width,d.height);var g=t.imageAlignment[s];to(po,g,u,u);var p=g?g.e:1,m=u*(5/6)*p,y=o-m+po[4],b=a-m+po[5],x=o+m+po[4],w=a+m+po[5],A=o+po[4],M=a+v*p/2+po[5];e.text(A,M,s,f,v*p,!1,r,i,l,!0,h,!0,!1,y,b,x,w)}var yo=W(),bo=.01,xo=Math.PI/2;function wo(e){var t=e;(t>xo+bo||t<-xo+bo)&&(t+=Math.PI);return t}function Ao(e,t,n,r,i,o,a,u,s,f,l,c,d,h,v,g,p,m,y,b,x,w,A){var M=!0,I=v,E=p;0===n.length&&(M=!1);for(var C=o+yo+(y||"t");c&&I>h;)I=_n(e,n,E*=.85,f,m).width;var S,k=4*x*b,R=r-I/2,T={x1:R-k,y1:(S=d?i+(b||1)+E/2:i+(1+E)/2)-E,x2:R+I+k,y2:S};if(M){var L=d?w.labelOffset:0;t.text(r,S,n,u,E,f,C,A,m,!0,I,!1,a,T.x1,T.y1,T.x2,T.y2,s,g,k,L)}l&&Mo(l,T,E,M,w);return M}function Mo(e,t,n,r,i){if(e._edit){e._edit.hib=!1;var o=e._edit;o.x1=Math.min(o.x1,t.x1);o.x2=Math.max(o.x2,t.x2);o.y1=Math.min(o.y1,t.y1);o.y2=Math.max(o.y2,t.y2)}else e._edit={fs:n,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,hib:!1};var a=e;i.avoidLabels&&r&&a._cl&&a._cl.push(t)}var Io=[12,9,7,7],Eo=eo();function Co(e,t,n,r){e._cl.push({cx:t,cy:n,r:r})}function So(e,t,n,r,i){e._cl.push({x1:t,x2:r,y1:n,y2:i})}function ko(e,t,n,r,i,o,a,u,s,f,l,c,d){var h=r,v=i,g=o,p=0;if(a&&!(u&&u._combo&&u._combo.open)){a.e&&(g*=a.e);var m=a.a?l.easingValue:1,y=ao*g*m,x=so(a),w=x?uo*g:-1,A=!!(a.u||a.fi&&a.fi.t),M=void 0,I=0,E=0,C=1;p=y+(x?w/2:0);var S=u&&!b(a.r);if(a.c)if(a.t){var k=!Y(a,"fb")||a.fb,R=a.fc||Pt.white,T=a.ff||c.fontFamily,L=void 0,B=void 0,G=void 0,Z=void 0;if(a.w&&f){L=g*Io[1]*m;B=_n(t,G=(""+a.t).substring(0,25),L,k,T).width;var O=(Z=Math.max(B,y))+y,F=void 0,z=void 0;switch(s){case"left":F=(z=h+y)-O;h=z-O/2;break;case"centre":F=h-O/2;z=h+O/2;break;default:z=(F=h-y)+O;h=F+O/2}var D=v-y,V=v+y;e.roundRect(F,D,z,V,y,x,w,a.c,!0,n,d);if(S){Co(u,F+y,v,p);Co(u,z-y,v,p);So(u,F+y,D-w/2,z-y,V+w/2)}}else{e.circle(h,v,y,x,w,a.c,!0,n,d,void 0,!1);B=_n(t,G=(""+a.t).substring(0,4),L=g*Io[G.length-1]*m,k,T).width;Z=1.7*y;S&&Co(u,h,v,p)}Ao(t,e,G,h,v,n,!1,R,Pt.white,k||!1,null,!0,!1,Z,B,!1,L,T,null,1,l.unzoom,c,d)}else{e.circle(h,v,y,x,w,a.c,!0,n,d,void 0,!1);S&&Co(u,h,v,p);if(A){var P=y/1.41421;if(a.u){M=c.imageAlignment[a.u];to(Eo,M,P,P);e.image(h+Eo[0],v+Eo[1],h+Eo[2],v+Eo[3],a.u,n,d,null,0,!1)}else mo(e,c,t,n,d,h,v,P,a.fi.t,a.fi.c||Pt.black,a.fi.ff||c.iconFontFamily)}}else if(A){S&&Co(u,h,v,y);if(a.u){if(M=c.imageAlignment[a.u]){I=M.dx/100*y;E=M.dy/100*y;C=M.e}e.image(h-y*C+I,v-y*C+E,h+y*C+I,v+y*C+E,a.u,n,d,null,0,!1)}else mo(e,c,t,n,d,h,v,y,a.fi.t,a.fi.c||Pt.black,a.fi.ff||c.iconFontFamily)}a.a&&l.stillDirty.set(N(n),2)}return p}function Ro(e,t){return!(!t||t!==e)}function To(e){return"node"!==e.type&&"link"!==e.type}function Lo(e,t,n,r,i){return!!n&&!To(e)&&i.unicodeAwareLength(t)>n&&!Ro(e.id,r)}function Bo(e,t,n,r,i){var o=t;""===o||o||(o=e.t||"");if(o){Lo(e,o,n,r,i)&&(o=i.unicodeAwareTruncate(o,n-3)+"...");return o.split(/\r\n|\r|\n/)}return[""]}function Go(e,t,n,r,i,o){for(var a=[],u=0;u<e.length;u++)a[u]=_n(t,e[u],n,r,i||o).width;return a}var Zo=W();function Oo(e){for(var t=0,n=0;n<e.length;n++)t=Math.max(t,e[n]);return t}function Fo(e,t,n,r,i,o,a,u,s,f,l,c,d){var h=i*u.unzoom;if(o.t){var v=0,g=0,p=e.getLayer();a||e.setLayer(Zi.BUBBLES);var m=o.p?""+o.p:"ne",y="w"===m.substring(1,2),b="s"===m.substring(0,1),x=n+Zo+"bu",w=+(o.fs?o.fs:c)*h,A=o.b?o.b:Pt.keyline,M=o.c?o.c:Pt.white,I=o.fc?o.fc:Pt.black,E=Bo(o,null,s.truncateLabel,f.showFullLabel||null,l),C=w+3*h,S=C*E.length,k=Go(E,t,w,!!o.fb,o.ff,s.fontFamily),R=Oo(k),T=13*h,L=6*h,B=2*i,G=9*h,Z=13*h,O=10*h,F=r+Z,z=S+2*L,D=2*h,Y=Math.max(D/2,1),V=3*h;o.g&&delete o.g.e;var P=o.g?17*h:0;y&&(v-=R+2*B+2*T+P);b&&(g+=(w+3)*E.length+2*F+2*L);var W=v+B+.5,X=v+B+2*T+R+P+.5,N=g-F-z+.5,U=g-F+.5;e.roundRect(W,N,X,U,8*h,A,D,M,!0,x,d);ko(e,t,x,v+P,(N+U)/2,h,o.g,null,null,!1,u,s,d);var K=N-.5+L+C,j=W+T+P-.5,H=void 0;for(H=0;H<E.length;H++){var _=k[H];e.text(j,K,E[H],I,w,!!o.fb,x,d,o.ff||s.fontFamily,!1,_,!1,!1,j-1.5,K-w,X,U);K+=C}if(y){W=X;G=-G;O=-O;Y=-Y}if(b){U=N;Z=-Z;V=-V}e.triangle(W+G,U,W+G+O,U,W+G,U+Z,A,D,M,!0,x,d,ui.None);e.triangle(W+G+Y,U-V,W+G+O+Y,U-V,W+G+Y,U+Z-V,A,-1,M,!0,x,d,ui.None);e.setLayer(p)}}var zo=W(),Do=9007199254740;function Yo(e,t,n,r,i,o,a,u,s,f,l,c,d,h){e.setHiddenByGenerator();f?e.arc(0,0,0,0,0,a,u,s,t,l,!1,c,d):e.line(0,0,0,0,a,u,s,t,l,d);var v=f?ui.Arc:ui.Line;n&&e.triangle(0,0,0,0,0,0,a,-1,a,!0,t+zo+"a1",-1,v);r&&e.triangle(0,0,0,0,0,0,u||a,-1,u||a,!0,t+zo+"a2",-1,v);if(h){h.pos.t.lx=(i._sx+o._sx)/2;h.pos.t.ly=(i._sy+o._sy)/2}e.setAnchorPosition(t,Do,Do,0,0);e.setAnchorPosition(t,Do,Do,0,1);e.setAnchorPosition(t,Do,Do,0,2)}function Vo(e){return!!e.r}function Po(e,t,n,r,i,o,a){var u=o-r,s=a-i;return{x:(u*n-s*t)/e,y:(u*t+s*n)/e}}function Wo(e,t,n,r,i,o,a,u,s,f){var l=Po(t,n,r,i,o,a,u),c=Po(t,n,r,i,o,s,f);if(l.y>e&&c.y>e||l.y<-e&&c.y<-e)return-1/0;if(_i(c.y-l.y))return Math.max(l.x,c.x);var d,h,v=l.y>c.y?l:c,g=l.y>c.y?c:l;return(d=e<v.y?v.x-(v.y-e)*(v.x-g.x)/(v.y-g.y):v.x)>(h=g.y<-e?g.x-(g.y- -e)*(g.x-v.x)/(g.y-v.y):g.x)?d:h}function Xo(e,t,n,r,i,o,a){var u=i.x1+o,s=i.y1+a,f=i.x2+o,l=i.y2+a,c=e/t/2;return Math.max(Wo(c,t,n,r,o,a,u,s,f,s),Wo(c,t,n,r,o,a,f,s,f,l),Wo(c,t,n,r,o,a,f,l,u,l),Wo(c,t,n,r,o,a,u,l,u,s))}function No(e,t,n,r){var i=-1/0,o=r.cx,a=r.cy,u=e*e,s=-2*e*(o*n-a*t),f=s*s-4*u*(o*o+a*a-r.r*r.r);f>=0&&(i=(-s+Math.sqrt(f))/(2*u));return i}function Uo(e,t,n,r,i,o){for(var a,u=-1/0,s=Math.sin(-n),f=Math.cos(-n),l=0;l<r.length;l++){var c=r[l];a=Vo(c)?No(t,s,f,c):Xo(e,t,s,f,c,i,o);u=Math.max(u,a)}return u}function Ko(e,t,n,r,i,o,a){var u=0;r&&(u=r/t);i&&(u=Math.max(u,Uo(e,t,n,i,o,a)));return u}function jo(e,t,n){var r,i,o=qi(e);if(t&&n.selectedNode){r=n.selectedNode.b||e.b;i=n.selectedNode.c||e.c}else{r=e.b;i=e.c}return!(!r&&!i||o)}var Ho={t:.5,t1:.15,t2:.85},_o=W();function Qo(e,t,n,r,i,o,a,u,s,f,l,c,d,h){var v={},g=n-e,p=r-t,m=Math.sqrt(g*g+p*p);if(_i(m))v.skip=!0;else{var y=Math.atan2(p,g),b=Ko(h.tight&&s?0:i,m,y,a._c,a._cl,e,t),x=Ko(h.tight&&f?0:i,m,y+Math.PI,u._c,u._cl,n,r),w=l||0,A=c||0,M=1-((b=Math.max(w,b))+(x=Math.max(A,x))),I=0;if(s||f){I=ji(i,o,d.unzoom,h.arrows)/m;s&&f&&(I*=1.5)}v.skip=M<Math.max(Math.min(6/m,.1),I);if(!v.skip){v.cx1=e+b*g;v.cy1=t+b*p;v.cx2=n+x*-g;v.cy2=r+x*-p}}return v}function Jo(e,t,n,r,i,o){var a=e,u=t,s=Math.ceil(o/8),f=ro(a,u,n,r);return{x:a+=(a-n)/f*(s-i),y:u+=(u-r)/f*(s-i)}}function qo(e,t,r,i,o,a,u,s,f,l,c,d,h,v,g,p,m,y){var b=Qo(u._sx,u._sy,s._sx,s._sy,c,d,u,s,t,r,i,o,m,y);if(b.skip){Yo(e,a,t,r,u,s,f,l,c,!1,h,0,g,p);return!1}var x,w=b.cx1,A=b.cy1,M=b.cx2,I=b.cy2,E=M-w,C=I-A,S=0,k=0,R=0,T=0,L=0,B=0,G=.25,Z=0;(t||r)&&(Z=ji(c,d,m.unzoom,y.arrows));var O,F=0,z=0,D=0,Y=!1,V=!1,P=!1,W=!1,X=!1;if(y.tight){if(!t){V=jo(u,v,y);W=$i(u);Y=V||W}if(!r){P=jo(s,v,y);X=$i(s);Y=Y||P||X}if(Y){var N=Math.max(.001,C*C+E*E),U=Math.sqrt(N);F=E/U;z=C/U;D=G*c}}if(t){S=Math.atan2(C,E);R=w;T=A;x=Jo(w,A,M,I,Z,c);w=x.x;A=x.y}else if(y.tight&&V){w-=D*F;A-=D*z}else if(y.tight&&W){O=no(u,y);w-=F*O;A-=z*O}if(r){k=Math.atan2(C,E);L=M;B=I;x=Jo(M,I,w,A,Z,c);M=x.x;I=x.y}else if(y.tight&&P){M+=D*F;I+=D*z}else if(y.tight&&X){O=no(s,y);M+=F*O;I+=z*O}e.line(w,A,M,I,f,l,c,a,h,g);t&&Hi(e,R,T,c,d,S+Math.PI,f,a+_o+"a1",ui.Line,m.unzoom,y);r&&Hi(e,L,B,c,d,k,l||f,a+_o+"a2",ui.Line,m.unzoom,y);if(p){var K=0,j=0;y.labelAlongLink&&(j=wo(j=+Math.atan2(s.y-u.y,s.x-u.x).toFixed(14)));n(p.pos,function(t,n){if("t"===n||p.present[n]){var r=Ho[n];t.lx=w+r*(M-w);t.ly=A+r*(I-A);if(y.glyphsAlongLink){var i=s._sx-u._sx,o=s._sy-u._sy;if(0===i&&0===o){i=1;o=-1}var f=oe(i,o);t.tdx=i/f;t.tdy=o/f;t.tangent=Math.atan2(o,i);t.R=0}e.setAnchorPosition(a,t.lx,t.ly,j,K)}K++})}return!0}function $o(e,t,n,r,i,o){var a=r-t;if(Math.abs(a)>n)return[];var u=Math.max(i,o),s=Math.min(i,o);if(u<e-n||e+n<s)return[];var f=Math.asin(a/n),l=n*Math.cos(f),c=[];s<=e-l&&e-l<=u&&c.push(a>0?Math.PI-f:-Math.PI-f);s<=e+l&&e+l<=u&&c.push(f);return c}function ea(e,t,n,r,i,o){var a=r-e;if(Math.abs(a)>n)return[];var u=Math.max(i,o),s=Math.min(i,o);if(u<t-n||t+n<s)return[];var f=Math.acos(a/n),l=n*Math.sin(f),c=[];s<=t-l&&t-l<=u&&c.push(-f);s<=t+l&&t+l<=u&&c.push(f);return c}function ta(e,t,n,r,i,o){var a=$o(e,t,n,r.y2+o,r.x1+i,r.x2+i),u=$o(e,t,n,r.y1+o,r.x1+i,r.x2+i),s=ea(e,t,n,r.x1+i,r.y1+o,r.y2+o),f=ea(e,t,n,r.x2+i,r.y1+o,r.y2+o);return a.concat(u,f,s)}function na(e,t,n,r,i,o){var a=r-e,u=i-t,s=Math.sqrt(a*a+u*u);if(s>n+o||s<Math.abs(n-o)||0===s)return[];var f=n*n,l=(f-o*o+s*s)/(2*s),c=Math.sqrt(f-l*l),d=e+l*a/s,h=t+l*u/s,v=c*(a/s),g=c*(u/s),p=d+g,m=d-g,y=h-v,b=h+v;return[Math.atan2(y-t,p-e),Math.atan2(b-t,m-e)]}function ra(e,t,n,r,i){for(var o=Math.PI,a=e,u=0;u<t.length;u++){t[u]+2*Math.PI<r&&(t[u]+=2*Math.PI);n<t[u]&&t[u]<r&&(i?t[u]-a<o&&(a=Math.max(a,t[u])):a-t[u]<o&&(a=Math.min(a,t[u])))}return a}function ia(e,t,n,r,i,o,a){var u=a?r:i,s=o._sx,f=o._sy;o._c&&(u=ra(u,na(e,t,n,s,f,o._c),r,i,a));if(o._cl)for(var l=0;l<o._cl.length;l++){var c=o._cl[l];u=ra(u,Vo(c)?na(e,t,n,s+c.cx,f+c.cy,c.r):ta(e,t,n,c,s,f),r,i,a)}return u}function oa(e,t,n,r,i,o,a,u){var s=4,f=e+n*Math.cos(r),l=t+n*Math.sin(r),c=e+n*Math.cos(i),d=t+n*Math.sin(i);if(Vo(u)){var h=o+u.cx,v=a+u.cy,g=ro(f,l,h,v),p=ro(c,d,h,v);if(g<=u.r+s&&p<=u.r+s)return!0}else{var m=o+u.x1-s,y=o+u.x2+s,b=a+u.y1-s,x=a+u.y2+s;if(m<=f&&f<=y&&b<=l&&l<=x&&(m<=c&&c<=y&&b<=d&&d<=x))return!0}return!1}function aa(e,t,n,r,i,o){var a=o.x,u=o.y;if(o._c){if(oa(e,t,n,r,i,a,u,{cx:0,cy:0,r:o._c}))return!1}if(o._cl)for(var s=0;s<o._cl.length;s++){if(oa(e,t,n,r,i,a,u,o._cl[s]))return!1}return!0}var ua=W(),sa=2*Math.PI;function fa(e,t,n,r,i,o,a,u,s,f,l,c,d){var h=na(i,o,ji(u,s,c,d.arrows),t,n,r);if(2===h.length){Hi(e,i,o,u,s,(a?h[0]:h[1])-Math.PI,f,l,ui.Arc,c,d)}else e.triangle(0,0,0,0,0,0,f,-1,f,!0,l,-1,ui.Arc)}function la(e,t,n,r,i){return.9*ji(e,t,r,i)/n}function ca(e,t,r,i,o,a,u,s,f,l,c,d,h,v,g,p,m,y,b){var x=s===f,w=s._sx,A=s._sy,M=f._sx,I=f._sy,E=i||0,C=o||0,S=+(a||0)*h;x&&(S+=oo*s._sl.e);var k=S>0;if(x){var R=(s._sl.w?180:225)*(Math.PI/180),T=Math.cos(R),L=Math.sin(R),B=.5;M=w+=s._sl.x;I=A+=s._sl.y;var G=-s._sl.e*oo/2;w+=T*G+L*B;A+=L*G-T*B;M+=T*G-L*B;I+=L*G+T*B}var Z=(w+M)/2,O=(A+I)/2,F=M-w,z=I-A,D=Math.max(.001,z*z+F*F),Y=Math.sqrt(D),V=+(D/4+S*S)/(2*Math.abs(S)),P=V-Math.abs(S);if(V>1e5){y.useSlowPathRendering=!0;y.useSlowPathRenderingLastTime=!0;return qo(e,t,r,E,C,u,s,f,l,c,d,h,v,g,p,m,y,b)}var W=k?1:-1,X=Z-z*W*P/Y,N=O+F*W*P/Y,U=Math.atan2(A-N,w-X),K=Math.atan2(I-N,M-X),j=k?U:K,H=k?K:U;j>H&&(H+=2*Math.PI);var _,Q,J,q,$,ee,te=j+(k?E:C)*(H-j),ne=j+(k?1-C:1-E)*(H-j),re=ia(X,N,V,j,H,S>0?s:f,!0),ie=ia(X,N,V,re,H,S>0?f:s,!1),oe={startangle:0,endangle:0};if(s===f||aa(X,N,V,re,ie,s)&&aa(X,N,V,re,ie,f)){oe.startangle=re;oe.endangle=ie}else{oe.startangle=sa;oe.endangle=sa}oe.startangle=Math.max(te,oe.startangle);oe.endangle=Math.min(ne,oe.endangle);if(oe.startangle>=oe.endangle){Yo(e,u,t,r,s,f,l,c,d,!0,v,S,p,m);return!1}var ue=0;(t||r)&&(ue=la(d,h,V,y.unzoom,b.arrows));var se,fe,le,ce=-.25;if(b.tight&&(!t||!r)){if($i(s)||$i(f)){var de=oe.endangle-oe.startangle;se=de/(de*V)}(jo(s,g,b)||jo(f,g,b))&&(ue=la(d,h,V,y.unzoom,b.arrows))}if(t){_=k?oe.startangle:oe.endangle;Q=X+V*Math.cos(_);J=N+V*Math.sin(_);k?oe.startangle+=ue:oe.endangle-=ue}else if(b.tight)if(jo(s,g,b))k?oe.startangle+=ce*ue:oe.endangle-=ce*ue;else if($i(s)&&(fe=no(s,b))){le=fe*se;k?oe.startangle-=le:oe.endangle+=le}if(r){q=k?oe.endangle:oe.startangle;$=X+V*Math.cos(q);ee=N+V*Math.sin(q);k?oe.endangle-=ue:oe.startangle+=ue}else if(b.tight)if(jo(f,g,b))k?oe.endangle-=ce*ue:oe.startangle+=ce*ue;else if($i(f)&&(fe=no(f,b))){le=fe*se;k?oe.endangle+=le:oe.startangle-=le}if(oe.startangle>=oe.endangle){Yo(e,u,t,r,s,f,l,c,d,!0,v,S,p,m);return!1}e.arc(X,N,V,oe.startangle,oe.endangle,l,c,d,u,v,!1,S,p);t&&fa(e,X,N,V,Q,J,k,d,h,l,u+ua+"a1",y.unzoom,b);r&&fa(e,X,N,V,$,ee,!k,d,h,c||l,u+ua+"a2",y.unzoom,b);if(m){var he=0,ve=0;n(m.pos,function(t,n){if("t"===n||m.present[n]){var r=W>0?oe.startangle:oe.endangle,i=r+((W>0?oe.endangle:oe.startangle)-r)*Ho[n];t.lx=X+V*Math.cos(i);t.ly=N+V*Math.sin(i);if(b.glyphsAlongLink){t.tdx=-W*Math.sin(i);t.tdy=W*Math.cos(i);t.tangent=i;t.R=V;t.signf=W}if(b.labelAlongLink){i>sa&&(i%=sa);ve=wo(ve=+((i-Math.PI/2)*W).toFixed(14))}e.setAnchorPosition(u,t.lx,t.ly,ve*W,he)}he++})}return!0}var da=Math.PI/256;function ha(e,t,n,r,i){var o=n.bw*r,a=n.w*r;if(a>0){var u=n.v.filter(function(e){return e>0}).length;if(1===u){var s=0;n.v.forEach(function(e,t){e>0&&(s=t)});e.circle(0,0,t,n.c[s],a,Pt.white,!1,i+"do0",0,void 0,!1)}else{var f=n.v.reduce(function(e,t){return e+t},0),l=o/t,c=l*u,d=2*Math.PI-c,h=-Math.PI/2+l/2;d>0&&n.v.reduce(function(r,s,c){var h=r;if(0===s)return h;var v=h+d*s/f,g=v+l,p=n.c[c%n.c.length];0===o&&(0===c?h-=da:c!==u-1&&(v+=da));e.arc(0,0,t,h,v,p,void 0,a,i+"do"+c,void 0,!0,0,void 0);return g},h)}}}var va=W();function ga(e,t,n,r,i,o,a,u,s,f,l,c,d,h,v){var g,p,m,y=n||[],b=r,x=i,w=0,A=function(e,t){return vo(e,t)*o},M=function(e,t){return 0};if(a)if(l.R&&h.glyphsAlongLink){var I=0,E=l.signf,C=l.R;w=l.tangent;for(m=0;m<y.length-1;m++){p=vo(y[m],y[m+1]);I+=E*Math.asin(p/(2*C))}var S=w+I/2,k=2*E*C*Math.sin(I/2);b+=E*k*-Math.sin(S);x+=E*k*Math.cos(S);w+=I;A=function(e,t){g-=E*Math.asin(vo(e,t)/(2*C));var n=-E*Math.sin(g);return vo(e,t)*o*n};M=function(e,t){var n=E*Math.cos(g);g-=E*Math.asin(vo(e,t)/(2*C));return vo(e,t)*o*n}}else{var R=0;for(m=0;m<y.length-1;m++)R+=vo(y[m],y[m+1])*o;if(h.glyphsAlongLink){A=function(e,t){return vo(e,t)*o*l.tdx};M=function(e,t){return vo(e,t)*o*l.tdy};b+=R*l.tdx/2;x+=R*l.tdy/2}else b+=R/2}else y.length>0?b-=ho(y[y.length-1])*o:b-=ho({});function T(e){g=w;for(var t=y.length-1,n=b,r=x;t>=0;t--){e(y[t],n,r);if(t>0){n-=A(y[t-1],y[t]);r-=M(y[t-1],y[t])}}}a&&u&&T(function(t,n,r){e.circle(n,r,fo(t)*o*1.25,Pt.white,-1,c(),!0,s,v,void 0,!1)});var L=0;T(function(n,r,i){var a=s+va+L;f&&(a+="-"+f);ko(e,t,a,r,i,o,n,null,null,!1,d,h,v);L++})}var pa={b:"grey",bw:1,c:"rgba(240,240,240,0.8)",bs:"solid",re:!1,w:0},ma=["_ha0","_ha1","_ha2","_ha3","_ha4"],ya=ma.concat(["ha0","ha1","ha2","ha3","ha4","ha5","ha6","ha7","ha8","ha9"]),ba=ya.reduce(function(e,t){e[t]=!0;return e},{});function xa(e,t){return e+(b(t)?"-"+t:"")}function wa(e){if(e&&e.maxLength&&b(e.maxLength)&&e.maxLength>0)return e.maxLength}function Aa(e,t,r,i){var o=t||fe,u=r||fe,s=i||fe,f={b:"rgb(255, 255, 255)",bw:2,c:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],w:10},l=z(e,{numbers:{},numOrString:{},negatives:{},strings:{},stringValues:{},colours:{},booleans:{},reserved:{},mapPos:{},halos:[]});function c(e,t){y(e.items,!1,t)}function d(e,t,n,r){var i=r||{},o=W(e,t,n,!!i.carefulWithXandY);r.filterComboNodes&&(o.nodes=N(o.nodes));o.links=U(o.links,o.nodes,t,i.selfLinks);return o}function h(e){if(I(e)){var t=e;n(t,function(e,n){S(t,n);t.g&&(t.g=Z(t.g,!0));P(t,n,l.reserved)})}}function v(e){var t=e.flow;if(!0===t)e.flow={velocity:2};else if(I(t)){var n=t;b(n.velocity)?n.velocity=Math.max(-10,Math.min(10,+n.velocity)):delete e.flow}else delete e.flow}function g(e){"w"in e&&(e.w=!!e.w)}function p(e,t,n){var r=e,i=n||{};x(r,t);k(r);if(r.g)if(Array.isArray(r.g)){y(r.g);r.g.forEach(g);r.g=Z(r.g,"link"===r.type||!!i[r.id])}else delete r.g;O(r,t);r.donut&&F(r,t);r.oc&&D(r);r.bu&&Y(r);r.t1&&h(r.t1);r.t2&&h(r.t2);r.flow&&v(r)}function y(e,t,n){if(e)for(var r=0;r<e.length;r++)p(e[r],t,n)}function x(e,t){n(e,function(n,r){S(e,r);P(e,r,l.reserved);t&&P(e,r,l.booleans)})}function w(e,t){var r=e[t],i=!0;I(r)&&n(r,function(e,t){A(r,t);i=i&&b(+e)});i||delete e[t]}function A(e,t){var n=+e[t];(n<0&&!l.negatives[t]||m(n))&&(n=null);e[t]=n}function M(e,t){if(!V(e[t])){var n=""+e[t];m(+n)||""===n?E(e,t):A(e,t)}}function E(e,t){if(!V(e[t])){e[t]+="";l.stringValues[t]&&!l.stringValues[t][e[t]]&&delete e[t]}}function C(e,t){e[t]&&(e[t]=Ht(e[t])?e[t]:void 0)}function S(e,t){l.strings[t]?E(e,t):l.numbers[t]?A(e,t):l.numOrString[t]?M(e,t):l.colours[t]?C(e,t):l.mapPos[t]&&w(e,t)}function k(e){if(I(e.fi)){var t=e.fi;V(t.t)||(t.t="string"==typeof t.t?t.t.charAt(0):String.fromCharCode(t.t));t.c&&(t.c=Ht(t.c)?t.c:void 0);"ff"in t&&"string"!=typeof t.ff&&(t.ff=void 0)}else null!==e.fi&&delete e.fi}function R(e){return/^(ne|nw|se|sw|n|s|e|w)$/.test(e)}function L(e){return T(e)&&e>=0&&e<360}function B(e){for(var t=0;t<e.length;t++){var n=e[t].p;if(L(n))return!0;if(R(n))return!1}return!1}function G(e){var t=B(e),n=t?L:R,r={};return function(e){var i=e,o=i.p;if(!n(o))return!1;(!t||i.r<0)&&delete i.r;var a=t?xa(o,i.r):o;if(r[a])return!1;r[a]=!0;return!0}}function Z(e,t){var n=e;if(!Array.isArray(n))return!1;if(!t){var r=G(n);n=n.filter(r)}n.forEach(k);return n}function O(e,t){l.halos.forEach(function(n){var r=e[n];if(r)if(t)"c"in r||"r"in r||"w"in r||delete e[n];else if("c"in r&&"r"in r&&"w"in r){C(r,"c");if(V(r.c)||V(r.r)||V(r.w)||!b(+r.r)||!b(+r.w))delete e[n];else{r.r=+r.r;r.w=+r.w}}else delete e[n]})}function F(e,t){if(t||Array.isArray(e.donut.v)){if(e.donut.v){var n=e.donut.v;n.forEach(function(e,t){(!b(e)||e<0)&&(n[t]=0)})}e.donut.c&&(Array.isArray(e.donut.c)&&!e.donut.c.some(function(e){return!Ht(e)})||delete e.donut.c);["bw","w"].forEach(function(t){t in e.donut&&A(e.donut,t)});"b"in e.donut&&C(e.donut,"b");t||(e.donut=z(e.donut,f))}else delete e.donut}function D(e){I(e.oc)?p(e.oc):delete e.oc}function Y(e){if(Array.isArray(e.bu))delete e.bu;else{var t=e.bu;t.p||(t.p="ne");var n=t.p;/^(ne|nw|se|sw)$/.test(n)?t.g&&k(t.g):delete e.bu}}function P(e,t,n){n[t]&&delete e[t]}function W(e,t,n,r){var i=t||{},o=n||{},a={nodes:{},links:{}};function u(e,t){return e.id in t.nodes||e.id in t.links}function s(e){return!!("node"===e.type&&e.id in o||"link"===e.type&&e.id in i)}e&&(a=e.reduce(function(e,t){if(t.id&&!u(t,e)&&!s(t)){if("node"===t.type){var n=!0;r&&i[t.id]&&(n=!1);n&&X(t)}var o="node"===t.type?"nodes":"links";o in e&&(e[o][t.id]=t)}return e},a));return a}function X(e){if("node"===e.type){e.x=e.x||0;e.y=e.y||0}}function N(e){var t=a(e);n(e,function(e){e.parentId&&delete t[e.parentId]});return t}function U(e,t,r,i){var o={};n(e,function(e,n){if(K(e,t,r,i))o[n]=e;else{var a=e.parentId;if(a){var u=t[a]||r[a];u&&u._combo&&(u._combo.linkIds=u._combo.linkIds.filter(function(t){return t!==e.id}))}}});return o}function K(e,t,n,r){if(!r&&e.id1===e.id2)return!1;var i=t||{},o=n||{};return!(!o[e.id1]&&!i[e.id1]||!o[e.id2]&&!i[e.id2])}function j(e,t){H("hi",e,t)}function H(e,t,n){var r={};Q(e,t,n,r);_(r,e,n);s(e);"hi"===e&&u()}function _(e,t,n){Object.keys(e).forEach(function(e){var r=n[e];if(r._combo.linkIds.every(function(e){return n[e][t]})){r[t]=!0;o(e)}else if(void 0!==r[t]){delete r[t];o(e)}})}function Q(e,t,r,i){n(r,function(n,a){var u=n.parentId;if((!0===t[n.id1][e]||!0===t[n.id2][e])&&!0!==n[e]){n[e]=!0;u&&r[u]&&(i[u]=!0);o(a)}})}return{donutDefaults:f,typeCheck:c,filterNodesAndLinks:d,ensureObject:p,ensureTypesInArray:y,setZeroXY:X,hasValidEnds:K,ensureHiddenItemConsistency:j,ensureConsistency:H,applyPropertyRuleToComboLinks:_}}function Ma(e,t,n,r,i,o,a,u,s){var f,l=e.getLayer(),c="solid",d=ma;e.setLayer(Zi.HALOS);for(var h=!0,v=0;v<d.length;v++)if(f=i[d[v]]){h=!1;i.off||n===r?ca(e,!1,!1,i.b1||0,i.b2||0,i.off||0,t,n,r,f.c,void 0,f.w,o,c,a,void 0,void 0,u,s):qo(e,!1,!1,i.b1||0,i.b2||0,t,n,r,f.c,void 0,f.w,o,c,a,void 0,void 0,u,s)}i._noHalos=h;e.setLayer(l)}var Ia=W();function Ea(e,t,n,r,i,o){var a=0,u=0,s="centre";if(-1!==e.indexOf("n")||-1!==e.indexOf("s")){u=-n;2===e.length&&(u-=r.dy);-1!==e.indexOf("s")&&(u*=-1)}if(-1!==e.indexOf("e")||-1!==e.indexOf("w")){a=t;s="right";2===e.length&&(a+=r.dx);if(-1!==e.indexOf("w")){a*=-1;s="left"}}!i&&o&&(-1!==["n","s"].indexOf(e)?u*=Math.sqrt(2):-1!==["e","w"].indexOf(e)&&(a*=Math.sqrt(2)));return{gdx:a,gdy:u,growDirection:s}}function Ca(e){var t="centre";e>0&&e<180?t="right":e>180&&(t="left");return t}function Sa(e,t,n,r,i){var a,u,s=o(e);if("circle"===i){a=Math.sin(s)*r;u=-Math.cos(s)*r}else{var f=[Math.atan2(t,n),Math.atan2(t,-n),Math.atan2(-t,-n),Math.atan2(-t,n)],l=void 0;for(l=0;l<f.length;l++)f[l]<0&&(f[l]+=2*Math.PI);if(s<f[0]||s>f[3])a=-(u=-n)*Math.tan(s);else if(s<f[1]){a=t;u=s===Math.PI/2?0:-a/Math.tan(s)}else if(s<f[2])a=-(u=n)*Math.tan(s);else{a=-t;u=s===Math.PI/2*3?0:-a/Math.tan(s)}}return{gdx:a,gdy:u}}function ka(e,t){return{gdx:Math.sin(o(e))*t,gdy:-Math.cos(o(e))*t}}function Ra(e,t,n,r,i,o,a,u,s,f,l,c,d,h){var v,g=0,p=b(f.r);if(-1!==["n","ne","e","se","s","sw","w","nw"].indexOf(f.p))v=Ea(f.p,n,r,l,s,u);else{var m="box",y=0;if(u){m="circle";y=s?Math.min(n,r):Math.sqrt(2)*n}var x=f.p;(v=p?ka(x,f.r*o):Sa(x,n,r,y,m)).growDirection=Ca(x)}if(null!==v.gdx){v.gdx<0&&v.gdy<0&&f.e&&(i._sl.e=Math.max(i._sl.e,f.e));g=ko(e,t,a+Ia+xa(f.p,f.r),v.gdx,v.gdy,o,f,i,v.growDirection,!0,c,d,h)}return v.gdy+g}var Ta=W();function La(e,t,n,r,i,o){for(var a,u=!0,s=0;s<ya.length;s++){var f=ya[s];if(a=i&&o.selectedNode[f]||r[f]){u=!1;var l=t+Ta+f,c=a.r*n,d=a.w*n;d/2>=c?e.circle(0,0,c+d/2,Pt.white,-1,a.c,!0,l,0,void 0,!1):e.circle(0,0,c,a.c,d,Pt.white,!1,l,0,void 0,!1)}}r._noHalos=u&&!i}var Ba=W();function Ga(e,t,n,r,i,o,a,u,s,f,l,c,d,h){var v=n||[],g=r;if(a){for(var p=0,m=0;m<v.length-1;m++)p+=vo(v[m],v[m+1])*o;g+=p/2}else v.length>0?g-=ho(v[v.length-1])*o:g-=ho({});if(f){var y=g;if(v.length>0){x(function(e,t){y=t});var b=v[0].e||1;y-=b*o*oo/2;f._sl.e*=b}f._sl.x=y;f._sl.y=i;f._sl.w=!0}function x(e){for(var t=v.length-1,n=g;t>=0;t--){e(v[t],n);t>0&&(n-=vo(v[t-1],v[t])*o)}}a&&u&&x(function(t,n){e.circle(n,i,fo(t)*o*1.25,Pt.white,-1,l(),!0,s,h,void 0,!1)});var w=0;x(function(n,r){ko(e,t,s+Ba+w,r,i,o,n,f,null,!1,c,d,h);w++})}function Za(e,t){return e._combo&&e._combo.open?"circle":t?"circle"===e.sh?e.sh:"box":"box"===e.sh||"circle"===e.sh?e.sh:e.sq?"box":"circle"}function Oa(e,t,n,r,i,o){var a=t+r,u=n+r;if("circle"===e){i(Math.min(a,u))}else o(-a,-u,a,u)}function Fa(e,t,n,r,i,o,a,u,s,f,l,c){Oa(c,t,n,r,function(t){e.circle(0,0,t,i,o,u,s,f,l,a,!1)},function(t,n,r,c){e.rect(t,n,r,c,i,o,u,s,f,l,a)})}function za(e,t,n,r,i){Oa(i,t,n,r,function(t){e._c=t},function(t,n,r,i){e._cl.push({x1:t,y1:n,x2:r,y2:i})})}
var Da=4,Ya=27;function Va(e,t,r){var i=vn,o=W(),a={b1:0,b2:0,c:"",c2:"",fb:!1,fbc:"",fc:"",ff:"",flow:void 0,fs:0,t1:void 0,t2:void 0,w:0},u=eo(),s={arrows:"normal",fontFamily:void 0,glyphsAlongLink:!1,iconFontFamily:void 0,imageAlignment:{},editcolour:null,tight:!1,avoidLabels:!1,selectionFontColour:null,selectedNode:null,isNodeSelStyle:!1,selectedLink:null,isLinkSelStyle:!1,labelOffset:0,truncateLabel:!1,defaultOpenComboStyle:pa,labelAlongLink:!1},f={dx:0,dy:0},l={},c={present:{t:!0,t1:!1,t2:!1},pos:{t:{lx:0,ly:0,tdx:1,tdy:0,tangent:0,R:0,signf:1},t1:{lx:0,ly:0,tdx:1,tdy:0,tangent:0,R:0,signf:1},t2:{lx:0,ly:0,tdx:1,tdy:0,tangent:0,R:0,signf:1}}},d={unzoom:1,easingValue:0,resizeRect:null,resizePrimitive:null,stillDirty:new Map,useSlowPathRendering:!1,useSlowPathRenderingLastTime:!1,alwaysRedraw:!1};function h(e,t){l[e]=t}function v(){return s.editcolour||Pt.edit}function g(){return s.selectionFontColour||Pt.white}function p(e){s.arrows=e.arrows;b(e.labelOffset)&&(s.labelOffset=e.labelOffset);var t=wa(e.truncateLabels);s.truncateLabel=void 0!==t&&t;e.selectionColour&&(s.editcolour=Ht(e.selectionColour)?e.selectionColour:null);s.fontFamily=e.fontFamily;s.glyphsAlongLink=!e.linkStyle.inline&&"along"===e.linkStyle.glyphs;s.iconFontFamily=e.iconFontFamily;s.imageAlignment=e.imageAlignment||{};s.avoidLabels=e.linkEnds.avoidLabels||!1;s.tight="loose"!==e.linkEnds.spacing;e.selectionFontColour&&(s.selectionFontColour=Ht(e.selectionFontColour)?e.selectionFontColour:null);s.selectedNode=e.selectedNode||null;s.isNodeSelStyle=I(e.selectedNode);s.selectedLink=e.selectedLink||null;s.isLinkSelStyle=I(e.selectedLink);s.labelAlongLink=!!e.linkStyle.inline}function m(e,t){return ji(e,t,d.unzoom,s.arrows)}function y(e,n,r,i,o,u,f){var l,h=f.isSelected,v=f.isRevealed,g=1;n._edit=null;var p=n.id;h&&s.isLinkSelStyle?x(l=a,s.selectedLink,n):l=n;var m=!1;v&&(m=t.privateTopParentId(n.id1)!==t.privateTopParentId(n.id2));i.parentId&&(g=M(1,i.parentId,r));o.parentId&&(g=Math.min(g,M(1,o.parentId,r)));var y=(l.w||1)*g*d.unzoom,b=l.c||Pt.midgrey;c.present.t=!!(n.t||n.g&&n.g.length||u);c.present.t1=!!n.t1;c.present.t2=!!n.t2;if(n.off||i===o){var w=n.off||0;m&&(w/=g);ca(e,n.a1||!1,n.a2||!1,l.b1||0,l.b2||0,w,p,i,o,b,l.c2,y,g,l.ls,h,l.flow,c,d,s)}else qo(e,n.a1||!1,n.a2||!1,l.b1||0,l.b2||0,p,i,o,b,l.c2,y,g,l.ls,h,l.flow,c,d,s);n._x=c.pos.t.lx;n._y=c.pos.t.ly}function x(e,t,n){e.b1=(t.b1||0)>=0?t.b1:n.b1;e.b2=(t.b2||0)>=0?t.b2:n.b2;e.c=t.c||n.c;e.c2=t.c2||n.c2;e.fb=t.fb||n.fb;e.fbc=t.fbc||n.fbc;e.fc=t.fc||n.fc;e.flow=t.flow||n.flow;e.ff=t.ff||n.ff;e.fs=t.fs||n.fs;e.t1=t.t1||n.t1;e.t2=t.t2||n.t2;e.ls=t.ls||n.ls;e.w=t.w||n.w}function w(e,o,u,f,h,p,m,y){var b,w=y.isSelected,E=y.isRevealed,C=1;u._edit=null;var S=u.id,k=w&&!s.isLinkSelStyle,R=k;w&&s.isLinkSelStyle?x(b=a,s.selectedLink,u):b=u;I(b.flow)&&(d.alwaysRedraw=!0);var T=!1;E&&(T=t.privateTopParentId(u.id1)!==t.privateTopParentId(u.id2));h.parentId&&(C=M(1,h.parentId,f));p.parentId&&(C=Math.min(C,M(1,p.parentId,f)));var L=(b.w||1)*C*d.unzoom,B=b.c||Pt.midgrey,G=0;c.present.t=!!(u.t||u.g&&u.g.length||m);c.present.t1=!!u.t1;c.present.t2=!!u.t2;var Z,O=c.present.t||c.present.t1||c.present.t2;if(u.off||h===p){var F=u.off||0;T&&(F/=C);Z=ca(o,u.a1||!1,u.a2||!1,b.b1||0,b.b2||0,F,S,h,p,B,b.c2,L,C,b.ls,w,b.flow,c,d,s)}else Z=qo(o,u.a1||!1,u.a2||!1,b.b1||0,b.b2||0,S,h,p,B,b.c2,L,C,b.ls,w,b.flow,c,d,s);u._x=c.pos.t.lx;u._y=c.pos.t.ly;if(O){var z=0;n(c.pos,function(t,n){if(c.present[n]){var a=void 0,f=void 0,h=void 0,p=void 0,m=void 0,y=void 0,x=null;if("t"===n||"string"==typeof u[n])y=u[n];else{x="t1"===n?b.t1:"t2"===n?b.t2:u[n];var w=u[n];y=x.t?x.t:w.t;a=x.fb?x.fb:w.fb;f=x.fbc?x.fbc:w.fbc;h=x.fc?x.fc:w.fc;p=x.ff?x.ff:w.ff;m=x.fs?x.fs:w.fs}var A=!1;m=+(m||b.fs||i)*C*d.unzoom;y=y||"";p=p||b.ff||s.fontFamily;var M=h||b.fc||Pt.black,I=f||b.fbc||Pt.textback,E=!!(void 0!==a?a:b.fb);if(k){M=g();I=v()}var T=Bo(u,y,s.truncateLabel,l.showFullLabel||null,r),L=Go(T,e,m,E,p,s.fontFamily),B=m+3*d.unzoom;G=B*T.length;var O=0,F=0;T.length>0&&(O-=L[0]/2);for(var D=-((T.length-1)*B)/2,Y=0;Y<T.length;Y++){0===Y&&(F=D);var V=T[Y],P=Ao(e,o,V,0,D,S,!0,M,I,E,u,!1,!0,99,L[Y],k,m,p,n,1,d.unzoom,s,z);V.length>0&&!Z&&(u._edit={hib:!0});A=A||P;D+=B}A&&(R=!1);var W="t"===n?u.g:x&&x.g;if(Qi(W)){ga(o,e,W,O,F,C,!A,k,S,"t"===n?null:n,t,v,d,s,z);R=!1}}z++})}if(R){var D=Math.max(.66*(b.w||0),+(b.fs||i)*d.unzoom/2);o.circle(0,0,D,Pt.white,-1,v(),!0,S,0,void 0,!1)}u.bu&&Fo(o,e,S,G/2+4,C,u.bu,!1,d,s,l,r,i,0);if(h.du){u._du=!0;A(h,"id1",S,o,L,B,Z)}if(p.du){u._du=!0;A(p,"id2",S,o,L,B,Z)}u._noHalos||Ma(o,S,h,p,u,C,w,d,s);Z||(u._edit={hib:!0})}function A(e,t,n,r,i,a,u){var s=u?i:0,f=r.getAnchorPosition(e.id,0);r.circle(f.x,f.y,1.5*s,a,s,Pt.white,!0,n+o+t,-1,void 0,!1)}function M(e,t,n){var r=e,i=n[t];if(i){r*=i._combo.e;i.parentId&&(r=M(r,i.parentId,n))}return r}function E(e,t){for(var n=e,r=n.x,i=n.y;n.parentId;){r=(n=t[n.parentId]).x+(r-n.x)*n._combo.e;i=n.y+(i-n.y)*n._combo.e}return{x:r,y:i}}function C(e,t,n,r,i){if(!n.hi){var a,f,l,c,h,g,p,m,y,x,w=i.isOpenCombo,A=1,I=n.id,C=qi(n),R=Za(n,C),T=i.isSelected,L=T&&s.isNodeSelStyle,B=T&&!s.isNodeSelStyle,G=s.selectedNode,Z=L&&G.b||n.b,O=L&&G.bs||n.bs,F=L&&G.c||n.c,z=(C?1:L&&G.e||n.e||1)*d.unzoom;f=C&&(L&&G.re||n.re)||!1;l=L&&G.u||n.u;c=L&&G.fi||n.fi;h=L&&b(G.bw)?G.bw:n.bw;g=L&&G.w||n.w;p=L&&G.h||n.h;m=n.x;y=n.y;var D,Y=n.donut&&"circle"===R&&!w?n.donut:void 0;if(w){var V=n.oc;if(V){h=0;if(null===V.b)Z=void 0;else{void 0===V.bw?h=s.defaultOpenComboStyle.bw:V.bw>0&&(h=V.bw);Z=V.b||s.defaultOpenComboStyle.b}O=V.bs||s.defaultOpenComboStyle.bs;F=V.c||s.defaultOpenComboStyle.c;f=V.re||s.defaultOpenComboStyle.re;g=V.w||s.defaultOpenComboStyle.w}else{Z=s.defaultOpenComboStyle.b;h=s.defaultOpenComboStyle.bw;O=s.defaultOpenComboStyle.bs;F=s.defaultOpenComboStyle.c;f=s.defaultOpenComboStyle.re;g=s.defaultOpenComboStyle.w}if(L){var P=s.selectedNode.oc;if(P){Z=P.b||Z;h=P.bw||h;O=P.bs||O;F=P.c||F}}c=void 0;l=void 0;R="circle";A=L&&s.selectedNode.e||n.e||1;p=g*=z=n._combo.e}var W=1;if(n.parentId){W=M(1,n.parentId,r);var X=E(n,r);g*=W;p*=W;z*=W;m=X.x;y=X.y}t.setNodeAnchorPosition(n,m,y);if(!n.du){if(Y){D=!0;a=Y.b;h=z*(Y.w+2*Y.bw);O=void 0}else if(Z&&(void 0===h||h>0)){D=!0;a=Z;h=z*(h||Da)}else{D=!1;a=Pt.white;h=0;O=void 0}var N,U,K=!!F,j=!!l||!(!c||!c.t),H=K?F:Pt.white;n._c=0;n._cl=[];n._edit=null;n._sl?n._sl.e=z:n._sl={x:0,y:0,e:z,w:!1};if(C){N=g/2;U=p/2}else U=N=z*Ya;var _,Q,J,q=N+h/2,$=U+h/2;if(Y){_=z*Y.w;Q=h/2}else Q=.75*(_=D?h:z*Da);J=s.tight?D||K?h/2:Q-_/2:Q+_/2;if(j||D||K){za(n,q,$,J,R);if(T&&(!B&&f||B)){var ee=Oi[t.getLayer()];S(t,ee,i,function(){if(B){var e=v();Fa(t,q,$,Q,e,_,void 0,e,!1,I,0,R)}f&&(d.resizeRect=t.createDummyShapePrimitive(I,q+Q,$+Q,R))})}}if(K){Fa(t,q,$,0,a,-1,O,H,K,I,0,R);T&&f&&!j&&(d.resizePrimitive=t.clonePreviousPrimitive())}if(j){if(l){x=s.imageAlignment[l];to(u,x,N,U);var te=n.ci?"ci":null,ne=1,re=!1,ie=0;t.image(u[0],u[1],u[2],u[3],l,I,ie,te,ne,re)}else{var oe=C?Math.min(N,U):N;mo(t,s,e,I,0,0,0,oe,c.t,c.c||Pt.black,c.ff||s.iconFontFamily)}T&&f&&(d.resizePrimitive=t.clonePreviousPrimitive())}if(D){var ue=Y&&0===Y.bw?-1:h||-1;ue>=0&&Fa(t,q,$,0,a,ue,O,H,!1,I,0,R);T&&f&&!j&&!K&&(d.resizePrimitive=t.clonePreviousPrimitive())}Y&&ha(t,Math.min(q,$),Y,z,I+o);k(t,e,h,N,U,n,C,R,D,K,j,B,z,A,I,L,i)}}}function S(e,t,n,r){var i,o=e.getLayerPath(),a=e.getLayer();if(t){if(n.isRevealed){n.isParentRevealed||(i=o.slice(1));if(n.isParentTransient){i||(i=o.slice(0));i.unshift(Zi.TRANSIENT)}}!n.isTransient||n.isInCombo&&n.isParentTransient||(i=o.slice(1));if(n.isOpenCombo){(i=(i=i||o).slice(0,i.length-1))[i.length-1]===Zi.COMBOS&&(i[i.length-1]=Zi.MAIN);i.push(n.isInBackground?Zi.BG:Zi.FG)}if(i){e.hasPath(i)||e.createItemLayersAt(i);e.setLayerPath(i)}e.setLayer(t)}r();if(t){e.setLayerPath(o);e.setLayer(a)}}function k(e,t,n,o,a,u,c,h,p,m,y,x,w,A,M,I,E){var C,k,R,T,L,B,G,Z=0,O=0,F=0,z=Ji(u),Y=!1,V=E.isOpenCombo,P=u._combo&&u._combo.open?A:w;if(I){var W=s.selectedNode;k=W.fb||u.fb;R=W.fbc||u.fbc;T=W.fc||u.fc;L=W.ff||u.ff;B=(W.fs||u.fs||i)*P;G=W.tc||u.tc}else{k=u.fb;R=u.fbc;T=u.fc;L=u.ff;B=(u.fs||i)*P;G=u.tc}V&&(G=!1);var X=3*P+B/2,N=T||Pt.black,U=R||Pt.textback;if(x){N=g();U=v()}var K=a+X,j=Bo(u,null,s.truncateLabel,l.showFullLabel||null,r),H=Go(j,t,B,k||!1,L,s.fontFamily),_=B+3,Q=_,J=_*j.length;j.length>0&&(Z-=H[0]/2);var q=y||p||m,$=D(G)?!!G:!y&&!c,ee=(j.length-1)*(Q/2);if(q)$&&(K=-ee);else{if(z){var te=ho((ce=u.g)[ce.length-1])*P;Z=te;F+=H[0]/2+te}K=0}j.length>0&&(O=K);p&&!$&&(K+=n-3*P);if(q){var ne=3,re=3;f.dx=0;f.dy=y?-8:0;var ie=2;if(!c&&"circle"===h){ne+=ie;re+=ie;if(y){f.dx+=ie;f.dy+=ie}}if(c&&!V){ne++;re++}var oe=ne*P,ue=re*P;f.dx*=P;f.dy*=P;if(V){var se=((u.oc.w||s.defaultOpenComboStyle.w||0)+(u.oc.bw||s.defaultOpenComboStyle.bw||0))/2/Math.sqrt(2),fe=o/Ya;u._sl.e=fe;u._sl.x=-se*w-oe/A;u._sl.y=-se*w-ue/A}else{u._sl.x=-o+(oe-f.dx);u._sl.y=-a+(ue-f.dy)}if(z){var le="circle"===h,ce=u.g;for(C=0;C<ce.length;C++){var de=Ra(e,t,o-oe,a-ue,u,w,M,le,c,ce[C],f,d,s,0),he=b(ce[C].r);$||he||(K=Math.max(K,de+X))}}}for(var ve=0;ve<j.length;ve++){var ge=Ao(t,e,j[ve],F,K,M,!0,N,U,k||!1,u,!1,!0,99,H[ve],x,B,L||s.fontFamily,null,P,d.unzoom,s,0);Y=Y||ge;K+=Q}if(!q){var pe=!u.t||!Y;Ga(e,t,u.g||null,pe?0:Z,O,P,pe,x,M,u,v,d,s,0)}var me=!u._noHalos||I;!c&&me&&S(e,Zi.HALOS,E,function(){La(e,M,P,u,I,s)});if(u.bu){var ye=0;q?ye=a:J>0?ye=J/2+4:Ji(u)&&(ye=13*P);Fo(e,t,M,ye,P,u.bu,V,d,s,l,r,i,0)}}function R(e,t){var r=[],i=z(e,{sh:"box",x:0,y:0});function o(e,t){e&&r.push(t)}if(qi(i))if("circle"===i.sh){var a=Math.min(i.w,i.h)/2;n(t,function(e){if(qi(e)){var t=e.w,n=e.h;"circle"===e.sh?o(Tn(i.x,i.y,a,e.x,e.y,Math.min(t,n)/2),e.id):o(Bn(i.x,i.y,a,e.x-t/2,e.y-n/2,e.x+t/2,e.y+n/2),e.id)}else o(Tn(i.x,i.y,a,e.x,e.y),e.id)})}else{var u={x1:i.x-i.w/2,y1:i.y-i.h/2,x2:i.x+i.w/2,y2:i.y+i.h/2};n(t,function(e){if(qi(e)){var t=e.w,n=e.h;if("circle"===e.sh){var r=Math.min(t,n)/2;o(Ln(u,e.x-r,e.y-r,e.x+r,e.y+r),e.id)}else o(Ln(u,e.x-t/2,e.y-n/2,e.x+t/2,e.y+n/2),e.id)}else o(Rn(u,e.x,e.y),e.id)})}return r}function T(){return d.resizePrimitive}function L(){return d.stillDirty.size>0}function B(){return d.alwaysRedraw}function G(n,r,i,o,a,u,f,l,c,h,v,g){var p,m,b,x,A={isSelected:!1,isOpenCombo:!1,isInCombo:!1,isInBackground:!1,isTransient:!1,isParentTransient:!1,isRevealed:!1,isParentRevealed:!1};d.useSlowPathRendering=d.useSlowPathRenderingLastTime;d.useSlowPathRenderingLastTime=!1;var M=g&&!d.useSlowPathRendering&&!i.allDirty,I=new Set;function S(e){var n=r[e];if(n){var i=t.privateFirstVisibleItemInAncestry(n.id1),o=t.privateFirstVisibleItemInAncestry(n.id2);!i||i._combo&&i._combo.open||I.add(i.id);!o||o._combo&&o._combo.open||I.add(o.id)}}l.forEach(S);if(d.resizePrimitive){var k=i.dirty.get(d.resizePrimitive.id);if(i.allDirty||2===k){d.resizeRect=null;d.resizePrimitive=null}}function R(e,t){var i=e.parentId,o=!1;if(i){if(!t&&f(i)||c(i))return!0;var a=n[i]||r[i];a&&a.parentId&&(o=R(a,!1))}i=e.id;var u=t&&l.has(i)||I.has(i)||h(i),s=!t&&f(i),d=!t&&c(i);return o||!u&&(s||d)}function T(e){M=!1;var r,i,u,s=[],l=!1,c=!!e._combo&&e._combo.open,d=!(!e.parentId&&!c);A.isOpenCombo=c;A.isInBackground=!!e.bg;A.isSelected=f(e.id);A.isInCombo=!!e.parentId;if(I.has(e.id)||h(e.id)){A.isRevealed=!0;I.add(e.id);s.push(Zi.REVEALED)}else A.isRevealed=!1;if(d){var v=t.privateGetAncestryIds(e.id);s.push(Zi.COMBOS);r=!1;for(var g=0;g<v.length-1;g++){var p=v[g];s.push(o.createComboSegment(p));var m=n[p];r||(r=m&&m._combo&&R(m,!1));if(!A.isRevealed&&!i&&(i=I.has(p)||h(p))){A.isRevealed=!0;I.add(e.id);s.unshift(Zi.REVEALED)}}A.isParentTransient=!!r;A.isParentRevealed=!!i;c&&s.push(o.createComboSegment(e.id))}else{s.push(Zi.MAIN);A.isParentTransient=!1;A.isParentRevealed=!1}A.isRevealed||(l=R(e,!1)&&(!qi(e)||d))&&s.unshift(Zi.TRANSIENT);A.isTransient=l;o.startGeneratingFor(e,M,A.isInCombo||A.isOpenCombo);if(c)u=Zi.COMBO_CONTAINER;else{u=qi(e)?Zi.SHAPES:Zi.NODES;s.push(e.bg?Zi.BG:Zi.FG)}d&&!o.hasPath(s)&&o.createItemLayersAt(s);o.setLayerPath(s);o.setLayer(u);C(a,o,e,n,A)}function L(e){M=!1;var i,u,s,c=[],d=!1,g=e.parentId&&(e._combo||n[e.parentId]),p=e.parentId&&r[e.parentId];A.isInBackground=e.bg||!1;A.isSelected=f(e.id);A.isInCombo=!!e.parentId;A.isRevealed=l.has(e.id)||h(e.id)||I.has(e.parentId);if(!A.isRevealed)if(s=R(e,!0)){c.push(Zi.TRANSIENT);A.isTransient=!0}else A.isTransient=!1;o.startGeneratingFor(e,M,A.isInCombo);i=n[e.id1];u=n[e.id2];if(A.isRevealed){i=t.privateFirstVisibleItemInAncestry(e.id1);u=t.privateFirstVisibleItemInAncestry(e.id2);if(!i||!u||i===u&&i!==n[e.id1])return;c.push(Zi.REVEALED)}if(g){for(var m=t.privateGetAncestryIds(e.id),y=[],b=p?2:1,x=0;x<m.length-b;x++){var E=m[x];y.push(o.createComboSegment(E));if(!s){var C=n[E];d||A.isRevealed||(d=C&&C._combo&&R(C,!1));d&&c.unshift(Zi.TRANSIENT)}}A.isParentTransient=d;if(y.length>0){c.push(Zi.COMBOS);c=c.concat(y);o.hasPath(c)||o.createItemLayersAt(c)}else c.push(Zi.MAIN)}else c.push(Zi.MAIN);c.push(e.bg?Zi.BG:Zi.FG);o.setLayerPath(c);o.setLayer(Zi.LINKS);w(a,o,e,n,i,u,v,A)}function B(e){return e.parentId||s.glyphsAlongLink&&io(e)||e._du}function G(e){var r;A.isInBackground=!!e.bg;A.isSelected=f(e.id);A.isInCombo=!!e.parentId;A.isRevealed=l.has(e.id)||h(e.id)||I.has(e.parentId);if(!A.isRevealed){r=R(e,!0);A.isTransient=r}o.startGeneratingFor(e,!0,A.isInCombo);var i=n[e.id1],a=n[e.id2];if(A.isRevealed){i=t.privateFirstVisibleItemInAncestry(e.id1);a=t.privateFirstVisibleItemInAncestry(e.id2);if(!i||!a||i===a&&i!==n[e.id1])return}y(o,e,n,i,a,v,A)}d.stillDirty.clear();d.easingValue=e.atanEasing(Date.now()%1e3/1e3);d.unzoom=u.getUnzoom();function Z(e){var t=r[e];B(t)?L(t):G(t)}if(i.allDirty){o.removeAllItems();d.alwaysRedraw=!1;x=Object.keys(n);b=Object.keys(r);for(p=0,m=x.length;p<m;p++)T(n[x[p]]);for(p=0,m=b.length;p<m;p++)L(r[b[p]])}else{var O=[],F=[],z=function(e,t){var i=n[t];if(i)if(i.parentId||i._combo)T(i);else if(1===e)if(i.parentId){var a=E(i,n);o.setNodeAnchorPosition(i,a.x,a.y)}else o.setNodeAnchorPosition(i,i.x,i.y);else T(i);else if(r[t])2===e?O.push(t):F.push(t);else{M=!1;o.removeItem(t)}};i.dirty.forEach(z);if(i.allLinksMoved)for(p=0,m=(b=Object.keys(r)).length;p<m;p++)Z(b[p]);else if(i.allLinksDirty){d.alwaysRedraw=!1;for(p=0,m=(b=Object.keys(r)).length;p<m;p++)L(r[b[p]])}else{O.forEach(function(e){L(r[e])});F.forEach(Z)}}return{stillDirty:d.stillDirty,rebuildAll:d.useSlowPathRendering||!M}}function Z(e,t,n,r){var i=e.getLayerPath();e.setLayerPath(null);e.startGeneratingForExtras();e.setLayer(Zi.HANDLES);if(d.resizeRect&&1===r.size){zn(e,t,n,d.resizeRect,1,d.resizeRect.id,v(),o);zn(e,t,n,d.resizeRect,4,d.resizeRect.id,Pt.transparent,o)}e.setLayerPath(i)}return{animated:L,contains:R,currentArrowLength:m,editColour:v,fontSize:i,generate:G,generateHandles:Z,getAlwaysRedraw:B,getResizePrimitive:T,setOptions:p,setSpecialOptions:h}}var Pa,Wa=1e-6,Xa=2.2e-16;function Na(e){return"number"==typeof e&&isFinite(e)}function Ua(e){return Na(e)&&(0|e)===e}function Ka(e,t){return Math.sqrt(e*e+t*t)}function ja(e,t,n,r){return Ka(e-n,t-r)}function Ha(e,t){return Math.round(e/t)*t}function _a(e,t){return Math.ceil(e/t)*t}function Qa(e,t,n){return e<t?t:e>n?n:e}function Ja(e,t,n){return n*e+(1-n)*t}function qa(e,t,n){var r=t-e;return r>Xa?(n-e)/r:0}function $a(e,t,n,r,i,o){return e+(t-e)/(1+Math.pow(i*Math.E,-r*(o-n)))}!function(e){e.randMax=2147483647;function t(t){void 0===t&&(t=1);var n=Math.round(t)%e.randMax,r=48271,i=e.randMax/r,o=e.randMax%r;return function(){var t=r*(n%i|0)-o*(n/i|0);return(n=t>0?t:t+e.randMax)-1}}e.createPRNGi32=t;function n(n,r,i){void 0===n&&(n=1);void 0===r&&(r=0);void 0===i&&(i=1);var o=i-r,a=t(n);return function(){return r+o*(a()/e.randMax)}}e.createPRNG=n;function r(e,t,r){void 0===e&&(e=0);void 0===t&&(t=1);return r?n(r,e,t):function(){return e+(t-e)*Math.random()}}e.createRNG=r;function i(e,t,n){void 0===e&&(e=0);void 0===t&&(t=1);void 0===n&&(n=Math.random);var r=-1,i=!1;return function(){if(i){i=!1;return e+t*r}var o,a,u;do{u=(o=2*n()-1)*o+(a=2*n()-1)*a}while(u>=1||0===u);var s=Math.sqrt(-2*Math.log(u)/u);r=a*s;i=!0;return e+t*o*s}}e.createGaussianRNG=i}(Pa||(Pa={}));var eu;function tu(e,t){Object.setPrototypeOf(e,t);function n(){this.constructor=e}if(null!==t){n.prototype=t.prototype;e.prototype=new n}else e.prototype=Object.create(e)}!function(e){function t(e){return 0===e.size||(0|e.begin)===e.begin&&(0|e.end)===e.end&&e.end>=e.begin&&e.end-e.begin+1===e.size}e.isContiguous=t;function n(e,t){return e.size>0&&e.begin<=t&&e.end>=t}e.isWithin=n;function r(e){if(!t(e))throw new Error("non-contiguous Keyspace")}e.ensureContiguous=r;function i(e){return e>0?{size:e,begin:0,end:e-1}:{size:e,begin:-1,end:-1}}e.fromSize=i}(eu||(eu={}));function nu(e,t,n){for(var r=Object.keys(t||{}),i=0;i<r.length;i++){var o=r[i],a=e[o],u=t[o];void 0===a?e[o]=u:n&&ru(a)&&nu(a,u,n)}return e}function ru(e){return e&&"object"==typeof e&&!Array.isArray(e)}function iu(e,t,n){return e.indexOf(t)>=0?t:n}function ou(e){return e}function au(e){var t,n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(!n){n=!0;t=e.apply(this,r)}return t}}function uu(){return{next:function(){return Au},size:0}}function su(e){var t={value:e,done:!1};return{next:function(){var e=t;t=Au;return e},size:1}}function fu(e,t){var n=0,r={value:null,done:!1},i={next:function(){var i=e.next();i.done?r.done=!0:r.value=t(i.value,n++);return r},size:0};"size"in e&&(i.size=e.size);return i}function lu(e,t){for(var n=0,r=e.next();!r.done;n++,e.next())t(r.value,n)}function cu(e,t){var n=uu(),r=0;return{next:function(){for(var i=n.next();i.done;){var o=e.next();if(o.done)break;i=(n=t(o.value,r++)).next()}return i}}}function du(e,t,n){for(var r=e.next(),i=0;!r.done;r=e.next(),i++)n=t(n,r.value,i);return n}function hu(e){eu.ensureContiguous(e);if(e.size<=0)return uu();var t={value:e.begin-1,done:!1};return{size:e.size,next:function(){++t.value>e.end&&(t.done=!0);return t}}}function vu(e,t){return void 0!==t?gu(e,t):pu(e)}function gu(e,t){var n={value:null,done:!1,i:-1};return{next:function(){n.i++;n.i<e.length?n.value=t(e[n.i],n.i):n.done=!0;return n},size:e.length}}function pu(e){var t={value:null,done:!1,i:-1};return{next:function(){t.i++;t.i<e.length?t.value=e[t.i]:t.done=!0;return t},size:e.length}}function mu(e,t){void 0===t&&(t=[]);for(var n=e.next();!n.done;n=e.next())t.push(n.value);return t}function yu(e,t){void 0===t&&(t=[null,null]);var n={value:t,done:!1},r={next:function(){var r=e.next();if(r.done){n.done=!0;return n}t[0]=r.value;if((r=e.next()).done){n.done=!0;return n}t[1]=r.value;return n},size:0};"size"in e&&(r.size=Math.floor(e.size/2));return r}function bu(e,t){for(var n=e.next();!n.done;n=e.next())t=n.value;return t}function xu(e,t){var n=e.next();return n.done?t:n.value}function wu(e,t){return{next:function(){return e.next()},size:t}}var Au={value:null,done:!0},Mu={empty:uu,single:su,map:fu,forEach:lu,flatMap:cu,reduce:du,fromKeySpace:hu,fromArray:vu,toArray:mu,pairs:yu,last:bu,first:xu,withSize:wu};function Iu(e){return e.buffer&&e.buffer instanceof ArrayBuffer}function Eu(e,t){for(var n=0;n<e.length;n++)e[n]=t}function Cu(e,t){return e<t}function Su(e,t,n){var r=e[t];e[t]=e[n];e[n]=r}function ku(e,t,n,r,i){void 0===n&&(n=Cu);void 0===r&&(r=0);void 0===i&&(i=e.length-r);for(var o,a=0;i>0;){o=0|r;if(n(e[o+=a=i/2|0],t)){r=++o;i-=a+1}else i=a}return r}function Ru(e,t){void 0===t&&(t=0);for(var n=t,r=0,i=e.length;r<i;r++)e[r]=n++}function Tu(e,t){for(var n=0;n<t.length;n++)if(t[n]<0)t[n]=~t[n];else for(var r=n,i=t[n];i!==n;){Su(e,r,i);i=t[r=i];t[r]=~i}}var Lu,Bu=function(){function e(e,t,n,r,i,o){void 0===r&&(r=Lu.sizeFromShape(e));void 0===i&&(i=0);void 0===o&&(o=Lu.computeStrides(e));this.shape=e;this.dtype=t;this.values=n;this.size=r;this.offset=i;this.strides=o;this.rank=this.shape.length;this.lastIndex=Lu.lastIndex(this);this.lastStride=this.strides[this.rank-1];this.contiguous=this.lastIndex-i==r-1}e.prototype.getNextIndex=function(e){return e<0?this.offset:(e+=this.lastStride)>this.lastIndex?-1:e};return e}(),Gu=function(e){tu(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.rankType=0;return t}t.prototype.get=function(){return this.values[this.index()]};t.prototype.set=function(e){this.values[this.index()]=e};t.prototype.index=function(){return 0|this.offset};return t}(Bu),Zu=function(e){tu(t,e);function t(t,n,r,i,o,a){var u=e.call(this,t,n,r,i,o,a)||this;u.rankType=1;u.stride0=u.strides[0];return u}t.prototype.get=function(e){return this.values[this.index(e)]};t.prototype.set=function(e,t){this.values[this.index(e)]=t};t.prototype.index=function(e){return this.offset+e*this.stride0|0};return t}(Bu),Ou=function(e){tu(t,e);function t(t,n,r,i,o,a){var u=e.call(this,t,n,r,i,o,a)||this;u.rankType=2;u.stride0=u.strides[0];u.stride1=u.strides[1];return u}t.prototype.get=function(e,t){return this.values[this.index(e,t)]};t.prototype.set=function(e,t,n){this.values[this.index(e,t)]=n};t.prototype.index=function(e,t){return this.offset+e*this.stride0+t*this.stride1|0};return t}(Bu),Fu=function(e){tu(t,e);function t(t,n,r,i,o,a){var u=e.call(this,t,n,r,i,o,a)||this;u.rankType=3;u.stride0=u.strides[0];u.stride1=u.strides[1];u.stride2=u.strides[2];return u}t.prototype.get=function(e,t,n){return this.values[this.index(e,t,n)]};t.prototype.set=function(e,t,n,r){this.values[this.index(e,t,n)]=r};t.prototype.index=function(e,t,n){return this.offset+e*this.stride0+t*this.stride1+n*this.stride2|0};return t}(Bu);function zu(e,t,n){null==t&&(t=Lu.inferShape(e));null==n&&(n=Lu.inferDType(e,"f32"));var r=Iu(e)||Array.isArray(e)?e:[e],i=Lu.asTypedArray(r,n);return new(Lu.getViewCtor(t.length))(t,n,i)}function Du(e,t,n){void 0===t&&(t="f32");var r=Lu.sizeFromShape(e),i=Yu(t,r,n);return new(Lu.getViewCtor(e.length))(e,t,i,r)}function Yu(e,t,n){var r;switch(e){case"f64":r=new Float64Array(t);break;case"f32":r=new Float32Array(t);break;case"i32":r=new Int32Array(t);break;default:Lu.throwUnknownDType(e)}void 0!==n&&Eu(r,n);return r}function Vu(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=[],i=[],o=e.offset,a=0,u=t.length;a<u;a++){var s=e.strides[a];if(Ua(t[a]))o+=s*t[a];else{i.push(e.shape[a]);r.push(s)}}return new(Lu.getViewCtor(i.length))(i,e.dtype,e.values,Lu.sizeFromShape(i),o,r)}function Pu(e,t){void 0===t&&(t=0);for(var n=e.rank,r=e.shape,i=[],o=0;o<n;o++)i.push("all");var a=[];for(o=0;o<r[t];o++){i[t]=o;var u=[e].concat(i);a.push(Vu.apply(null,u))}return a}function Wu(e,t,n,r){var i=Lu.getViewCtor(e.rank),o=t.length;void 0!==r?o=Math.min(r.length,o):r=Yu(e.dtype,o);switch(e.rank){case 0:r[0]=e.get();return new i([1],e.dtype,r);case 1:for(var a=0;a<o;a++){var u=e.get(t[a]);r[a]=u}return new i([o],e.dtype,r)}throw new Error("Rank not impl")}function Xu(e,t){for(var n=-1,r=e.values;(n=e.getNextIndex(n))>=0;)r[n]=t}function Nu(e,t){void 0===t&&(t=[0,0]);for(var n=Number.MAX_VALUE,r=Number.MIN_VALUE,i=-1,o=e.values;(i=e.getNextIndex(i))>=0;){o[i]>r&&(r=o[i]);o[i]<n&&(n=o[i])}t[0]=n;t[1]=r;return t}function Uu(e,t){for(var n=-1,r=e.values;(n=e.getNextIndex(n))>=0;)r[n]/=t}function Ku(e){return ju(e)[1]}function ju(e,t){void 0===t&&(t=0);var n=e.size;if(0===n)return[NaN,NaN];for(var r=0,i=0,o=1,a=e.values,u=-1;(u=e.getNextIndex(u))>=0;){var s=a[u],f=r;i+=(s-(r+=(s-r)/o))*(s-f);o++}return n>1?[Math.sqrt(i/(e.size-t)),r]:[0,r]}!function(e){function t(e){switch(e){case 0:return Gu;case 1:return Zu;case 2:return Ou;case 3:return Fu}throw new Error(e+" views not implemented")}e.getViewCtor=t;function n(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}e.sizeFromShape=n;function r(e){for(var t=e.rank,n=e.offset,r=0;r<t;r++)n+=e.strides[r]*(e.shape[r]-1);return n}e.lastIndex=r;function i(e){throw new Error("Unknown data type "+e)}e.throwUnknownDType=i;function o(e,t){void 0===t&&(t=[]);if(Array.isArray(e))for(var n=0,r=e;n<r.length;n++){o(r[n],t)}else t.push(e);return t}function a(e){var t=e.length,n=new Array(t);n[t-1]=1;for(var r=t-2;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}e.computeStrides=a;function u(e){if(Iu(e))return[e.length];if(!Array.isArray(e))return[];for(var t=[];e instanceof Array;){t.push(e.length);e=e[0]}return t}e.inferShape=u;function s(e,t){return e instanceof Float32Array?"f32":e instanceof Int32Array?"i32":e instanceof Float64Array?"f64":t}e.inferDType=s;function f(e,t){return s(e)===t?e:l(Array.isArray(e)?o(e):e,t)}e.asTypedArray=f;function l(e,t){switch(t){case"f32":return new Float32Array(e);case"i32":return new Int32Array(e);case"f64":return new Float64Array(e)}i(t);return null}e.copyToTypedArray=l}(Lu||(Lu={}));var Hu;!function(e){function t(e){return o(e.tl.x,e.br.x,e.tl.y,e.br.y)}e.copy=t;function n(e,t){t.tl.x=e.tl.x;t.tl.y=e.tl.y;t.br.x=e.br.x;t.br.y=e.br.y}e.copyTo=n;function r(e){return e.br.x-e.tl.x}e.width=r;function i(e){return e.br.y-e.tl.y}e.height=i;function o(e,t,n,r){if(e>t){var i=t;t=e;e=i}if(n>r){i=r;r=n;n=i}return{tl:{x:e,y:n},br:{x:t,y:r}}}e.create=o;function a(e,t,n){var o=r(e),a=i(e);e.tl.x=t;e.tl.y=n;e.br.x=t+o;e.br.y=n+a}e.moveTo=a;function u(e,t){void 0===t&&(t={x:0,y:0});t.x=e.tl.x+.5*(e.br.x-e.tl.x);t.y=e.tl.y+.5*(e.br.y-e.tl.y);return t}e.center=u;function s(e,t){return e.tl.x===t.tl.x&&e.tl.y===t.tl.y&&e.br.x===t.br.x&&e.br.y===t.br.y}e.equals=s;function f(e,t,n,r){return!(t+r>e.br.x||t-r<e.tl.x||n+r>e.br.y||n-r<e.tl.y)}e.contains=f;function l(e,t){return f(e,t.x,t.y,0)}e.containsPoint=l;function c(e,t,n){var o=.5*(t-r(e)),a=.5*(n-i(e));e.tl.x-=o;e.tl.y-=a;e.br.x+=o;e.br.y+=a}e.resize=c;function d(e,t,n){c(e,r(e)*t,i(e)*n)}e.scale=d;function h(e,t){return e.tl.x<t.br.x&&e.br.x>t.tl.x&&e.tl.y<t.br.y&&e.br.y>t.tl.y}e.intersects=h;function v(e,t){return o(Math.min(e.tl.x,t.tl.x),Math.max(e.br.x,t.br.x),Math.min(e.tl.y,t.tl.y),Math.max(e.br.y,t.br.y))}e.union=v}(Hu||(Hu={}));var _u=function(){function e(e,t,n,r){this.parentIdx=e;this.quad=t;this.beginIdx=n;this.endIdx=r;this.firstChild=-1}return e}();function Qu(e,t,n,r,i){var o=r-n+1;return o<=0?-1:1===o?t[e[n]]<=i?n:-1:ku(e,i,function(e,n){return t[e]<=n},n,o)-1}var Ju=new Uint32Array([1431655765,858993459,252645135,16711935]);function qu(e,t){e=((e=((e=((e=(e|e<<8)&Ju[3])|e<<4)&Ju[2])|e<<2)&Ju[1])|e<<1)&Ju[0];t=((t=((t=((t=(t|t<<8)&Ju[3])|t<<4)&Ju[2])|t<<2)&Ju[1])|t<<1)&Ju[0];return(e|(t<<=1))>>>0}var $u=function(){function e(e,t){void 0===t&&(t=2);this.maxDepth=e;this.splitThreshold=t;this.N=0;this.aabb=Hu.create(0,1,0,1);this.zorder=null;this.tree=[];this.path=new es(this.tree,this.aabb)}e.prototype.build=function(t,n,r){var i=t.size,o=this.zorder;if(void 0!==r)this.aabb=Hu.copy(r);else{var a=Nu(t),u=a[0],s=a[1],f=Nu(n),l=f[0],c=f[1];this.aabb=r=Hu.create(u,s,l,c)}null!==o&&o.length===i||Ru(o=this.zorder=new Int32Array(i));for(var d=Hu.width(r),h=Hu.height(r),v=new Uint32Array(i),g=d>0?65535/d:0,p=h>0?65535/h:0,m=r.tl.x,y=r.tl.y,b=function(e,t){return qu((e-m)*g>>>0,(t-y)*p>>>0)},x=0;x<i;){var w=o[x],A=t.get(w),M=n.get(w);if(Hu.contains(r,A,M,0)){v[w]=b(A,M);x++}else Su(o,x,--i)}this.N=i;void 0===this.maxDepth&&(this.maxDepth=Qa(Math.ceil(Math.log(i+1)),1,e.MAX_DEPTH));var I=o.subarray(0,this.N);Array.prototype.sort.call(I,function(e,t){return v[e]-v[t]});this.buildTree(r,I,v,this.maxDepth,this.splitThreshold,b)};e.prototype.buildTree=function(t,n,r,i,o,a){var u=n.length,s={x:0,y:0},f=Hu.copy(t),l=this.tree,c=this.path;l.length=0;l.push(new _u(-1,-1,0,u-1));c.resize(f);for(var d=0;d>=0;){var h=l[d];if(h.firstChild<0&&h.endIdx-h.beginIdx>=o-1&&c.depth<i){c.copyTo(f);Hu.center(f,s);var v=a(s.x,s.y),g=a(f.br.x,s.y),p=a(s.x,f.br.y),m=h.beginIdx,y=h.endIdx,b=Qu(n,r,m,y,v),x=1/0;if(b>=m){x=l.push(new _u(d,0,m,b))-1;m=b+1}var w=Qu(n,r,m,y,g);if(w>=m){x=Math.min(x,l.push(new _u(d,1,m,w))-1);m=w+1}var A=Qu(n,r,m,y,p);if(A>=m){x=Math.min(x,l.push(new _u(d,2,m,A))-1);m=A+1}y>=m&&(x=Math.min(x,l.push(new _u(d,3,m,y))-1));h.firstChild=x}d=e.nextDFS(l,c,!0)}};e.prototype.traverse=function(){if(null===this.tree||0===this.tree.length)return uu();var t=this.tree,n=Hu.copy(this.aabb),r=new es(this.tree,n),i=0,o={value:null,done:!1};function a(){if(i>=0){var a=t[i];r.copyTo(n);o.value={id:i,aabb:n,count:a.endIdx-a.beginIdx+1};i=e.nextDFS(t,r,!0)}else o.done=!0;return o}return{next:a,size:t.length}};e.nextDFS=function(e,t,n){var r=t.currentIdx,i=n?e[r].firstChild:-1;if(i>=0){t.descend(i);return i}var o=e.length;r=e[r].parentIdx;for(;r>=0;){if((i=t.pop()+1)<o&&e[i].parentIdx===r){t.descend(i);return i}r=e[r].parentIdx}return-1};e.MAX_DEPTH=15;return e}(),es=function(){function e(e,t){this.tree=e;this.path=new Int32Array($u.MAX_DEPTH);this.resize(t)}e.prototype.resize=function(e){this.cxcy0=Hu.center(e);this.w0=Hu.width(e);this.h0=Hu.height(e);this.hypot0=Ka(this.w0,this.h0);this.reset()};e.prototype.reset=function(){this.hypot=this.hypot0;this.currentIdx=0;this.depth=0};e.prototype.descend=function(e){this.hypot*=.5;this.path[++this.depth]=e;this.currentIdx=e};e.prototype.pop=function(){this.hypot*=2;var e=this.depth--,t=this.path[e];this.currentIdx=this.path[e-1];return t};e.prototype.copyTo=function(e){for(var t=e.tl,n=e.br,r=this.w0,i=this.h0,o=this.cxcy0,a=o.x,u=o.y,s=0,f=this.depth,l=this.tree,c=this.path;s<=f;s++){r*=.5;i*=.5;switch(l[c[s]].quad){case 0:a-=r;u-=i;break;case 1:a+=r;u-=i;break;case 2:a-=r;u+=i;break;case 3:a+=r;u+=i}}t.x=a-r;t.y=u-i;n.x=a+r;n.y=u+i};return e}();function ts(e,t,n){return e>=t&&e<=n}var ns=function(e){tu(t,e);function t(t,n,r){void 0===t&&(t="f32");var i=e.call(this,n,r)||this;i.dtype=t;i.outboundExpansions=null;return i}t.prototype.buildXYM=function(e,t,n,r){var i=r.length;if(void 0===this.zxs||this.zxs.length<i){this.zxs=Yu(this.dtype,i);this.zys=Yu(this.dtype,i);this.zms=Yu(this.dtype,i)}for(var o=this,a=o.zxs,u=o.zys,s=o.zms,f=0;f<i;f++){var l=r[f];a[f]=e.get(l);u[f]=t.get(l);s[f]=n.get(l)}this.index=r};t.prototype.build=function(t,n,r,i){e.prototype.build.call(this,t,n,r);this.buildXYM(t,n,i,this.zorder);this.computeExpansions()};t.prototype.buildSubset=function(t,n,r,i,o){this.buildXYM(n,r,o,t);e.prototype.build.call(this,zu(this.zxs),zu(this.zys),i);var a=this.zorder;Tu(this.zxs,a);Tu(this.zys,a);Tu(this.zms,a);Tu(t,a)
;this.computeExpansions()};t.prototype.computeExpansions=function(){for(var e=this,t=e.tree,n=e.N,r=e.zxs,i=e.zys,o=e.zms,a=this.outboundExpansions=Du([t.length,3],this.dtype),u=a.values,s=t.length-1,f=n;f>0&&s>=0;s--){var l=t[s];if(!(l.firstChild>=0)){for(var c=0,d=0,h=0,v=l.endIdx;v>=l.beginIdx;v--){var g=o[v];d+=r[v]*g;h+=i[v]*g;c+=g;f--}for(var p=s;p>=0;){u[m=a.index(p,0)]+=d;u[m+1]+=h;u[m+2]+=c;l=t[p=l.parentIdx]}}}for(s=t.length-1;s>=0;s--){var m;g=1/u[(m=a.index(s,0))+2];u[m]*=g;u[m+1]*=g}};t.prototype.runOnPoint=function(e,t,n,r,i,o){void 0===o&&(o=.5);null!==this.outboundExpansions&&0!==this.outboundExpansions.size&&this.runOnPointInternal(e,t,n,r,this.path,i,o,-1)};t.prototype.runOnPoints=function(e,t,n,r){void 0===r&&(r=.5);if(null!==this.outboundExpansions&&0!==this.outboundExpansions.size)for(var i=this,o=i.zxs,a=i.zys,u=i.zms,s=i.N,f=i.index,l=i.path,c=t.values,d=n.values,h=0;h<s;h++){var v={x:0,y:0};this.runOnPointInternal(e,o[h],a[h],u[h],l,v,r,h);var g=f[h];c[t.index(g)]+=v.x;d[n.index(g)]+=v.y}};t.prototype.runOnPointInternal=function(e,t,n,r,i,o,a,u){var s=this,f=s.tree,l=s.zxs,c=s.zys,d=s.zms,h=s.outboundExpansions;i.reset();for(var v=0;v>=0;){var g=f[v],p=g.beginIdx,m=g.endIdx,y=h.get(v,0),b=h.get(v,1);if(!ts(u,p,m)&&i.hypot/ja(t,n,y,b)<a)e(t,n,r,y,b,h.get(v,2),o);else{if(g.firstChild>=0){i.descend(v=g.firstChild);continue}for(;p<=m;){p!==u&&e(t,n,r,l[p],c[p],d[p],o);p++}}v=$u.nextDFS(f,i,!1)}};t.prototype.traverse=function(){var t=this.outboundExpansions;return fu(e.prototype.traverse.call(this),function(e){e.x=t.get(e.id,0);e.y=t.get(e.id,1);e.mass=t.get(e.id,2);return e})};return t}($u),rs={BarnesHut:ns},is={x:0,y:0};function os(e,t){var n=Ka(e,t);return n>Xa?{x:e/n,y:t/n}:{x:e,y:t}}function as(e,t){return e.x*t.x+e.y*t.y}function us(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=n.x-e.x,a=n.y-e.y,u=r*(e.x+t.x)+i*(e.y+t.y),s=o*(e.x+n.x)+a*(e.y+n.y),f=r*(n.y-t.y)-i*(n.x-t.x);if(Math.abs(f)<Xa)return null;var l=(a*u-i*s)*(f=.5/f),c=(r*s-o*u)*f;return{x:l,y:c,rSq:(e.x-l)*(e.x-l)+(e.y-c)*(e.y-c)}}function ss(e){for(var t={tl:{x:1/0,y:1/0},br:{x:-1/0,y:-1/0}},n=e.next();!n.done;){var r=n.value,i=r.x,o=r.y;t.tl.x=Math.min(t.tl.x,i);t.tl.y=Math.min(t.tl.y,o);t.br.x=Math.max(t.br.x,i);t.br.y=Math.max(t.br.y,o);n=e.next()}return t}function fs(e){for(var t={tl:{x:1/0,y:1/0},br:{x:-1/0,y:-1/0}},n=e.next();!n.done;){var r=n.value,i=r.x,o=r.y,a=r.r;t.tl.x=Math.min(t.tl.x,i-a);t.tl.y=Math.min(t.tl.y,o-a);t.br.x=Math.max(t.br.x,i+a);t.br.y=Math.max(t.br.y,o+a);n=e.next()}return t}function ls(e,t){var n=Nu(e),r=n[0],i=n[1],o=Nu(t),a=o[0],u=i-r,s=o[1]-a,f=Math.max(u,s),l=r+.5*u,c=a+.5*s;return[{x:l-1e3*f,y:c-f,r:.1},{x:l,y:c+1e3*f,r:.1},{x:l+1e3*f,y:c-f,r:.1}]}function cs(e,t,n,r,i,o){var a=us(r<0?e[~r]:{x:t.get(r),y:n.get(r)},i<0?e[~i]:{x:t.get(i),y:n.get(i)},o<0?e[~o]:{x:t.get(o),y:n.get(o)});if(null!==a){a.adx=r;a.bdx=i;a.cdx=o}return a}function ds(e){for(var t=0,n=e.length-1,r=n;r>t;){for(var i=e[r],o=e[r-1],a=r-2;a>t;a-=2){var u=e[a],s=e[a-1];if(i===s&&o===u||i===u&&o===s){Su(e,r,n--);Su(e,r-1,n--);Su(e,a,n--);Su(e,a-1,n--);r-=4;break}}if(a<=t){Su(e,r-1,t++);Su(e,r,t++)}}return n+1}function hs(e,t){void 0===t&&(t=[-1,-1]);var n={value:t,done:!1},r=0,i=0,o=-1,a=-1,u=-1;return{next:function(){if(r<e.length||i>0)switch(i){case 0:o=e[r++];a=e[r++];u=e[r++];t[0]=o;t[1]=a;i++;break;case 1:t[1]=u;i++;break;case 2:t[0]=a;i=0}else n.done=!0;return n},size:e.length}}function vs(e,t,n,r,i){var o=new Int32Array(e.size);Ru(o);return gs(o,e,t,n,r,i)}function gs(e,t,n,r,i,o){void 0===i&&(i=0);void 0===o&&(o=Pa.createRNG());var a=r.length,u=-1;do{if((u=ps(e,t,n,r))>=0){if(i--<=0)break;r.length=a;t.set(u,t.get(u)+o());n.set(u,n.get(u)+o())}}while(u>=0);return u}function ps(e,t,n,r){if(t.size<3)return-1;Array.prototype.sort.call(e,function(e,n){return t.get(n)-t.get(e)});for(var i=ls(t,n),o=[cs(i,t,n,-1,-2,-3)],a=-1,u=e.length-1;u>=0;u--){for(var s=e[u],f=[],l=t.get(s),c=n.get(s),d=o.length-1;d>a;){var h=o[d],v=h.x,g=h.y,p=h.rSq,m=h.adx,y=h.bdx,b=h.cdx,x=l-v;if(x>0&&x*x>p)Su(o,++a,d);else{d--;var w=c-g;if(!(x*x+w*w-p>Xa)){f.push(m,y,y,b,b,m);Su(o,d+1,o.length-1);o.pop()}}}for(var A=ds(f);A>0;){var M=cs(i,t,n,f[--A],f[--A],s);if(null===M)return s;o.push(M)}}var I=r.length;for(u=o.length-1;u>=0;u--){var E=o[u];E.adx>=0&&E.bdx>=0&&E.cdx>=0&&r.push(E.adx,E.bdx,E.cdx)}return r.length===I?0:-1}var ms={edgesOf:hs,triangulate:vs,triangulateSubset:gs},ys=function(){function e(e,t){this.xs=[];this.ys=[];this.bins=[];this.xs.push({index:0,size:e});this.ys.push({index:0,size:t});this.bins.push({filled:0,data:[!1]})}e.prototype.rows=function(){return this.ys.length};e.prototype.cols=function(){return this.xs.length};e.prototype.splitRow=function(e,t){for(var n=this,r=n.xs,i=n.ys,o=n.bins,a=i.length,u=i[e].index,s=0;s<r.length;s++)o[s].data.push(o[s].data[u]);var f={index:a,size:t};i.splice(e+1,0,f);return i[e].size-=t};e.prototype.splitColumn=function(e,t){var n=this,r=n.xs,i=n.bins,o=r.length,a=r[e].index;i.push({data:i[a].data.slice(0),filled:i[a].filled});var u={index:o,size:t};r.splice(e+1,0,u);return r[e].size-=t};e.prototype.isEmpty=function(e,t){return!this.bins[this.xs[t].index].data[this.ys[e].index]};e.prototype.totalFilled=function(e){return this.bins[this.xs[e].index].filled};e.prototype.fillRange=function(e,t,n,r){for(var i=this,o=i.xs,a=i.ys,u=i.bins,s=n;s<=r;s++)for(var f=u[o[s].index],l=e;l<=t;l++){f.data[a[l].index]=!0;f.filled+=a[l].size}};e.prototype.width=function(e){return this.xs[e].size};e.prototype.height=function(e){return this.ys[e].size};return e}();function bs(e,t){for(var n=1.2,r=0,i=0,o=0,a=0;a<e.length;a++){var u=Hu.width(e[a]),s=Hu.height(e[a]);r+=u*s*n;i=Math.max(i,u);o=Math.max(o,s)}var f=Math.sqrt(r/t),l=f*t;return Hu.create(0,Math.max(i,l),0,Math.max(o,f))}var xs=function(){function e(e){void 0===e&&(e=Wa);this.tolerance=e}e.prototype.addRectangle=function(e,t,n){for(var r=Hu.height(n),i=Hu.width(n),o=0,a=0,u=0,s=0,f=t.rows(),l=Hu.width(e)-i,c=Hu.height(e);o<=l;)if(ws(e,u,r)>0||c-t.totalFilled(a)<r){o+=t.width(a++);u=0;s=0}else{for(;s<f&&!t.isEmpty(s,a);)u+=t.height(s++);if(s<f&&ws(e,u,r)<=0){if(this.tryToFit(t,s,a,i,r,this.tolerance)){Hu.moveTo(n,e.tl.x+o,e.tl.y+u);return!0}u+=t.height(s++)}}return!1};e.prototype.tryToFit=function(e,t,n,r,i,o){for(var a=e.width(n),u=e.height(t),s=e.cols(),f=e.rows(),l=n,c=t;u<i-o;){if(++c>=f)return!1;u+=e.height(c)}for(;a<r-o;){if(++l>=s)return!1;a+=e.width(l)}for(var d=n;d<=l;d++)for(var h=t;h<=c;h++)if(!e.isEmpty(h,d))return!1;var v=a-r;v>o&&e.splitColumn(l,v);var g=u-i;g>o&&e.splitRow(c,g);e.fillRange(t,c,n,l);return!0};e.prototype.solve=function(e,t){void 0===t&&(t=bs(e,1));for(var n=new ys(Hu.width(t),Hu.height(t)),r=0;r<e.length;r++)if(!this.addRectangle(t,n,e[r])){var i=new Int32Array(e.length-r);Ru(i,r);return{bounds:t,bins:n,unpacked:i}}return{bounds:t,bins:n,unpacked:[]}};return e}();function ws(e,t,n){return n-(Hu.height(e)-t)}var As={DynamicBins:ys,estimateDimensions:bs,Solver:xs};function Ms(e,t){var n={value:null,done:!1},r={value:null,done:!0,group:null};function i(){for(;r.done;){var i=e.next();if(i.done){n.done=!0;return n}t.reset(i.value);r=t.next()}n.value=[r.group,r.value];r=t.next();return n}return{next:i}}function Is(e,t,n){void 0===n&&(n=new Int32Array(t.countVertices()));var r=[],i=t.adjacency();i.reset(e);Eu(n,-1);n[e]=e;function o(){for(;;){var e=i.next();if(e.done){if(!Es(r,i))return e}else if(n[e.value]<0){n[e.value]=e.group;r.push(e.value);return e}}}return{next:o}}function Es(e,t){for(;e.length>0;){var n=e.shift();if(t.reset(n)>0)return!0}return!1}var Cs=function(){function e(e){this.buffer=e}e.wrapArray=function(t){return new e(t)};e.prototype.keySpace=function(){return{begin:0,end:this.buffer.length-1,size:this.buffer.length}};e.prototype.get=function(e){return this.buffer[e]};e.prototype.set=function(e,t){this.buffer[e]=t};return e}(),Ss=function(){function e(e,t){this.ks=e;this.value=t}e.fromSize=function(t,n){return new e(eu.fromSize(t),n)};e.prototype.keySpace=function(){return{size:this.ks.size,begin:this.ks.begin,end:this.ks.end}};e.prototype.get=function(){return this.value};e.prototype.set=function(){};return e}(),ks=function(){function e(e,t){this.buffer=e;this.inverse=t}e.fromValues=function(t){for(var n=[],r={},i=t.next(),o=0;!i.done;){var a=i.value;if(void 0===r[a]){r[a]=o;n.push(a);o++}i=t.next()}return new e(n,r)};e.fromKeyValuePairs=function(t){eu.ensureContiguous(t);for(var n=[],r={},i=t.next();!i.done;){var o=i.value,a=o[0],u=o[1];if(void 0===r[u]){r[u]=a;n.push(u)}i=t.next()}return new e(n,r)};e.prototype.get=function(e){return this.buffer[e]};e.prototype.set=function(e,t){this.buffer[e]=t};e.prototype.getUniqueInverse=function(e){return this.inverse[e]};e.prototype.getInverse=function(e){return su(this.inverse[e])};e.prototype.keySpace=function(){return eu.fromSize(this.buffer.length)};return e}();function Rs(e){eu.ensureContiguous(e.vertexRange());for(var t=e.iterateAdjacentPairs(),n=new Int32Array(e.countVertices()),r=t.next();!r.done;){var i=r.value,o=i[0],a=i[1];n[o]++;n[a]++;r=t.next()}return Cs.wrapArray(n)}function Ts(e,t){void 0===t&&(t=Rs(e));eu.ensureContiguous(e.vertexRange());for(var n=e.countVertices(),r=e.iterateAdjacentPairs(),i=new Float32Array(e.countVertices()),o=r.next();!o.done;){var a=o.value,u=a[0],s=a[1];i[u]+=t.get(s);i[s]+=t.get(u);o=r.next()}for(var f=0;f<n;f++)i[f]/=Math.max(1,t.get(f));return Cs.wrapArray(i)}function Ls(e,t){void 0===t&&(t=0);for(var n=new Int32Array(e.countVertices()),r=bu(Is(t,e,n),t),i=r!==t?bu(Is(r,e,n),r):r,o=0,a=i;a!==r;o++)a=n[a];return{diameter:o,extremes:[r,i]}}function Bs(e,t,n){var r=ks.fromValues(e),i=function(e){return[r.getUniqueInverse(e[0]),r.getUniqueInverse(e[1]),e[2]]},o=n.buildKeyed(fu(t,i),e.size),a=ks.fromKeyValuePairs(o);return{vertexMap:r,edgeMap:a}}function Gs(e){var t=null,n=null;if("function"!=typeof e){t=e.defaultValue;void 0!==e.map&&(n=e.map)}else n=e;return{map:n,defaultValue:t}}function Zs(e,t,n){n=void 0!==n?n:e.size;var r={},i=[];Object.keys(t).forEach(function(e){var o=Gs(t[e]),a=o.map,u=o.defaultValue;if(null!==a){for(var s=[],f=0;f<n;f++)s.push(u);i.push({buffer:s,map:a});r[e]=Cs.wrapArray(s)}else r[e]=Ss.fromSize(n,u)});for(var o=e.next(),a=i.length;!o.done;o=e.next()){var u=o.value,s=u[0],f=u[1];if(s>=0&&s<n)for(var l=0;l<a;l++){var c=i[l];c.buffer[0|s]=c.map(f)}}return r}function Os(e,t){return Object.keys(t).reduce(function(n,r){n[r]=Fs(e,t[r]);return n},{})}function Fs(e,t){var n=Gs(t),r=n.map,i=n.defaultValue;if(null===r)return Ss.fromSize(e,i);for(var o=[],a=0;a<e;a++)o.push(r(a));return Cs.wrapArray(o)}var zs=function(){function e(e,t,n){this.tourStart=e;this.tours=t;this.nTours=n;this.defaultValue=-1}e.prototype.keySpace=function(){return eu.fromSize(this.tourStart.length)};e.prototype.iterateGroups=function(){for(var e=this.tourStart,t=[],n=0,r=this.nTours;r>0;){if(e[n]===n){t.push(n);r--}n++}return vu(t)};e.prototype.iterateGroup=function(e){e=this.tourStart[e];var t=this.tours,n={done:!1,value:e},r=!1;return{next:function(){n.value=e;n.done=r;r||(t[e]>e?e=t[e]:r=!0);return n}}};e.prototype.groupSize=function(e){e=this.tourStart[e];for(var t=1;e<(e=this.tours[e]);)t++;return t};e.prototype.countGroups=function(){return this.nTours};e.prototype.get=function(e){return this.tourStart[e]};e.prototype.set=function(){throw new Error("Readonly")};e.build=function(t){for(var n=t.length,r=new Int32Array(n),i=new Int32Array(n),o=0,a=0;a<n;a++){var u=Ds(t,a,!1),s=void 0;if(u===a){o++;s=a}else s=i[u];t[a]=u;r[s]=a;i[u]=a}return new e(t,r,o)};return e}();function Ds(e,t,n){for(var r=t,i=0;r>=0&&e[r]!==r;){r=e[r];i++}if(n)for(var o=void 0;i>1;){o=t;t=e[t];e[o]=r;i--}return r}function Ys(e){eu.ensureContiguous(e.vertexRange());return Vs(e.iterateAdjacentPairs(!1),e.countVertices())}function Vs(e,t){var n=new Int32Array(t);Ru(n,0);for(var r=e.next();!r.done;r=e.next()){var i=r.value,o=i[0],a=i[1],u=Ds(n,o,!0),s=Ds(n,a,!0);u>s?n[u]=s:u<s&&(n[s]=u)}return zs.build(n)}function Ps(e){var t=e.countVertices(),n=new Int32Array(t);return zs.build(n)}var Ws=-1;function Xs(e,t,n){var r=t.begin,i=t.size,o=t.end,a={done:!1,value:n},u=0;return{next:function(){if(r<=o){n[0]=e[u++];n[1]=e[u++];n[2]=r++}else a.done=!0;return a},size:i}}function Ns(e,t,n,r){var i=t.begin,o=t.size,a=t.end,u={done:!1,value:r},s=0;return{next:function(){for(;i<=a;){var t=e[s++],n=e[s++];if(t!==Ws&&n!==Ws){r[0]=t;r[1]=n;r[2]=i++;return u}i++}u.done=!0;return u},size:o-n}}var Us=function(){function e(e,t,n){void 0===e&&(e="d");void 0===t&&(t=!1);void 0===n&&(n=!1);this.directedCategory=e;this.selfLoops=t;this.rewriteEdges=n;this.badIncidence=0;this.initialize(0,0)}e.prototype.rawPairs=function(){return this.pairs};e.prototype.iterateEdges=function(){return hu(this.edges)};e.prototype.iterateVertices=function(){return hu(this.vertices)};e.prototype.countVertices=function(){return this.vertices.size};e.prototype.countEdges=function(){return this.edges.size};e.prototype.countInvalidIncidence=function(){null===this.buffers&&this.buildAdjacency();return this.badIncidence};e.prototype.vertexRange=function(){return this.vertices};e.prototype.edgeRange=function(){return this.edges};e.prototype.source=function(e){return e>=this.edges.begin&&e<=this.edges.end?this.pairs[2*e]:Ws};e.prototype.target=function(e){return e>=this.edges.begin&&e<=this.edges.end?this.pairs[2*e+1]:Ws};e.prototype.containsEdge=function(e){return eu.isWithin(this.edges,e)};e.prototype.containsVertex=function(e){return eu.isWithin(this.vertices,e)};e.prototype.incidence=function(){null===this.buffers&&this.buildAdjacency();return Ks(this.bufferIndex,this.buffers.incidence)};e.prototype.adjacency=function(){null===this.buffers&&this.buildAdjacency();return Ks(this.bufferIndex,this.buffers.adjacency)};e.prototype.iterateAdjacentPairs=function(e,t){void 0===t&&(t=[-1,-1,-1]);return 0===this.countEdges()?uu():!e&&this.badIncidence>0?Ns(this.pairs,this.edgeRange(),this.badIncidence,t):Xs(this.pairs,this.edgeRange(),t)};e.prototype.isAdjacent=function(e,t){throw new Error("not impl")};e.prototype.isIncident=function(e,t){throw new Error("not impl")};e.prototype.insertEdge=function(e,t){var n=t[0],r=t[1],i=2*e;if(eu.isWithin(this.vertices,n)&&eu.isWithin(this.vertices,r)&&(this.selfLoops||n!==r)){this.pairs[i]=n;this.pairs[i+1]=r;this.bufferIndex[n]++;this.bufferIndex[r]++}else{this.badIncidence++;this.pairs[i]=Ws;this.pairs[i+1]=Ws}};e.prototype.buildAdjacency=function(){for(var e=this.pairs,t=this.bufferIndex,n=this.rewriteEdges,r="d"===this.directedCategory,i=this.countVertices(),o=0;o<e.length;o+=2)if(e[o]!==Ws){n&&t[e[o]]<t[e[o+1]]&&Su(e,o,o+1);r&&t[e[o+1]]--}var a=0;for(o=0;o<i;o++){var u=t[o];t[o]=a;a+=u}t[i]=a;this.buffers=js(a);var s=Hs(e,t,this.buffers,r);if(s>0){var f=this.buffers,l=f.adjacency,c=f.incidence,d=0;for(o=0;o<i;o++){var h=t[o],v=t[o+1];t[o]-=d;for(;h<v;){if(l[h]>=0){l[h-d]=l[h];c[h-d]=c[h]}else d++;h++}}t[i]-=d;this.badIncidence+=s}};e.prototype.buildKeyed=function(e,t){var n=this;this.initialize(t,e.size);var r=0,i={value:[-1,void 0],done:!1},o=function(){var t=e.next();if(t.done)i.done||(i.done=!0);else{n.insertEdge(r,t.value);i.value[0]=r++;i.value[1]=t.value[2]}return i},a=eu.fromSize(e.size);a.next=o;return a};e.prototype.build=function(e,t){this.initialize(t,e.size);for(var n=0,r=e.next();!r.done;r=e.next(),n++)this.insertEdge(n,r.value)};e.prototype.initialize=function(e,t){this.vertices=eu.fromSize(e);this.edges=eu.fromSize(t);this.bufferIndex=Yu("i32",e+1);this.pairs=Yu("i32",2*t,Ws);this.badIncidence=0;this.buffers=null};return e}();function Ks(e,t){var n={done:!1,group:0,value:0},r=e[0],i=e[1];return{reset:function(t){r=e[t];var o=(i=e[t+1])-r;n.group=t;n.done=0===o;return o},next:function(){r>=i?n.done=!0:n.value=t[r++];return n}}}function js(e){return{incidence:Yu("i32",e,Ws),adjacency:Yu("i32",e,Ws)}}function Hs(e,t,n,r){for(var i=0,o=0,a=0;a<e.length;a+=2,o++){var u=e[a],s=e[a+1];if(u!==Ws&&s!==Ws){if(_s(n,t[u],s,o)<0||!r&&_s(n,t[s],u,o)<0){e[a]=Ws;e[a+1]=Ws;i++}}}return i}function _s(e,t,n,r){for(var i=e.adjacency,o=e.incidence;t<i.length;){var a=i[t];if(a===Ws){i[t]=n;o[t]=r;return t}if(a===n)return-1;t++}return-1}var Qs=function(){function e(e){this.parent=e;this.vInv=new Int32Array(e.countVertices());Eu(this.vInv,Ws)}e.prototype.induceAll=function(e){return this.induceFrom(fu(e.iterateGroups(),function(t){return e.iterateGroup(t)}))};e.prototype.induceFrom=function(e){var t=this,n=t.vInv,r=t.parent,i=r.incidence(),o=new Int32Array(r.countEdges()),a=new Int32Array(r.countVertices()),u=0,s=0,f=0,l=0;return fu(e,function(e){l=f;for(;s<u;)n[a[s++]]=Ws;for(var t=e.next();!t.done;t=e.next(),u++){a[u]=t.value;n[t.value]=u-s}for(var c=s;c<u;c++){var d=a[c];i.reset(d);for(var h=i.next();!h.done;h=i.next()){var v=r.target(h.value);d!==v&&n[v]>=0&&(o[f++]=h.value)}}var g={vs:a.subarray(s,u),es:o.subarray(l,f)};return[vu(g.es,function(e){return[n[r.source(e)],n[r.target(e)],e]}),g]})};return e}(),Js={degrees:Rs,avgNeighborDegree:Ts,diameter:Ls,buildFromLabeledIterators:Bs,buildPropertyBagFrom:Zs,buildPropertyBag:Os,buildProperty:Fs,connectedComponents:Ys,connectedComponentsFrom:Vs,all:Ps,StaticPropertyMap:Cs,ConstantPropertyMap:Ss,StaticStringLabelMap:ks,StaticAdjacencyGraph:Us,SubgraphBuilder:Qs,byGroup:Ms,bfs:Is},qs=function(){function e(e,t){void 0===e&&(e=0);void 0===t&&(t=Math.PI/2);this.padding=e;this.rotation=t}e.prototype.apply=function(e,t,n,r){if(t.size<1)return 0;var i=Math.PI,o=t.size,a=new Int32Array(o);Ru(a);Array.prototype.sort.call(a,function(e,t){return r.get(t)-r.get(e)});var u=0,s=0,f=a[u];t.set(f,e.x);n.set(f,e.y);s+=r.get(f)+this.padding;u++;for(;u<o;){var l=this.sizeRing(a,u,r,s,i);if(u+l.n>=o){this.positionRing(e,t,n,r,a,u,2,0,i,s);this.positionRing(e,t,n,r,a,u,1,2*i,2*i,s,-1);break}var c=0;c+=this.positionRing(e,t,n,r,a,u,2,0,i,s);c+=this.positionRing(e,t,n,r,a,u,1,i,2*i,s);s+=2*l.meanRadius+this.padding;u+=c}return s};e.prototype.sizeRing=function(e,t,n,r,i){void 0===i&&(i=2*Math.PI);for(var o=0,a=0;t<e.length;){var u=e[t++];if((i-=2*(n.get(u)+.5*this.padding)/r)<0)break;a+=n.get(u);o++}return{n:o,meanRadius:a/o}};e.prototype.positionRing=function(e,t,n,r,i,o,a,u,s,f,l){void 0===l&&(l=1);for(var c=this.rotation,d=0;o<i.length;){var h=i[o];if(h>=0){var v=r.get(h)+.5*this.padding,g=l*(v/(v+f));if(u+2*g>s)break;t.set(h,e.x+Math.sin(u+g+c)*(v+f));n.set(h,e.y+Math.cos(u+g+c)*(v+f));i[o]=-1;u+=2*g;d++}o+=a}return d};return e}(),$s={bias:function(e,t,n,r,i,o,a){var u=ja(e,t,i.x,i.y),s=ja(n,r,i.x,i.y),f=Math.min(u-o,s-a);return.5*(1+(u-o-(s-a))/(Math.max(u+o,s+a)-f))},calcDisplacement:function(e,t,n){return n*((t-e)/t)}},ef={bias:function(e,t,n,r,i,o,a){return a/(o+a)},calcDisplacement:function(e,t,n){return n*((t-e)/t)}},tf=function(){function e(e,t,n,r){void 0===e&&(e=0);void 0===t&&(t=0);this.padding=e;this.maxPerturbations=t;this.rng=n;this.reduceOverlapsOnly=r;this.packingKernel=r?ef:$s}e.prototype.build=function(e,t,n,r){var i=t.size,o=new Us("u",!1),a=[];if(i>2){var u=vs(t,n,a,this.maxPerturbations,this.rng);if(u>=0)return u;o.build(hs(a),i);var s=this.buildScaffold(o,t,n,r,5*this.padding);if(s.length>0){var f=o.iterateAdjacentPairs(!1),l=cu(vu([f,yu(vu(s))]),function(e){return e}),c=new Us("u",!1);c.build(wu(l,f.size+s.length/2),i);o=c}}else 2===i?o.build(vu([[0,1]]),i):o.build(uu(),i);var d=this.buildTraversalOrder(e,o,t,n);this.constraints={scaffold:o,order:d.order,triangles:a,predecessors:d.predecessors};return-1};e.prototype.buildTraversalOrder=function(e,t,n,r){var i=t.countEdges()-t.countInvalidIncidence(),o=t.countVertices(),a=new Int32Array(o),u=new Int32Array(i);if(o>0&&i>0){for(var s=-1,f=0,l=1/0;f<o;f++){var c=ja(n.get(f),r.get(f),e.x,e.y);if(c<l){s=f;l=c}}for(var d=t.incidence(),h=Is(s,t,a),v=new Int32Array(t.countEdges()),g=0,p={value:s,done:!1};!p.done;p=h.next()){d.reset(p.value);for(var m=d.next();!m.done;m=d.next()){var y=m.value;if(v[y]<1){v[y]=1;u[g++]=y}}}}return{predecessors:a,order:u}};e.prototype.buildScaffold=function(e,t,n,r,i){for(var o=e.countVertices(),a=e.adjacency(),u=e.adjacency(),s=[],f=0;f<o;f++){a.reset(f);for(var l=r.get(f),c=a.next();!c.done;c=a.next()){if(r.get(c.value)<l){u.reset(c.value);for(var d=u.next();!d.done;d=u.next())if(!(d.value<=f)){var h=r.get(d.value);ja(t.get(d.value),n.get(d.value),t.get(f),n.get(f))-(l+h)<i&&s.push(f,d.value)}}}}return s};e.prototype.pack=function(e,t,n,r,i){for(var o=this.constraints.predecessors,a=this.padding,u=t.size,s=0;s<u;s++){var f=o[s],l=t.get(s),c=n.get(s);if(f!==s){var d=Ka(t.get(f)-l,n.get(f)-c),h=r.get(s)+r.get(f)+a;if(d>h){var v=e.x-l,g=e.y-c,p=Ka(v,g);v/=p;g/=p;var m=i*(d-h);t.set(s,l+v*m);n.set(s,c+g*m)}}else{t.set(s,l+(e.x-l)*i);n.set(s,c+(e.y-c)*i)}}};e.prototype.solve=function(e,t,n,r,i,o){o>0&&!this.reduceOverlapsOnly&&this.pack(e,t,n,r,o);var a=this.constraints,u=a.order,s=a.scaffold,f=this,l=f.padding,c=f.packingKernel,d=Math.max(.1*l,Wa),h=0;do{h=0;for(var v=0;v<u.length;v++){var g=u[v],p=s.source(g),m=s.target(g),y=t.get(p),b=n.get(p),x=r.get(p),w=t.get(m),A=n.get(m),M=r.get(m),I=w-y,E=A-b,C=Ka(I,E),S=x+M+l;if(C+d<S){h++;var k=c.bias(y,b,w,A,e,x,M),R=c.calcDisplacement(S,C,.5);I*=R;E*=R;t.set(p,y+k*I);n.set(p,b+k*E);t.set(m,w-(1-k)*I);n.set(m,A-(1-k)*E)}}}while(--i>0&&h>0);return h};return e}(),nf={InterleavingCircles:qs,Solver:tf};function rf(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)<e.r-t.r+Wa}function of(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,u=t.r,s=o-n,f=a-r,l=u-i,c=Math.sqrt(s*s+f*f);return{x:(n+o+s/c*l)/2,y:(r+a+f/c*l)/2,r:(c+i+u)/2}}function af(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,u=t.y,s=t.r,f=n.x,l=n.y,c=n.r,d=2*(r-a),h=2*(i-u),v=2*(s-o),g=r*r+(i*i-o*o-a*a-u*u)+s*s,p=2*(r-f),m=2*(i-l),y=2*(c-o),b=r*r+(i*i-o*o-f*f-l*l)+c*c,x=p*h-d*m,w=(h*b-m*g)/x-r,A=(m*v-h*y)/x,M=(p*g-d*b)/x-i,I=(d*y-p*v)/x,E=A*A+I*I-1,C=2*(w*A+M*I+o),S=w*w+M*M-o*o,k=(-C-Math.sqrt(C*C-4*E*S))/(2*E);return{x:w+A*k+r,y:M+I*k+i,r:k}}function uf(e,t){switch(t.length){case 0:return{x:0,y:0,r:0};case 1:return e[t[0]];case 2:return of(e[t[0]],e[t[1]]);default:var n=af(e[t[0]],e[t[1]],e[t[2]]);if(n.r<0){var r=of(e[t[0]],e[t[1]]),i=of(e[t[0]],e[t[2]]),o=of(e[t[1]],e[t[2]]);n=(n=r.r>i.r?r:i).r>o.r?n:o}return n}}function sf(e){if(0===e.length)return null;for(var t=e.length,n={i:0,prev:null,R:[],c:null};;){var r=n.i,i=n.R,o=n.prev,a=n.c;if(r===t||3===i.length){o.c=uf(e,i);n=o}else if(null===a)n={i:r+1,prev:n,R:i,c:null};else if(rf(a,e[r])){if(null===o)return a;o.c=a;n=o}else n={i:r+1,prev:n,R:i.concat([r]),c:null}}}var ff=function(){function e(e,t){void 0===e&&(e=0);void 0===t&&(t=Pa.createRNG());this.maxPerturbations=e;this.rng=t;this.mesh=new Us("u",!1);this.clusterState=null}Object.defineProperty(e.prototype,"clusters",{get:function(){return null===this.clusterState?null:this.clusterState.cc},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"rejectedEdges",{get:function(){return null===this.clusterState?-1:this.clusterState.rejectedEdges},enumerable:!0,configurable:!0});e.prototype.triangulate=function(e,t,n,r){var i=e.length;if(i<=3){switch(i){case 3:r.push(e[0],e[1],e[2]);case 2:r.push(e[0],e[1],e[0]);case 1:r.push(e[0],e[0],e[0])}return-1}return gs(e,t,n,r,this.maxPerturbations,this.rng)};e.prototype.buildSubsets=function(e,t,n){for(var r=[],i=e.next();!i.done;i=e.next()){var o=this.triangulate(i.value,t,n,r);if(o>=0)return o}this.mesh.build(hs(r),t.size);this.xs=t;this.ys=n;return-1};e.prototype.build=function(e,t){var n=new Int32Array(e.size);Ru(n);return this.buildSubsets(su(n),e,t)};e.prototype.evaluateEdges=function(e,t){for(var n=this,r=n.mesh,i=n.xs,o=n.ys,a=r.countEdges(),u=r.iterateAdjacentPairs(!1),s=new Int32Array(a),f=new Float32Array(a),l=0,c=u.next();!c.done;c=u.next()){var d=c.value,h=d[0],v=d[1],g=d[2],p=t.get(h),m=t.get(v),y=ja(i.get(h),o.get(h),i.get(v),o.get(v))-(p+m);if(y<=Math.min(p,m)*e){f[g]=Math.max(0,y);s[g]=1;l++}}return{filter:s,separations:f,valid:l}};e.prototype.evaluate=function(e,t,n,r){void 0===r&&(r=2);var i=this.evaluateEdges(e,t),o=i.valid,a=i.filter,u=i.separations,s=t.size,f=this.mesh,l=0,c=cf(a,f,s);if(n){for(var d=f.incidence(),h=c.iterateGroups(),v=new Float32Array(o),g=new Int32Array(o),p=h.next();!p.done;p=h.next()){for(var m=Ms(c.iterateGroup(p.value),d),y=0,b=m.next();!b.done;b=m.next()){var x=b.value[1];if(a[x]>0){v[y]=u[x];g[y]=x;a[x]=0;y++}}for(var w=ju(zu(v,[y])),A=w[0],M=w[1]+r*A,I=0;I<y;I++)v[I]<=M?a[g[I]]=1:l++}l>0&&(c=cf(a,f,s))}this.clusterState={rejectedEdges:l,cc:c};return f};e.prototype.describeAll=function(e,t,n){if(null===this.clusterState)return null;for(var r=this.clusterState.cc,i=new Map,o=r.iterateGroups(),a=o.next();!a.done;a=o.next()){var u=mu(r.iterateGroup(a.value)),s=Wu(e,u),f=Wu(t,u),l=Wu(n,u),c=u.length,d={size:c,radius:0,center:{x:Ku(s),y:Ku(f)}};if(1===c)d.radius=l.get(0);else{for(var h=new Float32Array(c),v=d.center,g=v.x,p=v.y,m=0;m<c;m++)h[m]=ja(s.get(m),f.get(m),g,p);var y=Ku(zu(h));d.radius=1.5*y+Ku(l)}i.set(a.value,d)}return i};return e}(),lf=[-1,-1];function cf(e,t,n){return Vs(vu(e,function(e,n){return e>0?[t.source(n),t.target(n)]:lf}),n)}function df(e,t){return new ff(e,t)}var hf={nbody:rs,delaunay:ms,circlePacking:nf,binPacking:As,radialExtents:sf,dbscan:df,LinearQuadTree:$u,get Rect(){return Hu},origin:is,unit:os,dot:as,circleIntersecting:us,pointExtents:ss,circleExtents:fs},vf=function(){function e(e,t,n){this.g=e;this.rng=t;this.scale=n}e.prototype.run=function(e){var t=this,n=e["@@pos2d"],r=e["@@speed"]||Ss.fromSize(this.g.countVertices(),1),i=e["@@group"]||Ps(this.g),o=e["@@radius"],a=e["@@groupCenter"]||Ss.fromSize(this.g.countVertices(),is),u=this,s=u.scale,f=u.rng;lu(i.iterateGroups(),function(e){var u=a.get(e)||is,l="number"==typeof s?s:t.scaleOf(i.iterateGroup(e),o);lu(i.iterateGroup(e),function(e){if(0!==r.get(e)){var t=n.get(e),i=f()*Math.PI*2,o=f()*l;t.x=u.x+Math.cos(i)*o;t.y=u.y+Math.sin(i)*o}})})};e.prototype.scaleOf=function(e,t){var n=.5,r=0,i=0;lu(e,function(e){r+=t.get(e);i++});r/=i;return Math.sqrt(i/n)*r};return e}();function gf(e,t){void 0===t&&(t={});var n=Pa.createRNG(0,1,t.seed);return new vf(e,n,t.scale)}var pf={initialSpeed:.5,speedDecay:.25,maxIterations:50,center:{x:0,y:0},padding:{proportion:0,min:0,max:0},reduceOverlapsOnly:!1,cpIterations:8},mf=function(){function e(e){void 0===e&&(e={});this.opts=e;this.numIterations=0;this.groupState=[];nu(e,pf);this.speed=this.opts.initialSpeed}e.prototype.isComplete=function(){return this.speed<=Wa||this.numIterations>=this.opts.maxIterations};e.prototype.run=function(e){var t=e["@@pos2d"],n=e["@@sparseRadius"]||e["@@radius"],r=e["@@group"],i=e["@@groupSpeed"];if(r&&0!==t.keySpace().size){0===this.numIterations&&(this.speed=this.initInternal(t,n,r,i));this.runSolver();this.offsetGroups(t,r);this.numIterations++;this.numIterations>=.5*this.opts.maxIterations&&(this.speed*=1-this.opts.speedDecay)}else this.speed=0};e.prototype.runSolver=function(){var e=this,t=e.speed,n=e.opts,r=e.solver,i=Pu(e.xyr),o=i[0],a=i[1],u=i[2];if(!(r.build(n.center,o,a,u)<0))throw new Error("packing fail");r.solve(n.center,o,a,u,n.cpIterations,t)};e.prototype.initInternal=function(e,t,n,r){var i=this.opts,o=i.padding,a=i.center,u=i.initialSpeed,s=i.reduceOverlapsOnly,f=n.countGroups(),l=this.groupState,c=this.xyr=Du([3,f],"f32"),d=0;lu(n.iterateGroups(),function(i,a){for(var u=[],s=n.iterateGroup(i),f=s.next();!f.done;){var h=e.get(f.value),v=h.x,g=h.y,p=t.get(f.value);u.push({x:v,y:g,r:p});f=s.next()}var m=sf(u);m.r+=Qa(m.r*o.proportion,o.min,o.max);m.speed=r?r.get(i):1;m.id=i;l.push(m);c.set(0,a,m.x);c.set(1,a,m.y);c.set(2,a,m.r);d=Math.max(d,m.r)});var h=Pa.createPRNG(37,-.01*d,.01*d);this.solver=new tf(0,5,h,s);if(!s){var v=Pu(c),g=v[0],p=v[1],m=v[2];new qs(0).apply(a,g,p,m)}return f>2?u:0};e.prototype.offsetGroups=function(e,t){for(var n=this,r=n.groupState,i=n.xyr,o=0;o<r.length;o++){for(var a=r[o],u=(i.get(0,o)-a.x)*a.speed,s=(i.get(1,o)-a.y)*a.speed,f=t.iterateGroup(a.id),l=f.next();!l.done;){var c=e.get(l.value);c.x+=u;c.y+=s;l=f.next()}a.x+=u;a.y+=s}};return e}();function yf(e){return new mf(e)}var bf={create:yf},xf={aspectRatio:1.33,center:{x:0,y:0},padding:{proportion:0,min:0,max:0}};function wf(e,t){return t+2*Qa(t*e.proportion,e.min,e.max)}function Af(e,t){return e.reduce(function(e,n){var r=.5*(Hu.width(n)+Hu.height(n));return Math.min(e,wf(t,r))},2*t.max)}function Mf(e,t,n){return Math.max(_a(t,n),Ha(e,n))}function If(e,t,n,r){var i=e;if(n&&t>Wa){var o=e/t;i=Qa(Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))*t,e,1.33*e)}var a=Math.max(e+2*r.min,i);return Mf(Math.max(wf(r,e),i),a,t)}var Ef=function(){function e(e){void 0===e&&(e={});this.opts=e;this.groupState=[];this.packingResult=null;this.bounds=null;nu(e,xf)}e.prototype.isComplete=function(){return null!==this.packingResult&&0===this.packingResult.unpacked.length};e.prototype.run=function(e){if(e["@@group"]){var t=e["@@pos2d"],n=e["@@sparseRadius"]||e["@@radius"],r=e["@@group"],i=e["@@groupSpeed"];null===this.bounds?this.bounds=this.initInternal(t,n,r,i):null!==this.packingResult&&this.packingResult.unpacked.length>0&&Hu.scale(this.bounds,1.05,1.05);this.packingResult=this.solver.solve(this.groupState,this.bounds);this.offsetGroups(t,r)}};e.prototype.initInternal=function(e,t,n,r){var i=this.opts,o=i.padding,a=i.aspectRatio,u=mu(fu(n.iterateGroups(),function(i){var o=fs(fu(n.iterateGroup(i),function(n){var r=e.get(n);return{x:r.x,y:r.y,r:t.get(n)}}));o.filter=r&&r.get(i)<Wa;o.cxcy=Hu.center(o);o.id=i;return o}),this.groupState),s=Af(u,o),f=u.length>3;u.forEach(function(e){return Hu.resize(e,If(Hu.width(e),s,f,o),If(Hu.height(e),s,f,o))});this.solver=new xs(.01*o.min);return bs(u,a)};e.prototype.offsetGroups=function(e,t){for(var n=this.groupState,r=0;r<n.length;r++){var i=n[r];if(!i.filter){for(var o=Hu.center(i),a=o.x-i.cxcy.x,u=o.y-i.cxcy.y,s=t.iterateGroup(i.id),f=s.next();!f.done;f=s.next()){var l=e.get(f.value);l.x+=a;l.y+=u}i.cxcy=o}}};return e}();function Cf(e){return new Ef(e)}var Sf={create:Cf},kf=function(){function e(e){this.opts=e;this.pinPoint=null}e.prototype.initialize=function(e){
if(this.opts.pinTo){var t=this.opts.pinTo.vertex,n=e["@@pos2d"];if(eu.isWithin(n.keySpace(),t)){var r=n.get(t),i=r.x,o=r.y;this.pinPoint={x:i,y:o}}}};e.prototype.run=function(e){if(null!==this.pinPoint)for(var t=e["@@pos2d"],n=t.get(this.opts.pinTo.vertex),r=this.pinPoint.x-n.x,i=this.pinPoint.y-n.y,o=0,a=t.keySpace().size;o<a;o++){var u=t.get(o);u.x+=r;u.y+=i}};return e}();function Rf(e){void 0===e&&(e={});return new kf(e)}var Tf={isComplete:function(){return!0},initialize:function(){},run:function(){}},Lf=function(){function e(e){this.layout=e;this.iterations=0}e.prototype.isComplete=function(){return this.iterations>0};e.prototype.initialize=function(e){void 0!==this.layout.initialize&&this.layout.initialize(e)};e.prototype.run=function(e){this.iterations++;return this.layout.run(e)};return e}(),Bf=function(){function e(e){this.layouts=e;this.outputs=[];this.index=0}e.prototype.isComplete=function(){return this.index>=this.layouts.length};e.prototype.initialize=function(e){var t=this;this.layouts.forEach(function(n){var r=n[0];t.outputs.push(null);void 0!==r.initialize&&r.initialize(e)})};e.prototype.run=function(e){for(;!this.isComplete();){var t=this.layouts[this.index][0];if(!t.isComplete()){this.outputs[this.index]=t.run(e);break}this.index++}return this.outputs};e.prototype.getPhase=function(e){return this.layouts.reduce(function(t,n){var r=n[0];n[1]===e&&t.push(r);return t},[])};return e}(),Gf=["rectangle","circle","none"],Zf={packing:"rectangle",packingOptions:{}};function Of(e){switch(iu(Gf,e.packing,Zf.packing)){case"circle":return yf(e.packingOptions);case"rectangle":return Cf(e.packingOptions);case"none":return Tf}}function Ff(e){void 0===e&&(e={});nu(e,Zf,!0);return new Bf([[Of(e),0],[new Lf(Rf(e)),1]])}var zf,Df={create:Ff};!function(e){e.position2d="@@pos2d";e.group="@@group";e.radius="@@radius";e.sparseRadius="@@sparseRadius";e.degree="@@degree";e.avgNeighbourDegree="@@avgDegree";e.speed="@@speed";e.groupSpeed="@@groupSpeed";e.groupCenter="@@groupCenter"}(zf||(zf={}));!function(e){function t(t){switch(t){case e.position2d:case e.radius:case e.sparseRadius:case e.degree:case e.avgNeighbourDegree:case e.group:case e.speed:return{itemType:"v"}}return null}e.describe=t}(zf||(zf={}));var Yf={iterations:{min:void 0,max:150},speed:void 0,liveUpdate:!0,scale:{base:.045,attenuation:0},maxRepulsionBias:25e-5,momentum:{beta1:.9,beta2:.94},clustering:{maxLength:300,epsilon:void 0,reweightSpeed:.05,maxSeparation:void 0},seed:void 0},Vf=function(){function e(e,t){void 0===t&&(t={});this.graph=e;this.numIterations=0;this.activeGroups=-1;this.groups=[];nu(t,Yf,!0);this.opts=t}e.prototype.isComplete=function(){return 0===this.activeGroups};e.prototype.run=function(e){var t;if(0===this.numIterations){var n=this.graph.countVertices(),r=e[zf.degree]||Rs(this.graph);this.initInternal(e[zf.group]||Ps(this.graph),((t={})[zf.position2d]=e[zf.position2d],t[zf.radius]=e[zf.radius],t[zf.sparseRadius]=e[zf.sparseRadius]||e[zf.radius],t[zf.degree]=r,t[zf.avgNeighbourDegree]=Ts(this.graph,r),t[zf.speed]=e[zf.speed]||Ss.fromSize(n,1),t))}this.numIterations++;for(var i=this.groups,o=0;o<this.activeGroups;o++){var a=i[o],u=a.run()>=1;u&&Su(i,o--,--this.activeGroups);if(!u&&!this.opts.liveUpdate)break;a.extractPositions(e[zf.position2d])}};e.prototype.initInternal=function(e,t){var n=this,r=new Qs(this.graph);this.groups=du(r.induceAll(e),function(e,r){var i=r[0],o=r[1],a=o.vs.length;if(a<=1)return e;var u=new Us("u",!1,!0);u.build(i,a);e.push(new Pf(n.opts,u,o,t));return e},[]);this.activeGroups=this.groups.length};e.prototype.iterateEdgeState=function(){return cu(vu(this.groups),function(e){return e.iterateEdgeState()})};e.prototype.iterateVertexState=function(){return cu(vu(this.groups),function(e){return e.iterateVertexState()})};return e}(),Pf=function(){function e(e,t,n,r){this.opts=e;this.subg=t;this.map=n;this.overlappingPairs=null;this.nbodyModel=new ns("f32",14,16);this.vState=ol(t.countVertices());this.eState=al(t.countEdges());this.clustering=df(0);this.initialize(n,t,r)}e.prototype.initialize=function(e,t,n){for(var r=e.vs,i=e.es,o=n[zf.radius],a=n[zf.sparseRadius],u=n[zf.degree],s=n[zf.avgNeighbourDegree],f=n[zf.speed],l=n[zf.position2d],c=r.length,d=i.length,h=this,v=h.eState,g=h.vState,p=h.opts,m=2*d/c,y=0,b=0,x=0,w=0;w<c;w++){var A=r[w],M=u.get(A),I=s.get(A),E=o.get(A),C=Jf(E,a.get(A),M,I),S=Qf(E,M,I,m);x+=Math.pow(M-m,2);b+=Math.log(C);y+=S;var k=l.get(A);g.position.xs.set(w,k.x);g.position.ys.set(w,k.y);g.radius.set(w,E);g.mass.set(w,S);g.speed.set(w,f.get(A))}b=Math.exp(b/c);y/=c;x/=c;var R=d>0?qf(p.scale)*Kf(c,x,m,b):1;Uu(g.mass,y*Math.sqrt(1/R));this.avgRadius=b;for(var T=p.clustering,L=T.maxLength,B=T.reweightSpeed,G=0;G<d;G++){var Z=t.source(G),O=t.target(G),F=jf(g.radius.get(Z),g.radius.get(O),L),z=F[0],D=F[1];v.targetLength.set(G,z);v.maxTargetLength.set(G,D);var Y=u.get(r[Z]),V=u.get(r[O]),P=1===Math.min(Y,V)&&Math.max(Y,V)>2;v.reweightSpeed.set(G,P?0:B)}var W=Ls(t).diameter,X=void 0===p.speed?Hf(d,W,p.scale.attenuation):p.speed,N=void 0===p.iterations.min?Math.min(p.iterations.max,_f(c,W)):p.iterations.max;this.schedule=new Wf(p.momentum,N,p.maxRepulsionBias,X)};e.prototype.run=function(){if(this.schedule.progress>=1)return 1;var e=this.schedule.update();this.setupIteration();this.applyRepulsion();this.applyAttraction();this.applyOverlapRemoval();this.applyDisplacement();return e};e.prototype.setupIteration=function(){for(var e=this.vState,t=e.position,n=e.displacement,r=e.nesterov,i=e.radius,o=t.xs,a=t.ys,u=r.nxs,s=r.nys,f=0,l=o.size;f<l;f++){o.set(f,o.get(f)+u.get(f));a.set(f,a.get(f)+s.get(f))}Xu(n.dxs,0);Xu(n.dys,0);var c=this.schedule.periodicals(),d=c.edgeLengths,h=c.overlapGraph;if((d||h)&&this.clustering.build(o,a)<0){d&&this.calculateEdgeLengths();h&&(this.overlappingPairs=this.clustering.evaluate(.5,i,!1))}};e.prototype.applyAttraction=function(){for(var e=this.vState,t=e.displacement,n=e.position,r=e.nesterov,i=this.eState,o=i.mass,a=i.targetLength,u=i.maxTargetLength,s=i.massIntegral,f=i.reweightSpeed,l=this.subg.rawPairs(),c=t.dxs,d=t.dys,h=r.nxs,v=r.nys,g=n.xs,p=n.ys,m=o.size,y=0,b=0;y<m;y++){var x=l[b++],w=l[b++],A=g.get(w)-g.get(x),M=p.get(w)-p.get(x),I=o.get(y),E=Ka(A,M);if(E>u.get(y)||I>1){var C=il(Ka(g.get(w)+h.get(w)-(g.get(x)+h.get(x)),p.get(w)+v.get(w)-(p.get(x)+v.get(x))),E,u.get(y),s.get(y),I,f.get(y));o.set(y,C.m);s.set(y,C.int);I=C.m}var S=tl(E,I,a.get(y));A*=S;M*=S;c.values[c.index(w)]-=A;d.values[d.index(w)]-=M;c.values[c.index(x)]+=A;d.values[d.index(x)]+=M}};e.prototype.applyRepulsion=function(){var e=this,t=e.schedule,n=e.vState,r=n.position,i=n.displacement,o=n.mass;this.nbodyModel.build(r.xs,r.ys,void 0,o);var a=$f(t.repulsion());this.nbodyModel.runOnPoints(a,i.dxs,i.dys,t.theta())};e.prototype.applyOverlapRemoval=function(){if(null!==this.overlappingPairs)for(var e=this.vState,t=e.displacement,n=e.position,r=e.radius,i=[0,0,0],o=t.dxs,a=t.dys,u=n.xs,s=n.ys,f=this.overlappingPairs.iterateAdjacentPairs(!1,i);!f.next().done;){var l=i[0],c=i[1],d=u.get(c)-u.get(l),h=s.get(c)-s.get(l),v=Ka(d,h),g=r.get(l),p=r.get(c),m=g+p+.1*Math.min(g,p);if(v<m){var y=nl(v,.25,m);d*=y;h*=y;o.values[o.index(c)]-=d;a.values[a.index(c)]-=h;o.values[o.index(l)]+=d;a.values[a.index(l)]+=h}}};e.prototype.applyDisplacement=function(){for(var e=this,t=e.schedule,n=e.vState,r=n.moment,i=r.mxs,o=r.mys,a=n.moment2,u=a.m2xs,s=a.m2ys,f=n.displacement,l=f.dxs,c=f.dys,d=n.position,h=d.xs,v=d.ys,g=n.nesterov,p=g.nxs,m=g.nys,y=t.speed()*this.avgRadius,b=t.momentum(),x=b.beta1,w=b.beta2,A=0,M=h.size;A<M;A++){var I=l.get(A),E=c.get(A),C=Ja(i.get(A),I,x),S=Ja(o.get(A),E,x);i.set(A,C);o.set(A,S);var k=Ja(u.get(A),I*I,w),R=Ja(s.get(A),E*E,w);u.set(A,k);s.set(A,R);var T=y*n.speed.get(A);I=T*(C/(Math.sqrt(k)+1e-4));E=T*(S/(Math.sqrt(R)+1e-4));h.set(A,h.get(A)-p.get(A)+I);v.set(A,v.get(A)-m.get(A)+E);p.set(A,I*x);m.set(A,E*x)}};e.prototype.calculateEdgeLengths=function(){var e=this,t=e.vState,n=t.position,r=t.radius,i=e.eState,o=i.targetLength,a=i.maxTargetLength,u=e.subg,s=e.clustering,f=e.opts.clustering,l=n.xs,c=n.ys,d=f.epsilon||Math.max(5,Math.sqrt(l.size)),h=1;s.evaluate(d,r,!0,2);var v=s.describeAll(l,c,r),g=this.clusters=s.clusters;if(!(g.countGroups()<=1)){for(var p=l.size,m=Du(r.shape,"f32"),y=s.clusters,b=y.iterateGroups(),x=b.next();!x.done;x=b.next()){var w=rl(p,v.get(x.value));lu(y.iterateGroup(x.value),function(e){m.set(e,w+r.get(e))})}s.evaluate(h,m,!1);v=s.describeAll(l,c,r);var A=s.clusters;if(!(A.countGroups()<=1))for(var M=u.rawPairs(),I=0,E=0;E<M.length;I++){var C=M[E++],S=M[E++],k=A.get(C),R=A.get(S);if(g.get(C)!==g.get(S)&&k!==R){var T=Ja(Uf(l,c,r,C,v.get(k),S,v.get(R)),ja(l.get(C),c.get(C),l.get(S),c.get(S)),.75);a.set(I,Math.max(o.get(I),T))}}}};e.prototype.iterateEdgeState=function(){var e=this,t=e.map.es,n=e.eState.mass,r=Nu(n),i=r[0],o=r[1];return fu(this.subg.iterateEdges(),function(e){return ou([t[e],{mass:qa(i,o,n.get(e))}])})};e.prototype.iterateVertexState=function(){var e=this.map.vs,t=this.clusters||{get:function(){return e[0]}};return fu(this.subg.iterateVertices(),function(n){return ou([e[n],{cluster:e[t.get(n)]}])})};e.prototype.extractPositions=function(e){for(var t=this.map.vs,n=this.subg.countVertices(),r=this.vState.position,i=r.xs,o=r.ys,a=0;a<n;a++){var u=e.get(t[a]);u.x=i.get(a);u.y=o.get(a)}};return e}(),Wf=function(){function e(e,t,n,r){this.moments=e;this.maxIterations=t;this.maxRepulsionBias=n;this.targetSpeed=r;this.progress=0;this.iteration=-1}e.prototype.theta=function(){return Nf(5,1.1,0,.9,this.progress,8)};e.prototype.speed=function(){var e=this,t=e.progress,n=e.targetSpeed;return Nf(n,.4*n,.75,1,t)};e.prototype.repulsion=function(){return Nf(0,this.maxRepulsionBias,.5,.9,this.progress,10)};e.prototype.momentum=function(){var e=this,t=e.moments,n=e.iteration;return{beta1:Xf(t.beta1,n),beta2:Xf(t.beta2,n)}};e.prototype.periodicals=function(){var e=this,t=e.iteration;return{edgeLengths:t>0&&t%25==0,overlapGraph:e.progress>=.9&&t%10==0}};e.prototype.update=function(){this.iteration++;return this.progress=Qa((this.iteration+1)/this.maxIterations,0,1)};return e}();function Xf(e,t){return e-Math.pow(e,1+t)}function Nf(e,t,n,r,i,o){void 0===o&&(o=12);return $a(e,t,.5*(r-n),o/(r-n),1,i-n)}function Uf(e,t,n,r,i,o,a){var u=i.radius-ja(i.center.x,i.center.y,e.get(r),t.get(r)),s=a.radius-ja(a.center.x,a.center.y,e.get(o),t.get(o));return n.get(r)+Math.max(0,u)+n.get(o)+Math.max(0,s)}function Kf(e,t,n,r){return Math.sqrt(Math.max(1,t))*Math.pow(n,1+n/e)*Math.pow(r,2)}function jf(e,t,n){var r=Math.min(e,t),i=e+t+1.5*r;return[i,i+r*n]}function Hf(e,t,n){var r=1,i=.02*(e=Math.sqrt(e))+.8*(t=Math.sqrt(t))+.024*e*t;return Math.max(r,i)*(2/(n+2))}function _f(e,t){var n=5,r=Math.log(e),i=Math.log(t/e),o=44.34*r+26.05*i+1.16*r*i;return Math.max(n,o)}function Qf(e,t,n,r){var i=Math.min(t,n)>r||Math.max(t,n)<r?Math.sqrt(t/Math.max(1,r)):1;return e*Math.max(.5,i)}function Jf(e,t,n,r){var i=.9/Math.max(1,Math.pow(Math.min(n,r),.25));return Math.min(2.5*e,Ja(e,t,i))}function qf(e){var t=e.base,n=e.attenuation;return t*Math.pow(20,-1*n)}function $f(e){return function(t,n,r,i,o,a,u){return el(e,t,n,r,i,o,a,u)}}function el(e,t,n,r,i,o,a,u){var s=i-t,f=o-n,l=s*s+f*f,c=l*e,d=r*a/(Xa+l+c*c);u.x-=s*d;u.y-=f*d}function tl(e,t,n){var r=(e-n)/(Xa+e);r>0&&(r*=r*r*t);return r}function nl(e,t,n){return t*((e-n)/(Xa+e))}function rl(e,t){var n=(t.size-1)/e;return(.25+(1-n)/(.06+Math.sqrt(2.5*n))*.15)*t.radius}function il(e,t,n,r,i,o){var a=o*(e-n);r+=2*((a-(t-e))/t);i+=Math.max(0,.005*a)+r;return{m:Math.max(1,i),int:.5*r}}function ol(e){var t=Pu(Du([2,e],"f64")),n=t[0],r=t[1],i=Pu(Du([11,e],"f32")),o=i[0],a=i[1],u=i[2],s=i[3],f=i[4],l=i[5],c=i[6],d=i[7],h=i[8],v=i[9],g=i[10];Xu(f,1);Xu(l,1);Xu(c,1);return{position:{xs:n,ys:r},displacement:{dxs:o,dys:a},nesterov:{nxs:u,nys:s},moment:{mxs:d,mys:h},moment2:{m2xs:v,m2ys:g},mass:f,radius:c,speed:l}}function al(e){var t=Pu(Du([4,e],"f32",1));return{targetLength:t[0],maxTargetLength:t[1],mass:t[2],reweightSpeed:t[3],massIntegral:Du([e],"f64")}}function ul(e,t){return new Vf(e,t)}var sl={defaultOpts:Yf,biasedRepulsionKernel:el,attractionKernel:tl,overlapKernel:nl,clusterSeparationKernel:rl,edgeReweightingKernel:il,create:ul},fl=["random","none"],ll={initialization:"random",initializationOptions:{}},cl=function(e){tu(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.fd=function(){return this.getPhase(1)[0]};return t}(Bf);function dl(e,t){void 0===t&&(t={});nu(t,ll,!0);var n=[],r=t.initializationOptions;if("random"===iu(fl,t.initialization,ll.initialization)){r.seed=t.seed;n.push([new Lf(gf(e,r)),0])}n.push([ul(e,t),1]);n.push([Ff(t),2]);return new cl(n)}var hl,vl={Impl:cl,create:dl},gl=function(){function e(e,t,n){void 0===t&&(t=0);void 0===n&&(n=0);this.layout=e;this.interval=t;this.batchBudget=n;this.timePerIteration=-1}e.prototype.start=function(e,t){this.input=e;this.onComplete=au(t);void 0!==this.layout.initialize&&this.layout.initialize(e);this.nextStep()};e.prototype.nextStep=function(){var e=this;try{var t=this.work(this.batchBudget);this.layout.isComplete()?this.onComplete(void 0,t):setTimeout(function(){return e.nextStep()},this.interval)}catch(e){this.onComplete(e)}};e.prototype.work=function(e){var t,n=this,r=n.layout,i=n.input,o=Date.now(),a=e+o;do{for(var u=this.timePerIteration>0?Math.max(1,Math.ceil(e/this.timePerIteration)):1,s=0;s<u&&!r.isComplete();s++)t=r.run(i);var f=Date.now()-o;o+=f;this.timePerIteration=Math.max(f,.01)/u}while(o<a&&!r.isComplete());return t};return e}();!function(e){e.forceDirected="forcedirected";e.random="random";e.organic="organic";e.diskpacking="diskpacking";e.rectpacking="rectpacking";e.pack="pack"}(hl||(hl={}));function pl(e,t,n){switch(e){case hl.organic:return dl(t,n);case hl.forceDirected:return ul(t,n);case hl.random:return new Lf(gf(t,n));case hl.diskpacking:return yf(n);case hl.rectpacking:return Cf(n);case hl.pack:return Ff(n);default:throw new Error("unknown layout")}}var ml={diskpacking:bf,rectpacking:Sf,pack:Df,get names(){return hl},createLayout:pl,get KnownProperties(){return zf},forceDirected:sl,organic:vl,SetTimeoutRunner:gl,noopLayout:Tf,SyncToAsyncLayout:Lf,PhasedLayout:Bf},yl=function(){function e(e,t,n,r,i){this.nodeList=e;this.edgeList=t;this.staticGraph=n;this.vertexMap=r;this.edgeMap=i}return e}();function bl(e){return Mu.fromArray(e,function(e){return"string"==typeof e?e:e.id})}function xl(e){return Mu.fromArray(e,function(e,t){return[e.id1,e.id2,void 0!==e.id?e.id:t.toString()]})}function wl(e,t){var n=new Js.StaticAdjacencyGraph("u",!1,!0),r=Js.buildFromLabeledIterators(bl(e),xl(t),n);return new yl(e,t,n,r.vertexMap,r.edgeMap)}function Al(e,t){var n=e.edges;if(t){var r=[];Object.keys(e.selfAdjacency).forEach(function(t){var n=e.selfAdjacency[t];r.push({id:n[0],id1:t,id2:t,ids:n})});r.length>0&&(n=n.concat(r))}return wl(Object.keys(e.vertices),n)}var Ml=oe,Il=Da,El=Ya,Cl=3,Sl="_dummy",kl=RegExp("^"+Sl);function Rl(e){return kl.test(e.id)}function Tl(e){var t=b(e)?e:5;t=Math.max(0,t);return t=Math.min(10,t)}function Ll(e){return 10*(5-Tl(e))}function Bl(e,t){var r=V(t)?{}:t,i=20,o=1/0,a=1/0,u=-1/0,s=-1/0;n(e,function(e,t){if(!(t in r)){a=Math.min(a,e.x-e.size);o=Math.min(o,e.y-e.size);u=Math.max(u,e.x+e.size);s=Math.max(s,e.y+e.size)}});return{x:a-=i,y:o-=i,width:(u+=i)-a,height:(s+=i)-o}}function Gl(e,t,r){var i=r||30;n(e,function(e){if(!e.fixed){e.x+=i*(t.next()-.5);e.y+=i*(t.next()-.5)}})}function Zl(e){var t=0,r=0,i=0,o=1/0,a=1/0,u=-1/0,s=-1/0;n(e,function(e){t+=1;r+=e.x;i+=e.y;a=Math.min(a,e.x);o=Math.min(o,e.y);u=Math.max(u,e.x);s=Math.max(s,e.y)});r/=t;i/=t;var f=0,l=!1;n(e,function(e){var t=e.x-r,n=e.y-i,o=Math.sqrt(t*t+n*n);f=Math.max(o+1.5*e.size,f);l=l||e.fixed});return{x:r,y:i,sum:t,size:f,fixed:l,miny:o,minx:a,maxy:s,maxx:u}}function Ol(e){return"number"==typeof e.w&&!m(e.w)&&"number"==typeof e.h&&!m(e.h)}function Fl(e){return!(e.u||e.fi||e.c||e.b||e.w&&e.h)}function zl(e){var t=1/0,r=1/0,i=-1/0,o=-1/0,a=0;n(e,function(e){var n=e.size||0;t=Math.min(t,e.x-n);r=Math.min(r,e.y-n);i=Math.max(i,e.x+n);o=Math.max(o,e.y+n);a++});return{x1:t,y1:r,x2:i,y2:o,c:a}}function Dl(e,t){var n=Mu,r=wl(j(e),t),i=Js.connectedComponents(r.staticGraph),o={},a=r.vertexMap;n.forEach(i.iterateGroups(),function(t,r){var u={};n.forEach(i.iterateGroup(t),function(t){var n=a.get(t),i=e[n];u[n]=i;i.c=r});o[t]={verts:u,edges:[],extents:zl(u),c:r}});for(var u=0;u<t.length;u++){var s=t[u],f=o[i.get(a.getUniqueInverse(s.id1))];f.edges.push(s);s.c=f.c}return j(o)}function Yl(e){var t=0;e.b&&(t=b(e.bw)?e.bw:Il);!e.donut||e._combo&&e._combo.open||(t=e.donut.w+2*e.donut.bw);return t}function Vl(e,t){if(e.t){var n=""+e.t;if(void 0!==t&&n.length>t){n=n.substring(0,Math.max(0,t-3));n+="..."}return n.split(/\r\n|\r|\n/)}return[""]}function Wl(e,t,n,r,i){for(var o=[],a=0;a<e.length;a++)o[a]=_n(t,e[a],n,r,i||"sans-serif").width;return o}function Xl(e){for(var t=0,n=0;n<e.length;n++)t=Math.max(t,e[n]);return t}function Nl(e,t,n,r){var i=0,o=0;if(e.t){var a=(e.fs||vn)*n,u=Cl*n,s=Vl(e,r);i=Xl(Wl(s,t,a,!!e.fb,e.ff));o=(a+u)*s.length}return{width:i,height:o}}function Ul(e,t){return!t&&("boolean"==typeof e.tc?e.tc:!e.w&&(!e.u&&!e.fi))}function Kl(e,t,n,r){var i=0,o=(Cl+(e.fs||vn))*n.e,a=Nl(e,t,n.e,r.maxLength),u=a.width,s=u+(r.padExtents?o:0),f=Fl(e),l=f?Math.max(u/10,El):u,c=a.height,d=Ul(e,n.isOpenCombo),h=f?2*El:n.height,v=Ml(l/2,h/2+c/2);if(r.partial){var g=Math.max(1,u/(4*n.radius))*o,p=Math.min(n.radius+g,u/2);if(d){u/2<=n.radius+o&&(p=u/2);i=Ml(p,c/2)}else i=Math.max(p,(n.height+c)/2)}else i=Ml(u/2,d?c/2:n.height/2+c);return{width:s,height:c,centred:d,distanceToCorner:i,legacyDistToCorner:v}}function jl(e,t,n,r){var i,o,a=0,u=0,s=0,f=0,l=e.e||1,c=Ol(e),d=c&&"circle"===e.sh,h=Fl(e),v=!1;if(e.du)return{radius:10,baseRadius:10,borderSize:10,width:10,height:10};o=Yl(e);e._combo&&(v="boolean"==typeof r?r:e._combo.open);if(v){u=e.oc.w/2;f=s=e.oc.w;a=u+(o=e.oc&&"bw"in e.oc?e.oc.bw:pa.bw)}else if(c){l=1;if(d){var g=Math.min(e.w,e.h);f=s=g+2*o;a=(u=g/2)+o}else{u=Ml(e.w,e.h)/2;s=e.w+2*o;f=e.h+2*o;a=Ml(s,f)/2}}else if(!h){f=s=2*(u=El*l)+2*(o*=l);a="box"===e.sh?Ml(s,f)/2:u+o}if(n.include&&e.t&&e.t.length>0){var p=Kl(e,t,{radius:a,height:f,width:s,e:l},n);i=Math.max(p.legacyDistToCorner,a);a=Math.max(p.distanceToCorner,a);s=Math.max(p.width,s);p.centred?f=Math.max(p.height,f):f+=p.height}else{var m=0;if(e.t){m=(Vl(e,n.maxLength).length+1)*((e.fs||vn)*l)}i=a+m/2;!v&&h&&(i+=El*l)}if(h&&e.g&&e.g.length>0){for(var y=0,b=0;b<e.g.length;b++){var x=2*fo(e.g[b]);y+=x;f=Math.max(f,x)}a=e.t?Math.max(s,y):y/2;s+=y}return{legacyRadius:Math.round(i),radius:Math.round(a),baseRadius:Math.round(u),borderSize:Math.round(o),width:Math.round(s),height:Math.round(f)}}function Hl(e){return Ul(e,e._combo&&e._combo.open)}function _l(e,t){var n=0;if(e.t){var r=e.fs||vn,i=Ol(e)?1:e.e||1;if(!Hl(e)){n=(r+Cl)*i*Vl(e,t).length/2}}return Math.round(n)}function Ql(e,t,r,i,o,a){if(!t||!b(t.x)||!b(t.y))return 1/0;var u=Math.max(0,0|i),s=0;function f(e){if(void 0!==e.x){var n=e.x-t.x,i=e.y-t.y;if(Ol(e)){i+=void 0!==e.labelOffset?e.labelOffset:_l(e,a);var u=Math.abs(n)+e.w/2,f=Math.abs(i)+e.h/2,l=Ml(u,f);s=Math.max(s,l)}else{var c=void 0,d=0;if(void 0!==e.size)c=e.size;else if(void 0!==e.r){c=e.r;d=e.labelOffset}else{c=jl(e,r,{include:o,maxLength:a}).radius;d=_l(e,a)}var h=Ml(n,i+d);s=Math.max(s,h+c)}}}Array.isArray(e)?e.forEach(f):n(e,f);return Math.round(s+u)}function Jl(e,t,n,r,i){void 0===n&&(n=0);var o=[],a={include:r,maxLength:i};e.forEach(function(e){var r=void 0!==e.r?e.r:jl(e,t,a).radius;r+=n;if(!b(e.x)||!b(e.y)||!b(r))throw new Error("Inputs must be finite");o.push({x:e.x,y:e.y,r:r})});return hf.radialExtents(o)}function ql(e,t,n){var r={include:void 0,maxLength:n};return function(n,i){r.include=i;return void 0!==e[n]?jl(e[n],t,r):null}}function $l(e,t){var r=e.getCache({all:!0,combos:"all"}),i=r.adjacency,o=r.selfAdjacency,a={},u=[];t.forEach(function(e){n(i[e],function(e){e.forEach(function(e){if(!a[e]){u.push(e);a[e]=!0}})});var t=o[e];if(t)for(var r=0;r<t.length;r++)u.push(t[r])});return u}function ec(e,t,n){var r=e.getCache({all:!0,combos:"all"}),i=r.adjacency,o=r.selfAdjacency,a=[];i[t]&&(a=i[t][n]||[]);t===n&&o[t]&&(a=a.concat(o[t]));return a}function tc(e,t){var r=e.getCache({combos:"all",all:!1}),i=r.adjacency,o=r.selfAdjacency,a={};t.forEach(function(e,t){var r=i[t];r&&n(r,function(e){for(var t=0;t<e.length;t++){var n=e[t];a[n]=!0}});var u=o[t];if(u)for(var s=0;s<u.length;s++)a[u[s]]=!0});n(a,function(e,n){var r=t.get(n);r&&2===r||t.set(n,1)})}function nc(e){return!!e.weights}function rc(e){e.all=!!e.all}function ic(e){return/^(component|chart)$/.test(e.normalization)?e.normalization:"unnormalized"}function oc(e){if(!/^(chart|component|unnormalized)$/.test(e.normalization))throw new TypeError("opts normalization property should be either 'component', 'chart' or 'unnormalized'")}function ac(e){e.direction=e.direction||"any";if(!/^(any|from|to)$/.test(e.direction))throw new TypeError("opts direction property should be either 'from', 'to' or 'any'")}function uc(e,t){var n=Mu,r=z(t,{all:!1});rc(r);var i=Al(e.getCache(r),!0),o=Js.connectedComponents(i.staticGraph),a={},u=i.vertexMap;n.forEach(o.iterateGroups(),function(e){a[e]={nodes:n.toArray(n.map(o.iterateGroup(e),function(e){return u.get(e)})),links:[]}});for(var s=i.edgeList,f=0;f<s.length;f++)for(var l=s[f],c=a[o.get(u.getUniqueInverse(l.id1))],d=0;d<l.ids.length;d++)c.links.push(l.ids[d]);return j(a)}function sc(e,t,n){return!!(e[t].a2&&e[t].id2===n||e[t].a1&&e[t].id1===n)}function fc(e,t,n,r,i){return"any"===i.direction||("from"===i.direction&&sc(e,r,n)||"to"===i.direction&&sc(e,r,t))}function lc(e){return nc(e)?cc:dc}function cc(e,t,n,r,i){var o=dc(e,t,n,r,i);return m(o)?o:1/o}function dc(e,t,n,r,i){var o=i.getLinks(),a=NaN;fc(o,e,t,n,r)&&(r.value?o[n].d&&(a=+o[n].d[r.value]):a=1);return a}function hc(e,t){t.eachLink(e,function(n){if(dc(n.id1,n.id2,n.id,e,t)<=0)throw new Error("Link Weight must be Positive")});return{direction:e.direction,value:e.value,weights:nc(e)}}function vc(e,t){ac(e);return hc(e,t)}function gc(e,t,n,r){var i,o=e.getCache(r).adjacency[t][n],a=1/0,u=lc(r);if(o)for(var s=0;s<o.length;s++){var f=u(t,n,o[s],r,e);if(b(f)){if(f<a){a=f;(i=[]).push(o[s])}f===a&&a!==1/0&&i.push(o[s])}}return{value:a,links:i}}function pc(e,t,r){function i(e,t){return Z[e]-Z[t]}function o(e){e.sort(i);return e.shift()}function u(e,t){e.sort(i);K(e,t)||e.push(t)}function s(t,n){var r=gc(e,t,n,A).value;return b(r)?r:g()||b(r)?1/0:1}function f(e){return e.length>0}function l(){k.length=0;T.length=0;e.eachNode(m,function(e){for(var t=0;t<F.length;t++)d(F[t].dict,e.id,F[t].value)})}function c(t,n,r){e.eachNode(t,function(e){d(n,e.id,r)})}function d(e,t,n){Array.isArray(n)&&f(n)&&e[t]?e[t].length=0:e[t]=a(n)}function h(){for(var t=uc(e,m),n={},r=0;r<t.length;r++)for(var i=t[r],o=0;o<i.nodes.length;o++)n[i.nodes[o]]=i.nodes.length;return n}function v(){return!V(m.value)}function g(){return!!m.directed}function p(){return!!m.endpoints}var m=z(t,{all:!1,combos:"toplevel",directed:!1,endpoints:!1,normalization:"component",value:void 0,weights:!1});m.combos="toplevel";oc(m);rc(m);var y=v()||g()?"dijkstra":"regular",x=p()?"endpoints":"regular",w=ic(m),A={direction:g()?"from":"any",value:m.value,weights:nc(m),all:m.all};vc(m,e);var M,I,E,C,S={},k=[],T=[],L={},B={},G={},Z={},O=0,F=[{dict:B,value:0},{dict:Z,value:1/0},{dict:L,value:[]},{dict:G,value:0}];function D(e,t){if(!b(Z[t])){Z[t]=Z[M]+1;k.push(t)}if(Z[t]===Z[M]+1){B[t]+=B[M];L[t].push(M)}}function Y(e,t){if(Z[t]>Z[M]+s(M,t)){Z[t]=Z[M]+s(M,t);u(k,t);B[t]=0;L[t]=[]}if(Z[t]===Z[M]+s(M,t)){B[t]+=B[M];L[t].push(M)}}var P=e.getCache(m).adjacency,W={regular:function(e){B[e]=1;Z[e]=0;k.push(e);for(;f(k);){M=k.shift();T.push(M);n(P[M],D)}},dijkstra:function(e){B[e]=1;Z[e]=0;k.push(e);for(;f(k);){M=o(k);T.push(M);n(P[M],Y)}}},X={regular:function(e){for(;f(T);){I=T.pop();for(var t=(1+G[I])/B[I],n=0;n<L[I].length;n++){M=L[I][n];G[M]+=B[M]*t}I!==e&&(S[I]+=G[I])}},endpoints:function(e){S[e]+=T.length-1;for(;f(T);){I=T.pop();for(var t=(1+G[I])/B[I],n=0;n<L[I].length;n++){M=L[I][n];G[M]+=B[M]*t}I!==e&&(S[I]+=G[I]+1)}}},N={chart:function(){if(O>2){E=1/((O-1)*(O-2));n(S,function(e,t){S[t]*=E})}},component:function(){C=h();n(S,function(e,t){if(C[t]>2){E=1/((C[t]-1)*(C[t]-2));S[t]*=E}})},unnormalized:function(){if(!g()){E=.5;n(S,function(e,t){S[t]*=E})}}};function U(){_();R(r,S)}var j=W[y]||W.regular,H=X[x]||X.regular,_=N[w]||N.chart;e.eachNode(m,function(){O++});c(m,S,0);function Q(e,t){l();j(e.id);H(e.id);t()}e.asyncEachNode(m,"betweenness",Q,U)}function mc(e,t,r){var i,o={},a={},u=[],s=e.getCache(r).adjacency;function f(){for(var e=0,t=1/0,n=0;n<u.length;n++){var r=o[u[n]];if(r<=t){e=n;t=r}}return e}function l(e,t,n){a[e]||(a[e]=[]);a[e].push({id:t,links:n})}e.eachNode(r,function(e){var t=e.id;o[t]=1/0;a[t]=void 0;u.push(t)});o[t]=0;function c(t,n){var u=gc(e,i,n,r),s=o[i]+u.value;if(s<o[n]){o[n]=s;a[n]=[{id:i,links:u.links}]}else s===o[n]&&l(n,i,u.links)}for(;u.length>0;){var d=f();i=u[d];if(o[i]===1/0)break;u.splice(d,1);n(s[i],c)}return{distance:o,previous:a}}function yc(e,t,r){if(!e.getNodes()[t])throw new Error("distances error: id(s) must be present in the graph");var i=z(r||{},{combos:"toplevel",all:!1});vc(i,e);rc(i);var o=mc(e,t,i),a={};n(o.distance,function(e,t){b(e)&&(a[t]=e)});return a}function bc(e,t,r){var i=z(t,{all:!1,combos:"toplevel",direction:"any",mode:"auto",normalization:"component",value:void 0,weights:!1});i.combos="toplevel";var o=e.getCache(i).adjacency;function a(e){var t=0;n(e,function(e){t+=b(e)?1:0});return t}function u(e){return 0===Object.keys(e).length}function s(e){return!V(e)}function f(t){var n=e.getLinks();return!n[t].a1&&!n[t].a2}function l(e){var t={},r=0,i={},a={};a[e]=!0;function f(e,i){if(!s(t[i])){t[i]=r;n(o[i],function(e,t){a[t]=!0})}}for(;!u(a);){i=a;a={};n(i,f);r+=1}return t}function c(){return"any"!==i.direction}function d(){i.mode=i.mode||"auto";if(!i.mode.match(/^(connected|disconnected|auto)$/))throw new TypeError("Option mode property should be either 'connected', 'disconnected' or 'auto'")}function h(){d();return"auto"===i.mode?m():i.mode}function v(){return!V(i.value)}function g(){return!!ic(i).match(/chart/)}function p(){return!!ic(i).match(/component/)}function m(){var t="disconnected",n=uc(e,i);if(1===n.length){t="connected";if(c())for(var r=0;r<n[0].links.length;r++)if(f(n[0].links[r]))return"disconnected"}return t}var y=vc(i,e);oc(i);rc(i);y.all=i.all;var x=v()||c()?"dijkstra":"regular",w=0,A={},M=h(),I={regular:function(e){return l(e)},dijkstra:function(t,n){return yc(e,t,n)}},E={connected:function(e,t){var r=0;n(t,function(e){r+=b(e)?e:0});return r?1/r:0},disconnected:function(e,t){var r=0;n(t,function(t,n){r+=e!==n?1/t:0});return r}};function C(){R(r,A)}var S=I[x]||I.regular,k=E[M];w=0;e.eachNode(i,function(){w++});A={};function T(e,t){var n,r=S(e.id,y),i=a(r);A[e.id]=k(e.id,r);if(w>1){n=g()?Math.pow(i-1,2)/(w-1):p()?i-1:1;A[e.id]*=n}t()}e.asyncEachNode(i,"closeness",T,C)}function xc(e,t){var n=z(t,{all:!1,combos:"toplevel",consistent:!0,factor:5});n.combos="toplevel";rc(n);var r,i=[],o=[],a=[],u=[],s={},f=0,l=[],c=[],d=[],h=[],v=[];e.eachNode(n,function(e){u.push(e.id);o.push([]);a.push([]);s[e.id]=u.length-1;l.push([u.length-1]);c.push(u.length-1);v.push(u.length-1);i.push(0);d.push(0)});e.eachLink(n,function(e){var t=m(e,n);f+=t;var r=s[e.id1],u=s[e.id2];if(!a[r][u]){a[r][u]=0;a[u][r]=0}a[r][u]+=t;a[u][r]+=t;i[r]+=t;i[u]+=t;d[r]+=t;d[u]+=t;o[r].push(u);o[u].push(r)});var g=Math.max(1e4,50*u.length);if(0===u.length)return[];0===f&&(g=0);var p=de();p.setSeed(n.consistent?900736044081:null);function m(e,t){var n=1;t.value&&e.d&&(n=+e.d[t.value]);return n}function y(e){r=b(r=+e)?r:5;r=Math.max(0,r);r=(r=Math.min(10,r))*r*r/125}y(n.factor);for(var x=0;x<g;x++){if(p.next()>.95){S(v[Math.floor(p.next()*v.length)],v[Math.floor(p.next()*v.length)])}if(x<.5*g&&p.next()>.98){R(v[Math.floor(p.next()*v.length)])}var w=Math.floor(u.length*p.next()),A=o[w][Math.floor(p.next()*o[w].length)],M=c[A],I=c[w];if(M!==I){C(M,I,w)>=0&&k(w,M)}}function E(){for(var e=[],t=0;t<v.length;t++){for(var n=[],r=0;r<l[v[t]].length;r++)n.push(u[l[v[t]][r]]);e.push(n)}return e}function C(e,t,n){var u=d[t],s=d[e],l=i[n],h=(u-s-l)*l*r;h/=2*f;for(var v=0;v<o[n].length;v++){var g=o[n][v];c[g]===t?h-=a[n][g]:c[g]===e&&(h+=a[n][g])}return h/f}function S(e,t){if(t!==e&&0!==l[e].length&&0!==l[t].length){var n=d[e],i=d[t],u=0;u-=r*n*i/f;for(var s=0;s<l[e].length;s++)for(var h=l[e][s],v=0;v<o[h].length;v++)c[o[h][v]]===t&&(u+=a[h][o[h][v]]);if((u/=f)>0){var g=l[e].length;for(s=0;s<g;s++)k(l[e][0],t)}}}function k(e,t){var n=c[e];c[e]=t;for(var r=[],o=0;o<l[n].length;o++)l[n][o]!==e&&r.push(l[n][o]);if(0===l[t].length){v.push(t);h.splice(h.indexOf(t),1)}l[n]=r;l[t].push(e);d[t]+=i[e];d[n]-=i[e];if(0===l[n].length){h.push(n);v.splice(v.indexOf(n),1)}}function R(e){var t=l[e].length;if(1!==t&&h.length){for(var n=[],r=0;r<t;r++)n.push(l[e][r]);for(r=0;r<t&&h.length;r++)k(n[r],h[0])}}return E()}function wc(e,t){var r=z(t,{all:!1,combos:"toplevel",multi:!0});r.combos="toplevel";vc(r,e);rc(r);var i=e.getCache(r).adjacency,o={};e.eachNode(r,function(t){var a=t.id;o[a]=0;n(i[a],function(t,n){for(var i=0;i<t.length;i++){var u=dc(a,n,t[i],r,e);if(b(u)){o[a]+=u;if(!r.multi)break}}})});return o}function Ac(e,t){var r,i,o=z(t,{all:!1,combos:"toplevel",direction:"any"});o.combos="toplevel";o.direction="any";rc(o);hc(o,e);var a={},u=uc(e,o);function s(e,t){a[t]=e*u[r].nodes.length}for(r=0;r<u.length;r++){var f={};for(i=0;i<u[r].nodes.length;i++)f[u[r].nodes[i]]=!0;n(l(f),s)}return a;function l(t){var n={},r=[],i=[],a=[],u=0,s=[],f=0;e.eachNode(o,function(e){var o=e.id;if(t[o]){r.push(o);n[o]=r.length-1;i.push([]);a.push({})}});var l=Math.max(100,5*Math.sqrt(r.length));e.eachLink(o,function(e){if(t[e.id1]&&t[e.id2]){var r=n[e.id1],s=n[e.id2];if(!a[r][s]){i[r].push(s);i[s].push(r);a[s][r]=0;a[r][s]=0}var l=h(e,o);a[r][s]+=l;a[s][r]+=l;u+=l;f++}})
;var c={};if(0===r.length)return c;if(1===r.length){c[r[0]]=1;return c}if(2===r.length){c[r[0]]=.5;c[r[1]]=.5;return c}u/=f;l=Math.max(100,5*Math.sqrt(r.length));for(var d=0;d<r.length;d++)s.push(Math.random());for(d=0;d<l;d++){s=v(s);d%10==0&&g()}g();for(d=0;d<r.length;d++)c[r[d]]=s[d];return c;function h(e,t){return t.value&&e.d?+e.d[t.value]:1}function v(e){for(var t=[],n=0;n<r.length;n++){for(var o=0,s=0;s<i[n].length;s++)o+=a[n][i[n][s]]*e[i[n][s]];o+=u*e[n];t.push(o)}return t}function g(){for(var e=1/p(s),t=0;t<r.length;t++)s[t]*=e}function p(e){for(var t=0,n=0;n<e.length;n++)t+=Math.abs(e[n]);return t}}}function Mc(e,t,r){var i=null;function o(){i=null}function a(e,t,n,r,i){e[n]||(e[n]={});e[r]||(e[r]={});if(!e[n][r]){e[r][n]=[];e[n][r]=e[r][n];t.push(i)}e[n][r].push(i)}function u(e,t,n){var r={id:t.id,id1:t.id1,id2:t.id2,ids:n};e.edges.push(r);e.connections.push(n)}function s(i){var o={connections:[],adjacency:{},vertices:{},edges:[],selfAdjacency:{},selfConnections:[]};t(i,function(e){o.vertices[e.id]={x:e.x,y:e.y};o.adjacency[e.id]={}});var s=[],f={};e(i,function(e){if(e.id1===e.id2){f[e.id1]=f[e.id1]||[];f[e.id1].push(e.id)}else a(o.adjacency,s,e.id1,e.id2,e.id)});for(var l=s.length,c=r(),d=0;d<l;d++){var h=c[s[d]];u(o,h,o.adjacency[h.id1][h.id2])}if(Q(f)){var v=o.connections.slice();n(f,function(e){v.push(e)});o.selfConnections=v}else o.selfConnections=o.connections;o.selfAdjacency=f;return o}function f(e){var t=z(e,{all:!1,combos:"toplevel"}),n=(t.all?"all":"visible")+"-"+t.combos;i||(i={});i[n]||(i[n]=s(t));return i[n]}return{getCache:f,clearCache:o}}function Ic(e){var t={},r={},i=e,o=Mc(f,l,c),a=o.clearCache,u=o.getCache;function s(e,t,r){var i=t.all,o="toplevel"!==t.combos,a="underlying"!==t.combos;n(e,function(e){!i&&e.hi||!o&&e.parentId||!a&&e._combo||r(e)})}function f(e,t){s(r,e,t)}function l(e,n){s(t,e,n)}function c(){return r}function d(){return t}function h(e,n){t=e;r=n;a()}function g(e,t,n,r){function o(){var t=[];l(e,function(e){t.push(e)});return t}var a=o(),u=a.length,s=-1,f=0,c=500,d=Date.now(),h=d,g=700;function p(){if(++s>=u){m(1);r()}else n(a[s],b)}function m(e){i&&i.trigger("progress",t,e)}function y(){d=Date.now();if(f++>c||d-h>g){f=0;h=Date.now();return!0}return!1}function b(){if(y()){m(s/u);v(p,0)}else p()}m(0);b()}function p(e,t,n){var r=u(e);if(t===n)return r.selfAdjacency[t];var i=r.adjacency;return i[t]&&i[t][n]}function m(e){var t=u(e);return e.self?t.selfConnections:t.connections}return{asyncEachNode:g,clearCache:a,connections:m,eachLink:f,eachNode:l,findAdjacency:p,getCache:u,getLinks:c,getNodes:d,privateSetProperties:h}}function Ec(e,t,r){var i=e.getNodes(),o=e.getLinks(),a=O(t),u={},s={},f=J(a),l=z(r,{all:!1,direction:"any",hops:1});if(l.hops<1)throw new Error("neighbours error: hops must be a positive number");rc(l);var c=0,d={},h={},v=f,g=e.getCache(l),p=g.adjacency,m=g.selfAdjacency;n(f,function(e,t){var n=N(t);if(!i[n]&&!o[n])throw new Error("neighbours error: ids must be present in the graph");c++});function y(e,t,n){if(!h[t]&&fc(o,n,e,t,l)){u[t]=!0;h[t]=!0;if(n!==e){s[e]=!0;e in v&&(s[n]=!0);if(!(e in f)){c++;d[e]=!0}}}}function b(){n(f,function(e,t){if(i[t]){p[t]&&n(p[t],function(e,n){for(var r=0;r<e.length;r++){y(n,N(e[r]),t)}});var r=m[t];if(r)for(var a=0;a<r.length;a++)y(t,r[a],t)}else if(o[t]){var u=o[t];if(!h[u.id2]&&fc(o,u.id2,u.id1,t,l)){s[u.id2]=!0;h[u.id2]=!0;h[t]=!0;if(!(u.id2 in f)){c++;d[u.id2]=!0}}if(!h[u.id1]&&fc(o,u.id1,u.id2,t,l)){s[u.id1]=!0;h[u.id1]=!0;h[t]=!0;if(!(u.id1 in f)){c++;d[u.id1]=!0}}}})}for(;l.hops--&&c;){c=0;b();f=d;d={}}return{nodes:Object.keys(s),links:Object.keys(u)}}function Cc(e,t){var n=z(t,{all:!1,combos:"toplevel",directed:!0});n.combos="toplevel";rc(n);vc(n,e);var r={},i=[],o=[],a=[],u=[],s=[],f=.85;e.eachNode(n,function(e){i.push(e.id);r[e.id]=i.length-1;o.push([]);a.push({});u.push(0)});var l=Math.max(100,5*Math.sqrt(i.length));e.eachLink(n,function(e){var t=r[e.id1],i=r[e.id2],s=v(e,n);if(!n.directed||e.a2||!e.a1&&!e.a2){if(!a[i][t]){a[i][t]=0;o[i].push(t)}a[i][t]+=s;u[t]+=s}if(!n.directed||e.a1||!e.a1&&!e.a2){if(!a[t][i]){a[t][i]=0;o[t].push(i)}a[t][i]+=s;u[i]+=s}});for(var c=0;c<i.length;c++)s.push(Math.random());var d=1/p(s);for(c=0;c<i.length;c++)s[c]*=d;for(c=0;c<l;c++)s=g(s);d=1/p(s);for(c=0;c<i.length;c++)s[c]*=d;var h={};for(c=0;c<i.length;c++)h[i[c]]=s[c];return h;function v(e,t){var n=1;t.value&&e.d&&(n=+e.d[t.value]);return n}function g(e){for(var t=[],n=0,r=0,l=0;l<i.length;l++)n+=e[l];for(l=0;l<i.length;l++){for(var c=0,d=0;d<o[l].length;d++){var h=o[l][d];c+=a[l][h]*e[h]/u[h]}0===u[l]&&(r+=f*e[l]);c*=f;c+=(1-f)*n/i.length;t.push(c)}r/=i.length;for(l=0;l<s.length;l++)t[l]+=r;return t}function p(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}}function Sc(e,t,n,r){var i=e.getNodes();if("string"!=typeof t||"string"!=typeof n)throw new Error("shortestPaths error: ids must be strings");if(!i[t]||!i[n])throw new Error("shortestPaths error: ids must be present in the graph");var o=z(r,{combos:"toplevel",all:!1});vc(o,e);rc(o);var a=mc(e,t,o),u=a.previous;if(a.distance[n]===1/0)return{onePath:[],one:[],items:[],distance:1/0};for(var s=[],f=[],l=n;u[l];){s.unshift(l);f.unshift(l);f.unshift(u[l][0].links[0]);l=u[l][0].id}s.unshift(l);f.unshift(l);function c(e){for(var t=[],n=0;n<e.length;n++)u[e[n].id]&&(t=t.concat(u[e[n].id]));return t}var d={};d[n]=!0;var h=[];h.push({id:n});for(var v=c(h);v.length>0;){for(var g=0;g<v.length;g++){d[v[g].id]=!0;for(var p=0;p<v[g].links.length;p++)d[v[g].links[p]]=!0}v=c(v)}return{onePath:f,one:s,items:Object.keys(d),distance:a.distance[n]}}function kc(e,t){var r=z(t,{all:!1,combos:"toplevel"});r.combos="toplevel";rc(r);var i=e.getCache(r).adjacency;function o(){var t={},o={},a=[],u=[],s=0;n(t=wc(e,{multi:!1,all:r.all,combos:"toplevel"}),function(e){s=Math.max(s,e)});for(var f=Object.keys(t).length,l=0;l<s+1;l++)u[l]=0;e.eachNode(r,function(e){u[t[e.id]]++});var c=1;for(l=0;l<s+1;l++){var d=u[l];u[l]=c;c+=d}e.eachNode(r,function(e){var n=e.id;o[n]=u[t[n]];a[o[n]]=n;u[t[n]]++});for(l=s;l>1;l--)u[l]=u[l-1];u[0]=1;for(var h=function(e){var r=a[e];n(i[r],function(e,n){if(t[n]>t[r]){var i=t[n],s=o[n],f=u[i],l=a[f];if(n!==l){o[n]=f;a[s]=l;o[l]=s;a[f]=n}u[i]++;t[n]--}})},v=0;v<f;v++)h(v);return t}function a(e){var t=0;n(e,function(e){t=Math.max(t,e)});return t}var u=o();return{maximumK:a(u),values:u}}function Rc(e){var t=Ic(e);return{internalMarkLinks:function(e){return tc(t,e)},privateGetLinkIdsBetween:function(e,n){return ec(t,e,n)},privateNeighbourLinks:function(e){return $l(t,e)},clearCache:t.clearCache,connections:t.connections,findAdjacency:t.findAdjacency,privateSetProperties:t.privateSetProperties,betweenness:function(e,n){return pc(t,e,n)},closeness:function(e,n){return bc(t,e,n)},clusters:function(e){return xc(t,e)},components:function(e){return uc(t,e)},degrees:function(e){return wc(t,e)},distances:function(e,n){return yc(t,e,n)},eigenCentrality:function(e){return Ac(t,e)},kCores:function(e){return kc(t,e)},neighbours:function(e,n){return Ec(t,e,n)},pageRank:function(e){return Cc(t,e)},shortestPaths:function(e,n,r){return Sc(t,e,n,r)}}}var Tc=2*Math.PI,Lc=Math.PI/2;function Bc(){var e=-Math.PI/12,t=Math.sin(e),n=Math.cos(e);function r(e,t){if(e.r===t.r){if(e.t){if(!t.t)return-1;if(e.t<t.t)return-1;if(e.t>t.t)return 1}else if(t.t)return 1;return e.id===t.id?0:e.id<t.id?-1:1}return e.r<t.r?1:-1}function i(i,o){var a,u=i;if(!u||0===u.length)return u;var s=z(o,{padding:8,radialPadding:0}),f=s.padding,l=0;u.sort(r);u=u.map(function(e){return{id:e.id,r:e.r+f,x:e.x,y:e.y,labelOffset:e.labelOffset,w:e.w,h:e.h}});var c=[],d=0,h=u[l++];if(1===u.length)g();else if(2===u.length)m();else if(3===u.length)b();else if(4===u.length)y();else if(u.length>4){var v=u[0].r;u[2].r/v>.5&&u.length>10?b():u[1].r/v>.5&&u.length>10?m():g();a=Math.abs(u[0].y-u[0].r)+s.radialPadding;h=u[l++];for(;h;)w();A();p()}function g(){u[0].x=0;u[0].y=-u[0].labelOffset}function p(){var e=u[0],t=u[0];u.forEach(function(n){n.y<e.y?e=n:n.y>e.y&&(t=n)});var n=(Math.abs(e.y-e.r)-(Math.sqrt(t.x*t.x+t.y*t.y)+t.r))/4;u.forEach(function(e){e.y+=n})}function m(){var e=h,t=u[l++];e.x=0;e.y=-t.r-e.labelOffset;t.x=0;t.y=e.r-t.labelOffset}function y(){var e=h,n=u[l++],r=u[l++],i=u[l++];if(n.r===r.r&&r.r===i.r){n=u[2];r=u[1]}var o=e.r+r.r,a=e.r,s=Math.sqrt(o*o-a*a),f=e.r-n.r,c=t*s;e.x=-n.r;e.y=-e.labelOffset-c;n.x=e.r;n.y=-n.labelOffset+c;r.x=f+c;r.y=-s-r.labelOffset;i.x=f-c;i.y=s-i.labelOffset}function b(){var e=h,r=u[l++],i=u[l++],o=(2*e.r+f)/Math.sqrt(3),a=(e.r-r.r)/2,s=1.25*Math.PI;e.x=o*t;e.y=-o*n+a;r.x=o*n;r.y=-o*t-r.labelOffset+a;i.x=o*Math.sin(s);i.y=-o*Math.cos(s)-i.labelOffset+a}function x(e){return 2*e.r+f}function w(){d+=h.r+a+s.radialPadding;a=h.r;var e=Tc*d,t=e-x(h),n={items:[],radius:d,spaceLeft:0,circumference:e};c.push(n);for(;h&&t>0;){n.items.push(h);(h=u[l++])&&(t-=x(h))}h&&(t+=x(h));n.spaceLeft=t;if(h&&u.length-l<5){for(var r=0;h;){r+=x(h);n.items.push(h);h=u[l++]}n.radius=(e-t+r)/Tc;n.circumference=Tc*n.radius;n.spaceLeft=0}}function A(){c.forEach(function(t){var n=Tc/(t.circumference-t.spaceLeft),r=0,i=n*t.items[0].r;4===t.items.length&&(i-=e);t.items.forEach(function(e){var o=n*e.r,a=r+o;e.x=t.radius*Math.cos(a-Lc-i);e.y=t.radius*Math.sin(a-Lc-i)-e.labelOffset;r+=n*x(e)})})}return u}return{compareCircles:r,concentricLayout:i}}var Gc=function(){};function Zc(e,t,r,i){n(e,function(e){e.x-=r;e.y-=i});return{x1:t.x1-r,y1:t.y1-i,x2:t.x2-r,y2:t.y2-i}}function Oc(e,t,n){return Zc(e,n,(n.x1+n.x2)/2-(t.x1+t.x2)/2,(n.y1+n.y2)/2-(t.y1+t.y2)/2)}function Fc(e,t,n,r,i,o,a,u){var s=zl(t);i&&(s=Oc(t,r,s));b(s.x1)||(s=null);var f={vertices:t,updatedEdges:n,extents:s},l=function(){e.trigger("progress","layout",1);a(f,o)};u?l():v(l);return f}function zc(e,t,n,r){void 0===r&&(r=Gc);return function(i,o,a){return Fc(e,i,o,n,a,t,r,!0)}}function Dc(e,t,n,r){void 0===r&&(r=Gc);return function(i,o,a){return Fc(e,i,o,n,a,t,r)}}function Yc(e){return j(e).some(function(e){return e.fixed})}function Vc(e,t){return e.fixed&&!t.fixed?-1:t.fixed&&!e.fixed?1:0}function Pc(){var e={width:0,height:0,area:function(){return e.width*e.height},comps:[],lowestHeightFlushedRightItem:0,ratio:function(){return 0===e.width?1/0:e.width/e.height}};return e}function Wc(){var e=[],t=[],n=[],r=0,i=0;function o(){if(e.length>0||t.length>0){e.length=0;t.length=0;n.length=0}}function u(a,u,s){if(a<=0)throw new Error("[Matrix] Column size cannot be 0 or similar");if(u<=0)throw new Error("[Matrix] Row size cannot be 0 or similar");r=1;i=1;o();e.push({index:0,size:a});t.push({index:0,size:u});n[0]=[];n[0][0]=s;return c}function s(e,o){for(var a=t[e].index,u=0;u<i;u++)n[u][r]=n[u][a];e<r-1&&t.splice(e+1,0,{index:r,size:o});t[e+1]={index:r,size:o};t[e].size-=o;r++;return c}function f(t,r){var o=e[t].index;n[i]=a(n[o]);t<i-1&&e.splice(t+1,0,{index:i,size:r});e[t+1]={index:i,size:r};e[t].size-=r;i++;return c}function l(){for(var n="\n     ",o=0;o<i;o++){var a=Math.floor(e[o].size/100)%10==0?" ":""+Math.floor(e[o].size/100)%10,u=Math.floor(e[o].size/10)%10==0&&" "===a?" ":""+Math.floor(e[o].size/10)%10,s=Math.floor(e[o].size)%10==0&&" "===a&&" "===u?" ":""+Math.floor(e[o].size)%10;n+=e[o].size>999?" "+e[o].size+" ":" "+a+u+s+" "}n+="\n";for(o=0;o<r;o++){a=Math.floor(t[o].size/100)%10==0?" ":""+Math.floor(t[o].size/100)%10,u=Math.floor(t[o].size/10)%10==0&&" "===a?" ":""+Math.floor(t[o].size/10)%10,s=Math.floor(t[o].size)%10==0&&" "===a&&" "===u?" ":""+Math.floor(t[o].size)%10;n+=t[o].size>999?" "+t[o].size+": ":" "+a+u+s+": ";for(var f=0;f<i;f++)n+=c.item(f,o)?"  X  ":"  .  ";n+="\n"}return n}var c={init:u,cols:function(){return i},rows:function(){return r},item:function(r,i){return n[e[r].index][t[i].index]},setItem:function(r,i,o){n[e[r].index][t[i].index]=o},insertRow:s,insertCol:f,colWidth:function(t){return e[t].size},rowHeight:function(e){return t[e].size},inspect:l};return c}var Xc=16e6;function Nc(){var e=0,t=Wc(),n=Xc;function r(e,t){return t-(f.height-e)}function i(e,n,r){if(r.leftOverW>0){f.cells+=t.rows();var i=e+(r.nRequiredCellsH-1);t.insertCol(i,r.leftOverW)}if(r.leftOverH>0){f.cells+=t.cols();var o=n+(r.nRequiredCellsV-1);t.insertRow(o,r.leftOverH)}for(var a=e+(r.nRequiredCellsH-1);a>=e;a--)for(var u=n+(r.nRequiredCellsV-1);u>=n;u--)t.setItem(a,u,!0)}function o(e,n,r,i){i.nRequiredCellsH=0;i.nRequiredCellsV=0;i.leftOverW=0;i.leftOverH=0;for(var o=0,a=0,u=e,s=n;a<r.height;){u=e;o=0;for(;o<r.width;){if(t.item(u,s))return!1;o+=t.colWidth(u);u++}a+=t.rowHeight(s);s++}i.nRequiredCellsH=u-e;i.nRequiredCellsV=s-n;i.leftOverW=o-r.width;i.leftOverH=a-r.height;return!0}function a(e,n){f.width=e;f.height=n;f.area=s();t.init(e,n,!1);return f}function u(e,a){var u={offsetX:0,offsetY:0,width:e,height:a,placed:!1},s=0,l=0,c=0,d=0,h={};f.addAttempts++;for(var v=Xc;;){h={};for(;l<t.rows()&&t.item(s,l);){d+=t.rowHeight(l);l++}if(l<t.rows()&&r(d,u.height)<=0){if(o(s,l,u,h)){i(s,l,h);u.offsetX=c;u.offsetY=d;u.placed=!0;break}d+=t.rowHeight(l);l++}var g=r(d,u.height);if(g>0){d=0;l=0;c+=t.colWidth(s);s++;f.lfhDeficitSinceLastRedim()>g&&(n=g)}if(f.width-c<u.width){u.placed=!1;break}}v=n;return{offsetX:u.offsetX,offsetY:u.offsetY,lfhd:v,placed:u.placed}}function s(){return f.width*f.height}var f={matrix:t,cells:e,addAttempts:0,addRect:u,lfhDeficitSinceLastRedim:function(){return n},setDimensions:a};return f}function Uc(e,t){var n=Pc();t.canvas||(t.canvas=Nc());for(var r=t.canvas.setDimensions(t.width,t.height),i=0,o=0,a=0;a<e.length;a++){var u=e[a],s=r.addRect(u.width,u.height);if(!s.placed){n.width=0;n.height=0;n.comps.length=0;n.lowestHeightFlushedRightItem=0;break}u.x=s.offsetX;u.y=s.offsetY;n.comps.push(u);u.y+u.height>n.height&&(n.height=u.y+u.height);u.x+u.width>n.width&&(n.width=u.x+u.width);var f=u.width+u.x;if(f>o||f===o&&u.height>i){n.lowestHeightFlushedRightItem=s.lfhd;i=u.height;o=f}}t.lowestFreeHeightDeficit=r.lfhDeficitSinceLastRedim();return n}function Kc(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].width*e[n].height;return t}function jc(e,t){var n=Vc(e,t);return n||t.height-e.height}function Hc(e){for(var t=0,n=0;n<e.length;n++)t<e[n].width&&(t=e[n].width);return t}function _c(e,t){for(var n=a(e),r=0;r<n.length;r++){var i=n[r].width%t,o=n[r].height%t;0!==i&&(n[r].width+=t-i);0!==o&&(n[r].height+=t-o)}return n}function Qc(e,t){return e.ratio()>=t-.2&&e.ratio()<=t}function Jc(e,t){for(var n=Ll(t),r=0;r<e.length;r++){e[r].width+=n;e[r].height+=n}}function qc(e,t,n){function r(t){var n=1.1,r=1.03,o=10,a=Math.sqrt(t.area(e)*n/i.ratio)*r,u=a*i.ratio;u<t.maxWidth+o&&(u=t.maxWidth+o);return{width:u,height:a,lowestFreeHeightDeficit:0,ratio:function(){return s.width/s.height}}}var i=z(t,{ratio:4/3,max:10,sort:!0,step:10,tightness:5});i.sort&&e.sort(jc);Jc(e,i.tightness);var o,a=_c(e,i.step);if(0!==e.length){var u={area:Kc,maxWidth:Hc(a),maxHeight:a[0].height},s=r(u),f=0;le(function(){return s.width>=u.maxWidth},function(){var t=Uc(a,s);if(0===t.comps.length){s.width*=1.03;s.height*=1.03}else{f++;if(!o||Qc(t,i.ratio)){(o=t).efficiency=u.area(e)/t.area();if(Qc(t,i.ratio))return!0}if(f>=i.max)return!0}return!1},function(){return n(o.comps)})}else{o=Pc();n(o.comps)}}function $c(e,t){if(t.length<1)return!1;function n(t){var n=e.y<t.y+t.height,r=e.y+e.height>t.y;return n&&r}function r(t){var n=e.x<t.x+t.width,r=e.x+e.width>t.x;return n&&r}for(var i=0;i<t.length;i++){var o=t[i];if(r(o)&&n(o))return!0}return!1}function ed(e,t,n){function r(e,t,n){return(t-e)*n+e}function i(e,t,n){return r(e,t,Math.pow(n/100,.6))}function o(e){var t=i(1,s,e),n=r(.5,.3,e/600)*e;return{x:Math.cos(n)*t,y:Math.sin(n)*t}}for(var a=0,u=[],s=0,f=0;f<e.length;f++){var l=e[f];s+=l.width}s/=2*e.length;if(!t.expanding)return qc(e,t,n);e.sort(Vc);for(f=0;f<e.length;f++){(l=e[f]).x=l.fixed?l.x:0;l.y=l.fixed?l.y:0;for(;$c(l,u)&&!l.fixed;){var c=o(a);l.x=c.x;l.y=c.y;a++}u.push(l)}return n(u)}function td(e,t,r,i,o,a){for(var u={},s=[],f={},l=1/0,c=1/0,d=0;d<t.length;d++){var h=Bl(t[d].verts);u[d]=h;var v=r.length>0&&Yc(t[d].verts);s.push({x:h.x,y:h.y,width:h.width,height:h.height,id:d,fixed:v});f[d]={x:h.x,y:h.y};l=Math.min(l,f[d].x);c=Math.min(c,f[d].y)}var g=z(o,{expanding:!1,step:30,max:2,ratio:4/3,sort:!1,tightness:5});ed(s,g,function(o){var u=0,d=0;if(!g.expanding){var h=r.length>0?s.filter(function(e){return e.fixed})[0]:void 0;if(h){var v=o.filter(function(e){return e.id===h.id})[0];u=f[h.id].x-v.x;d=f[h.id].y-v.y}else{u=l;d=c}}for(var p={},m=0;m<o.length;m++){p[o[m].id]=o[m];p[o[m].id].x+=u;p[o[m].id].y+=d}for(var y=function(e){var r=p[e].x-f[e].x,i=p[e].y-f[e].y;n(t[e].verts,function(e){e.x+=r;e.y+=i})},b=0;b<t.length;b++)y(b);a(e,i,0===r.length)})}function nd(e,t,n,r){for(var i,o,a=2*t+24+n,u=Math.floor(Math.sqrt(e.length)),s=Math.ceil(e.length/u),f=0,l=0,c={},d={x:0,y:0},h=0;h<u;h++){for(var v=0;v<s;v++){var g=s*h+v;if(e[g]){c[e[g]]={x:f,y:l};d.x+=f;d.y+=l}f+=a}f=0;l+=a}if("absolute"===r){i=a*(s-1)/2;o=a*(u-1)/2}else{i=d.x/e.length;o=d.y/e.length}for(h=0;h<e.length;h++){c[e[h]].x-=i;c[e[h]].y-=o}return c}function rd(e,t,n){for(var r=0,i={},o=0;o<t.length;o++)r+=e[t[o]].size;if(1===t.length)i[t[0]]={x:0,y:0};else{var a=Math.PI/4;2===t.length&&(a=Math.PI/2);4===t.length&&(a=0);t.length<4&&(r*=1.5);var u=2*Math.PI/t.length,s=n*r/4;for(o=0;o<t.length;o++){i[t[o]]={x:s*Math.cos(a),y:s*Math.sin(a)};a+=u}}return{positions:i,radius:r}}function id(e,t,n,r,i){if(0===n){r[e[0]]={x:0,y:0};return{radius:t,index:-1}}var o=2*t,a=(n+1)*o,u=o,s=Math.sqrt(a/(Math.PI*u))*u,f=Math.floor(2*Math.PI*s/o);f=Math.min(f,n+1);var l,c=2*Math.PI/f;switch(f){case 2:l=Math.PI/2;s*=.75;break;case 3:l=Math.PI/3;s*=.85;break;case 4:l=0;s*=.85;break;case 5:l=0;s*=.9;break;default:l=0}s*=i/2;for(var d=0;d<f;){r[e[n-d]]={x:s*Math.cos(l),y:s*Math.sin(l)};l+=c;d++}return{radius:s,index:n-f}}function od(e,t,n){var r,i={},o=0,a=e.length-1;do{var u=id(e,t,a,i,n);o=Math.max(u.radius,o);a=u.index}while(a>=0);switch(e.length){case 4:r=2;break;case 3:r=2.5;break;case 2:r=3;break;case 1:r=1;break;default:r=2}return{positions:i,radius:o*r}}function ad(e,t){for(var n=[],r=0;r<t.length;r++)e[t[r]]&&n.push(t[r]);return n}var ud="#arranged#";function sd(e,t,r,i){n(e,function(e){if(e.arranged){e.x+=t;e.y+=r}});i(!1)}function fd(e,t,n){for(var r=t.packed,i=t.original,o={},a=0;a<r.length;a++)o[r[a].id]=r[a];cd(e,i,o);n(!0)}function ld(e,t,n,r,i){for(var o,a={},u=[],s=0;s<t.length;s++){o=Bl(t[s].verts,n);if(b(o.width)){u.push({x:o.x,y:o.y,width:o.width,height:o.height,id:s});a[s]={x:o.x,y:o.y}}}o=Bl(n);u.push({x:o.x,y:o.y,width:o.width,height:o.height,id:ud});a[ud]={x:o.x,y:o.y};qc(u,{step:30,max:2,sort:!1,ratio:r},function(t){return fd(e,{packed:t,original:a},i)})}function cd(e,t,r){var i,o;n(e,function(e){if(e.arranged){i=r[ud].x-t[ud].x;o=r[ud].y-t[ud].y}else{var n=e.c;i=r[n].x-t[n].x;o=r[n].y-t[n].y}e.x+=i;e.y+=o})}function dd(e,t,r,i,o,a){var u={tidy:function(e,t,n){var r=Dl(l,i.e);return ld(l,r,e,t.ratio,n)},average:function(e,t,n){return sd(l,t.centre.x,t.centre.y,n)},absolute:function(e,t,n){return sd(l,t.absolute.x,t.absolute.y,n)}},s={grid:function(e,t,n,r,i){return nd(e,n,r,i)},circle:function(e,t,n,r){return rd(t,e,1.25-(5-r)/50).positions},radial:function(e,t,n,r){return od(e,n,1.25-(5-r)/50).positions}},f=z(o,{tightness:5,position:"average",x:0,y:0});t.trigger("prechange","arrange");var l=i.v,c=Ll(f.tightness),d=u[f.position]||u.average,h=s[e]||s.grid,v={x:+f.x||0,y:+f.y||0},g=O(r);if((g=ad(l,g)).length){for(var p=0,m={x:0,y:0},y=0;y<g.length;y++){p+=l[g[y]].size;m.x+=l[g[y]].x;m.y+=l[g[y]].y}p/=g.length;m.x/=g.length;m.y/=g.length;var b=h(g,l,p,c,f.position),x={};n(b,function(e,t){l[t].x=e.x;l[t].y=e.y;x[t]=l[t];x[t].arranged=!0});var w={centre:m,absolute:v,ratio:f.ratio};d(x,w,function(e){Dc(t,f,i.extents,a)(l,{},e)})}else a()}var hd=ml.KnownProperties,vd=ml.names,gd=Mu.fromArray,pd={proportion:.12,min:20,max:200};function md(e,t,n,r){var i,o=ee(r?r.nodeIds:[]),a=e.vertexMap,u=Js.buildPropertyBagFrom(gd(e.nodeList,function(e){return[a.getUniqueInverse(e.id),e]}),((i={})[hd.position2d]=function(e){return e},i[hd.sparseRadius]=function(e){return Math.max(n(e.id,!0).radius,.5)},i[hd.radius]=function(e){return Math.max(n(e.id,!1).radius,.5)},i[hd.speed]=function(e){return void 0!==o[e.id]?0:1},i));u[hd.group]=t;if(r&&r.absolute){var s=yd(e,u[hd.position2d],t,r.nodeIds);re(u,s)}return u}function yd(e,t,n,r){for(var i,o=e.vertexMap,a=o.keySpace().size,u=new Map,s=[],f=0;f<r.length;f++){var l=o.getUniqueInverse(r[f]),c=n.get(l),d=t.get(l);if(!u.has(c)){s.push(c);u.set(c,[])}u.get(c).push({x:d.x,y:d.y})}var h=function(e){return hf.Rect.center(hf.pointExtents(gd(e)))};return Js.buildPropertyBagFrom(gd(s,function(e){return[e,u.get(e)]}),((i={})[hd.groupCenter]={map:h,defaultValue:null},i[hd.groupSpeed]={map:function(){return 0},defaultValue:1},i),a)}function bd(e,t,n,r,i){var o=ml.createLayout(e,t.staticGraph,n.libgOpts);new ml.SetTimeoutRunner(o,0,100).start(r,i)}function xd(e,t,n,r,i){var o=ml.createLayout(e,t.staticGraph,n.libgOpts);try{for(;!o.isComplete();)o.run(r)}catch(e){i(e);return}i()}function wd(e,t){var n=wl(j(e.v),e.e),r=Js.connectedComponents(n.staticGraph);function i(t){var r=t.fixed&&Array.isArray(t.fixed)?t.fixed.filter(function(t){return void 0!==e.v[t]}):[];return{opts:{nodeIds:r,absolute:t.absoluteFixed},pinTo:!t.absoluteFixed&&r.length>0?{vertex:n.vertexMap.getUniqueInverse(r[0])}:void 0}}function o(o,a,u){var s=i(o),f=u?xd:bd,l={attenuation:Tl(o.tightness)/5-1},c=md(n,r,t,s.opts);o.libgOpts=re({seed:o.consistent?7:void 0,packing:o.packing,pinTo:s.pinTo,liveUpdate:!1,packingOptions:{padding:pd,aspectRatio:o.ratio},scale:l},o.libgOpts||{});f(vd.organic,n,o,c,function(){return a(e.v,{},0===s.opts.nodeIds.length)})}function a(o,a,u){var s=i(o),f=md(n,r,t,s.opts),l=u?xd:bd;o.libgOpts=re({seed:o.consistent?7:void 0,packing:o.packing,pinTo:s.pinTo,packingOptions:{padding:pd,aspectRatio:o.ratio}},o.libgOpts||{});l(vd.pack,n,o,f,function(){return a(e.v,{},0===s.opts.nodeIds.length)})}function u(i,o,a){i.libgOpts={reduceOverlapsOnly:!0,maxIterations:2,cpIterations:25,padding:{proportion:(6-Tl(i.tightness))/6,min:-1/0,max:1/0}};var u=md(n,r,t);(a?xd:bd)(vd.diskpacking,n,i,u,function(){return o(e.v,{},!1)})}return{organic:o,reduceOverlaps:u,pack:a}}function Ad(e){var t={include:!1};function r(e,t,n){return{id:t,x:e.x,y:e.y,fixed:n,d:e.d,labeloff:_l(e),lc:0,size:1,w:1,h:1}}function i(e,t,n,i){if(!(n in e)){if(!(n in t))throw new Error("link has end which is not in nodes list");var o=t[n];if(o.hi)throw new Error("link has end which is hidden");e[n]=r(o,n,n in i)}}function o(e,t,o,a,u,s){for(var f={},l=[],c=0;c<a.length;c++){var d=a[c],h=d[0],v=o[h],g=v.id1,p=v.id2;i(f,t,g,u);i(f,t,p,u);for(var m=[],y=1,b=0;b<d.length;b++){v=o[h=d[b]];m.push({id:h,sign:v.id1===g?1:-1,off:v.off});y=Math.max(y,v.w||1)}l.push({id:h,id1:g,id2:p,arrowSize:e.currentArrowLength(y,1),links:m,numLinks:m.length});f[g].lc+=1;f[p].lc+=1}n(t,function(e,t){f[t]||e.hi||!s&&e.parentId||(f[t]=r(e,t,e.id in u))});return{v:f,e:l}}function a(e,t,n,r){var i=jl(t,e,n);r.size=i.legacyRadius;r.w=i.width;r.h=i.height}function u(e,t,n,r){var i=jl(t,e,n);r.size=i.radius;r.w=i.width;r.h=i.height}function s(n,r,i,o,s){for(var f=j(vd).indexOf(n)>=0,l=e.privateGetMaxLabelLength(),c="radial"!==n?{include:!0,maxLength:l}:t,d="lens"===n||f?u:a,h=0;h<i.length;h++)d(r,o[i[h]],c,s[i[h]])}return function(e,t,n,r,i,a,u,f){var l={};if(a)for(var c=0;c<a.length;c++)l[a[c]]=!0;var d=o(e,n,r,i().connections({all:!1,combos:f}),l,void 0!==f&&"toplevel"!==f),h=d.v,v=d.e,g=Object.keys(h);s(u,t,g,n,h);return{e:v,extents:zl(h),v:h,vcount:g.length}}}function Md(e,t,r){void 0===r&&(r="size");var i,o,a,u,s=[],f=Sd(e);function l(e){if(e[u]){for(var n=e[u].vertices,s=0;s<n.length;s++){var f=n[s],l=t[f][r];o+=l;i=Math.max(i,l)}a+=n.length}}for(u=0;u<f;u++){i=0;o=0;a=0;var c=0;n(e,l);var d=o/a,h=s[u-1];h&&i<h.max+h.yOffset&&(c=(h.max+h.yOffset)/2);s[u]={max:i,average:d,sum:o,yOffset:c}}return s}function Id(e,t,n){var r=[];if(n>0){var i=e[n];i&&i.edges&&i.edges.forEach(function(e){e.id1===t?r.push(e.id2):e.id2===t&&r.push(e.id1)})}return r}function Ed(e,t,n){return Id(e,t,n+1)}function Cd(e){var t={up:function(e){e.y=-e.y;e.x=e.x},down:function(e){},right:function(e){var t=e.y;e.y=e.x;e.x=t},left:function(e){var t=e.y;e.y=e.x;e.x=-t}};return t[e]||t.down}function Sd(e){var t=0;n(e,function(e){t=Math.max(t,e.length)});return t}function kd(e){return Rl(e)&&"intra"===e.duType}function Rd(e,t){return Rl({id:e.id})&&(kd(t[e.id1])||kd(t[e.id2]))}function Td(e,t,r){var i={};function o(t,n){"level"in e[n]||(e[n].level=1/0);e[n].level=Math.min(e[n].level,t)}for(var a=0;a<r.length;a++){n(t.distances(r[a]),o);(i[e[r[a]].c]=i[e[r[a]].c]||[]).push(r[a])}var u=0;n(e,function(e){u=Math.max(u,e.level)});return{topByComponent:i,maxLevelNum:u}}function Ld(e,t,n){var r={},i=0;if(n){for(var o=[],a={},u=0;u<e.length;u++)for(var s=0;s<t[u].length;s++)if(!a[t[u][s]]){o.push(t[u][s]);a[t[u][s]]=!0}o.sort(function(e,t){return e-t});i=o.length;for(u=0;u<e.length;u++){r[u]={};for(s=0;s<o.length;s++)r[u][o[s]]=s}}else for(u=0;u<e.length;u++){r[u]={};for(s=0;s<t[u].length;s++)r[u][t[u][s]]=s;i=Math.max(i,t[u].length)}return{customLevelMap:r,maxLevelNum:i}}function Bd(e,t,r,i,o){for(var a={},u={},s=0;s<i.length;s++)u[s]=Gd(t,r,i[s],a);var f=Ld(i,u,o),l={};n(e,function(e){e.level=f.customLevelMap[e.c][a[e.id]]||0;0===e.level&&(l[e.c]=l[e.c]||[]).push(e.id)});return{topByComponent:l,maxLevelNum:f.maxLevelNum}}function Gd(e,t,r,i){var o={},a=[],u=1/0;function s(t){if(t.d&&b(t.d[e])){var n=t.d[e];if(!o[n]){o[n]=[];a.push(n)}o[n].push(t.id);i[t.id]=n;n<u&&(u=n)}}function f(){for(var e=0;e<a.length;e++){for(var n=a[e],r=[],u=t.neighbours(o[n]),s=((a[e+1]||n+1)+n)/2,f=0;f<u.nodes.length;f++){var l=u.nodes[f];if(V(i[l])){r.push(l);i[l]=s}}if(r.length){a.splice(e+1,0,s);o[s]=r}}}n(r.verts,s);if(u===1/0){var l=Object.keys(r.verts)[0];i[l]=0;o[0]=[l];a.push(0)}a.sort(function(e,t){return e-t});f();return a}function Zd(e,t,n,r,i,o,a,u){var s=n(),f=i?"sequential":"hierarchy",l=a?Bd(e,a,s,r,i):Td(e,s,o),c={},d=zd(e,t,r,c,l.maxLevelNum);Od(e,t,f,d,c,u);"hierarchy"===f&&a&&Fd(e,s,d,c,l.topByComponent)}function Od(e,t,n,r,i,o){void 0===o&&(o=[]);for(var a=0,u=t.length;a<u;a++){var s=void 0,f=void 0,l=t[a],c=e[N(l.id1)],d=e[N(l.id2)],h=c.level,v=d.level;if(b(h)&&b(v)){l.level=Math.max(h,v);if(h<v){i[d.id]=!0;f=c;s=d}else if(v<h){i[c.id]=!0;f=d;s=c}}var g=Math.abs(h-v);if(g>1)r.insertChain(s,f,l);else if("sequential"===n&&0===g){r.insertInternalLink(c,d,l);o.push(l)}}}function Fd(e,t,r,i,o){n(e,function(n,a){if(!i[a]&&0!==n.level){for(var u=o[n.c],s=void 0,f=1/0,l=0;l<u.length;l++){var c=t.shortestPaths(a,u[l]);if(c.distance<f){s=c;f=c.distance}}for(var d=0;d<s.one.length;d++){var h=s.one[d],v=e[h];if(v&&"level"in v&&v.level<n.level){var g=r.insertEdge(n,v,n.c);n.level-v.level>1&&r.insertChain(n,v,g);break}}}})}function zd(e,t,n,r,i){var o=0;function a(t,i){var a=t.origId||t.id,u={id:Sl+a+"-"+o++,level:t.level-1,origId:a,x:0,y:0,c:t.c,size:10,fixed:!1,lc:t.lc,duType:i,w:20,h:20,labeloff:0};e[u.id]=u;n[t.c].verts[u.id]=u;r[u.id]=!0;return u}function u(e,r,i,o){void 0===o&&(o=0);var a={id:Sl+e.id+"-"+r.id,id1:e.id,id2:r.id,c:i,numLinks:o};"level"in e&&"level"in r&&(a.level=Math.max(e.level,r.level));t.push(a);n[i].edges.push(a);return a}function s(e,t,n){var r=n.c,i=n.numLinks,o=a(e,"chain"),f=n.id1===t.id;u(f?o:e,f?e:o,r,i);o.level===t.level+1?u(f?t:o,f?o:t,r,i):s(o,t,n)}return{insertEdge:u,insertChain:s,insertInternalLink:function(e,t,n){var r=n.c,o=n.numLinks;if(e.level>0){var s=a(e,"intra");u(e,s,r,o);u(s,t,r,o)}if(e.level<i-1){var f=a(e,"intra");f.level+=2;u(e,f,r,o);u(f,t,r,o)}}}}function Dd(e,t,n,r,i,o,a,u,s,f,l){Yd(r,i,u,s,f,l);Vd(e,t,i,n,o,a,f)}function Yd(e,t,n,r,i,o){var a=2*i+24+o;r||(e.x=n);var u=n-e.subChildrenCount*(a/2),s=e.children;if(s)for(var f=0;f<s.length;f++){var l=t[s[f]],c=l.subChildrenCount;0===c&&(c=1);var d=u+c*a;Yd(l,t,(d+u)/2,!1,i,o);u=d}}function Vd(e,t,n,r,i,o,a){for(var u=i.miny,s=Math.PI*(2/3),f=0,l=0;l<t[e].length;l++){var c=t[e][l].vertices,d=r[l].yOffset,h=r[l].average,v=2*((a<h?h:a)+12)+d;u+=f;for(var g=0;g<c.length;g++){var p=c[g],m=n[p];m.y=u;if(!o){var y=m.children;if(y&&y.length>1){var b=Pd(Wd(y.map(function(e){return n[e]})),s);v=Math.max(v,b)}}}f=v}}function Pd(e,t){return e/(2*Math.tan(t/2))}function Wd(e){for(var t=1/0,n=-1/0,r=0;r<e.length;r++){var i=e[r].x;t=Math.min(t,i);n=Math.max(n,i)}return n-t}function Xd(e,t,r,i,o,a){function u(e,t){return(e.r+t.r)/(e.a-t.a)}function s(e,t,n){var r=t>0?e+n:e+n/2;return r>0?r:e}function f(e,t,n,r){if(r&&1===e.length)return 0;for(var i=t,o=i,a=1;a<e.length;a++)o=Math.max(u(l[e[a]],l[e[a-1]]),o);return s(o,o-i,n)}var l,c=Ll(a);n(t,function(t,n){for(var a=Zl(r[+n].verts),u=0,s=u,d=4*o,h=d,v=2*o+24,g=0;g<t.length;g++){var p=t[g].vertices,m=void 0;l={};for(var y=0;y<p.length;y++){var b=p[y],x=(m=e[b]).x-a.minx,w=a.maxx-a.minx+v;if((x*=2*Math.PI/w)<0||x>2*Math.PI)throw new Error("[Radial] Theta angle should be in the range [0; 2*PI]");l[b]={a:x,r:m.size}}s=u;0===g?p.length>1&&(u+=d/2):u+=d;if((u=f(p,u,c,g<1))-s>h){h=u-s+1;d=Math.max(d,h/2);0===g&&p.length<3&&(u/=2)}for(y=0;y<p.length;y++){(m=e[p[y]]).x=i[+n].x+u*Math.cos(l[m.id].a);m.y=i[+n].y+u*Math.sin(l[m.id].a)}}})}function Nd(e,t){var r={};function i(e,t,n,i){r[e]=r[e]||[];r[e][t]=r[e][t]||{vertices:[],edges:[]};r[e][t][n]=r[e][t][n]||[];r[e][t][n].push(i)}n(e,function(e,t){"level"in e&&i(e.c,e.level,"vertices",t)});for(var o=0;o<t.length;o++)"level"in t[o]&&i(t[o].c,t[o].level,"edges",t[o]);return r}function Ud(e){var t=0,r=0;n(e,function(e){if("level"in e&&!Rl(e)){t+=e.size;r+=1}});return t/r}function Kd(e,t,r){var i=Cd(r);n(t,function(t){for(var n=0;n<t.length;n++)for(var r=t[n].vertices,o=0;o<r.length;o++)i(e[r[o]])})}function jd(e,t,r,i,o,a){var u=wd(e,o),s=z(r,{top:[],orientation:"down",stable:!0,flatten:!1}),f=e.v,l=e.e,c=s.level,d=i?1:Ll(s.tightness),h=F(s.top,f),v=!i&&s.flatten,g=Dl(f,l);Zd(f,l,t,g,!1,h,c);var p=Nd(f,l),m=Ud(f),y=Md(p,f);function b(){n(p,function(e){
for(var t=e.length-1;t>=0;t--)for(var n=e[t].vertices,r=[],i=0;i<n.length;i++){var o=n[i],a=Ed(e,o,t);f[o].children=[];f[o].subChildrenCount=0;if(0!==a.length){for(var u=[],s=0;s<a.length;s++)r.indexOf(a[s])<0&&u.push(a[s]);if(u.length>0){f[o].children=u;f[o].subChildrenCount=x(u);for(s=0;s<u.length;s++){r.push(u[s]);f[u[s]].parent=o}}}}})}function x(e){for(var t=0,n=0;n<e.length;n++){var r=f[e[n]].subChildrenCount;t+=0===r?1:r}return t}b();var w={},A={};n(p,function(e,t){var n=+t;w[n]=Zl(g[n].verts);A[n]={children:p[t][0].vertices,subChildrenCount:x(p[t][0].vertices)}});n(p,function(e,t){Dd(t,p,y,A[t],f,w[t],v,w[t].x,!0,m,d)});i?Xd(f,p,g,w,m,s.tightness):Kd(f,p,s.orientation);s.tidy?s.expanding?td(f,g,[],{},s,a):u.pack(s,a):a(f,{},!0)}function Hd(){var e,t,r,i,o,a,u,s,f,l,c,d,h,v,g,p,m,y=3,b=.5,x=Ya,w=[],A=[];function M(e){f+=l;e.trigger("progress","layout",f)}function I(e,t){function n(e,t,n,r,i){return{isLeaf:!0,children:[],points:[],x1:e,y1:t,x2:n,y2:r,depth:i,m:0}}function r(e){return e.depth>=t}function i(e,t){var r,i,o,a,u=.5*(e.x1+e.x2),s=.5*(e.y1+e.y2);if(0===t||1===t){o=e.y1;a=s}else{o=s;a=e.y2}if(0===t||2===t){r=e.x1;i=u}else{r=u;i=e.x2}e.isLeaf=!1;e.children[t]=n(r,o,i,a,e.depth+1)}function o(e,t){t(e);for(var n=0;n<4;n++)e.children[n]&&o(e.children[n],t)}function a(e,t){if(t.x<e.x1||t.y<e.y1||t.x>e.x2||t.y>e.y2)throw Error("[Layout] Error: the point is out of range.");if(r(e)){e.points.push(t);e.m+=t.m}else{e.points.push(t);var n=.5*(e.x1+e.x2),o=.5*(e.y1+e.y2),u=0;t.x>=n&&t.y<o&&(u=1);t.x<n&&t.y>=o&&(u=2);t.x>=n&&t.y>=o&&(u=3);e.children[u]||i(e,u);a(e.children[u],t)}}for(var u=e.length,s=new Float64Array(u),f=new Float64Array(u),l=0;l<u;l++){s[l]=e[l].x;f[l]=e[l].y}var c=Math.min.apply(0,s),d=Math.max.apply(0,s),h=Math.min.apply(0,f),v=Math.max.apply(0,f),g=d-c,p=v-h;g>p?v=h+g:d=c+p;var m=$n({},n(c,h,d,v,0),{addPoint:function(e){a(m,e)},visit:function(e){o(m,e)}});for(l=0;l<e.length;l++)m.addPoint(e[l]);return m}function E(){var e=[];n(c,function(t,n){var i=r[n];e.push({id:n,x:g[i],y:p[i],m:m[i]})});var t=I(e,y);w.length=0;A.length=0;function i(e){function n(t){if(t.isLeaf){var n=e.x-.5*(t.x1+t.x2),o=e.y-.5*(t.y1+t.y2),a=oe(n,o);if((t.x2-t.x1)/a>b){for(var u=t.points,s=u.length,f=0;f<s;f++)if(e.id!==u[f].id){a=oe(n=e.x-u[f].x,o=e.y-u[f].y);var l=u[f].m;r+=n/a*l;i+=o/a*l}}else{r+=n/a*t.m;i+=o/a*t.m}}}var r=0,i=0;t.visit(n);w.push(r);A.push(i)}for(var o=0;o<e.length;o++)i(e[o]);B(w,A)}function C(e,t,n){for(var r=t,i=T(e,R(L(t,n),-1)),a=new Float64Array(i.buffer.slice(0)),u=k(i,i),s=0;s<20&&u/o>.01;s++){var f=L(a,n),l=u/k(f,a);r=T(r,R(a,l));var c=T(i,R(f,-l));i=c;var d=k(c,c),h=d/u;u=d;a=T(c,R(a,h))}return r}function S(){v=new Array(o);h=new Array(o);for(var e=0;e<o;e++){v[e]=new Int32Array(o);h[e]={};h[e][e]=!0;for(var t=0;t<o;t++)v[e][t]=0}for(e=0;e<i.length;e++){var n=i[e],a=r[n.id1],u=r[n.id2];h[a][u]=!0;h[u][a]=!0;v[a][u]-=1;v[u][a]-=1;v[a][a]+=1;v[u][u]+=1}}function k(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function R(e,t){for(var n=new Float64Array(e.length),r=0;r<e.length;r++)n[r]=e[r]*t;return n}function T(e,t){for(var n=new Float64Array(e.length),r=0;r<e.length;r++)n[r]=e[r]+t[r];return n}function L(e,t){for(var r=new Float64Array(o),i=0,a=function(t){i=0;n(h[t],function(n,r){i+=v[t][r]*e[r]});r[t]=i},u=0;u<o;u++)a(u);r=R(r,t);i=0;for(u=0;u<o;u++)i+=e[u];var s=new Float64Array(o);for(u=0;u<o;u++)s[u]=o*e[u]-i;return T(r,s)}function B(e,t){for(var n=0,r=0,i=0;i<e.length;i++){n+=e[i];r+=t[i]}n/=e.length;r/=e.length;for(i=0;i<e.length;i++){e[i]-=n;t[i]-=r}}function G(e,t,n){for(var r=0;r<t;r++){M(e);E();g=C(w,g,n);p=C(A,p,n);B(g,p)}}function Z(n,f){d=Object.keys(c);r={};g=new Float64Array(o);p=new Float64Array(o);m=new Float64Array(o);var h,v=0,y=0,b=Tl(n.tightness);b=2-2*b/10+1;for(var w=0;w<d.length;w++){var A=d[w];v+=h=Math.max(1,c[A].size);y+=Math.max(1,c[A].w)*Math.max(1,c[A].h);r[A]=w;m[w]=h}var M=y/o,I=1+.015*(Math.sqrt(M)-2*x);s=42*Math.sqrt(o)*b*I;if(i.length/o<1){var E=.65,C=i.length/o;s*=E+C*(1-E)}var S=v/o;for(w=0;w<d.length;w++){p[w]=s*f.next();g[w]=s*f.next();m[w]/=S}e=10*o;t=o/40;l=1/((a=8)+(u=14-a)+2)}function O(e){function t(e){var t=g[r[e]],n=p[r[e]];c[e].x=s*t;c[e].y=s*n}e.forEach(t)}function F(n,r,s,l,h,v){f=0;c=r.v;i=r.e;if((o=r.vcount)>1){Z(l,h);S();G(n,a,e);G(n,u,t);O(d);M(n);wd({v:r.v,e:[]},s).reduceOverlaps(l,v)}else v(c,{},!0)}return{lens:F}}function _d(e,t,r,i,o){var a=nh(e,t,r);n(r,function(e){if(void 0!==e.orderPos){e.children.sort(function(e,t){return r[e].orderPos-r[t].orderPos});e.parents.sort(function(e,t){return r[e].orderPos-r[t].orderPos})}});var u=th(a,r,"ul",i,o),s=th(a,r,"ur",i,o),f=th(a,r,"dl",i,o),l=th(a,r,"dr",i,o),c=[u.extents,s.extents,f.extents,l.extents].sort(function(e,t){return e.max-e.min-(t.max-t.min)})[0];function d(e,t){return e-t}for(var h=0;h<a.length;h++)for(var v=a[h].vertices,g=function(e){var t=v[e],n=r[t],o=[u.xs[t]-u.extents.min+c.min,s.xs[t]-s.extents.max+c.max,f.xs[t]-f.extents.min+c.min,l.xs[t]-l.extents.max+c.max].sort(d);n.x=(o[1]+o[2])/2;if(n.group){var a=n.group,h=n.x-n[i]/2;a.ids.forEach(function(e,t){r[e].x=h+a.positions[t]})}},p=0;p<v.length;p++)g(p)}function Qd(e,t,n){var r=t;if(e.root!==e.id)return r;var i=function(e){return n[n[e.root].sink]},o=i(e).shift;if(void 0!==o)return o<1/0?r+o:r;var a=i(e).shiftData;o=1/0;for(var u=0;u<a.length;u++){var s=a[u].dist;n[a[u].vert].shift<1/0&&(s+=n[a[u].vert].shift);o=Math.min(o,s)}i(e).shift=o;return o<1/0?r+o:r}function Jd(e,t,n,r){if(e.group){var i=e.group.positions.slice(t)[0];return{before:r?i:e[n]-i,after:r?e[n]-i:i}}return"w"===n?{before:e.w/2,after:e.w/2}:r?{before:e.h/2-e.labeloff,after:e.h/2+e.labeloff}:{before:e.h/2+e.labeloff,after:e.h/2-e.labeloff}}function qd(e,t,n,r,i,o,a){var u=e[t],s=e[t].filter(function(e){return Rl({id:e})});s.length>0&&(u=s);for(var f=0,l=[],c=0;c<u.length;c++){var d=o[u[c]];l.push(f);f+=d.group?d.group.ids.length:1}if(f>0){for(var h=[Math.floor((f+1)/2)-1,Math.ceil((f+1)/2)-1],v=Math.floor((l.length+1)/2)-1;l[v+1]<=h[0];)v++;for(;l[v-1]>=h[0];)v--;var g=[{id:u[v],groupIdx:h[0]-l[v]}];l[v+1]<=h[1]&&v++;g.push({id:u[v],groupIdx:h[1]-l[v]});for(var p=0;p<2;p++){var m=i?g[p]:g[1-p],y=r[m.id],b=y.pos;if(n<b){y.align=e.id;y.sizeSplit=a(m.id,m.groupIdx);e.root=y.root;e.align=e.root;return b}}}return n}function $d(e,t,n,r,i){for(var o=[],a={},u=r?0:e.length-1,s=r?1:-1,f=function(t){return r?t<e.length:t>=0},l=function(e){return n?0:e.length-1},c=n?1:-1,d=function(e,t){return n?e<t.length:e>=0},h=function(e,r){return Jd(t[e],r,i,n)},v=u;f(v);v+=s)for(var g=e[v].vertices,p=void 0,m=-1,y=0,b=l(g);d(b,g);b+=c){var x=g[b],w=t[x];o.push(x);a[x]={id:g[b],pos:y++,predecessor:p,align:x,root:x,sink:x,shiftData:[],sizeSplit:h(x,n?0:-1),parents:w.parents.filter(function(e){return!kd(t[e])}),children:w.children.filter(function(e){return!kd(t[e])})};var A=r?"parents":"children";m=qd(a[x],A,m,a,n,t,h);p=x}return{order:o,details:a}}function eh(e,t,n,r){var i,o,a,u;if(void 0===n[e.id]){i=e;n[e.id]=0;do{if(void 0!==i.predecessor){eh(a=t[(o=t[i.predecessor]).root],t,n,r);e.sink===e.id&&(e.sink=a.sink);u=i.sizeSplit.before+o.sizeSplit.after+r;e.sink!==a.sink?(t[a.sink].shiftData=t[a.sink].shiftData||[]).push({vert:e.sink,dist:n[e.id]-n[a.id]-u}):n[e.id]=Math.max(n[e.id],n[a.id]+u)}i=t[i.align]}while(i.id!==e.id)}}function th(e,t,r,i,o){for(var a="l"===r[1],u="u"===r[0],s={},f=1/0,l=-1/0,c=$d(e,t,a,u,i),d=0;d<c.order.length;d++){(v=c.details[c.order[d]]).root===v.id&&eh(v,c.details,s,o)}for(d=0;d<c.order.length;d++){var h=c.order[d],v=c.details[h];s[h]=Qd(v,s[v.root],c.details)}for(d=0;d<c.order.length;d++){h=c.order[d],v=c.details[h];f=Math.min(f,s[h]-v.sizeSplit.before);l=Math.max(l,s[h]+v.sizeSplit.after);void 0!==t[h].group&&(s[h]+=(v.sizeSplit.after-v.sizeSplit.before)/2)}if(!a){n(s,function(e,t){s[t]*=-1});return{xs:s,extents:{max:-f,min:-l}}}return{xs:s,extents:{max:l,min:f}}}function nh(e,t,n){var r=[],i=[];e.forEach(function(e){for(var o=t[e],a=0;a<o.length;a++){r[a]||(r[a]={vertices:[],edges:[]});r[a].vertices=r[a].vertices.concat(o[a].vertices.filter(function(e){return!kd(n[e])}));r[a].edges=r[a].edges.concat(o[a].edges.filter(function(e){return!Rd(e,n)}));i[a]=r[a].vertices.length}});return r}function rh(e,t,r,i,o,a,u){var s="equal"===u?ih:oh,f=0;e.forEach(function(e){s(t[e],r,o,a);var u=i[e].verts,l=zl(u);f-=l.x1;n(u,function(e){e.x+=f});f+=l.x2+a})}function ih(e,t,n,r){for(var i=function(i){var o=0,a=e[i].vertices;mh(a,t,function(e){if(!Rl(e)){var t=e[n]/2,i="h"===n?e.labeloff:0;o+=t-i;e.x=o;o+=t+i+r}});var u=(o-r)/2;mh(a,t,function(e){e.x-=u})},o=0;o<e.length;o++)i(o)}function oh(e,t,n,r){for(var i=[],o=[],a=0,u=function(u){var s=e[u].vertices;i[u]=0;o[u]=0;mh(s,t,function(e){if(!Rl(e)){i[u]+=e[n];o[u]++}});var f=i[u]+r*(o[u]-1);a=Math.max(a,f)},s=0;s<e.length;s++)u(s);var f=function(r){var u=e[r].vertices;if(o[r]>1){var s=(a-i[r])/(o[r]-1),f=0;mh(u,t,function(e){if(!Rl(e)){var t=e[n]/2,r="h"===n?e.labeloff:0;f+=t-r;e.x=f;f+=t+r+s}})}else for(var l=0;l<u.length;l++){var c=t[u[l]];Rl(c)||(c.x=a/2)}};for(s=0;s<e.length;s++)f(s)}function ah(e,t,r,i,o){var a,u=uh(e,t,r,i,o),s=function(e){e.y=a};n(e,function(e){a=0;for(var n=0;n<e.length;n++){mh(e[n].vertices,t,s);a+=u}});return u}function uh(e,t,n,r,i){for(var o=0,a=Md(e,t,r),u=[],s=0;s<n.length;s++){var f=n[s].level,l=n[s].arrowSize;u[f]=Math.max(u[f]||0,2*l)}for(var c=0;c<a.length;c++){var d=a[c].max/2,h=0;a[c+1]&&(h=a[c+1].max/2);var v=u[c]||0;o=Math.max(o,d+h+i+Math.max(i,v))}return o}function sh(e,t,n,r,i,o,a,u,s){"auto"===a?_d(e,t,n,r,i):rh(e,t,n,o,r,i,a);return ah(t,n,u,s,i)}function fh(e,t){var r={};function i(e,t,n,i){r[e]=r[e]||[];r[e][t]=r[e][t]||{vertices:[],edges:[]};for(var o=0;o<t;o++)r[e][o]=r[e][o]||{vertices:[],edges:[]};r[e][t][n]=r[e][t][n]||[];r[e][t][n].push(i)}n(e,function(e,t){"level"in e&&i(e.c,e.level,"vertices",t)});for(var o=0;o<t.length;o++){var a=t[o];if("level"in a)if(e[a.id2].level-e[a.id1].level==1)i(a.c,a.level,"edges",a);else if(e[a.id1].level-e[a.id2].level==1){var u={id:a.id,id1:a.id2,id2:a.id1,numLinks:a.numLinks,level:a.level};i(a.c,a.level,"edges",u)}}return r}function lh(e,t){for(var n=0;n<e.length;n++){for(var r=e[n].vertices,i=0;i<r.length;i++){var o=r[i],a=t[o];a.childEdges=[];a.parentEdges=[];a.children=[];a.parents=[];a.barycenter=1/0;a.orderPos=i}e[n].edges.forEach(function(e){t[e.id1].childEdges.push(e);t[e.id1].children.push(e.id2);t[e.id2].parentEdges.push(e);t[e.id2].parents.push(e.id1)})}}function ch(e,t,n){var r=[],i=0,o=0,a=0,u=0;e.forEach(function(e){var s=t[e];r.push(i+s.w/2);i+=s.w+n;o=Math.max(o,s.h-2*s.labeloff);a=Math.max(a,s.h+2*s.labeloff);u+=s.lc||0});return{w:i-=n,h:o+a,labeloff:(a-o)/2,lc:u,positions:r}}function dh(e,t,n){var r=[],i=0,o=0,a=0;e.forEach(function(e){var u=t[e];r.push(o+(u.h/2-u.labeloff));o+=u.h+n;i=Math.max(i,u.w);a+=u.lc||0});return{w:i,h:o-=n,labeloff:0,lc:a,positions:r}}function hh(e,t,n,r,i){var o=("w"===r?ch:dh)(t,n,i);return{id:e,w:o.w,h:o.h,x:n[t[0]].x,y:n[t[0]].y,fixed:!1,labeloff:o.labeloff,lc:o.lc,level:n[t[0]].level,group:{ids:t,positions:o.positions}}}function vh(e,t,n,r){for(var i=e.sort(function(e,t){return e[n]<t[n]?-1:e[n]>t[n]?1:0}),o=0;o<i.length;o++){var a=i[o][t];r[a]=r[a]||{str:"",list:[]};r[a].str=r[a].str+" _"+i[o][n];r[a].list.push(i[o][n])}}function gh(e,t,n,r,i){var o={},a=e.filter(function(e){var a;if(-1===r.indexOf(e[t]))return!0;if(o[e[n]]){o[e[n]].numLinks+=e.numLinks||0;o[e[n]].arrowSize=Math.max(o[e[n]].arrowSize,e.arrowSize||0);(a=o[e[n]].links).push.apply(a,e.links||[])}else{var u="id1"===n?{id1:e[n],id2:i}:{id1:i,id2:e[n]};u.id=e.id;u.c=e.c;u.level=e.level;u.numLinks=e.numLinks||0;u.links=e.links||[];o[e[n]]=u}return!1});a.push.apply(a,j(o));return a}function ph(e,t,r,i){var o,a=0,u=0;function s(n){var s=n.filter(function(e){return!Rl({id:e})});if(s.length>1){for(var f=o[s[0]].list,l=1;l<s.length;l++){if(o[s[l]].list.length!==f.length)return;if(!o[s[l]].list.every(function(e,t){return e===f[t]}))return}var c="_group"+a+++"c"+t[s[0]].c;t[c]=hh(c,s,t,r,i);e[u].vertices=e[u].vertices.filter(function(e){return-1===s.indexOf(e)});e[u].vertices.push(c);u>0&&(e[u].edges=gh(e[u].edges,"id2","id1",s,c));u<e.length-1&&(e[u+1].edges=gh(e[u+1].edges,"id1","id2",s,c))}}for(var f=function(){o={};u>0&&vh(e[u].edges,"id2","id1",o);u<e.length-1&&vh(e[u+1].edges,"id1","id2",o);var t={};n(o,function(e,n){(t[e.str]=t[e.str]||[]).push(n)});n(t,s)};u<e.length;u++)f()}function mh(e,t,n){for(var r=0;r<e.length;r++){var i=t[e[r]];i.group?i.group.ids.forEach(function(e){n(t[e])}):n(i)}}function yh(e,t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(r.barycenter===1/0)break;r.orderPos=n}}function bh(e,t,n,r){for(var i=!0,o=-1,a={},u=0;u<e.length;u++){var s=e[u];a[s]=u;if(!n&&t[s].barycenter===1/0){i=!1;break}for(var f=0,l=0,c=t[s][r],d=0;d<c.length;d++)if(t[c[d]].barycenter===1/0)i=!1;else{l++;var h=t[c[d]].orderPos;-1!==h&&(f+=h)}var v=!0;l>0?t[s].barycenter=f/l:t[s].barycenter===1/0?i=!1:0===u?t[s].barycenter=0:v=!1;if(v){if(o+1<u)for(var g=t[e[o]].barycenter,p=Math.min(g,t[s].barycenter),m=Math.abs(g-t[s].barycenter),y=u-o,b=1;b<y;b++)t[e[o+b]].barycenter=p+m*(b/y);o=u}}e.sort(function(e,n){return t[e].barycenter===t[n].barycenter?a[e]-a[n]:t[e].barycenter-t[n].barycenter});yh(e,t);return i}function xh(e,t,n,r){e.sort(function(e,i){var o=t[e[n]].orderPos,a=t[e[r]].orderPos,u=t[i[n]].orderPos,s=t[i[r]].orderPos;return o<u||o===u&&a<s?-1:1})}function wh(e,t,n){if(t<1||e.length<=t)return 0;var r=e[t].edges,i=e[t-1].vertices,o=e[t].vertices;return i.length>o.length?Ah(r,n,"id1","id2"):Ah(r,n,"id2","id1")}function Ah(e,t,n,r){if(e.length<2)return 0;xh(e,t,n,r);var i=e.map(function(e){return t[e[r]].orderPos});i.sort(function(e,t){return e-t});var o={};i.forEach(function(e,t){o[e]=t});for(var a=e.map(function(e){var n=o[t[e[r]].orderPos];return{index:n,multiplier:void 0===n?0:e.numLinks}}),u=1;u<a.length;)u*=2;var s=new Int32Array(2*u-1);u-=1;for(var f=0,l=0;l<a.length;l++){var c=a[l].index+u;s[c]+=a[l].multiplier;for(;c>0;){c%2&&(f+=s[c+1]*a[l].multiplier);s[c=Math.floor((c-1)/2)]+=a[l].multiplier}}return f}function Mh(e,t,n){var r=e.concat(t),i={};r.forEach(function(e){i[e[n]]=!0});var o=Object.keys(i),a=o.length;return{verts:o,edges:r,common:e.length===a&&t.length===a}}function Ih(e,t){return Mh(e.childEdges||[],t.childEdges||[],"id2")}function Eh(e,t){return Mh(e.parentEdges||[],t.parentEdges||[],"id1")}function Ch(e,t,n){for(var r=1,i=e[t].vertices,o=0,a=0,u=0;u<i.length-1;u+=r){var s=i[u],f=i[u+1],l=!1,c=t>0?Eh(n[s],n[f]):{common:!0,edges:[]},d=t<e.length-1?Ih(n[s],n[f]):{common:!0,edges:[]},h=c.common?[]:c.edges,v=d.common?[]:d.edges,g=Ah(h,n,"id1","id2")+Ah(v,n,"id2","id1"),p=n[f].orderPos;n[f].orderPos=n[s].orderPos;n[s].orderPos=p;var m=Ah(h,n,"id1","id2")+Ah(v,n,"id2","id1");if(g<=m){n[s].orderPos=n[f].orderPos;n[f].orderPos=p}else{l=!0;o+=g-m;i[u]=f;i[u+1]=s;if(1===r){a=Math.max(a,u);r=-1}if(0===u){u=a;r=1}}if(!l&&-1===r){u=a;r=1}}return o}function Sh(e,t){var n;do{n=0;for(var r=0;r<e.length;r++)n+=Ch(e,r,t)}while(n>0)}function kh(e,t,n){for(var r,i,o=e,u=!1,s=!1,f=!0,l=0,c=o.length,d=0;d<o.length;d++)if(o[d].vertices.length>0){c=d;break}if(c===o.length-1)return o;o[c].vertices.sort(function(e,n){return t[n].childEdges.length-t[e].childEdges.length});t[o[c].vertices[0]].barycenter=0;t[o[c].vertices[0]].orderPos=0;var h=1/0;do{r=h;if(s){h=0;i=a(o)}else h=1/0;for(d=c;d<o.length-1;d++){u=bh(o[d+1].vertices,t,!0,"parents");if(f){bh(o[d].vertices,t,!1,"children");u=bh(o[d+1].vertices,t,!1,"parents")}}s=u;for(d=o.length-1;d>c;d--){u=bh(o[d-1].vertices,t,d<l+2,"children");if(f){bh(o[d].vertices,t,!1,"parents");u=bh(o[d-1].vertices,t,!1,"children")}else h+=wh(o,d,t);u||(s=!1)}f=!s}while(l++<100&&(h===1/0||h<r));i&&(o=i).forEach(function(e){yh(e.vertices,t)});h>0&&n<1e4&&Sh(o,t);return o}function Rh(e,t,n){var r=[],i={},o=[];if(n.length>0){var a={};n.forEach(function(n){var o=t[n].c;if(!a[o]){r.push(o);a[o]=!0;i=ne(i,e[o].verts)}});if(r.length<e.length){o.push({verts:i,edges:[]});e.forEach(function(e){if(!a[e.c]){o.push(e);a[e.c]=!0}})}}else r=e.map(function(e){return e.c});return{orderedComponents:r,packingComponents:o}}function Th(e,t,n,r,i,o,a){void 0===r&&(r="down");for(var u={},s=0;s<e.length;s++){var f=e[s];f.links.sort(function(e,t){return(D(e.off)?e.off*e.sign:1/0)-(D(t.off)?t.off*t.sign:1/0)});var l=0,c=0,d=0,h=!0,v=t[f.c][f.level].vertices,g=n[f.id1].orderPos,p=n[f.id2].orderPos,m=g<p?[g,p]:[p,g],y=g<p?1:-1;r.match(/right|up/)&&(y*=-1);for(var b=m[0]+1;b<m[1];b++){var x=n[v[b]];Rl(x)||(h=!1);for(var w=0;w<x.parentEdges.length;w++)l+=x.parentEdges[w].numLinks;for(w=0;w<x.childEdges.length;w++)c+=x.childEdges[w].numLinks;var A=(x[i]||x.size)/2;d=Math.max(d,A)}if(!h){if(c===l){l=n[v[m[0]]].parentEdges.length+n[v[m[1]]].parentEdges.length;c=n[v[m[0]]].childEdges.length+n[v[m[1]]].childEdges.length}var M=c<l?-y:y,I=d+20,E=40,C=a/2;I+=Math.abs(n[f.id1].x-n[f.id2].x)/o;(I=Math.min(I,C))+(f.links.length-1)*E>C&&(E=Math.max(10,(C-I)/(f.links.length-1)));for(b=0;b<f.links.length;b++){var S=f.links[b],k=I+b*E;u[S.id]={off:M*S.sign*k}}}}return u}function Lh(e,t,r){var i=Cd(r);n(t,function(t){for(var n=0;n<t.length;n++)mh(t[n].vertices,e,i)})}function Bh(e,t,r,i){var o=z(r,{top:[],orientation:"down",spacing:"auto"}),a=e.v,u=e.e,s=o.level,f=F(o.top,a),l=50+Ll(o.tightness),c=o.orientation.match(/right|left/)?"h":"w",d=o.orientation.match(/right|left/)?"w":"h",h=Dl(a,u),v=[];if(!s&&0===f.length)throw new Error("Sequential Layout: LayoutOptions is missing valid level or top property.");Zd(a,u,t,h,!0,f,s,v);var g=fh(a,u);n(g,function(e,t){ph(e,a,c,l);lh(e,a);g[t]=kh(e,a,u.length)});var p=Rh(h,a,f),m=p.orderedComponents,y=p.packingComponents,b=sh(m,g,a,c,l,h,o.spacing,u,d),x=Th(v,g,a,o.orientation,d,l,b);o.orientation.match(/up|right|left/)&&Lh(a,g,o.orientation);n(a,function(e){e.group&&delete a[e.id]});o.tidy&&!s&&y.length>0?td(a,y,[],x,o,i):i(a,x,!0)}var Gh=Math.pow(10,-3.8),Zh=1.35,Oh=Math.pow(Ya,Zh);function Fh(e,t,n,r){return{leaf:!0,nodes:{},point:null,x1:e,y1:t,x2:n,y2:r}}function zh(e,t){var n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=.5*(n+i),u=.5*(r+o),s=t.x>=a,f=t.y>=u,l=(f?2:0)+(s?1:0);e.leaf=!1;s?n=a:i=a;f?r=u:o=u;e.nodes[l]||(e.nodes[l]=Fh(n,r,i,o));Dh(e.nodes[l],t)}function Dh(e,t){if(e.leaf){var n=e.point;if(n){if(Math.abs(n.x-t.x)+Math.abs(n.y-t.y)<.01){zh(e,t);return}e.point=null;zh(e,n);zh(e,t);return}e.point=t}else zh(e,t)}function Yh(e,t){if(!e(t))for(var n=t.nodes,r=0;r<4;r++)n[r]&&Yh(e,n[r])}function Vh(e){var t=0,n=0;e.charge=0;e.size=0;if(!e.leaf)for(var r=e.nodes,i=0;i<4;i++){var o=r[i];if(o){Vh(o);e.charge+=o.charge;e.size+=o.size;t+=o.charge*o.cx;n+=o.charge*o.cy}}if(e.point){var a=Ph(e.point);e.pointCharge=a;e.charge+=a;e.size+=e.point.size;t+=a*e.point.x;n+=a*e.point.y}e.cx=e.charge?t/e.charge:0;e.cy=e.charge?n/e.charge:0}function Ph(e){return Ya*Math.pow(e.size,Zh)/Oh*(1+(e.lc?e.lc:1)/3)}function Wh(e,t){var r=Zl(e),i=r.minx,o=r.miny,a=r.maxx,u=r.maxy,s=a-i,f=u-o;s>f?u=o+s:a=i+f;var l,c=.5;function d(e){if(e.point!==l){var t=e.cx-l.x,n=e.cy-l.y,r=1/oe(t,n);if((e.x2-e.x1)*r<c){v(l,e.charge,r,t,n);return!0}e.point&&v(l,e.pointCharge,r,t,n)}return!e.charge}var h=1e5;function v(e,t,n,r,i){g(e,t,r,i,Math.min(n,h))}function g(e,n,r,i,o){if(!(o<Gh)){var a=t*Ph(e)*n*o*o*o;e.dx-=r*a;e.dy-=i*a}}var p=Fh(i,o,a,u);n(e,function(e){Dh(p,e)});function m(){n(e,function(e){l=e;Yh(d,p)})}Vh(p);m()}function Xh(e){var t=Tl(e.tightness);return Math.pow(2,.4*(t-5))}function Nh(e,t,n,r){Hh(e[t.id1],e[t.id2],n,r)}function Uh(e,t,n){return e.size+t.size+n*(1+((e.lc?e.lc:1)+(t.lc?t.lc:1))/6)}function Kh(e,t,n,r){var i=t[e.id1],o=t[e.id2],a=i.x-o.x,u=i.y-o.y,s=Uh(i,o,n),f=oe(a,u);if(f>.02){var l=r*((f-s)/f),c=a*l,d=u*l;i.dx-=c;i.dy-=d;o.dx+=c;o.dy+=d}}function jh(e,t){if(!e.fixed){var n=oe(e.dx,e.dy),r=e.dx/n*Math.min(n,t),i=e.dy/n*Math.min(n,t);e.x+=r;e.y+=i}}function Hh(e,t,n,r){var i,o,a;if(!e.fixed||!t.fixed){var u=2*r.next()*Math.PI;a=1.3*Uh(e,t,n)/2;if(e.fixed||t.fixed){i=e.fixed?e.x:t.x;o=e.fixed?e.y:t.y;a*=2}else{i=(e.x+t.x)/2;o=(e.y+t.y)/2}if(!e.fixed){e.x=i+a*Math.cos(u);e.y=o+a*Math.sin(u);u+=Math.PI}if(!t.fixed){t.x=i+a*Math.cos(u);t.y=o+a*Math.sin(u)}}}function _h(e,t){var n=e.extents,r=n.c,i=Math.max(n.x2-n.x1,n.y2-n.y1),o=120*Math.sqrt(r),a=Math.max(i,o)/2,u=0;r>1&&(u=Math.min(Math.pow(r,2.5),100));var s=u*r*Math.log(r),f=1/Xh(t);return{repulsionFactor:40*(f>1?Math.pow(f,2):f),coeff:1,naturalDistance:20*f,iterations:u,chunk:20,temperature:a,estTime:s}}function Qh(e,t,n,r){var i={temperature:10,i:0},o={verts:e.v,edges:e.e},a=_h(e,t);a.chunk=5;a.iterations=5;i.temperature=Math.pow(a.temperature,.72);Jh(i,o,a,n);r(e.v,{},!1)}function Jh(e,t,r,i){var o,a,u=Math.min(e.i+r.chunk,r.iterations);function s(e){e.dx=0;e.dy=0;o++}function f(e){jh(e,a)}for(;e.i<u;){var l=t.verts,c=t.edges;o=0;n(l,s);Gl(l,i,2);if(1===o){e.i=u;return}if(2===o){if(c[0])Nh(l,c[0],r.naturalDistance,i);else{var d=j(l);Hh(d[0],d[1],r.naturalDistance,i)}e.i=u;return}Wh(l,r.repulsionFactor);for(var h=0;h<c.length;h++)Kh(c[h],l,r.naturalDistance,r.coeff);a=e.temperature*(1-e.i/r.iterations);n(l,f);e.i++}}function qh(e,t,n,r,i,o,a){var u={i:0,temperature:n.temperature};function s(){return r+(i-r)*(u.i/n.iterations)}function f(){return u.i>=n.iterations}function l(){Jh(u,t,n,o)}function c(){l();if(f())a();else{e.trigger("progress","layout",s());v(c,0)}}c()}function $h(e){var t=0,r=0,i=0,o=!1,a=0,u=0;n(e,function(e){t+=e.x;r+=e.y;i+=1;o=o||e.fixed});if(!(i<3||o)){t/=i;r/=i;n(e,function(e){var n=Math.sqrt((e.x-t)*(e.x-t)+(e.y-r)*(e.y-r));if(n>u){u=n;a=Math.atan2(e.y-r,e.x-t)}});a=-a;var s=Math.sin(a),f=Math.cos(a);n(e,function(e){var n=t+(e.x-t)*f-(e.y-r)*s,i=r+(e.x-t)*s+(e.y-r)*f;e.x=n;e.y=i})}}function ev(e,t,n,r,i,o){for(var a=t.v,u=t.vcount,s=t.e,f=Dl(a,s),l=r.fixed||[],c=u/(u+f.length),d=0,h=r.tidy?c:1,g=[],p=0,m=Date.now(),y=0;y<f.length;y++){var b=_h(f[y],r);p+=b.estTime;g.push(b)}for(var x=0,w=0;w<f.length;w++){g[w].start=x;var A=x+(h-d)*(g[w].estTime/p);g[w].stop=A;x=A}var M=0;function I(t){var n=t,r=f[n],o=g[n];qh(e,r,o,o.start,o.stop,i,function(){$h(r.verts);M++;if(++n<f.length){var e=Date.now();if(e-m>16||M>1e3){m=e;M=0;v(function(){I(n)},0)}else I(n)}else C()})}var E=0===l.length;function C(){r.tidy?r.expanding?td(a,f,l,{},r,o):wd(t,n).pack(r,o):o(a,{},E)}f.length>0?I(0):o(a,{},E)}function tv(e,t,n,r,i,o){e[t]=r?n[t]:re({},n[t],{x:i,y:o})}function nv(e,t,r){var i={},o=[],a=0,u={include:!0,maxLength:r.privateGetMaxLabelLength()};n(e.rev,function(s,f){for(var l={x:0,y:0,size:0},c=s.length,d=0;d<c;d++){var h=t[s[d]];l.x+=h.x;l.y+=h.y;l.size+=h.size}l.x/=c;l.y/=c;var v=document.createElement("canvas").getContext("2d"),g=Bc(),p=j(t).filter(function(t){return e.rev[f].indexOf(t.id)>-1}).map(function(e){var t=r.privateGetItem(e.id);e.r=jl(t,v,{include:!1}).radius;e.radiusWithText=jl(t,v,u).radius;e.labelOffset=0;return e}),m=0,y=0;p.forEach(function(e){m+=e.r;y+=e.radiusWithText});var b=(y-m)/p.length,x=.5,w=g.concentricLayout(p,{padding:Math.max(8,b*x)}),A={positions:$(w)},M=Ql(w,{x:0,y:0},v,0);i[f]={id:f,x:l.x,y:l.y,size:M,r:void 0,fixed:!1,lc:0,w:void 0,h:void 0,labeloff:0,labelOffset:0,radiusWithText:M,jit:A};a++;for(var I=s[0],E={},C=e.index[I],S=0;S<C.length;S++){var k=C[S];E[e.ids[k]]=!0}n(E,function(e,t){f<t&&o.push({id1:f,id2:t})})});for(var s=0;s<o.length;s++){var f=o[s].id1,l=o[s].id2;i[f].lc++;i[l].lc++}n(t,function(t,n){if(!e.ids[n]){i[n]={id:n,x:t.x,y:t.y,size:t.size,lc:0,fixed:t.fixed,labeloff:0,labelOffset:0,radiusWithText:t.size,r:t.size,w:t.w,h:t.h,jit:{radius:t.size,position:{x:0,y:0}}};a++}});return{v:i,e:o,vcount:a,extents:zl(i)}}function rv(e,t,n){e[n]||(e[n]=[]);e[n].push(t)}function iv(e,t){rv(e,t.id1,t.id2);rv(e,t.id2,t.id1)}function ov(e){for(var t={},n=0;n<e.length;n++)iv(t,e[n]);return t}function av(e){var t={},r={};n(e,function(e,n){e.sort();for(var i="",o=0;o<e.length;o++)i+=e[o];t[i]||(t[i]=[]);t[i].push(n);r[n]=i});return{rev:t,ids:r,index:e}}function uv(e){return av(ov(e))}function sv(e,t,r,i,o,a,u){var s=uv(t.e),f=nv(s,t.v,o),l=function(o){var a={};n(o.vertices,function(e,n){if(s.rev[n])for(var r=s.rev[n],i=e.fixed,o=0;o<r.length;o++){var u=r[o],f=e.x,l=e.y;if(e.jit.positions){f+=e.jit.positions[u].x;l+=e.jit.positions[u].y}tv(a,u,t.v,i,f,l)}else tv(a,n,t.v,t.v[n].fixed,e.x,e.y)});var l=Dc(e,i,f.extents,u);if(i.expanding&&i.tidy){var c=Dl(a,t.e);td(a,c,i.fixed||[],{},i,l)}else wd({v:a,e:t.e},r).pack(i,l)},c=Dc(e,i,t.extents,l);ev(e,f,r,re({},i,{tidy:!1}),a,c)}var fv=new RegExp("^(standard|hierarchy|lens|sequential|radial|structural|tweak|"+j(vd).join("|")+")$"),lv=new RegExp("^(standard|lens|structural|"+vd.organic+")$"),cv=new RegExp("^(standard|tweak|"+vd.organic+")$"),dv=new RegExp("^(standard|structural|"+vd.organic+")|radial|hierarchy$"),hv=J(["standard","structural"]);function vv(e){var t=de();function r(r,i,o,a,u,s,f,l){i.trigger("prechange","layout");if(!fv.test(r))throw new Error("The layout name is not valid.");lv.test(r)||delete s.consistent;cv.test(r)||delete s.fixed;dv.test(r)&&(V(s.packing)?s.packing=s.tidy?"rectangle":"none":s.tidy="none"!==s.packing);if(hv[r]||s.consistent){var c=O(s.fixed||[]),d=J(c),h=0,v=0;if(c.length){n(d,function(e,t){if(t in o.v){h+=o.v[t].x;v+=o.v[t].y}});h/=c.length;v/=c.length}n(o.v,function(e,t){if(!d[o.v[t].id]){o.v[t].x=h;o.v[t].y=v}})}t.setSeed(s.consistent?900736044081:null);i.trigger("progress","layout",0);var g=l?zc(i,s,o.extents,f):Dc(i,s,o.extents,f);switch(r){case"standard":ev(i,o,u,s,t,g);break;case"hierarchy":jd(o,a,s,!1,u,g);break;case"lens":Hd().lens(i,o,u,s,t,g);break;case"sequential":Bh(o,a,s,g);break;case vd.organic:wd(o,u).organic(s,g,l);break;case"structural":sv(i,o,u,s,e,t,f);break;case"radial":jd(o,a,s,!0,u,g);break;case"tweak":Qh(o,s,t,g)}}return{arrange:dd,extractStructure:Ad(e),layout:r}}function gv(e,t,n,r){var i=Bc(),o=mv(t),u={},s={list:[],index:{},nulls:0,comboLinkAdj:{}},f={},l=null,c=[],d={},h=z(e,{arrange:"concentric",resize:!0,updateGlyph:!0});function v(){s={list:[],index:{},nulls:0,comboLinkAdj:{}};u={};f={};l=null;c=[]}function g(){return{itemsToMergeList:s.list,propertiesToSetMap:u,idsToRemoveMap:f,idsToSelectMap:l}}function p(){var e={nodes:{},links:{}};t.privateGetRawItems().concat(s.list).forEach(function(t){if(null!==t){var n=fe(t.id),r=A(t.id);n||r||("node"===t.type?e.nodes[t.id]=w(t.id):e.links[t.id]=t)}});return e}function m(e,n){var r,i=u[e];if(void 0!==i&&void 0!==(r=i[n]))return r;var o=D(e);if(null!==o&&void 0!==(r=o[n]))return r;var s=t.privateGetItem(e);return s?a(s[n]):void 0}function y(e,t){return m(e,t)}function x(e,t){return m(e,t)}function w(e){if(f[e])return null;var n=a(t.privateGetItem(e))||{},r=D(e);null!==r&&ne(n,r);u[e]&&ne(n,u[e]);return n}function A(e){return m(e,"parentId")}function M(e){return m(e,"_combo")}function I(e){return M(e)}function E(e,t){var n=m(e,"_combo");if(n){n.nodeIds&&n.nodeIds.forEach(t);n.linkIds&&n.linkIds.forEach(t)}}function C(e){var t=u[e];if(!t){t={id:e};u[e]=t}return t}function S(e,t,n){C(e)[t]=n}function k(e,t,n){S(e,t,n)}function T(e){var t=C(e.id);re(t,e)}function L(e,t){k(e,"_offset",t)}function B(e,t,n){var r=I(e);r[t]=n;S(e,"_combo",r)}function G(e,t){if(n&&n.api.isShown()){var r=w(e),i=n.internalUse.preMerge([r]);S(e,"hi",i[0].hi);ge(e,i[0].x-r.x,i[0].y-r.y)}else if(h.reposition&&t){var o=x(e,"_offset"),a=x(t,"x"),u=x(t,"y"),s=x(e,"x"),f=x(e,"y");ge(e,a-o.x-s,u-o.y-f)}}function Z(e,t){var n=A(e)||null;if(t!==n){oe(e);S(e,"parentId",t);if("node"===m(e,"type"))if(t)x(e,"_offset")||L(e,{x:x(t,"x")-x(e,"x"),y:x(t,"y")-x(e,"y")});else{G(e,n);L(e,void 0)}}}function O(e,t){e.forEach(function(e){Z(e,t);f[e]&&oe(e)})}function F(e){var t=s.index[e];if(void 0!==t){var n=s.list[t];s.list[t]=null;delete s.index[e];s.nulls++;var r=s.list.length;if(r>0&&s.nulls/r>.5){s.index={};for(var i=0,o=0;o<r;){if(null!==s.list[o]){s.list[i]=s.list[o];s.index[s.list[i].id]=i;i++}o++}s.list.length=i;s.nulls=0}if(null!==n&&"link"===n.type&&n._combo){var a=s.comboLinkAdj;delete a[n.id1][n.id2];delete a[n.id2][n.id1]}}}function D(e){var t=s.index[e];return void 0===t?null:s.list[t]}function Y(e){if(void 0===s.index[e.id]){s.index[e.id]=s.list.push(e)-1;if("link"===e.type&&void 0!==e._combo){var t=s.comboLinkAdj,n=e.id1,r=e.id2;void 0===t[n]&&(t[n]={});void 0===t[r]&&(t[r]={});t[n][r]=e;t[r][n]=e}}else s.list[s.index[e.id]]=e}function P(e,t,n){if(n){var r=M(n);if(e&&r.nodeIds&&e.length>0){pv(r.nodeIds,e);e.forEach(function(e){d[e]=!0})}if(t&&t.length>0){pv(r.linkIds,t);t.forEach(function(e){d[e]=!0})}S(n,"_combo",r)}n&&U(n)&&t.length&&Q(n)}function W(e,t){P(e,[],t);O(e,t)}function X(e,t){P([],e,t);O(e,t)}function N(e){var t=e,n=[];do{n.unshift(t);t=A(t)}while(t);return n}function U(e){return M(e)&&"link"===m(e,"type")}function K(e){return M(e)&&"node"===m(e,"type")}function H(){var e=[];j(u).forEach(function(t){t._combo&&K(t.id)&&e.push(t.id)});return e}function _(e){for(var t,n,r,i=N(y(e,"id1")),o=N(y(e,"id2")),a=0,u=Math.min(i.length,o.length);a<u&&i[a]===o[a];)a++;if(a===i.length){t=o[a-1];n=o[a];r=t}else if(a===o.length){t=i[a-1];n=i[a];r=t}else{t=i[a];n=o[a];r=0===a?null:i[a-1]}return{id1:t,id2:n,parentId:r}}function Q(e){if(!f[e]){for(var t=y(e,"id1"),n=M(e).linkIds,r=n.length,i=!1,o=!1,a=!0,u=0;u<r;u++){var s=!!y(n[u],"a1"),l=!!y(n[u],"a2"),c=t===_(n[u]).id1;o=o||(c?l:s);if((i=i||(c?s:l))&&o)break}for(u=0;u<r;u++)if(!m(n[u],"hi")){a=!1;break}T({id:e,a1:i,a2:o,hi:a})}}function J(t,n,i){var o=r(),u=a(i,!0);u.id=o;u.id1=t;u.id2=n;if(e&&e.comboLinkStyle){var s=e.comboLinkStyle;b(s.b1)&&(u.b1=s.b1);b(s.b2)&&(u.b2=s.b2);s.c&&(u.c=s.c);s.ls&&(u.ls=s.ls);b(s.w)&&(u.w=s.w)}u.off=0;u.parentId=void 0;u._combo={linkIds:[]};return u}function q(e){var t=_(e.id),n=ve(t.id1,t.id2);if(!n){var r=J(t.id1,t.id2,e);n=r.id;Y(r);null!==t.parentId&&X([n],t.parentId)}return n}function ee(e){var t={},n=[];e.forEach(function(e){if(!f[e.id]){var r=A(e.id1),i=A(e.id2);if(r||i){var o=null;o=r===i||r===e.id2?r:i===e.id1?i:q(e);e.parentId!==o&&(t[o]||(t[o]=[])).push(e.id)}else null!==e.parentId&&n.push(e.id)}});var r=Object.keys(t)
;r.forEach(function(e){P([],t[e],e)});P([],n,null);r.forEach(function(e){O(t[e],e)});O(n,null)}function te(e){if(!f[e.id]){var t=A(e.id1),n=A(e.id2),r=n===e.id1?n:t;X([e.id],r||null)}}function ie(e,t){if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}function oe(e){var t=A(e);if(t&&!f[t]){var n=M(t),r=n.nodeIds,i=n.linkIds;ie(r,e);ie(i,e);if(r&&r.length||i.length){S(t,"_combo",n);U(t)&&Q(t)}else ce(t)}}function fe(e){return!!f[e]}function le(){return Object.keys(f)}function ce(e){if(!f[e]){f[e]=!0;de(t.privateNeighbourLinkIds([e]));oe(e);delete u[e];F(e)}}function de(e){e.forEach(ce)}function he(e){l=l||{};e.forEach(function(e){l[e]=!0})}function ve(e,n){var r=null,i=s.comboLinkAdj[e];void 0!==i&&void 0!==i[n]&&(r=i[n].id);if(null===r)for(var o=t.privateGetLinksBetween(e,n),a=o.length,u=0;u<a;u++){var l=o[u];l._combo&&!f[l.id]&&(r=l.id)}return r}function ge(e,t,n){var r=x(e,"x"),i=x(e,"y");k(e,"x",r+t);k(e,"y",i+n);var o=I(e);o&&o.nodeIds.forEach(function(e){ge(e,t,n)})}function pe(){for(var e={},t=0,n=c.length;t<n;t++){void 0===e[(r=c[t]).id]&&(e[r.id]={id:r.id,dx:0,dy:0,sumX:0,sumY:0});r.norm=ue(x(r.id,"x")-x(r.to,"x"),x(r.id,"y")-x(r.to,"y"));e[r.id].sumX+=r.norm[0]*r.distance;e[r.id].sumY+=r.norm[1]*r.distance}for(t=0,n=c.length;t<n;t++){var r,i=(r=c[t]).norm,o=se(i[0],i[1],e[r.id].sumX,e[r.id].sumY),a=Math.abs(o)*r.distance;e[r.id].dx+=i[0]*a;e[r.id].dy+=i[1]*a}return j(e)}function me(e,r){var i=A(e),o=[];i?o=t.privateGetItem(M(i).nodeIds):n.api.isShown()||(o=t.privateGetRawItems().filter(function(t){var n=fe(t.id),r=A(t.id);return!n&&!r&&e!==t.parentId}));o.filter(function(t){return"node"===t.type&&!t.hi&&t.id!==e}).forEach(function(t){c.push({id:t.id,to:e,distance:r})})}function ye(e){c.forEach(function(t){e[t.id]&&(t.distance=0)})}function be(e,t,n){if(0!==t&&!m(e,"hi")){n&&me(e,t);var r=A(e);if(r){var i=Ce(r),o=x(r,"oc")||{},a=2*i;if(a!==o.w){var u=(a-o.w)/2;o.w=a;k(r,"oc",o);M(r).open&&be(r,u,n)}}}}function xe(e,n,r,i){var a=p();o.layout(e.name,a.nodes,a.links,ql(a.nodes,t.privateGetCanvas(),t.privateGetMaxLabelLength()),e,"toplevel",function(e){ye(e.vertices);Object.keys(e.vertices).forEach(function(t){var n=e.vertices[t],r=x(t,"x"),i=x(t,"y");ge(t,n.x-r,n.y-i)});n(e.updatedEdges);i(e.extents)},r)}function we(e,t,n,r,i){for(var o=[],a=M(e).nodeIds,u=a.length,s={include:!0,partial:i,maxLength:r,padExtents:!0},f=0;f<u;f++){var l=w(a[f]);if(!l.hi){var c=n&&n[l.id],d=jl(l,t,s);o.push({id:l.id,x:c?l.x+c.dx:l.x,y:c?l.y+c.dy:l.y,t:l.t,labelOffset:_l(l,r),r:d.radius,w:d.width,h:d.height})}}return o}function Ae(e,t,n,r){var o=we(e,t,null,r,!0);return $(i.concentricLayout(o,{includeLabels:!0,padding:n}))}function Me(e,t,n,r){var i,a=I(e),u=$(a.nodeIds.map(w)),s=$(a.linkIds.map(w).filter(function(t){return t.id1!==e&&t.id2!==e}));o.layout("lens",u,s,ql(u,t,r),{consistent:!0},"all",function(e){i=e},void 0,!0);var f=we(e,t,null,r);f.forEach(function(e){e.x=i.vertices[e.id].x;e.y=i.vertices[e.id].y});var l=Jl(f,t,n,!0,r);null!==l&&f.forEach(function(e){e.x-=l.x;e.y-=l.y});return $(f)}function Ie(e,t,n,r,i){var o=x(e,"oc")||{},a=2*t;if(n||o.w<a){o.w=a;k(e,"oc",o);var u=I(e);if(!u.open){var s={include:!0,maxLength:i},f=w(e),l=jl(f,r,s,!0),c=jl(f,r,s,!1);u.e=c.radius/l.radius;S(e,"_combo",u)}}}function Ee(e,t,n){for(var r=I(e).nodeIds,i=r.length,o=x(e,"x"),a=x(e,"y"),u=0;u<i;u++){var s=r[u];if(!m(s,"hi")){var f={id:s},l=x(s,"x"),c=x(s,"y");if(n){f._offset={x:o-l-n.dx,y:a-c-n.dy};T(f)}ge(s,o+t[s].x-l,a+t[s].y-c)}}}function Ce(e,n,r){void 0===n&&(n=!1);var i=t.privateGetCanvas(),o=$(pe());return Ql($(we(e,i,o,r)),{x:x(e,"x"),y:x(e,"y")},i,Vi,n,r)}function Se(e,n){var r,i=t.privateGetCanvas(),o=t.privateGetMaxLabelLength();if("none"===h.arrange)Ie(e,r=Ce(e,!0,o),!!h.resize,i,o);else{var a=void 0;r=Ql(a="concentric"===h.arrange?Ae(e,i,Vi,o):Me(e,i,Vi,o),{x:0,y:0},i,Vi,!0,o);ye(a);Ie(e,r,!!h.resize,i,o);Ee(e,a,n)}return r}function ke(e){return Se(e)}function Re(e){var n=t.privateGetCanvas(),r=t.privateGetMaxLabelLength();Ie(e,Ce(e,!0,r),!1,n,r)}function Te(e){var t=I(e);return t?t.nodeIds.reduce(function(e,t){return e+Te(t)},0):m(e,"hi")?0:1}function Le(e){var t=I(e);if(void 0!==t.g){var n=!1,r=(m(e,"g")||[]).map(function(r){if(r.p===t.g){n=!0;return re(r,{t:Te(e)})}return r});if(n)S(e,"g",r);else{t.g=void 0;S(e,"_combo",t)}}}function Be(){if(h.updateGlyph){var e={};[j(u),s.list].forEach(function(t){t.forEach(function(t){if(t){var n=t.id;if(t._combo&&"node"===m(n,"type")){N(n).forEach(function(t){if(!e[t]){Le(t);e[t]=!0}})}}})})}}function Ge(e){if(l){t.selection(Object.keys(l));t.trigger("selectionchange")}else{var n=e.filter(t.privateItemIsShown);if(e.length!==n.length){t.selection(n);t.trigger("selectionchange")}}}function Ze(e){for(var n=N(e),r=0;r<n.length;r++){var i=n[r],o=M(i),a=t.privateGetItem(i),u=a&&a._combo;if(!(u&&u.open||o&&o.open))return i}return e}function Oe(e){for(var n=t.privateGetAncestryIds(e),r=0;r<n.length;r++){var i=t.privateGetItem(n[r])._combo;if(!i||!i.open)return n[r]}return e}function Fe(e,n){Object.keys(e).forEach(function(r){var i=e[r],o=a(t.privateGetItem(r)._combo);V(i.open)||(o.open=i.open);o.nodeIds=ze(o.nodeIds,i.removeNodeIds);o.nodeIds=De(o.nodeIds,i.addNodeIds);o.linkIds=ze(o.linkIds,i.removeLinkIds);o.linkIds=De(o.linkIds,i.addLinkIds);n.push({id:r,_combo:o})})}function ze(e,t){var n=e;t.length&&(n=n.filter(function(e){return-1===t.indexOf(e)}));return n}function De(e,t){var n=e;t.length&&(n=n.concat(t));return n}function Ye(){var e=[],n={},r=[],i={},o={};function a(e){o[e]||(o[e]={addNodeIds:[],removeNodeIds:[],addLinkIds:[],removeLinkIds:[]})}function s(e,t,n){a(t);var r=(n?"add":"remove")+("node"===e.type?"NodeIds":"LinkIds");o[t][r].push(e.id)}function l(e){if(!0!==f[e])return!1;i[e]=!0;var n=t.privateGetItem(e);if(n)if("link"===n.type){l(n.id1);l(n.id2)}else n.parentId&&l(n.parentId);return!0}j(u).forEach(function(i){var s=i.id,c=t.privateGetItem(s);if("x"in i&&c){var d=Ze(s);r.push({id:s,x:x(d,"x"),y:x(d,"y")})}if("parentId"in i&&c&&c.parentId!==i.parentId){var h={id:s},v="node"===c.type;h.parentId=null;if(v){var g=Oe(s),p=t.privateGetItem(g);h.x=p.x;h.y=p.y;"x"in i||r.push({id:s,x:c.x,y:c.y})}else if(i.parentId)if(K(i.parentId)){var y=t.privateGetItem(i.parentId);if(y&&(!y._combo.open||!t.privateAllParentsOpen(i.parentId))&&c.parentId){delete h.parentId;l(c.parentId)}}else if(U(i.parentId)){var b=D(i.parentId),w=t.privateGetItem(i.parentId),A=b||w;if(A)if(t.privateGetItem(A.id1)&&t.privateGetItem(A.id2)){var M=u[A.id1]&&"parentId"in u[A.id1],I=u[A.id2]&&"parentId"in u[A.id2],E=M||t.privateAllParentsOpen(A.id1),C=I||t.privateAllParentsOpen(A.id2);if(E&&C){h.parentId=i.parentId;b&&(n[i.parentId]=!0)}else if(c.parentId&&f[c.parentId]){if(!m(s,"hi")){h.hi=!0;S(s,"hi",!1)}}else delete h.parentId}else l(c.parentId)&&delete h.parentId;else f[c.parentId]&&(h.parentId=i.parentId)}e.push(h)}if("_combo"in i&&K(s)&&c&&c._combo.open!==i._combo.open){r.push({id:s,_combo:{e:i._combo.e}});a(s);o[s].open=!0}if(K(s)&&c&&"oc"in i){var k=c;k.oc&&k.oc.w!==i.oc.w&&r.push({id:s,oc:{w:i.oc.w}})}});e.forEach(function(e){var n=t.privateGetItem(e.id);if("parentId"in e){var r=n.parentId,o=e.parentId,a=r&&f[r]&&!i[r];r&&!a&&s(n,r,!1);o&&(D(o)||s(n,o,!0))}});Object.keys(f).forEach(function(e){if(!i[e]){var n=t.privateGetItem(e);n&&n.parentId&&s(n,n.parentId,!1)}});Fe(o,e);return{propertiesToSetBeforeAnimation:e,itemsToMergeBeforeAnimationMap:n,propertiesToAnimate:r,idsToRemoveAfterAnimationMap:i}}function Ve(e,n){var r=!!h.animate&&Ye();r&&Object.keys(r.idsToRemoveAfterAnimationMap).forEach(function(e){delete f[e]});t.privateRemoveItem(Object.keys(f));if(r){var i=[];Object.keys(r.itemsToMergeBeforeAnimationMap).forEach(function(e){i.push(D(e));F(e)});t.privateMerge(i);t.privateSetNonImageProperties(r.propertiesToSetBeforeAnimation);t.privateSetAllDirty();R(n);t.privateAnimateProperties(r.propertiesToAnimate,h,function(){t.privateRemoveItem(Object.keys(r.idsToRemoveAfterAnimationMap));R(e)},!0)}else R(e)}function Pe(e,n){h.updateGlyph&&Be();var r=t.selection(),i=Object.keys(d);pe().forEach(function(e){ge(e.id,e.dx,e.dy)});t.privateAddItemsToTransfer(i);Ve(function(){t.privateMerge(s.list.filter(function(e){return null!==e}));h.animate||R(n);t.privateSetNonImageProperties(j(u),!0);t.privateRemoveItemsFromTransfer(i);d={};Ge(r);v();R(e)},n)}function We(){return{itemsToMerge:s.list.filter(function(e){return null!==e}),propertiesToSet:j(u)}}return{adjustForNewComboSize:be,adjustTopLevelLayout:xe,applyUpdates:Pe,forEachChild:E,getChangingComboNodeIds:H,getComboProperty:M,getExtentsOfChildren:Ce,getIdsToRemove:le,getItem:w,getNodeComboProperty:I,getNodeProperty:x,getParentId:A,getProperty:m,layoutCombo:ke,layoutComboWithOffset:Se,mergeItem:Y,preMergeDetails:We,privateState:g,removeItems:de,removingItem:fe,selectItems:he,setComboMinimumSize:Re,setNodeComboSubProperty:B,setNodeProperty:k,setProperty:S,transferComboLinkToCorrectParent:te,transferNodesToCombo:W,transferRawLinksToCorrectParents:ee,updateComboLinkProperties:Q,updateComboNodeGlyphs:Be}}function pv(e,t){if(1===t.length)-1===e.indexOf(t[0])&&e.push(t[0]);else{for(var n={},r=0;r<e.length;r++)n[e[r]]=!0;for(var i=0;i<t.length;i++)n[t[i]]||e.push(t[i])}}function mv(e){var t=vv(e),n={bind:function(){},trigger:function(){return!1},atanEasing:function(){return 0},cubicEasing:function(){return 0},getErrors:function(){return[]},linearEasing:function(){return 0},privateBind:function(){},privateTrigger:function(){},privateUnbind:function(){},unbind:function(){}};function r(n,r,i,o,a){var u=null;function s(){null===u&&(u=Rc()).privateSetProperties(r,i);return u}var f=e.privateGetCanvas(),l=e.privateGetGenerator();return{getGraph:s,struct:t.extractStructure(l,f,r,i,s,o,n,a)}}function i(e,i,o,a,u,s,f,l,c){void 0===l&&(l=n);var d=r(e,i,o,u.fixed||[],s);t.layout(e,l,d.struct,d.getGraph,a,u,f,c)}return{layout:i}}function yv(e,t,n,r){var i=0;function o(t){var n=jl(t,e.privateGetCanvas(),{include:!1}).radius;t._combo&&t._combo.open&&(t.oc&&b(t.oc.bw)?n-=t.oc.bw:n-=pa.bw);return Math.max(n,0)}function u(){var t=0,r=P({animate:!1});n.privateBind("dragstart",function(n,r){if("resize"===n&&r){var i=e.privateGetItem(r);"node"===i.type&&i._combo&&i._combo.open&&(t=o(i))}});n.privateBind("dragcomplete",function(n,i){if("resize"===n&&i){var a=e.privateGetItem(i);if("node"===a.type&&a._combo&&a._combo.open){var u=r.getExtentsOfChildren(i,!0,void 0),s=o(a);if(s<u){var f=r.getNodeProperty(i,"oc")||{};s=u;f.w=2*u;r.setNodeProperty(i,"oc",f)}var l=s-t;r.adjustForNewComboSize(i,l,!0);r.applyUpdates()}}})}u();function s(t){var n;do{n=t+ ++i}while(e.privateGetItem(n));return n}function f(){return s(Wi)}function l(e){var t=e;["id","id1","id2","parentId"].forEach(function(e){e in t&&null!==t[e]&&void 0!==t[e]&&(t[e]+="")})}function c(e){var t={};e.forEach(function(e){t[e]=!0});return t}function d(e,t){return V(t.label)?e.map(function(e){return e.t}).filter(function(e){return!V(e)&&""!==e}).join("\n"):t.label}function h(e){var t=0,n=0;e.forEach(function(e){t+=e.x||0;n+=e.y||0});return{x:t/e.length,y:n/e.length}}function v(e){return!(!e||"number"!=typeof e.lat||"number"!=typeof e.lng)}function g(e,t){if("first"!==e.position){var n=0,r=0,i=0;t.forEach(function(e){if(v(e.pos)){r+=e.pos.lat;i+=e.pos.lng;n++}});if(n>0)return{lat:r/n,lng:i/n}}else for(var o=0,a=t.length;o<a;o++){var u=t[o];if(v(u.pos))return u.pos}}function p(){return{nodeIds:[],linkIds:[],open:!1,e:1,g:void 0}}function m(){return{linkIds:[]}}function y(){return{p:"ne",c:"rgb(255, 0, 0)",t:"0"}}function x(e,t,n){e._combo=p();n?e.oc=n:e.oc||(e.oc={});e.oc=z(e.oc,r().openCombos);b(e.oc.w)||(e.oc.w=0);void 0===e.x&&(e.x=0);void 0===e.y&&(e.y=0);e.g=e.g||[];if(null!==t){var i=$n({},y(),t||{});e.g.unshift(i);e._combo.g=i.p}}function A(n,i){var o=n.style,u=o||a(i[0],"d"),f="node",l=s(Pi),c=d(i,n);void 0===n.glyph&&r&&(n.glyph=r().comboGlyph);if(void 0!==n.glyph&&null!==n.glyph&&!I(n.glyph))throw new Error("[combo().combine] glyph must be an object");var p,m=o&&!V(o.hi)?o.hi:i.every(function(e){return!!e.hi}),y=o&&!V(o.bg)?o.bg:i.every(function(e){return!!e.bg}),b=o&&v(o.pos)?o.pos:g(n,i);if(t&&t.api.isShown()&&v(b)){var w=t.api.viewCoordinates(b.lat,b.lng);p=e.worldCoordinates(w.x,w.y)}else p="first"===n.position?i[0]:h(i);var A=$n({},u,{type:f,id:l,t:c,hi:m,bg:y,pos:b,x:p.x,y:p.y});x(A,n.glyph,n.openStyle);n.open&&(A._combo.open=!0);I(n.d)&&(A.d=n.d);return A}var M=Aa({strings:{label:!0}});function E(r,i,o){var u=O(r),s=t&&t.api.isShown(),f=z(i,{animate:!0,select:!0,time:250,arrange:"lens",resize:!0,easing:"cubic"}),l=P(f),c=[],d=[],h={};u.forEach(function(t){var n,r={},i=[],o=a(t,"d");if(o&&o.ids){M.ensureObject(o,!1);n=e.privateGetItem(o.ids)}s&&o.open&&delete o.open;if(!n)throw new Error("[combo().combine] function must be passed valid combo definitions");n.forEach(function(e){if(!e)throw new Error("[combo().combine] function must be passed valid ids");if("node"===e.type){if(e.parentId)throw new Error("[combo().combine] nodes cannot be combined if they are already in a combo");if(h[e.id])throw new Error("[combo().combine] nodes should only be in one combo");h[e.id]=!0;r[e.id]=!0;i.push(e)}});if(!Object.keys(h).length)throw new Error("[combo().combine] function must be passed at least one node id");var u=A(o,i);l.mergeItem(u);X(l,$(i),u.id,[],[]);var f={dx:0|(o.dx||0),dy:0|(o.dy||0)};l.layoutComboWithOffset(u.id,f);c.push(u);d.push(u.id)});f.select&&l.selectItems(d);n.trigger("prechange","combine");l.applyUpdates(function(){e.applyRevealedLinkOffsets(c);e.privateSetAllItemsInComboDirty(d);R(o,d)})}function C(t,n,r){var i=z(n,{animate:!0,time:250,full:!1,select:!0,reposition:!0}),o=O(t).filter(function(e){return B(e,"node")});if(0!==o.length){var a=[];o.forEach(function(t){var n=e.privateGetItem(t),r=i.full?te(S(n).nodes):n._combo.nodeIds;a=a.concat(r)});U(a,null,i,"uncombine",r)}else R(r)}function S(t,n,r){void 0===n&&(n=null);void 0===r&&(r=!1);var i=t._combo,o=n||{nodes:[],links:[]},a=i.nodeIds,u=a?e.privateGetItem(a):[];function s(e){if(e._combo){S(e,o,r);r&&("node"===e.type?o.nodes.push(e):o.links.push(e))}else"node"===e.type?o.nodes.push(e):o.links.push(e)}e.privateGetItem(i.linkIds).forEach(s);u.forEach(s);return o}function k(t){var n=null,r=e.privateGetItem(t);r&&r._combo&&(n=S(r,n,!1));return a(n,!0)}function T(e,t){var n=O(e),r=z(t,{type:"all"});if(!r.type.match(/^(node|link|all)$/))throw new TypeError("[combo().isCombo] opts type property should be either 'node', 'link' or 'all'");return n.some(function(e){return L(e,r.type)})}function L(t,n){var r=e.privateGetItem(t);return!(!r||"all"!==n&&n!==r.type)&&!!r._combo}function B(t,n){var r=e.privateGetItem(t);return L(t,n)&&!r.parentId}function G(t,n){var r=z(n,{parent:"top"});if(!Array.isArray(t)&&!b(t)&&"string"!=typeof t)throw new Error("[combo().find] Incorrect argument passed");var i={top:function(t){var n=e.privateTopParentId(t);return{parentComboId:n,isCombo:B(n,"all")}},first:function(t){var n=e.privateGetItem(t),r=n?n.parentId:null;return{parentComboId:r,isCombo:!!r&&L(r,"all")}}},o=i[r.parent]?i[r.parent]:i.top,a=!Array.isArray(t),u=O(t).map(function(e){var t=o(e);return V(t.parentComboId)||!t.isCombo||t.parentComboId===e?null:t.parentComboId});return a?u[0]:u}function Z(t){return e.privateGetAncestryIds(t).length}function F(e,t,n){(t||e.getChangingComboNodeIds()).sort(function(e,t){return Z(t)-Z(e)}).forEach(function(t){var r=e.getNodeComboProperty(t),i=(e.getNodeProperty(t,"oc")||{}).w,o=e.layoutCombo(t),a=r.open?o-i/2:0;(!n||n.resize||a>0)&&e.adjustForNewComboSize(t,a,!!n.adapt)})}function D(t,n){var r={};if(void 0===t)throw new Error("[combo().transfer] function must be passed a valid transfer destination");var i=t?c(e.privateGetAncestryIds(t)):{};e.privateGetItem(n).forEach(function(e){if(!e)throw new Error("[combo().transfer] function must be passed valid ids");if(i[e.id])throw new Error("[combo().transfer] cannot transfer a combo inside itself");"node"===e.type&&(r[e.id]=e)});return r}function P(n){return gv(z(n,{comboLinkStyle:r().comboLinks}),e,t,f)}function W(t,n){var r={},i={};e.privateGetItem(e.privateNeighbourLinkIds(n)).forEach(function(t){var n=t;if(n._combo){i[n.id]=n;e.privateGetItem(n._combo.linkIds).forEach(function(e){r[e.id]=e})}else r[n.id]=n});j(i).forEach(t.transferComboLinkToCorrectParent);t.transferRawLinksToCorrectParents(j(r))}function X(e,t,n,r,i){var o=Object.keys(t),a={};e.transferNodesToCombo(o,n);var u={};j(t).forEach(function(e){u[e.id]=e;e._combo&&S(e,null,!0).nodes.forEach(function(e){u[e.id]=e});e.hi||r.push(e.id);e.parentId&&(a[e.parentId]=!1)});e.getIdsToRemove().forEach(function(t){var n=e.getProperty(t,"parentId");n&&(a[n]=!1)});W(e,Object.keys(u));r.length>0&&!e.getProperty(n,"hi")&&(r.length=0);Object.keys(a).sort(function(e,t){return Z(e)-Z(t)}).forEach(function(t){if(!e.removingItem(t)){var n=!1;e.forEachChild(t,function(t){e.getProperty(t,"hi")||a[t]&&!1!==a[t]||(n=!0)});if(!n){a[t]=!0;i.push(t)}}})}function N(e,t,n,r){U(e,t,n,"transfer",r)}function U(t,r,i,o,a){var u=z(i,{animate:!0,time:250,select:!1,arrange:"lens",resize:!0,easing:"cubic",reposition:!1,adapt:!0}),s=null;if(r&&(!(s=e.privateGetItem(r))||"node"!==s.type||!s._combo))throw new Error("[combo().transfer] comboId must be the id of a combo node or null");var f=P(u),l=D(r,O(t)),c=Object.keys(l),d=[],h=[];u.select&&f.selectItems(c);X(f,l,r,d,h);F(f,null,u);var v=[];s&&!f.getNodeComboProperty(s.id).open&&v.push(s);n.trigger("prechange",o);f.applyUpdates(function(){d.length>0&&e.show(d,!0);h.length>0&&e.hide(h);e.applyRevealedLinkOffsets(v);R(a)},function(){u.animate&&e.applyRevealedLinkOffsets(v)})}function K(t){var n=O(t),r=e.privateGetItem(n).filter(function(e){return null!==e}),i=P({animate:!1});function o(t){var n=t._combo;e.privateGetItem(n.linkIds).forEach(function(t){var n=t;r.push(n);n._combo&&e.privateGetItem(n._combo.linkIds).forEach(function(e){r.push(e)})});n.nodeIds&&e.privateGetItem(n.nodeIds).forEach(function(e){var t=e;r.push(t);t._combo&&o(t)})}r.forEach(function(e){e._combo&&o(e)});var a=$(r);e.privateNeighbourLinkIds(Object.keys(a)).forEach(function(t){r.push(e.privateGetItem(t))});i.removeItems(r.map(function(e){return e.id}));i.applyUpdates()}function H(t,n){var i=O(n);(i=i.filter(function(t){l(t);var n=e.privateGetItem(t.id);if(n&&t.type&&t.type!==n.type)return!1;var r=n,i=t;r&&r.oc&&(i.oc=re(r.oc,i.oc));if("node"===t.type)return!0;if("link"===t.type){if(!t.id1||!t.id2){if(n)throw new Error("You must specify both id1 and id2 for a link");return!1}if(n&&"link"===n.type&&(n.id1!==t.id1||n.id2!==t.id2))throw new Error("You cannot change the ends of an existing link. Remove the existing item first");return t.id1!==t.id2||e.options().selfLinks}throw new Error("The type of the item should be specified")})).forEach(t.mergeItem);var o,a=r?r().comboGlyph:null,u=0,s=[],f={};try{o=pe(t.preMergeDetails().itemsToMerge,function(e){return[t.getParentId(e.id)]},function(e){return e.id})}catch(e){throw new Error("A node's parentId can't refer to a child")}o.forEach(function(n){var r=e.privateGetItem(n.id);if(r&&Y(n,"parentId")&&r.parentId!==n.parentId)throw new Error("You can't change the parentId of an existing item");if("link"!==n.type&&!(void 0===n.parentId||r&&n.parentId===r.parentId)){if(n.id===n.parentId)throw new Error("A node can't be the parent of itself");if(null!==n.parentId){var i=t.getItem(n.parentId);if(!i||!i.id){t.setProperty(n.id,"parentId",null);return}if("link"===i.type)throw new Error("The parentId of a node can't be a link");if(!i._combo){x(i,a,void 0);t.mergeItem(i);s.push(i.id)}void 0===n.x&&t.setNodeProperty(n.id,"x",i.x);void 0===n.y&&t.setNodeProperty(n.id,"y",i.y);n.parentId=i.id;t.setNodeProperty(n.id,"_offset",{x:0,y:0});(f[n.parentId]||(f[n.parentId]=[])).push(n.id);u++}}});Object.keys(f).forEach(function(e){t.transferNodesToCombo(f[e],e)});t.transferRawLinksToCorrectParents(o.filter(function(n){if("link"===n.type){e.privateGetItem(n.id)||void 0===n.parentId||(n.parentId=null);var r=e.privateGetItem(n.id);if(r){var i=r.parentId;i&&"link"===t.getProperty(i,"type")&&t.updateComboLinkProperties(i)}else if(0!==n.id2.indexOf("dummyEnd"))return!0}return!1}));s.forEach(t.layoutCombo);u>0&&t.updateComboNodeGlyphs()}function _(e,t){var n=P(z(t,{arrange:"none",resize:!0}));H(n,e);return n.preMergeDetails()}function Q(t){var n=[];t.forEach(function(t){var r=e.privateGetItem(t.id),i=t.count;if(r.g){var o=!1,a=r.g.map(function(e){if(e.p===r._combo.g){o=!0;return re({},e,{t:i})}return e});o&&n.push({id:r.id,g:a})}});n.length&&e.privateSetNonImageProperties(n)}function q(e,t,n,r){return e.filter(function(e){return n[e.id]||!r[e.id]&&!e[t]})}function ee(t,n,r,i,o){Object.keys(r).forEach(function(r){var a,u,s,f=e.privateGetItem(r),l=S(f),c=q(l.links,n,i,o);if(f._combo.nodeIds){s="nodes";a=(u=q(l.nodes,n,i,o)).length>0}else{s="links";a=c.length>0}if(s){if(a&&"hi"===n){var d={id:r,links:c};u&&(d.nodes=u);t.combos[s].push(d)}a!==!f[n]&&(a?i[r]=!0:o[r]=!0)}});return t}function ie(t,n,r,i,o){e.privateGetItem(t).forEach(function(t){if(t){var a=t[i]===o;if(t._combo){var u=S(t,null,!0);u.nodes.forEach(function(e){if(!!e[i]===o){a=!0;n[e.id]=!0}});u.links.forEach(function(e){if(!!e[i]===o){a=!0;n[e.id]=!0}});a&&(r[t.id]=!0)}for(var s=e.privateGetParentItems(t.id),f=s.length-1;f>=0;f--){var l=s[f];if("node"===t.type&&a&&"hi"===i||!!l[i]===o){r[l.id]=!0;a=!0}}}})}function oe(t,n,r){e.privateGetRawItems().forEach(function(e){if(be(e.id)&&(!e.bg||t[e.id])){delete t[e.id];delete n[e.id];e.bg||(r[e.id]=!0)}})}function ue(e){return"node"===e.type?"nodes":"links"}function se(t,n,r){var i={toShow:[],toHide:[],shown:{nodes:[],links:[]},hidden:{nodes:[],links:[]},combos:{nodes:[],links:[]}},o={},a=J(t),u=J(n),s=t,f=n;if(r&&r.all){s=r.all.shown.nodes.concat(r.all.shown.links);f=r.all.hidden.nodes.concat(r.all.hidden.links)}ie(s,a,o,"hi",!0);ie(f,u,o,"hi",!1);i=ee(i,"hi",o,a,u);e.privateGetItem(Object.keys(a)).forEach(function(e){if(null!==e){i.toShow.push(e.id);i.shown[ue(e)].push(e.id)}});e.privateGetItem(Object.keys(u)).forEach(function(e){if(null!==e){i.toHide.push(e.id);i.hidden[ue(e)].push(e.id)}});return i}function fe(t,n,r,i){var o={toShow:[],toHide:[],foreground:{nodes:[],links:[]},background:{nodes:[],links:[]}},a={},u=J(t),s=J(n),f=t,l=n;if(r&&r.all){f=r.all.foreground.nodes.concat(r.all.foreground.links);l=r.all.background.nodes.concat(r.all.background.links)}ie(f,u,a,"bg",!0);ie(l,s,a,"bg",!1);i||oe(a,u,s);o=ee(o,"bg",a,u,s);e.privateGetItem(Object.keys(u)).forEach(function(e){if(null!==e){o.toShow.push(e.id);o.foreground[ue(e)].push(e.id)}});e.privateGetItem(Object.keys(s)).forEach(function(e){if(null!==e){o.toHide.push(e.id);o.background[ue(e)].push(e.id)}});return o}function le(){var t=e.privateGetRawItems(),n={};t.filter(function(e){return e._combo}).forEach(function(t){var r=t._combo;n[t.id]=a(t,"d");n[t.id]._combo=a(r);"node"===t.type&&(n[t.id]._offsets=a(r.nodeIds.map(function(t){return e.privateGetItem(t)._offset}),!0))});n.nodes=[];n.links=[];return n}function ce(e,t){var n=e.combos||{},r=e.items||[],i={},o=[],a={};r.forEach(function(e){var t=e.id;if(n[t])throw new Error('Item "'+t+'" specified twice');if(void 0!==e.parentId&&null!==e.parentId){var r=n[e.parentId];if(r){var i=r._combo.nodeIds||[],o=r._combo.linkIds;i.indexOf(t)<0&&o.indexOf(t)<0&&(a[t]=e)}else a[t]=e}});Object.keys(n).forEach(function(e){var t=n[e];if(t._combo&&("node"===t.type||"link"===t.type)){var a=t._offsets;delete t._offsets;if("node"===t.type){t._combo.nodeIds.forEach(function(e,n){i[e]={parentId:t.id,_offset:a[n]}});if(!("g"in t._combo)){t._combo.g=void 0;if(t.g&&t.g.length){var u=t.g[0];u.t&&w(u.t)&&(t._combo.g=u.p)}}if(!(t.oc&&"w"in t.oc)){o.push(e);t.oc=t.oc||{};t.oc.w=0}}t._combo.linkIds.forEach(function(e){i[e]={parentId:t.id}});var s="node"===t.type?p():m();ne(s,t._combo);t._combo=s;r.push(t)}});e.items=r.filter(function(e){if(a[e.id]||"link"===e.type&&(a[e.id1]||a[e.id2])){a[e.id]=e;return!1}i[e.id]&&ne(e,i[e.id]);return!0});R(t,{comboIdsToLayout:o,itemsToMerge:a})}function de(e,t){function n(e){return 0===e.indexOf(Wi)}var r={},i=[];e.combos.nodes.forEach(function(t){var n=t.nodes.map(function(n){var r=ne({parentId:t.id,_offset:{x:n.x||0,y:n.y||0}},n);e.items.push(r);return n.id}),o=p();o.nodeIds=n;r[t.id]={type:"node",_combo:o,oc:{w:0}};i.push(t.id)});e.items.forEach(function(e){if("node"===e.type&&r[e.id]){ne(e,r[e.id]);e._combo.g=void 0;if(e.g&&e.g.length>0){var t=e.g[0];t.t&&w(t.t)&&(e._combo.g=t.p)}}"link"===e.type&&n(e.id)&&ne(e,{_combo:{linkIds:[]}})});R(t,{comboIdsToLayout:i,itemsToMerge:{}})}function he(e,t,n){var r=P({animate:!1});t&&t.comboIdsToLayout.forEach(function(e){r.layoutCombo(e)});var i=e.combos;i&&i.links&&i.links.length?H(r,i.links):t&&H(r,j(t.itemsToMerge));r.applyUpdates(n)}function ve(e,t){i=0;if(e){var n=e.combos;n&&(n.links&&n.links.length||n.nodes&&n.nodes.length)?de(e,t):ce(e,t)}else R(t)}function ge(e){var t=P({animate:!1});e.forEach(function(e){t.setComboMinimumSize(e)});t.applyUpdates()}function me(e,t,n){Ae(e,!0,t,n)}function ye(e,t,n){Ae(e,!1,t,n)}function be(t){var n=e.privateGetItem(t);return!!(n&&n._combo&&"node"===n.type&&n._combo.open)}function xe(e,t,r){var i=z(t,{animate:!0,time:300,name:"lens",resize:!0,easing:"cubic",adapt:!0});i.arrange=i.name;if(i.resize||"none"!==i.name){var o=O(e).filter(function(e){return L(e,"node")}),a=P(i);F(a,o,i);n.trigger("prechange","arrange combo");a.applyUpdates(r)}else R(r)}function we(e,t,r,i,o){var a=z(t.arrange,{animate:!0,time:300,name:"lens",resize:!0,easing:"cubic",adapt:!0});a.arrange=a.name;var u=P(a);if(a.resize||"none"!==a.name){var s=O(e).filter(function(e){return L(e,"node")});F(u,s,a)}n.trigger("prechange","arrange combo");u.adjustTopLevelLayout(t.layout,r,n,function(e){i(e);u.applyUpdates(o)})}function Ae(r,i,o,a){if(!t||!t.api.isShown()){var u=O(r),s=z(o,{animate:!0,time:300,easing:"cubic",adapt:!0,updateGlyph:!1}),f=e.privateGetMaxLabelLength(),l=i?"open":"close",c=P(s),d=Ie(u,i);if(d.length){d.sort(function(e,t){return Z(e.id)-Z(t.id)}).forEach(function(e){var t=Ee(e,i,f);c.setNodeComboSubProperty(e.id,"open",i);c.setNodeComboSubProperty(e.id,"e",i?1:t.sizeRatio);c.adjustForNewComboSize(e.id,t.sizeDiff,s.adapt)});n.trigger("prechange",l);c.applyUpdates(function(){s.animate&&i||e.applyRevealedLinkOffsets(d);e.privateSetAllItemsInComboDirty(u);R(a)},function(){s.animate&&i&&e.applyRevealedLinkOffsets(d)})}else R(a)}}function Me(t){var n=e.privateGetItem(t);if(n)if("node"===n.type&&n._combo)Ae(t,!n._combo.open);else if(n.parentId){var r=e.privateGetItem(n.parentId);r&&"node"===r.type&&r._combo&&Ae(r.id,!1)}}function Ie(t,n){return e.privateGetItem(t).filter(function(e){return e&&"node"===e.type&&e._combo&&e._combo.open===!n})}function Ee(t,n,r){var i=e.privateGetCanvas(),o={include:!1,maxLength:r},a=jl(t,i,o,!0).radius,u=jl(t,i,o,!1).radius;return{sizeDiff:n?a-u:u-a,sizeRatio:0===a?1:u/a}}function Ce(e,t){e.combos=t.combos;e.shown={nodes:t.shown.nodes,links:t.shown.links};e.hidden={nodes:t.hidden.nodes,links:t.hidden.links}}function Se(e,t){e.foreground={nodes:t.foreground.nodes,links:t.foreground.links};e.background={nodes:t.background.nodes,links:t.background.links}}var ke={api:{combine:E,combineNodes:E,uncombine:C,info:k,isCombo:T,find:G,transfer:N,open:me,close:ye,isOpen:be,arrange:xe,reveal:function(t){return e.privateReveal(t)}},internalUse:{hide:function(e,t){return ke.internalUse.filter([],e,null,t).toHide},show:function(e){return ke.internalUse.filter(e,[],null,{updateGlyph:!0}).toShow},filter:function(e,t,n,r){var i=se(e,t,n);r.updateGlyph&&Q(i.combos.nodes.map(function(e){return{id:e.id,count:e.nodes.length}}));n&&Ce(n,i);return i},foreground:function(e,t,n,r){var i=fe(e,t,n,!!r.foregroundOpenCombos);Se(n,i);return i},preMerge:_,preDelete:K,serialize:le,preLoadUp:ve,postLoadUp:he,dblclick:Me,ensureMinimumOpenComboSize:ge,arrangeAndLayout:we}};return ke}var bv={"Arrow-ne.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAARVBMVEUAAAAAruoAruoAruoArukArOsAre8AruoArusAr+0Ap+IArusAruoAruoAr+oAruoAr+oArusArusAreoAruoAruoArurGDVJ2AAAAFnRSTlMA7PlILTQSzUApCPry5LWHbmZYV56dONEurAAAAHFJREFUKM+90DkOgDAMRFGzZQOyQu5/VCRiVwzp4LdPsqyhj3MpG6vedBprreOu/RFiNg6pZKijhToaqaOBgK6MJ8BlY/TAhsppbNt9eYc2zG0NbPyzwtbUQmM1yEQLMtGETHIPA81sMKXFsLJhtfRjF/wgC8yO94CNAAAAAElFTkSuQmCC","Arrow-nw.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAPFBMVEUAAAAAruoAresArusAruoAqvEArusAresArusAp+IArekAruoAr+oAruoAr+oAruoAruoAr+oAresArurF+043AAAAE3RSTlMA7jL5SBJYQSwI8+TOzLWeh29nYHqaQgAAAHNJREFUKM+9z8kKwDAIRdHXIVOnDP7/v7Yk2QRU6KK9Sw+I4peMd7aEYRSczSle574Q0bJiyFGPMVjFkBVDUgxRMVwdt5nBk3oTo3vdufHafp8nTk2/hVXfjFdXTVBbTdDymKgBUBRv1St6GIgqG+ANPuwGG+MKJZ7NkmMAAAAASUVORK5CYII=","Arrow-se.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAP1BMVEUAAAAAr+oAruoAruoAruoAruoAsOkAr+sAreoAr+sAruoAp+IAr+sAruoAruoAruoAruoAruoAreoA//8Arur2XPH+AAAAFHRSTlMAL/nsSOsSaldAKgjx48/MtJ2GARaOxv8AAAB2SURBVCjPvcs5EoQwEENRYYxXGDbd/6yzdYCrmiaCH+qVcGehGPYaunMjT7UMNLS71r7RaqiPx2/fqHcJiooxQ1ExFmj6Nwao+jO3Q9Pxa5wARaUZio6Ci4LeCa6GcTOM0TAmw5gVc9O8rFtMuTZWP0sJOx7oDS3DCuS8EfUUAAAAAElFTkSuQmCC","Arrow-sw.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAQlBMVEUAAAAArusAruoArukAruoAruoArusAsvEAruoArusArusAr+0AruoAruoAr+oAruoAruoAr+oArusAn98As+YAruriSELzAAAAFXRSTlMA+Ugt7usyEc1XQCny5LWeh25mCArMFThRAAAAc0lEQVQoz73JSQ6EMAwEQAdmyMYO/f+vIpClFiLxDepa8qXW16/7BV8/gPs8/LNxrajNOFmb+kl0ujxK0OVRhi6PPM7l3blreTcDzu2LJwGKR6Nez6NJ0zWFnGHsAmMjjE0wdk9xmacxDI5b4HOK6ybvOgBebguIlLvi1QAAAABJRU5ErkJggg==",
"Arrow.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAABACAMAAAB4KUSAAAAAflBMVEUAAACVlZWRkpWSkpaQkpWRk5WQkpWSkpWQkpaPj4////9wcHCRkpX9/f3S09TU1NWztLaSkpKGhoaPj492dnb39/empqahoaGJiYmDg4NycnLt7e3j4+Pc3NzExMS6urqysrOXl5eLi4t8fHz7+/vx8fHg4OCrq6vo6OjGxsZuZdNVAAAACnRSTlMAGLS4bEXLqI8QHTDIvAAAAPxJREFUSMft1rlSw0AQhGEZMMe21rJ1opV1IWzD+78gVaNIimaagnKgP9vgizqYjbb+ptdHbfuF28X61vCQaCrj5zX0TtMhfrgv6Fl49CSsBxaiY2FIKJgC+ZmEmBoSIi1IiNOnGb5DqjwJMbAQHQtDwkGZ0wI/MCdzUlDmpKDMSUGZUw0zLBpYiI6FIaGgzKmDJ8zlwFRVVVneem+AUri4OT0Ms+ytcGozgam3wbRxHaTWBMfCuSIXWBrgeJNXKTAv9PDqpBbSt/nM+VpgZoauh/Rlhhdx49kM3Yi6b5hTfm39nX8e/gcOR03xCr7F6l6iRfsnbbtoa+u3/QB6AlluQsKWJgAAAABJRU5ErkJggg==","Hand.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAABACAMAAAB4KUSAAAAArlBMVEUAAACVlZWRkpWSkpaQkpWRk5WQkpWSkpWQkpaPj4////+RkpVwcHD9/f3S09TU1NWztLbKysqzs7Px8fHv7+/u7u7p6emWlpZzc3PS0tKDg4P5+fnCwsKioqJ3d3f19fXm5ubc3NzY2Ni5ubm2trapqambm5uRkZGLi4v8/Pzz8/Pr6+vi4uLGxsa8vLyvr6+Ojo6AgIB4eHh0dHTo6Oiurq6lpqd9fX2Hh4d7e3sYjczTAAAACnRSTlMAGLS4bEXLqI8QHTDIvAAAAWNJREFUSMft1dduwjAYhmE66HA+QzMgk+zF3tDe/43VQqlQzIGdVEgc5JV+Owd5pESy5F7Xffp4ka1fc0+KfDwcDGU6KW88pESmgfLcQdbhmB8PLaBtAbDshtDwEh+lVsJPPKMBtHcAHJe4DoCdLQ3HezimNWFPE8t0sB/LwgzKlAwvcEimCjJZaGLJ1nU1SxSBJFSgslWrRgVQhC0h/HELWC7CDcwWMCJkAYs2h+wrR8DdYLhKhkVzSBMLrOZQBUqzgn8TGxJwi5SS+AJriWAAuGxLG0Md0NlGi6aQOjhd3rM5OBdAYle/Rzm4gC84chn8OblNxUYA3W9sprdwjUwASbiHdgtNeCJIPCDmHf1BJIQ0x3nGQR0IhJDMtshpHcZwiBiSCPDqcIVcBpIU1nJkXIvOWElBOgHXNhDBSqa7mjPn0rcVnenX3Ee/kR8Xal8yKRz8VKR779Xqv8r21Ovq+m+/Ii1ihjYVGpMAAAAASUVORK5CYII=","Nav-Control-Head.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABoCAMAAAAqwkWTAAABDlBMVEUAAACRkpWWlpqRk5WRkpWRkpWRkpWRkpWRkpWOjpSRkpWRkpWRkZORkpWRkpWRkpWRk5WRkZeRkpWRkpWSkpWRkpWRkZaRkZaRkpWRkpWRkpWQkZWRkpWRkpSRkpX///8ArurQ0dORkpX8/v8Jsev7+/y/6/rY2NqfoKLq6usiue3f4OHg9f1TyfH4/f7Hx8nT1NWurrHp+f2UlZfw8fFNxvHz8/T29vfm5ufi4+S8vb6qq62Wl5qW3vfu7u+3t7nl9/2s5fiT3faJ2vVizfIpu+2am57y+/4RtOzE7fpr0fPc3N2xsbSnqKqD2PUZt+y36fmN2/bCwsSkpad+1vRGxfCk4/hy0/Q8we/Kysxfm/hGAAAAH3RSTlMA+QdRsCLmzbkMj+wZ8dWdeBRpWklCNCzcwXI8h35gX/9DngAABnpJREFUaN61mmlD2kAQhjfcyOl91oE3pAnFChTKXdFK8a7Wq/r//0g1tZiwTDZYeb7y4WF2J7Ozk4gpCC9tZGLr0bVEKrIWXQ/NbW/Oi/cmsLwV1SCTCC2svp9lfiFmS6xqJ3/WLu41mvViq2Q+9i96eCKSWQq8RyzBkAbUuuW2QTINs2M9u+ZW/jeYDwmg1y8ZxFPPdwFEg/+j2dKAqmmQir2yBaQX37iC8WdNv0i+0M0bYO1NUQUjqHXq5J9SFwiFp9WEQ0Cf0fAqC9qH6dZvUYNVoqkxyjVEpwgqkAHKbArsnpzs8mnRRSroe9miGLaJ4+Ayl7u84rOiDMz5W77NFKpN4viVs/nssVNDxOJCzZKGa93TY/ONNzUuEFWX220NeVJ4bL4Ti1HFmiolFlAzlR61qY+ItymIWkntUZv0DtaSgmdZwxmxHL461KY+onxGrKRQ8e1R71MswBXrCMpKj3/TBeYYUQh9X55CwZepMcTkGrEBy/Dj+bS/88mXqYRUeNIGaTX+7Ll3eoicpgPeVEZU3qZA2uNB/XLs8rhMx0d86nWRlURZVInlwO1xm66IZa+mjS9e2Gvh6N7tcZsOiKeMkJRx18SzU3B63KbCPvEY1ljmLdsZx3M78kimQ+/THWuufIih4t3kfH9Kh8HRWIp8fkqFb+RNF4vO1JYCklU7E7LraEdXNixIu3YoT7PiwrFLqxgaNCvOEB2J5lCmmaFbWPlXFBKo0+woj6p4EF2aIXUkAlIqzITuSzrEtVqTZkn+pQ4tTSqn+v4uvYGjLyTTQILLOf3Xca7we5LKqBdbreKeMbkk3j2VqY8kYcG+UUfRGvd8zj1zJ/n3zvIvmEWDO7XkotTBxnNLgp4ueSYeAA0z76BSHC8/A65bNhGyk7vKeHKn5KSYH6M0ZvrE9eVNpOyj9ZrxuEWlvMTYNfpHjjMNkRQigwrjyTn3tZWfwJkrpt85ztTFshDraDOegWuYMJGWK7c/caYOFoRIoDHZ83XXebvPT6bpSm/O9Ig5EUeP88iJIFMiP6YzhEQYltpDZp7D8GNqY12swlJ7mnmWIvkwFREVm7gYPXCMx145fu140/2okcSaWB49rwesh1q8yCTG5Gz5GoiIIM7pL19ZD5V4UYU8TN9HpUFzHBIPTDftWyRvwc+RKCE2R+f46WvI46W+PcXS0c+c9I/riIgV3IyqvGxS79GZh+fuNevSzufoY4Ez1XlRi/f8+DL6o4iKJIakNOm8qOHDQyXEhNBgqE0lNhd0Hx6qICNEGkVSmppsYfDjoWtkhQjBpMmmE3VIpiugQ8ZD5wgKsYUyTTZdOi4qhqneoROnR26DttEnxnToXLyKcuHuOI8BBIRdvhnTwNUDVRQeumQ81P57c0mgzphuyYZZvUqD3Dy4PPJ9IoQKTTQVdsb7R9OhaenSNILxUBVL9tBRnjWdXD57DuSOvN42bUtp1BRLbdCD5DFqmj26C2OoS8364eB2h5sdGDoxnJye3ss/lv5dLtNo0yzpIPtvftahGWL0kBQ2SfQMmh0mYq9zE5Nmx/nr7GRxlrflOlKjcXEgMsN06GDLOb+v0oxo1LR5IRwhFWk2XGPOPSE+J092bgeH0njr6vT0QBVQT0s6RfEISuTBQeH5fDohJ7sDu9PxHhP0x6fsQc+J3U5BPt13Xzrb316eNiJx4SaGsmLSaZskT66w6zlSXRTymHiPOAavHYvLY7PvNdiKCYksbgz+hYHT5PYc66ynBS0sZGJ8bT26dJlsj/rlRNPCtphAMsKXvBNnv+fyfGYD0s+RYd6HoVckCbnfu5I8zAaluXdiWQzrapON2lNBalVwZGA1edNUnjNoy4InhAuDN03hadcQFB4E1nGhjkntKfWwIDyJr8NS7ZPaYwIbQkEghKEi95SePLRFoSaDnsmb1B6jA21J+OED0DFYk8pTvEFkRfhjOYGbPc5k390HrKdSQ2xe+CW5jhr3LciX04ev7Lm6VwWyYho+MF+3KL9tWdsU0xGOAedTdSy6yX2to/4CCect39HkLSAWFm8hvhEBuqZBahqPQ2B9SbyVwEIE6HXauncwlSqAmGJzVKrFGACrY9aZjWk9VmtAKrMi/ptkNo1nWb/sfvPRbFeuqz0AWigYEO9DeCGUgM3Quqie96vdG6sHm/RcMC7eldXtrVBawyupaCYbTIrZEEiGV5aDi0ubq+F5MRV/AMrHP3wtA6vJAAAAAElFTkSuQmCC","Nav-Control-Short-Zoom.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAACACAMAAACMX59YAAABU1BMVEUAAACOjpiRkpWRkpWSkpWRkpWRkpWQkJWRkpWRkpWRkpWRkpWRkpWRkpWQkpWRk5SRkZWQkZWRk5WTk5WOjo6RkpWRkpWRkpWRkpWRkpWRkpWQkJWRkpaRkZaRkpWRkpWRkpWRkpWRkpWRk5WRkpWRkpWRkpWRkZWOjpSSk5aRkpWRkpWRk5WRkpWRk5WRkpWRkZWRkZWQkpT///+RkpUAruoiue2Q3Pas5fjFxceVlpj6+vqkpacRs+yhoqT9/v78/Pzx8fLk5OWur7Gen6H8/f7q6+u+v8D39/je3+DW19jOzs+7vL6nqKqcnaCXmJvR0dLIycq4ubu2triwsbOrq66am51+1vVo0PPo6OnCw8Wys7XS8fux5/nt7e4qvO4LsuvLzM3w+/7o+P3Y8/zH7vu56fma3/f09PROx/Ezv+4Zt+wEsOvg4OHa29yX3vY9we9ZHrf1AAAAM3RSTlMABfp2HfA8IWdV6+Cij09JQjArGArm2dLFYFo0JRP057CpmG7Xy5WADvb2vLZ8cKeJgoGIgHZSAAADoElEQVRo3u2Y2VfaQBSHQyCCCIgiitRq1bZ23+anLSFlF1BZBBG3Vu2+L///U0NJThNT7kx8as/J9wTk3C+ZO3NnbpD+aXyBYDDou2xwLHpjETry3Ep6xnX41bUl6LRyuQp0lGjA3d39i4DWKWWZTvZoZx+QH7l4ikAKKB8xC6ddYHZaNH5qCZUtdoEjDbcnBeMV9OrMQbYBWcgQDGNvk/2NDG6PCeTvBk6MeAc1TFzlCh4jl7XEvH5t+ZIvI8KdgDsoWUIOvq4fWr4WVVzhCKLYswS8WNd5b0vDNTp+RkGV/eHZQPDU8kNdRZAUpLHPKAHr4j4piGCXFmwhRQomUKUFWVWmauIW1DwtYBqmCME0NDbk6dmGzpeB4Png09mBYT5BjBCMYd+8tQPjQRqYFxEcOgWfRARTaLLffHAKDoZX9jBOCBLoG6v+4MtznfNB5Png08ahUWFNkBWp4CM9C/k2yIK8h21acIRZicKPLi3IYIWuZqh1SrBZQVwiuYcOJdg2RkCthPbHC/vBS0sl5DAvcbhm21EO9QVk2SGPMcc9KYOKraLfvrXVsnxF4jIOYyodlFT4JQH8MJ/BzpaKm5IkaGhk2QUKGZjxfNKLaG3bT5fvOch+SZjpFJDrnDKD4o4GzI5JbpifA9DqHWcyxycVABMPXHc68UgSBuFrMSKcIBDz64wvSP8zMwtXpgKXbRSvhpYnMGwUb066l0wvywDUSlNrQSe8dstVeCIC4GS7mGc6hepgISmrLp5iMgz1uGirxB6QEu5WQ0Cv6CjGCpKCreYq8Io5qZcRpk5m/o5S2MOSwCiCinl/p6GMu3zBXXTZKOoVhPgD6NfZSL5D4fWqc9hlBGWs8Q6WVoESlLBEr6cVZBhJDnFun0fSQZQ+nft5WlDCDbIIUGY0Wdyhq6DGhrz7uWHjs3lI95GgDiUzh2/O1y/ywszigojg/bqDHyKCVXMIb746BO+GV1rkEGLosSEvP2/YOPtgJlH2kd12hdFUcZ186VNQpAU7iHBapF1asI80p5qbjKKIxRlS4EviGyVoYEWieQBtk0ihKgc5At8sOmwUhSai/MYCKLHRb98CJ9wTtKujptBsNGkeov23ROYzwLgkgi8CZAqOCSxDTkuC3Jehbdn3kZ02ki4avbHrgPbq1Ex+qdYGlhOSC3yrSQD9cqNW6zZVAKm4+7/ClsMwuB4lsk+xMBkKhebjCcnDw8PDw8PDw8PDw+My/AIFurvICRtjawAAAABJRU5ErkJggg==","Nav-Control-Zoom.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAEgCAMAAAAzNIUCAAABQVBMVEUAAACQkpWRkZaTk5aRkpWRkpWSkpWRkpWQkJWRkpWRkpWTk5WRkpWRkpWIiJmQkJaSkpaRkpWQkpSRkpWRkpWRkpWSkpSRkpWRkpWRkpWRkpWSkpaRk5WRkZGRkpWRkpWRk5WQkZWRk5WRk5aRk5SRkZX///+RkpWxsrTHx8kArurQ0dP9/f4iue36+vr29/fY2drd3t/4+Pjx8fLo6OmUlZj8/PyQ3Pbl5ues5fj09PSrrK7r6+zi4+Tb3N3U1NbNzc+cnZ8Rs+y3t7mgoaTu7u/k5OXa29zW1tjCw8S7vL6lpajf4OHS09WZmpyXmJvv7/Ds7e3KyszExcawsLOjpKaB1/WoqKuen6EqvO6/wMLX8vxoz/NPyPEKsuvw+/626Pl31PRq0PMZt+zO7/uj4veb3/eX3vaP2/aO2/ZkzvKuoX/yAAAAJnRSTlMAmGYM/fBd+iHZdRX26QUvt6KIgFVMHODIj0M8KgfFr2w00Kc6nNlHBgsAAAT9SURBVHja7ZxpV9pAFIbTyiII7mvVql3mRTMGAsRSwYWCoqC4r612X///D+hwIKfR6A04nlNp5/kky33IZO5cvORMtAdNd6eg+67BQ2OjEQiCzx4FOloO7xqIQpAvFk8h8I91tvbp4QhQ2c8YTGCkV7NAsL+Foxh+ChymmYO1AhDqaTa+J4pTk10jU0HkSXPxM34cxpkLo4zgUDPxnVEUOLuJA0ReeMdPjiLG2c2cY6TLUzCAI8MR8/694wE/RJ/nBESw7gg5vpz75Hi4a/lmPARjKDgC3s4JPjiemMUUHd/hR4794XVN8MrxRNzy0SkZQJZRAlbAACnog04LtvCUFIwgRwsMKzhJnQKfxWkBOwK1JCZwxOq8OpsXfK4J3swLzo4b5hiofH6BrP3RLhoHUkaAEIzbgnduwYUteEwtZFTqb/vmFhzb8zhIFTJUG1n/8fMbwWUt8rL21/y7hforJxjXCPxYpGeB74BckL1I0II0QhpFGAVaMItHdDnyWXFKwE/hURh7sU8JEvYIiEzYcZzGL9fqgVEUaeTBlH0W7IS6cKyOTTzr9izKfujOmvTW8cBEcEbzZNCHBLuRjIWw1gRhQL8p3rQcU0gbfCgnr4cvHMAZTxOIIL/CmZPlIoJhrWkmRoHi/p4dnVqtAKFxrRUCfgD5w82Dg83YKQTPJ7XWeIRKHg2qsRNRRloWzLKUuSoo7YpKeDeBjRLICbghJ0it6ImkhICv6Lq+JSEwdEFCZggJIcjICIyl5TRv8zxQAiV4EAJ7McktZ+mCIl3SpIuqZFlv9zxQAiW4H0EqF5cSrIvlnJIQLOiCZVlB6S8OQbCWXmz3PFACJVA90wPpmZJmYl31TEqgBKpnEgK+LQSmzBDWtvUNuZ5pIc7bPA+UQAnuqWfak+uZMu3fMy0JwZqMgKueSQn+EYFsyyO+nUuG7HJelxDEZQsK3xCCtMw5iJuJjGp5lEAJ7qXlMXMyAl5refZkC4op2zMtyZyDnOi5DNXyKIES3INgcc1gkv3CdlxCkNQFW7ICU2YIpuxlIr6Xjrd7HiiBEtyPgMsJdld0c0GmZ6r9pppp856ptKEuEymBEtyHwFg39/73nimty14mSi6qnkkJlOCf6JmkKxJbFoJdGQHPravLRH9fwJN3T+WD5c1sHoBVjO1nWxf0YQeCnWrVQo2+yZbCO/p9wMnsUrw2ilTpPA+MDLYQ3xMCCs4ts7x0BDzvaDZ+KIJKhl2F6zt4Ntxc/GAQZYO52K1gpCnDk2B9Bl0kswg1MYrhKDbZzSQrmPIW9CLGbmOxioDnABx7NN1sIOo1iKdYZQQnmKbjZ1A1KIGJEVowhnNGwU8xTgpCSDOSTfRT8V3Y4bTAY9f4E2QZTRx+SvAY5cZYj8/mr3D2s2GokvuVw3YW/phz8bX+ShGdpOCg/rYLt+CXvW99ghBM27N47BZ8r7+SxzC1ku2FwD/NX+NjfXoWLN8kVYpQZDQ5esdztx+LtEBHn8diXqEFh3jseQMEihSCXV63YMjQS+G5RjNAHkLK8vV4CDqi2HbFue9jQaaClbtNsI9ol+bJS+R3b6uIviHNm+5e5HM3pwDCzX2z9sJyZ0OyDN+A1hzdL4Hs1dLGN/KIBLSmCUSBWMn4s+n7CBid0Fqga8wPWCfl/dXV2UIRQKjlf1E6pkeDaOCfIs4+5Xgx3d/fPxCY0BQ0vwHPu0gIqkZhFgAAAABJRU5ErkJggg==","Slider.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAYBAMAAAB+X3LOAAAAIVBMVEUAAACRk5aRkZSSk5OWlpaSkpL5+v+RkpW7vMC1tbmhoqXGrO6IAAAABnRSTlMAaFgoEQ5LYgUfAAAANElEQVQoz2PADpgFMYADAwNjOQYwAIl2oAGwaEUaGlg+3EXLZ6KBcgNcYcashAECGAYDAADj/n4pps+kzwAAAABJRU5ErkJggg==","TBFit.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAWlBMVEUAAAB4eHh4eHh4eHh2dnZ9fX14eHh4eHh4eHh4eHh4eHh4eHhwcHB4eHhwcHB4eHh4eHhycnJ4eHh3d3dxcXF4eHh3d3d3d3d3d3dubm5xcXF5eXl4eHhxcXE+JRc1AAAAHHRSTlMA9qd7GAewklkjEvLn28fArJqNbWZkUi9QOjlR6dZl8gAAAVBJREFUSMfFVtuWgyAMXC4V1LZar90t/P9vbozIulVq56l58sBMyCSQ+PURO422Vaq14+kddGFr4YKJ2hYH8FwGdOTI/JV3M6MulWwaWV1mikmeMpTTftbrZUH32XRgOezjFbsL6MgxE0XtpUbSRpbvyMpoQ24TNuFV+mi5syjuKXF3sXE2kBPCp+xB2/+UF2V0kYyqXGfXkN7XFSXlZpUIEpAsaIS4P4ic6AdmVpkqhBM6VOP2DLyFCmgCLSpsVKCv/pngrzqqsGGtdq7nj5+z3xL8+Zs/eufqEAaVhb103u8QyDo+nTIzhzfSfebwfYrgWQjd9nGRUHH4aQILqRYRLSWMw08bC6Hkt0vZm84fWtc4p2ACHBIsGk4rXDj0asCXD77e6ANCnihD0CYAtxm0kQGt8hFbJd6M8XZ/PFAcmUJHFjoUwbELDnbw1+ET9gtaEjv2MjNk4gAAAABJRU5ErkJggg==","TBNext.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAWlBMVEUAAAB4eHh4eHh1dXV4eHh5eXl3d3d4eHh0dHR4eHh7e3t0dHR4eHh4eHhxcXF4eHhxcXF4eHhycnJvb294eHh3d3dwcHB3d3d1dXV4eHh3d3d5eXl4eHhxcXGK2btVAAAAHHRSTlMA9pEkpgZ7sGxZGBOq8u/b2sC8lWRSRC8PfFBRuUo9rwAAAWBJREFUSMfFVll2gzAMxAvGZklKA4Ek9v2vWVEQslna6vUj8zXBM44lC4nsLcgHZ42xbsj/oh5dLfwCUbvxF7lCNXnUD/JKzqprq6XU7XW2yOpM3zfTetGV+KDsiukPm/5Y//jeDtXokZPFHKVGw0KhDsIqYEHvE6Zpoy3M5Dh4KJ7ZCZ5it1kPm5B+hxcsJ5FXzbqFzRA2TUgTZ1dCvAsN94wYASKXUSIgAIWyS8pI4ulnHdlD+KhihpBRpkbhRUmG8JkToxsEEVaiowhABrgRS6JwdKIuMQQbMUTnfT2zXHhfpoZwJ7aeCTIzn3CAes42houK2AKo9gFDaLcGSFDEZrQYhKWEkQESRGwtT4t1J/eGcCO23oRhG9hHYgfNTiv74rilwS4+dnlzXyDmKyoUtwmw2wy3kTFa5YtaZdqMH+dzQPPb/R7meKB4gOGOrH8PRYLS27GrFXOwMz8d3oEvPJs941PvdQ4AAAAASUVORK5CYII=","TBPause.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAS1BMVEUAAAB4eHh4eHh4eHh4eHh4eHh4eHh3d3d4eHh7e3t5eXmBgYF4eHh4eHh4eHh3d3d4eHh3d3d5eXl1dXV4eHh4eHh4eHhxcXF4eHj1iuhDAAAAF3RSTlMA+ad78rBZUSMYkgjArI1tZC8UD9valLlU9lYAAAEtSURBVEjHxJXbkoQgDERJuCiOd9fd/v8v3R01W9SMgnmaPFnQB+gQovlIPKYwWDuE6XFHvYSOcITrwlKQ10xAGsR1Rj43u3xtue+5XXekma/0lXvO+zHKQBw9AXDVud5uy4lamG1Te5YaBuDrE1seAL8n7Km311vzyaCrcubsyxCAF312ev5f4mcLk37LAdLsNoA3OcB4oEkSQaA6B4hEggW/Bsx3kqnlj44lIBJIKjGIgytAXITjswPGMjAC3VEUBMQyEAG3F8gErKYMmC9gEgvtHaAVEwPAdwAGBrn2/g7QA1YNqI+kNq1Oq/ritKWhLj51eWsfkPqJapuAus3oG5m+Veqbsb7dl38ovxODVyiUV1mISlEEUimKwCpFCqtdzIqdBbliJ7npQH8AADUuN1z9SxsaAAAAAElFTkSuQmCC","TBPlay.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAYFBMVEUAAAB4eHh4eHh4eHh6enp4eHh4eHh4eHiBgYF4eHh0dHR4eHh4eHh4eHh3d3d4eHh3d3d4eHh3d3dxcXFxcXFxcXFxcXFxcXFwcHBwcHBwcHBycnJzc3N0dHRxcXF4eHhzyzi7AAAAHnRSTlMA9ad7F69ZIwiPEJPbwG1kUlAv7+HQu6OMdFxGMR+YuEezAAABRUlEQVRIx8VW2baDIAyUXaQu9e6b/v9f3rGWggJtc/rQPHlgBpghJFZPiXrUnRCdHut70I1WbD4HU7q5ATfcoz2Hmytw6VbUoeXW8vawUqws4Qd2OkZ/AchenYaGPF4sc07uN10oImcNx4QyGVkKEzw1bMGL8tY8M8iOJXFHliw2YBHgiwxMb5TLsMT7b+FULLbDQe/5c5o+/jIMKLeREeAbT0B8pgkByGxih1wVEaaXr8RGFznVsOiA0xqv3/u0AchvrIMCEHy8/SQqdPjsEwJia1h/WbaGpzJH2Bom4cyqbEQ+VznCzjBk++gltCVCbFjrRXQwrEwIhsH8zl+7LROCYRbpQyaQj0QWTbaVfHHU1CAnHzm9qQ+I9kQBoRYBepmhFzJ6qaQXY3q5v91QZoR4uGV5gCU1RXrbTRs71w3x1+EZ8Q9bFUNUrCre7AAAAABJRU5ErkJggg==","TBPlayExtend.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAYFBMVEUAAAB4eHh4eHh4eHh6enp4eHh4eHh3d3d4eHh8fHx1dXVycnJ4eHh5eXl4eHh4eHh4eHh4eHh4eHh4eHh4eHhxcXFxcXFycnJvb292dnZ4eHhvb29vb29ycnJxcXF4eHh7Kc98AAAAHnRSTlMA9qd7F7CSUSMHbRD1WPLbwKyNZFrv2ryVMC8nRUR/XsosAAABT0lEQVRIx8VWV3bEIAxcinsvKXayzP1vGROw2WQBW1+rLz+YwdJISNxeYsXSlEKUzVJcQVfzwGCtHubqBJ5zhj/GeB6By9Sgup6PI+87Q0llCJ+1ej+ZDoCcEgagzfx44TtOppoifNJwAEnuCSsBwJ8F03gR/jX3LNZZMLj66bAMgAcf3JZtwJ/SOdA+ypECifdo9W0/EiB9EAJgud7e7B/h7euAwEnINd1PUO/V7oRTqmJgMkRQH4UJcwPtlTjrCIIE9XlEMdvVAZgiBGWkmoDBFgUDZIxgpJJAbbxbgO4WI1ipOmD9XWyAPkqwUvVAY7J5CKb8ZqXiQLmnfYwSrFQjIMgEskvkoMmyXkzc3SWOXhr04qOXN/0CnV9RBzlvAndPEyC0GXIjo7dKejOmt/vzgYLNBHVkUYciceyeD/baDfamuvR0WM3TYS1ur7AfgEVDcxHQFLwAAAAASUVORK5CYII=","TBPrev.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAXVBMVEUAAAB4eHh4eHh4eHiBgYF3d3d4eHh4eHh3d3d4eHh6enpvb294eHhxcXF4eHhxcXF4eHh4eHhvb293d3dxcXF4eHhycnJ3d3dzc3N6enp4eHhycnJxcXF4eHhxcXFnXdd7AAAAHXRSTlMA9qeRCHuwWVEjFhDy79vZwKyVbWtkRC8mGXy8u51RKiIAAAFZSURBVEjHxVbbVoQwDLQt5S6CiMjq9P8/07JQkh6KGl92nmbptKczGxKeHoJsLkZrx2LO/qJuikFhhxqK5hd5pRUiKF39IK/Npup6bYzuu22Lqa/0Zbuu59MSHixTrgC0ZVp/Sx1Xm3WLTUWj/UJeJWzlfkGfA9P8oBh23ZF4qMpLc+p0WAkgrU8v1218xBuxI5CWx2G8X/bz3Z2Yd25YEN4Ay+fj2REjCUiio+3Ni3PE2CX0oVBQdMHs0zlH7LDpRaESi8jBq/PgjFwUOx2AiWJxKxgLmIBhv4MCForlDsYCFkBtBTIDHQvoDsYOdMAcLPQU0AbGDvTBxAhoCmgDsag8x1B3JgQUQCwqB/uvDfxKX0FGLL6S3LQ8VvkfJy8NefFReVNUxKLylr5AgleUJOImIG8z8kYmb5XUjG/Xc0DL2/0ZNj1Q4GGlI0s6FIVjVzjYhZ8Oj8A3c5hAJhDkPcoAAAAASUVORK5CYII=","TBZoomIn.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAACWUlEQVRYw+VYwU7CQBAtN2960BA8gnf8FMSDiEfxiDEx7CyLB3+ARMBfgJoICX4Bfod8BSZyKAccZltoS9ttS0tM7CZNWbpvdmffvJ2ppv2T6/mgcQ4Vdg8CBN4rjfPng4SgH47YDYxgDktX+4EhVOFwJ3B+xt7A2IK2N4O98bNY4M0T6MLCBvUFEzaANrTxPsFfNiO80zyJCM/KMDOHz2HMbkXO/YbI8RqM166bsXJ49Aw8WXODrsgGvSqyvGc5kbW0TCi+oAsk/JjnQ+1UHlciR/TV3MpY8CHnY41qWSYUo8wXf1gpKilYCYkrJxaw2Etz9qVYpL4wR5f9ifkdPIeHpWx+/5vkmPmQFnlPW+vvRZUB5B9tN+94Ri2FlRHEHKUBrVEglIVHdKMorGz3AnVJaQD98Ep+0LckjcJlHhxWYQyILEW34ZJBVEzpf21XA+jsD8KqOhc2Iv7cJmKgRgaGDnmQorUtaXEMiJwMVpts4GlFgqw8fEIZQH9MCa+46ahQxyQpA/yTGHm12eJ72oGBF1jY5liBThOubzoEdbQTM9AmPLE/A+m7KO1NTp2myQYaO90KtNSlYg9il7pcp37gJHxkGo3C/g99SltmqaYtlFOnmXjtljoivDp1JC/2zTT2KUryu074+8pRKBv9aOk7MidC+u5Mxg3eUxUgyHur0BIR1mwvofgHr3mVUHCHohCrhDJJyzuOInCKKq+vikDQ8WlqLwLh5fE4ZhmLkIoyFnTPqA1/wSGW20NJQVch/s6vdyzEHdwq8iuorz4lQB2fiol9Svjz1y+we1CD3hl6FwAAAABJRU5ErkJggg==","TBZoomOut.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAACSklEQVRYw+VYwU7CQBCFGzc9SAgehTt+CuJB1CN4hJgYdpaFgz9AIuIv1JoICXwBfod8BSZwKAccpi20FGi33RITt0nTbrpvdmffvJ1pIvFP2nOqcQllVgcBAu/lxuVzShH04ym7hwHMYbl1zaAPd3ASCZzn2QcYHmjnZbAPng8F3kzDKywcUN8wZu/QgQ7ex/jmMMK7zbQkPCvB1Bo+hyGriOz2FyLLqzBcu27KSsHRk9C25wavInPoU5HhPduJrJVIBuILusCEH/KLQDt1gSsxR2j+3Era8AHnY49q2SZ8RlkfzlhRlhSsiMQ1J3ZgsdfW7IuhSH1ljS7tJ+aP7xwONosc0z2kRd7T1kr43ss/2m7e3Rm1FFZGMObsa40coSx2RDeKwsp2L6p2wRv5QfdIGoXL/HBYBWkiQ9FtbMkgKqbpfwWNjwjrzr2wAfGnosRAlQz0XfJgipZX0kI5KWsGq0M28LQiQVZ1/sGE8AqbjjJ1jFUZ4F/EyJvNFtdpB95dvFrKXa4V6DTh2qZDUEdHmYEO4YnjGYjfRXFvcuw0VRto7NwTaLFLxRHELna5jv3AUXxkGo3c8Q99SlumsaYtlFPHmXhFSx0RfhZk/UnQrDS2LZP8rhN+zXcUyoYml74jcyTSd3cybvCeXwGCvLcLLSGxZmcJxUe8uquEggcUhVAllEVa3nUVgRNUeX1VBIKOTxNnEQgvT2chy1iE9CljQd8ZtRLBc4Lldt+k4FYh/slvIxbiLm4V+A3UVr8SoIZPBWW/Ev58+wWZNt3EgwcumAAAAABJRU5ErkJggg==","openhand.png":"data:image/png;base64,AAACAAEAICACAAgACAAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAEAAAAAAAAAAAAAAgAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAAA/AAAAfwAAAP+AAAH/gAAB/8AAA//AAAd/wAAGf+AAAH9gAADbYAAA2yAAAZsAAAGbAAAAGAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////gH///4B///8Af//+AD///AA///wAH//4AB//8AAf//AAD//5AA///gAP//4AD//8AF///AB///5A////5///8="},xv={w:!0,x:!0,y:!0,bw:!0,b1:!0,b2:!0},wv={b1:!0,b2:!0,bw:!0,e:!0,fs:!0,h:!0,off:!0,w:!0,x:!0,y:!0},Av={bs:!0,ff:!0,id1:!0,id2:!0,id:!0,ls:!0,sh:!0,t:!0,u:!0},Mv={b:!0,c2:!0,c:!0,fbc:!0,fc:!0},Iv={p:!0};function Ev(e,t,r,i,o){var u,s,f,l=new Set,c=new Set,d=new Set,h=new Set,v={hi:!0,bg:!0,ci:!0,du:!0,fb:!0,a1:!0,a2:!0,re:!0,tc:!0,a:!0},g={gh:!0},p={pos:!0},m={x:!0,y:!0,off:!0,lat:!0,lng:!0},y={ls:{solid:!0,dashed:!0,dotted:!0},bs:{solid:!0,dashed:!0}},x=["ha0","ha1","ha2","ha3","ha4","ha5","ha6","ha7","ha8","ha9"],w={},A={},M=[];function I(){return{allDirty:!1,allLinksMoved:!1,allLinksDirty:!1,anyLinkDirty:!1,dirty:new Map}}var E,C,S,k=I(),R=1,T=W(),L=null,B=vv(e);function G(){ot();k.dirty.clear();L=null;w={};A={};k=I();B=null}function Z(e){var t=k.dirty;t.delete(e);t.set(e,2);A[e]&&(k.anyLinkDirty=!0)}function F(){K();u=null;f=null}function Y(e){n(A,function(t){me(t,e)});n(w,function(t){me(t,e)})}var V,P=Aa({numbers:wv,numOrString:Iv,negatives:m,strings:Av,stringValues:y,colours:Mv,booleans:v,reserved:g,mapPos:p,halos:x},Z,F,Y);function X(){L||(L=Rc(t)).privateSetProperties(w,A);return L}function U(e,t){var n=1===e?t.id1:t.id2,r=l.has(t.id)?Ue(n):w[n];return{x:r.x,y:r.y}}function K(){k.allDirty=!0;t.privateTrigger("redraw",{all:!0})}function H(e,t){Z(t)}function _(e){k.allDirty=!1;k.allLinksMoved=!1;k.allLinksDirty=!1;k.anyLinkDirty=!1;k.dirty.clear();e.forEach(H)}function J(e,t){void 0===t&&(t=!1);var n=k.dirty,r=n.get(e);if(!r||t&&1===r){t&&n.delete(e);n.set(e,1)}}function ee(){return!!(k.allDirty||k.allLinksMoved||k.allLinksDirty)||!!k.dirty.size}function te(e,t,n){oe(e,function(e){e.x+=t;e.y+=n;J(e.id)})}function ie(e,t,n){var r=w[e];if(r){var i=t-r.x,o=n-r.y;if(r._combo)oe([e],function(e){e.x+=i;e.y+=o;J(e.id)});else{r.x+=i;r.y+=o;J(r.id)}}}function oe(e,t){for(var n={},r=e.slice(0);r.length>0;){var i=r.shift(),o=w[i];if(o&&!n[i]){n[i]=!0;t(o);if(o._combo)for(var a=o._combo.nodeIds,u=0,s=a.length;u<s;u++)n[a[u]]||r.push(a[u])}}}function ue(e,t){var n=A[e];if(n){n.off=t;Z(e)}}function se(e){if(e){w={};A={};wt(!0);Ln();P.typeCheck(e,A);var t=P.filterNodesAndLinks(e.items,w,A,{selfLinks:E});A=t.links;w=t.nodes;En(O(e.reveal).map(function(e){return""+e}),!1);P.ensureHiddenItemConsistency(w,A);L=null;fe();qt();K()}tt()}function fe(){M=null}function le(e){Object.keys(e).forEach(function(t){M.push(e[t])})}function ce(){if(!M){M=[];le(A);le(w)}return M}function de(e,t){switch(e){case"e":return 1;case"fs":return i.fontSize;case"off":case"b1":case"b2":return 0;case"x":case"y":return 0;case"w":case"h":return 1;case"bw":return 4;case"donut":var n=ne({v:[]},P.donutDefaults);if(t){t.b&&(n.b=un(t.b,0));t.c&&Array.isArray(t.c)&&t.c.forEach(function(e,t){n.c[t]=un(e,0)})}return n;case"ha0":case"ha1":case"ha2":case"ha3":case"ha4":case"ha5":case"ha6":case"ha7":case"ha8":case"ha9":return{c:t&&t.c?un(t.c,0):"rgba(0, 0, 0, 0)",r:0,w:0};case"fi":return{c:"black",t:""};case"oc":return pa;case"c":case"b":return Pt.midgrey;case"fc":return Pt.black;case"fbc":return Pt.textback;default:return}}function he(e){return!e.hi&&!(w[e.id1].hi||w[e.id2].hi)}function ve(e){return X().privateNeighbourLinks(e)}function ge(e,t){for(var n=X().privateGetLinkIdsBetween(e,t),r=[],i=n.length,o=0;o<i;o++)r.push(A[n[o]]);return r}function pe(e){return!(w[e.id1].bg||w[e.id2].bg)}function me(e,t){e[t]&&yt(e.id)}function ye(e){return e&&!!e.parentId}function be(e,t,n){for(var r="x"===t||"y"===t?J:Z,i=0;i<e.length;i++){var o=e[i],a=w[o],u=A[o];if(a){a[t]=n;r(o)}else if(u){u[t]=n;Z(o)}}}function xe(e,t){var n=!1;w[e]&&(n=Ae(w[e],t));A[e]&&(n=Ae(A[e],t));return n}function we(e){return Tt(e)&&!xe(e,"gh")}function Ae(e,t){return!!e[t]}function Me(e){ke(e,"gh",!0)}function Ie(e){Te(e,"gh")}function Ee(e,t){ke(e,"hi",t);ot()}function Ce(){return Re("hi")}function Se(e){Te(e,"hi");ot()}function ke(e,t,r){var i,o=O(e);be(o,t,!1);P.ensureConsistency(t,w,A);if(r){var a={},u={};for(i=0;i<o.length;i++)a[o[i]]=!0;n(A,function(e){if(Ae(e,t)&&!Ae(w[e.id1],t)&&!Ae(w[e.id2],t)&&(a[e.id1]||a[e.id2])){e[t]=!1;var n=e.parentId;n&&A[n]&&(u[n]=!0)}});P.applyPropertyRuleToComboLinks(u,t,A)}}function Re(e){var t=[];n(w,function(n,r){n[e]&&t.push(r)});n(A,function(n,r){n[e]&&t.push(r)});return t}function Te(e,t){be(O(e),t,!0);P.ensureConsistency(t,w,A)}function Le(e,t){e.type.match(/^(node|all)$/)&&n(w,t);e.type.match(/^(link|all)$/)&&n(A,t)}function Be(e){var t=a(e);P.ensureObject(t,!1,A);var n=null;"node"===t.type&&(n=w);if("link"===t.type){n=A;if(!P.hasValidEnds(t,{},w,E))return;(w[t.id1].hi||w[t.id2].hi)&&(t.hi=!0)}P.setZeroXY(t);if(t.id&&null!==n){var r=n[t.id];n[t.id]=t;if(r){r._combo&&(n[t.id]._combo=r._combo);r.parentId&&(n[t.id].parentId=r.parentId);r._offset&&(n[t.id]._offset=r._offset)}t.hi?P.ensureHiddenItemConsistency(w,A):F();ot();fe();Z(t.id)}tt()}function Ge(){return"LinkChart"}function Ze(e){E=!!e.selfLinks;C=e.marqueeLinkSelection;S=e.drag.links||e._linkSelection;i.setOptions(e)}function Oe(e){V=e}function Fe(e){V&&Z(V);if(e){Z(e);i.setSpecialOptions("showFullLabel",e)}else i.setSpecialOptions("showFullLabel",null)}function ze(){var e=[];ce().forEach(function(t){t._combo||e.push(a(t,"d"))});return e}function De(){return{type:Ge(),items:ze()}}function Ye(e,t,r,i,o){var u,s,f,l,c,d=function(){s=N(e[u].id);l=[];if(s)if(t){c=new RegExp(s,"im");n(w,function(e,t){c.test(t)&&l.push(e)});n(A,function(e,t){c.test(t)&&l.push(e)})}else{w[s]&&l.push(w[s]);A[s]&&l.push(A[s])}var d=a(e[u]),h=function(){var e=!0,t=l[f],a=d;if(!i&&"node"===t.type&&(void 0!==a.x||void 0!==a.y)){var u=void 0===a.x?t.x:a.x,s=void 0===a.y?t.y:a.y;ie(t.id,u,s)}n(d,function(n,i){if("id"!==i&&"type"!==i){e&&"x"!==i&&"y"!==i&&(e=!1);switch(i){case"id1":case"id2":if(n!==t[i])throw Error("You cannot change the ends of an existing link");break;case"parentId":case"hi":if("parentId"===i&&o&&n!=t[i])throw Error("You cannot manually change the parentId of an item");r.all=!0;r.hi=!0;t[i]=n;break;case"oc":var a=t;if(a.oc){r.all=!0;a.oc=re(a.oc,d.oc)}break;default:ba[i]&&(t._noHalos=!1);xv[i]?r.positions=!0:r.all=!0;t[i]=n}}});e?J(t.id):Z(t.id)};for(f=0;f<l.length;f++)h()};for(u=0;u<e.length;u++)d()}function Ve(){var e={};function t(t){var n=t.parentId;if(n){var r=w[n]||A[n];if(!r)throw new Error("The "+t.type+" '"+t.id+"' has parentId = '"+n+"' but the parent item is not present in the model.");if(!r._combo)throw new Error("The "+t.type+" '"+t.id+"' has parentId = '"+n+"' but the parent item has no _combo property.");e[n]=e[n]||{};e[n][t.id]=!0}}function r(t){if(t._combo){var r={};(t._combo.nodeIds||[]).concat(t._combo.linkIds).forEach(function(n){r[n]=!0;var i=w[n]||A[n];if(!i)throw new Error("The combo "+t.type+" '"+t.id+"' has a child item '"+n+"' in its _combo property, but this item is not present in the model.");if(!e[t.id][n])throw new Error("The combo "+t.type+" '"+t.id+"' has a child item '"+n+"' in its _combo property, but this item's parentId property is "+(i.parentId?"set to '"+i.parentId+"'":"undefined."))});n(e[t.id],function(e,n){if(!r[n]){var i=w[n]||A[n];throw new Error("The "+i.type+" '"+i.id+"' has parentId set to '"+t.id+"' but is not included in the parent's _combo property.")}})}}n(w,t);n(A,t);n(w,r);n(A,r)}function Pe(e,t,n){var r,i,o;for(r=0;r<e.length;r++){i=(o=e[r]).id;var a=void 0!==o.x,u=void 0!==o.y;if(!a&&!u||n)o._combo&&b(o._combo.e)&&te([i],0,0);else{ie(i,a?o.x:w[i].x,u?o.y:w[i].y)}ne(w[i]||A[i],e[r]);t?Z(i):J(i)}}function We(e,t,n,r,i){void 0===i&&(i=!1);var o=O(a(e));P.ensureTypesInArray(o,!1,A);Ye(o,t,n,r,i);n.hi&&P.ensureHiddenItemConsistency(w,A);(n.graphCache||n.hi)&&ot();tt()}function Xe(e){var t={};n(e,function(e,n){var r=A[n];r&&void 0===r.off&&(t[n]=r)});return t}function Ne(e){var t=a(e);P.ensureTypesInArray(t,!1,A);var r={carefulWithXandY:!0,selfLinks:E},i=P.filterNodesAndLinks(t,w,A,r);n(i.nodes,function(e,t){w[t]=ne(w[t],e);w[t]._noHalos=!1;Z(t)});n(i.links,function(e,t){A[t]=ne(A[t],e);A[t]._noHalos=!1;Z(t)});P.ensureHiddenItemConsistency(w,A);ot();fe();Vt(Xe(i.links));tt()}function Ue(e){var t=w[e]||A[e];if(t&&!t.hi){if("link"===t.type&&Sn(e)&&qe(e))return t;var n=_e(e);n.push(t);var r=null;n.every(function(n){if(null===n)return!1;if(n.hi){r=null;return!1}if(n.id===e){r=t;return!1}if(n._combo){r=n;return n._combo.open}return!1});return r}return null}function Ke(e){return a(Qe(e),"d")}function je(e){for(var t=O(e),n=[],r=0;r<t.length;r++){var i=Qe(t[r]);i=i||null;n.push(i)}return n}function He(e,t){var n=e,r=[],i=0;do{t&&1===i&&n.indexOf("_combolink")>-1||r.unshift(n);var o=Qe(n);n=o&&o.parentId;i++}while(n);return r}function _e(e){var t=He(e,!1);t.pop();return je(t)}function Qe(e){var t=N(e);return w[t]||A[t]||null}function Je(e,t){return!Qe(e).parentId||_e(e).every(function(e){return e._combo.open&&(!t||!e.hi)})}function qe(e){var t=A[e];if(t&&!t.hi){if(t.parentId){if($e(t.parentId)){var n=Ue(t.id1);if(t.id1===t.id2&&n)return!0;var r=Ue(t.id2);return!(!n||!r||n.id===r.id)}return!1}return!0}return!1}function $e(e){return!Qe(e).parentId||_e(e).every(function(e){return!e.hi})}function et(e){for(var t=e,n=Qe(t),r=n&&n.parentId;r;)(t=r)===(r=(n=Qe(t))?n.parentId:null)&&(r=null);return t}function tt(){var e=new Set;rt(w,e);rt(A,e);o.forEach(function(t){t.isAsset||e.has(t.src)||o.delete(t.src)})}function nt(e,t){e.forEach(function(e){e&&"string"!=typeof e&&e.g&&e.g.forEach(function(e){it(e,t)})})}function rt(e,t){n(e,function(e){it(e,t);nt([e,e.t1,e.t2],t);e.bu&&it(e.bu.g,t)})}function it(e,t){if(e){var n=e.u;if(n){t.add(n);o.has(n)||o.get(n)}}}function ot(){L&&L.clearCache()}function at(){u={};s=0;for(var e=Object.keys(w),t=0,n=e.length;t<n;t++){var r=e[t],i=w[r];if(!i.hi&&Je(r,!0)){u[r]=i;s++}}}function ut(){f={};for(var e=Object.keys(A),t=0,n=e.length;t<n;t++){var r=e[t],i=A[r],o=!i.hi;o&&(o=Sn(r)?qe(r):Je(r,!0))&&(f[r]=i)}}function st(){if(!u){at();ut()}}function ft(){if(!k.allDirty){var e=k.dirty.size;if(e>100)if(e>=s){k.allLinksMoved=!k.anyLinkDirty;k.allLinksDirty=k.anyLinkDirty}else lt();else X().internalMarkLinks(k.dirty)}}function lt(){null!==f&&n(f,function(e,t){k.dirty.has(t)||(k.dirty.has(e.id1)||k.dirty.has(e.id2))&&k.dirty.set(t,1)})}function ct(e,t,n,r,o){void 0===r&&(r=!1);void 0===o&&(o=!1);var a,s=n.getUnzoom(),c=s!==R;c&&K();if(ee()){st();ft();_((a=i.generate(u,f,k,e,t,n,xt,l,Rt,Et,r,o)).stillDirty);R=s}i.generateHandles(e,t,n,d);return i.animated()||a&&a.rebuildAll||c}function dt(e){return i.contains(e,w).filter(function(e){return!ye(w[e])})}function ht(){return i.animated()}function vt(){return i.getAlwaysRedraw()}function gt(t){var n=e.privateGetItem(t);n&&(n._combo||n.parentId)&&e.privateSetAllItemsInComboDirty([e.privateGetTopItemId(n.id)])}function pt(e,n,r){var i=N(e),o=!e&&0===d.size,a=1===d.size&&d.has(e);if(!o){if(!n&&!r){if(a)return;wt(!!i)}d.has(i)?n&&yt(i):mt(i);t.privateTrigger("redraw",{all:!0})}}function mt(e,n){void 0===n&&(n=!1);var r=N(e);if(r&&!d.has(r)&&we(r)){gt(r);d.add(r);Z(r);n||t.trigger("selectionchange")}}function yt(e,n){var r=N(e);if(d.delete(r)){gt(r);Z(r);n||t.trigger("selectionchange")}}function bt(){return 0!==d.size}function xt(e){return!!d.size&&d.has(e)}function wt(e){void 0===e&&(e=!1);d.forEach(function(e){Z(e);gt(e)});d.clear();e||t.trigger("selectionchange")}function At(e){n(e,function(e,t){mt(t,!0)})}function Mt(e){e.forEach(function(e){c.add(e)})}function It(e){e.forEach(function(e){c.delete(e)})}function Et(e){return!!c.size&&c.has(e)}function Ct(){h.forEach(function(e){Z(e);gt(e)});h.clear()}function St(e){if(e&&e.length>0){e.forEach(function(e){h.has(e)||Z(e)});var t=q(e);h.forEach(function(e){t.has(e)||Z(e)});h=t}}function kt(e){e.forEach(function(e){h.delete(e)&&Z(e)})}function Rt(e){return h.has(e)}function Tt(e){st();return!(!u[e]&&!f[e])}function Lt(){At(w);At(A);t.privateTrigger("redraw",{all:!0});t.trigger("selectionchange")}function Bt(e){if(e){wt(!0);for(var n=0;n<e.length;n++)mt(e[n],!0);t.privateTrigger("redraw",{all:!0})}var r=[];d.forEach(function(e){r.push(e)});return r}function Gt(){return d}function Zt(e,t){var r=[];if(d.size){n(w,function(e,t){xt(t)&&!ye(e)&&r.push(t)});n(A,function(e,t){if(xt(t)){w[e.id1].du&&r.push(e.id1);w[e.id2].du&&r.push(e.id2)}})}for(var i=0;i<r.length;i++){var o=w[r[i]];ie(r[i],o.x+e,o.y+t)}}function Ot(e){var t,r=O(e);if(r.length>0){for(var i={},o={},a=0;a<r.length;a++){t=r[a];A[t]&&(i[t]=A[t]);w[t]&&(o[t]=!0)}n(A,function(e,t){(o[e.id1]||o[e.id2])&&(i[t]=e)});n(i,function(e,t){yt(t,!0);Tn(t);Z(t);delete A[t]});n(o,function(e,t){yt(t,!0);Z(t);delete w[t]});ot();fe();Vt(i);F()}}function Ft(){for(var e=Bt(),t=0;t<e.length;t++){var n=A[e[t]];if(n){w[n.id1].du&&e.push(n.id1);w[n.id2].du&&e.push(n.id2)}}return e}function zt(e){var n=Rc(t);n.privateSetProperties(w,e);return n}function Dt(e){var t=z(e,{all:!1,self:!0,combos:"all"});return X().connections(t)}function Yt(e,t){var n=[],r={};if(Q(e)){var i=zt(e).findAdjacency;n=Dt();for(var o=0;o<n.length;o++){var a=A[n[o][0]];i({all:!0,combos:"all"},a.id1,a.id2)&&(r[o]=!0)}}t(n,r)}function Vt(e){t.privateTrigger("redraw",{all:!0});Yt(e,Qt);Gn(j(e),!1,void 0,!1)}function Wt(e,t){var n;Yt(e,function(e,r){n=Jt(e,r,t)});return n}function Xt(e,t){var n=[];function r(e,t){n.push({id:e.id,off:t})}Gn(j(e),t,r,!1);return n}function Nt(e){for(var t={},n=0;n<e.length;n++){var r=e[n],i=A[r];i&&(t[r]=i)}return t}function Ut(e){Vt(Nt(e))}function Kt(e,t){var n=Nt(e),r=Wt(n,t),i=Xt(n,t);if(i.length>0){var o=$(i);r=r.filter(function(e){return void 0===o[e.id]}).concat(i)}for(var a=[],u=0;u<r.length;u++){var s=r[u];A[s.id].off!==s.off&&a.push(s)}return a}function jt(e){Qt(Dt(e))}function Ht(e,t,r,i,o){var a=i||function(e){return e};function u(e){var t=1e6,n=D(e.off)?e.off:t,r=a(e);r.id1>r.id2&&(n=f(-n));return n}function s(e,t){return u(A[e])-u(A[t])}function f(e){return 0===e?0:e}n(t||e,function(t,n){var i=e[+n];r||(i=i.filter(function(e){return!A[e].gh}));if(i.length>0){i.sort(s);for(var u=a(A[i[0]]),l=u.id1===u.id2,c=i.length,d=l?20:40,h=l?0:-.5*d*(c-1),v=0;v<c;v++){var g=A[i[v]],p=a(g),m=h+v*d;m=p.id1<=p.id2?m:-m;o(g,f(m))}}})}function _t(e,t){e.off=t;Z(e.id)}function Qt(e,t){Ht(e,t,!0,null,_t)}function Jt(e,t,n){var r=[];function i(e,t){r.push({id:e.id,off:t})}Ht(e,t,n,null,i);return r}function qt(){for(var e=Dt(),t={},n=0;n<e.length;n++){var r=!1,i=e[n];if(i.length>1){for(var o=0;o<i.length;o++){var a=A[i[o]];a&&(r=r||D(a.off))}r||(t[n]=!0)}}Qt(e,t)}function $t(e){var t=an(e)
;return t||(e?'url("'+bv["openhand.png"]+'"), pointer':"auto")}function en(){return i.getResizePrimitive()}var tn=new RegExp(T+"((\\S+)(?:\\-resize))$"),nn={nw:["x1","y1"],n:["y1"],ne:["x2","y1"],e:["x2"],se:["x2","y2"],s:["y2"],sw:["x1","y2"],w:["x1"]};function rn(e){return(""+e).match(tn)}function on(e){var t=rn(e);return nn[t[2]]}function an(e){var t=rn(e);return t?t[1]:null}var sn=new RegExp(T+"(id[1|2])$");function ln(e,t,n,i,o,a){var u=(""+a).match(sn),s=N(n);return r.createLinkEndDragger(e,Zn,t,w,A[s],u[1],i,o,s)}function cn(e,n,i,o,a,s,l,c,d){var h=l.handMode,v=N(o);if(d&&h)return r.createMapDragger(i,o,a,s);if(rn(o)){var g=on(o),p=c,m=w[v]._combo&&w[v]._combo.open;return r.primitiveMover(n,i,v,p,!0,g,a,s,m,function(e){t.trigger("prechange","resize");var n=w[N(o)],r=Cn(e),i=r?r.x:0,a=r?r.y:0;if(m)n.oc.w=2*e.r;else if("C"===e.p){n.x=i+e.x;n.y=a+e.y;n.w=2*e.r;n.h=n.w}else{var u=i+e.x1,s=a+e.y1,f=i+e.x2,l=a+e.y2;n.x=u+Math.floor((f-u)/2);n.y=s+Math.floor((l-s)/2);n.w=f-u;n.h=l-s}Z(n.id)})}if(null!==v&&A[v]){if(A[v].id1===A[v].id2)return null;var y=(""+o).match(sn);return y?r.createLinkEndDragger(e,Zn,i,w,A[v],y[1],a,s,v):r.createLinkDragger(U,n,i,Zn,A[v],a,s,v)}Zn.clearExtraItemsInTransientLayer();if(h&&null===o)return r.createHandDragger(i,a,s,wt);if(null!==v){st();return r.createDefaultDragger(Zn,u,f,xt,dn,i,o,a,s)}return vn(i,a,s)}function dn(){var e=[];d.forEach(function(t){var n=w[t];n&&n.parentId&&e.push(et(n.parentId))});return e}function vn(e,r,i){if(t.trigger("dragstart","area",null,r,i,null))return null;var o={};d.forEach(function(e){o[e]=!0});var a={id:null,p:hn.rect,x1:r,y1:i,x2:r,y2:i,bc:Pt.midgrey,bw:1,fc:Pt.blue,fi:!1},s=e.viewToWorldX(r),l=e.viewToWorldY(i),c={x1:s,y1:l,x2:s,y2:l};a.wbc=fn(a.bc);a.wfc=fn(a.fc);function h(t,n){a.x1=Math.min(e.worldToViewX(s),t);a.y1=Math.min(e.worldToViewY(l),n);a.x2=Math.max(e.worldToViewX(s),t);a.y2=Math.max(e.worldToViewY(l),n);c.x1=e.viewToWorldX(a.x1);c.y1=e.viewToWorldY(a.y1);c.x2=e.viewToWorldX(a.x2);c.y2=e.viewToWorldY(a.y2)}function v(e,n){var r=!1;function i(t){if(!n&&!e.has(t)){yt(t,!0);r=!0}}function o(e){if(!d.has(e)){mt(e,!0);r=!0}}d.forEach(i);e.forEach(o);r&&t.privateTrigger("redraw",{all:!0})}function g(e,t,r,i){st();h(e,t);var o=new Set;n(u,function(e,t){Rn(c,e.x,e.y)&&o.add(t)});"off"!==C&&S&&n(f,function(e,t){if("centre"===C)Rn(c,e._x,e._y)&&o.add(t);else if("ends"===C){var n=u[e.id1],r=u[e.id2];Rn(c,n.x,n.y)&&Rn(c,r.x,r.y)&&o.add(t)}});v(o,r||i)}return{rebuild:{drawOnly:!0},scrollable:!0,getCursor:function(){return"crosshair"},generate:function(e){var t=e.getLayer(),n=e.getLayerPath();e.setLayerPath(null);e.setLayer(Zi.HANDLES);e.copyPrimitive(a);e.setLayerPath(n);e.setLayer(t)},dragMove:function(e,t,n,r){g(e,t,n,r)},endDrag:function(n,r,i){e.cancelScroll();t.trigger("dragend","area",null,r,i)||(n?t.trigger("selectionchange"):wt());t.trigger("dragcomplete","area",null,r,i)}}}function gn(r,i,o){var a,u,s,f,l=r.zoom(),c=r.viewToWorldX(i),d=r.viewToWorldY(o),h={};n(w,function(e,t){h[t]={x:e.x,y:e.y}});function v(t,n,i){var o=-t*(2*Math.PI/360);o*=2;var a=Math.sin(o),u=Math.cos(o);e.privateEach({type:"node",items:"toplevel"},function(e){var t=e.id;ie(t,(h[t].x-c)*u+(h[t].y-d)*a+c,-(h[t].x-c)*a+(h[t].y-d)*u+d)});var s=r.viewToWorldX(n),f=r.viewToWorldY(i);e.privateEach({type:"node",items:"toplevel"},function(e){ie(e.id,e.x+(s-c),e.y+(f-d))})}function g(e){var t=e*e;r.zoomToPosition(t*l,i,o)}function p(e,t,n,r){a=e;u=t;s=n;f=r}p(1,0,c,d);var m=!1,y=60,b=!1;function x(){g(a);m=m||Math.abs(u)>12;b=b||Math.abs(s-c)>y||Math.abs(f-d)>y;v(m?u:0,b?s:c,b?f:d)}function A(){e.privateEach({type:"node",items:"toplevel"},function(e){var t=e.id;ie(t,h[t].x,h[t].y)})}return{animate:function(){x()},getCursor:function(){return"move"},dragMove:function(e,t,n,r){p(e,t,n,r)},endDrag:function(e,n,r,i,o){p(n,r,i,o);if(e){A();t.trigger("prechange","move");x()}else A()}}}function pn(e,t,n){var r=Qe(e);if(!r||r.hi)return null;var i=r._edit,o=n.getAnchorPosition(e,0);if(!i||i.hib)return null;var a=i.x1+o.x,u=i.y1+o.y,s=i.x2+o.x,f=i.y2+o.y;return{x1:t.x(a),y1:t.y(u),x2:t.x(s),y2:t.y(f),fs:t.worldToViewDistance(i.fs)}}function mn(e,t,n){return B.extractStructure(i,e,w,A,X,t.fixed,n)}function yn(e){if(e.straighten){t.privateTrigger("redraw",{all:!0});jt({self:!1,combos:"toplevel"})}}function bn(t,n,r,i,o,a){var u=ql(w,i,e.privateGetMaxLabelLength());B.layout(t,n,r,X,u,o,a)}function xn(e,t,n,r,i,o){B.arrange(e,t,n,r,i,o)}function wn(e){n(w,function(t,n){e[n]&&ie(n,e[n].x,e[n].y)})}function An(e){n(A,function(t,n){e[n]&&Zn.setLinkOffset(n,e[n].off)})}function Mn(e,t,r){var i=t,o=[];n(w,function(t,n){e[n]&&o.push({id:n,from:{x:t.x,y:t.y},to:{x:e[n].x,y:e[n].y}})});var a=o.length;return ur(function(e){i-=e;for(var n=r(Math.max(0,(t-i)/t)),u=0;u<a;u++){var s=o[u],f=s.from,l=s.to,c=f.x+n*(l.x-f.x),d=f.y+n*(l.y-f.y);ie(s.id,c,d)}return i>0},{positions:!0})}function In(e){var t=A[e];return t&&!t._combo}function En(e,t){var n={};e.forEach(function(e){In(e)&&(n[e]=!l.has(e))});l.forEach(function(e){void 0===n[e]&&Tn(e)});var r=[];e.forEach(function(e){if(n[e]){var t=Qe(e);if(null!==t){l.add(e);r.push(t);Z(e)}}});t&&Gn(r,void 0,void 0,!0);F()}function Sn(e){return!!l.size&&l.has(e)}function kn(){var e=[];l.forEach(function(t){e.push(t)});return e}function Tn(e){Z(e);l.delete(e);xt(e)&&!Je(e,!1)&&yt(e,!0)}function Ln(){l.forEach(function(e){Z(e);xt(e)&&!Je(e,!1)&&yt(e,!0)});l.clear()}function Bn(e,t,n){e.forEach(function(e){var r=Ue(e.id1),i=Ue(e.id2);if(null!==r&&null!==i&&r!==i){var o=r.id>i.id?r.id+i.id:i.id+r.id;void 0===t[o]&&(t[o]=[]);t[o].push(e.id);n[e.id]={id1:r.id,id2:i.id}}})}function Gn(e,t,n,r){var i,o=void 0===n?_t:n,a={},u={};Bn(Zn.getRevealedLinks().map(Qe).filter(function(e){return!e.hi}),a,u);function s(e){return void 0!==u[e.id]?u[e.id]:e}function f(e,t){if(u[e]){var n=void 0,r=u[e],i=He(r.id1,!1);for(n=0;n<i.length;n++)if(t[i[n]])return!0;i=He(r.id2,!1);for(n=0;n<i.length;n++)if(t[i[n]])return!0}return!1}if(e){var l=[],c={};e.forEach(function(e){if("node"===e.type){var t=Ue(e.id);t&&(c[t.id]=!0)}else l.push(e)});var d={};Bn(l,d,{});i={};var h=!1;Object.keys(a).forEach(function(e,t){if(void 0!==d[e]||f(a[e][0],c)){i[t]=!0;h=!0}});if(!h)return}if(r){var v=o;o=function(e,t){Qe(e.id1).parentId!==Qe(e.id2).parentId&&v(e,t)}}Ht(j(a),i,!!t,s,o)}var Zn={addItemsToTransfer:Mt,allParentsOpen:Je,allParentsVisible:$e,animated:ht,applyRevealedLinkOffsets:Gn,applyUpdatedOffsets:An,applyVertices:wn,arrange:xn,bothEndsForeground:pe,bothEndsShown:he,clearExtraItemsInTransientLayer:Ct,contains:dt,createDragger:cn,createGestureDragger:gn,defaultValueFor:de,destroy:G,doSelection:Bt,drawInTransientLayer:St,each:Le,ensureObject:P.ensureObject,ensureTypesInArray:P.ensureTypesInArray,extractStructure:mn,firstVisibleItemInAncestry:Ue,generate:ct,getAlwaysRedraw:vt,getAncestryIds:He,getByID:Qe,getCursor:$t,getItem:Ke,getParentItems:_e,getRawItems:ce,getResizePrimitive:en,getRevealedLinks:kn,ghost:Ie,graph:X,hasSelection:bt,hidden:Ce,hide:Se,isItemShown:Tt,isRevealedLink:Sn,isSelected:xt,isTransferring:Et,labelPosition:pn,layout:bn,load:se,makeNodePositionAnimator:Mn,merge:Ne,moveAllNodesBy:te,moveNode:ie,moveSelection:Zt,neighbourLinkIds:ve,privateGetLinksBetween:ge,privateSelection:Gt,removeFromTransientLayer:kt,removeItem:Ot,removeItemsFromTransfer:It,resetConnectionOffsets:Vt,resurrect:Me,reveal:En,selectAll:Lt,selectionPlusDummyNodes:Ft,serialize:De,setAllDirty:K,setDirty:Z,setItem:Be,setLastHoverId:Oe,setLinkOffset:ue,setOptions:Ze,setProperties:We,setSelection:pt,show:Ee,showFullLabelOnHover:Fe,showHideBendLinks:Ut,showHideGetLinksToBend:Kt,startDragger:ln,topParentId:et,type:Ge,unsafeApplyChanges:Pe,updateLinkStyles:yn,validateCombos:Ve};return Zn}function Cv(e,r,i,o,u,s){var f,l,c=null,d=null,h=null,g=null,p=null,m=null,y=!1,x={arrows:"normal",backColour:void 0,backgroundAlpha:.2,bands:Q(),controlColour:Pt.midgrey,defaultStyles:void 0,drag:H(),dragPan:!0,fontFamily:"sans-serif",gradient:void 0,handMode:!1,hover:150,iconFontFamily:"sans-serif",imageAlignment:{},labelOffset:0,linkEnds:{spacing:"tight",avoidLabels:!0},_linkSelection:!0,linkStyle:ee(),logo:void 0,marqueeLinkSelection:"centre",maxItemZoom:void 0,minZoom:.05,navigation:j(),overview:_(),_rendering:te(),selectedLink:void 0,selectedNode:void 0,selectionColour:void 0,selectionFontColour:void 0,selfLinks:!1,_showShadowCanvas:!1,zoom:{adaptiveStyling:!1},truncateLabels:void 0,watermark:{fb:!0},gestures:!0};f=u.resetControlColour(x.controlColour);var w={arrows:!0,fontFamily:!0,iconFontFamily:!0,imageAlignment:!0,labelOffset:!0,linkStyle:!0,linkEnds:!0,maxItemZoom:!0,selectedLink:!0,selectedNode:!0,selectionColour:!0,selectionFontColour:!0,truncateLabels:!0,_rendering:!0},A={controlColour:!0,navigation:!0,logo:!0,overview:!0,watermark:!0,fontFamily:!0},M=Yi();e.__w=M;var E=1,C=yv(e,o,r,function(){var e,t={},n={};if(x.defaultStyles){x.defaultStyles.comboLinks&&(t=x.defaultStyles.comboLinks);x.defaultStyles.openCombos&&(n=x.defaultStyles.openCombos);e=x.defaultStyles.comboGlyph}return{comboLinks:t,openCombos:n,comboGlyph:e}}),k="Cambridge Intelligence",T=[47,6,-11,-58,-64,-52,-48,-59,-51,21,-22,-66,-66,-48,-58,-67];function L(e){l=e}function B(e){if(void 0!==e&&e!==ut){ut=e;e&&Ne(ft())}return ut}function G(){return h}function Z(e){h=e}function F(e){c=e}function D(e){d=e}function Y(e){p=vi(e,h,c,s);M.setShadowColourMap(p.getShadowColourMap());g.setAllDirty()}function W(e){g=e;h&&h.webgl&&s.shutdownAndReset();g.setOptions(x)}function X(){i.setup(f);var e=x.watermark;e&&i.addTextWatermark(e.u?e.u:void 0,e.t,e.fs||80,e.fc||Pt.lightgrey,e.fb,e.fbc,e.a,e.ff?e.ff:x.fontFamily);x.navigation&&x.navigation.shown&&i.addNavigation(Nn,c,x.navigation);x.overview&&i.addOverview(Nn,g,c,Le,x.overview);x.logo&&x.logo.u&&i.addLogo(x.logo);function t(e,t){for(var n="",r=0;r<t.length;r++)n+=String.fromCharCode(e.charCodeAt(r)+t[r]);return n}i.remove(t(k,He),t(k,_e),t(k,T));i.addBanding(x);Ve({drawOnly:!0})}function K(){return{p:"ne",u:void 0,x:0,y:0}}function j(){return{shown:!0,p:"nw",x:0,y:0}}function H(){return{links:!0,panAtBoundary:!0}}function _(){return{icon:!0,p:"se",shown:!1,size:100}}function Q(){return{bands:[],bottom:!1,top:!0}}function q(){return{fb:!1,fc:"lightgrey",x:0,w:100}}function $(){return{maxLength:30,showOnHover:!0}}function ee(){return{glyphs:"horizontal",transition:.75,inline:!1}}function te(){return{showTextAtlas:!1,showFontIconAtlas:!1,showImageAtlas:!1,canvasSkipItemsOutOfView:!0,disableFloatTexture:!1}}function re(e){function t(e,t){if(b(e[t])){e[t]=Math.min(50,e[t]);e[t]=Math.max(-50,e[t])}else e[t]=0}var n=e;Object.keys(n).forEach(function(e){var r=n[e];t(r=z({dx:r.dx,dy:r.dy,e:r.e},{dx:0,dy:0,e:1}),"dx");t(r,"dy");(!b(r.e)||r.e<=0)&&(r.e=1);var i=e;b(parseInt(e,10))&&(i=String.fromCharCode(parseInt(e,10)));n[i]=r});return n}function ie(t,r){if(t){var i=!1,s=!1,l=a(t),d=I;n(l,function(e,t){if(!S(x[t],e)){x[t]=e;/fontfamily/i.test(t)&&(x[t]=Pn(e));if("logo"===t){if("string"==typeof e){x[t]=K();x[t].u=e}e||(x[t]=K())}if("navigation"===t)if(e)d(e)?x[t]=z(e,j()):x[t]=j();else{x[t]=j();x[t].shown=!1}if("overview"===t)if(e)d(e)?x[t]=z(e,_()):x[t]=_();else{x[t]=_();x[t].icon=!1;x[t].shown=!1}if("watermark"===t&&d(e)){var r=e;r.fc&&(x[t].fc=r.fc&&Ht(r.fc)?r.fc:void 0);r.fbc&&(x[t].fbc=r.fbc&&Ht(r.fbc)?r.fbc:void 0)}if("bands"===t)if(e)if(I(e)){x[t]=z(e,Q());if(x[t].bands){x[t].bands=O(x[t].bands);for(var a=x[t].bands.length,l=0;l<a;l++)x[t].bands[l]=z(x[t].bands[l],q())}}else x[t]=Q();else x[t]=Q();"truncateLabels"===t&&(e?I(e)?x[t]=z(e,$()):x[t]=$():x[t]=void 0);"selectedNode"!==t&&"selectedLink"!==t||!d(x[t])||g.ensureObject(x[t]);if("_showShadowCanvas"===t&&y!==x._showShadowCanvas){y=x._showShadowCanvas;p.debugCanvas(y?h:null)}"imageAlignment"===t&&(e?I(e)&&(x[t]=re(e)):x[t]={});"controlColour"===t&&(e?Ht(e)&&(f=u.resetControlColour(e)):f=u.resetControlColour(null));if("linkStyle"===t)if(e&&I(e)){x[t]=z(e,ee());var c=x[t].transition;(!b(c)||c<0||c>1)&&(x[t].transition=ee().transition)}else x[t]=ee();"defaultStyles"===t&&n(e,function(e,n){if(-1!==["openCombos","comboLinks","comboGlyph"].indexOf(n)){if("comboGlyph"!==n||null!==x[t][n]){x[t][n]=d(e)?e:void 0;x[t][n]&&g.ensureObject(x[t][n])}}else x[t][n]=void 0});"handMode"===t&&oe()&&o.internalUse.setHandMode(x.handMode);"drag"===t&&(e?I(e)&&(x[t]=z(e,H())):x[t]=H());"_rendering"===t&&e&&I(e)&&(x[t]=z(e,te()));w[t]&&(s=!0);A[t]&&(i=!0)}});g.setOptions(x);c.setMaxItemZoom(x.maxItemZoom);c.setMinZoom(x.minZoom);if(s){g.setAllDirty();Ve({all:!0})}i&&Nn.initOverlays();oe()&&!e.lock()&&o.internalUse.enableDragging(x.handMode);Ve({drawOnly:!0});u.invokeWhenImagesHaveLoaded(r)}return a(x,!0)}function oe(){return null!==o&&o.api.isShown()}function ue(){return i.getWatermarkSize(h)}function se(e,t){var n=a(e);Nn.combo.internalUse.preLoadUp(n,function(e){g.load(n);Nn.combo.internalUse.postLoadUp(n,e,function(){n.viewSettings&&Nn.setViewSettings(n.viewSettings,!1);!o||n.map&&n.map.keepSameMode?R(t):o.internalUse.loadUp(n.map,t)})})}function fe(t,n){r.trigger("prechange","merge");var i=a(t),u=Nn.combo.internalUse.preMerge(i,n),s=u.itemsToMerge;oe()&&(s=o.internalUse.preMerge(s));g.merge(s);e.privateSetNonImageProperties(u.propertiesToSet)}function le(e){e.combos=Nn.combo.internalUse.serialize();e.reveal=Nn.combo.api.reveal()}function ce(e){t(Nn.isMapMode()?o.api.leafletMap().getContainer():h.webglCanvas||h.canvas,e,De)}function de(){Nn.setContainer(null);M.destroy();u.destroy();M=null;Lt&&clearTimeout(Lt);h.webgl&&s.destroy();h=null}function he(t){var n=e.privateGetItem(t.id);if(!n||n.type===t.type){var r=Nn.combo.internalUse.preMerge([t]),i=r.itemsToMerge,a=i.shift();a&&oe()&&o.internalUse.preSetItem(a);g.merge(i);a&&g.setItem(a);e.privateSetNonImageProperties(r.propertiesToSet)}}function ve(e){Nn.combo.internalUse.preDelete(e)}function ge(e,t,n,i){n||r.trigger("prechange","properties");oe()&&o.internalUse.convertPos(e);g.setProperties(e,t,i,!1,!0)}function pe(e,t,n,r){Ne(c.fromSettingsDirect(e,t,n,r))}function me(e){return!(!Mv[e]||!Ie[e])}function ye(e,t){n(t,function(n,r){var i=e[r];if(I(i)&&I(n))ye(i,n);else if(me(r))if(Array.isArray(i))for(var o=Math.max(n.length,i.length),a=0;a<o;a++){var u=n[a],s=i[a];if(Ht(u)||!u){t[r][a]=Jt(u||s);e[r][a]=Jt(s||u)}}else if(Ht(n)){i=Ht(i)?i:n;e[r]=Jt(i);t[r]=Jt(n)}})}function be(e,t){for(var n=0;n<t.length;n++)ye(e[n],t[n])}function xe(e,t,n){if("number"==typeof e)return e+n*(t-e);if(Array.isArray(e)){var r=void 0,i=t;if(Math.abs(e[0]-i[0])>.5){r=e[0]<i[0]?xe(1+e[0],i[0],n):xe(e[0],1+i[0],n);r-=Math.floor(r)}else r=xe(e[0],i[0],n);return qt([r,xe(e[1],i[1],n),xe(e[2],i[2],n),xe(e[3],i[3],n)])}return t}function we(e,t,r){var i,o,a={};n(e,function(n,u){if(u in t)switch(u){case"c":var s=n,f=t.c;a[u]=f.map(function(e,t){return xe(s[t],e,r)});break;case"v":a.v=[];if(e.v){var l=Math.max(e.v.length,t.v.length);for(i=0,o=l;i<o;i++)a.v[i]=xe(e.v[i]||0,t.v[i]||0,r)}else for(i=0,o=t.v.length;i<o;i++)a.v[i]=0;break;default:a[u]=xe(e[u],t[u],r)}else a[u]=n});return a}function Ae(e,t,r){var i={};n(e,function(n,o){i[o]=o in t?Ie[o]?xe(e[o],t[o],r):t[o]:n});return i}function Me(e,t,n){if(!I(t))return!1;var r=g.getByID(n);return null!==r&&I(r[e])}var Ie=J(ya.concat(["b","b1","b2","bw","c","c2","donut","e","fbc","fc","fi","fs","h","n","oc","off","r","w","x","y","_combo","t1","t2","v"])),Ee={t1:!0,t2:!0},Ce={};ya.concat(["fi","oc","_combo","t1","t2"]).forEach(function(e){Ce[e]=Ae});Ce.donut=we;var Se=xv;function ke(e,t,i,u,s){u||r.trigger("prechange","properties");var f=a(e);oe()&&o.internalUse.convertPos(f);for(var l=[],c=[],d={},h=[],v=!1,p={},m=function(e){var t=f[e],r=null,i=null;n(t,function(e,n){if(!Ie[n]||Ee[n]&&!Me(n,e,t.id))"id"!==n&&((r=r||{id:t.id})[n]=e);else if(P(e))(r=r||{id:t.id})[n]=e;else{d[n]=!0;(i=i||{id:t.id})[n]=e}Se[n]?p.positions=!0:"id"!==n&&(p.all=!0)});r&&c.push(r);i&&l.push(i)},y=0;y<f.length;y++)m(y);Object.keys(d).forEach(function(e){var t={fn:Ce[e]||xe,prop:e};h.push(t);"x"!==e&&"y"!==e&&(v=!0)});function b(e){n(e,function(t,n){void 0===t&&(e[n]=g.defaultValueFor(n))})}function x(e){e.forEach(function(e){var t=g.getByID(e.id);if(t){b(e);C.push(e);var n=w(e,t);E.push(n)}})}function w(e,t){var r={};n(e,function(e,n){"id"!==n&&("oc"===n&&t.oc?r[n]=ne(a(g.defaultValueFor(n,e)),a(t[n])):r[n]=a(t[n]||g.defaultValueFor(n,e)))});return r}var A=t.time,M=r.linearEasing;"cubic"===t.easing&&(M=r.cubicEasing);var I=A,E=[],C=[];g.setProperties(c,!1,p,!1,!0);var S=ur(function(e,t){if(t){g.ensureTypesInArray(l,!0);x(l);be(E,C)}else I-=e;for(var n=0!==A?M(Math.max(0,Math.min(1,(A-I)/A))):1,r=I>0,o=[],a=0,u=C.length;a<u;a++){var f=C[a],c=E[a],d={id:f.id};t&&(d._noHalos=!1);for(var p=0,m=h.length;p<m;p++){var y=h[p],b=y.prop;void 0!==f[b]&&(d[b]=y.fn(c[b],f[b],n))}o.push(d)}g.unsafeApplyChanges(o,v,s);r||R(i);return r},p);Ne(S,t.queue)}function Re(e,t,n,r,i,o){Nn.setProperties(e,!1,!0,{});Nn.animateProperties(t,{time:r,queue:!1,easing:"linear"},function(){if(i>1)Re(e,t,n,r,i-1,o);else{Nn.setProperties(n,!1,!0,{});R(o)}},!0)}function Te(e,t,n){function r(e,t,n,r){var i={id:t};i[n]=r;e.push(i)}for(var i=O(e),o=[],a=[],u=[],s={},f=0;f<i.length;f++){var l=i[f],c=g.firstVisibleItemInAncestry(l);if(c&&!s[c.id]){s[l=c.id]=!0;var d="link"===c.type,h=-1,v=void 0;do{v="_ha"+ ++h}while(h<5&&c[v]);if(h<5){var p=Jt(t.c),m=qt([p[0],p[1],p[2],.001]);r(o,l,v,{r:d?void 0:Math.max(28-t.w/2,0),w:0,c:t.c});r(a,l,v,{r:d?void 0:t.r,w:d?t.lw:t.w,c:m});r(u,l,v,null)}}}o.length>0?Re(o,a,u,t.time,t.repeat,n):R(n)}var Le,Be,Ge=null,Ze=function(e){};function Oe(e){Ze=e}function Fe(e){Le=e}function ze(e){e&&(Be=e);return Be}var De=function(){};function Ye(e){De=e}function Ve(e){r.privateTrigger("redraw",e||{all:!0})}var Pe=sr(Ve),We=sr(Ve);function Xe(e){var t=En||Ge,n=Pe.animate(e,t||void 0,g);t&&t.rebuild&&r.privateTrigger("redraw",t.rebuild);var i=We.animate(e);return n||i}var Ne=Pe.push,Ue=We.push;function Ke(e){if("number"==typeof e){E=e;Ve()}return E}var je=fr(Pe,Ke),He=[8,4,12,-22,-9,5,1,12,-69,37,45,-13,-8,16,-11,8,0,8,9,-78,-67],_e=[47,6,-11,-58,-64,-57,-48,-59,-51,19,-16,-66,-66,-48,-58,-67],Qe=null;function Je(e,t){return Qe=Le(e,t,!0)}var qe=.5;function $e(e){return 1-e}function et(e){return e}function tt(e,t,n,r){var i=n;return ur(function(o){i-=o;var a=Math.max(0,Math.min(1,(n-i)/n));qe=t(a);var u=i>0;if(!u){g.resurrect(e);qe=.5;R(r)}return u},{all:!0})}function nt(e,t,n){var r=t.time;if(0===e.length)R(n);else{qe=1;g.ghost(e);var i,o=g.showHideGetLinksToBend(e,!1);if(o.length>0){r*=2/3;i=function(){Nn.animateProperties(o,{time:r/2,queue:!1,easing:"linear"},n,!0)}}else i=n;var a=tt(e,$e,r,function(){g.hide(e);R(i)});Ne(a,!0)}}function rt(e,t,n){var r=t.time;function i(){var t=tt(e,et,r,n);Ne(t,!0)}if(0===e.length)R(n);else{qe=0;g.ghost(e);var o=g.showHideGetLinksToBend(e,!0);if(o.length>0){r*=2/3;Nn.animateProperties(o,{time:r/2,queue:!1,easing:"linear"},i,!0)}else i()}}function it(e,t,n){Ve({all:!0});if(t.animate)nt(e,t,n);else{g.hide(e);g.showHideBendLinks(e);Ve({all:!0});R(n)}}function ot(e,t,n,r){Ve({all:!0});g.show(e,t);if(n.animate)rt(e,n,r);else{g.showHideBendLinks(e);Ve({all:!0});R(r)}}var at,ut=!1,st=3;function ft(){var e=1200,t=0;return ur(function(n){t+=n;st=Math.floor(8*(1-t%e/e));return ut})}function lt(){if(ut&&c){M.setLayer(Zi.WAIT);var e=c.scale(c.width()/2),t=c.scale(c.height()/2),n=c.scale(30);M.rect(0,0,c.width(),c.height(),void 0,0,"rgba(255, 255, 255, 0.5)",!0,null,-1,void 0);for(var r=0;r<8;r++){var i=r*(Math.PI/4),o=e+n*Math.cos(i),a=t+n*Math.sin(i),u=.2+(r+st)%8/8*.8;M.circle(o,a,c.scale(10),Pt.white,-1,"rgba(145, 146, 149, "+u+")",!0,null,-1,void 0,!1)}}}function ct(e,t){var n,r,i=E,a=x.backColour,u=x.gradient,s="white";if(t){var f=c;n=f.scale(f.width());r=f.scale(f.height());if(oe()){i=1;s=o.internalUse.getDefaultBackgroundColour()}}a?Dn(e,a,i,n,r,t):u?Yn(e,u.stops,i,n,r,t):Dn(e,s,i,n,r,t);Nn.isMapMode()&&!t&&o.internalUse.setBackgroundColour(a,u)}function dt(e,t,n){M.resetExtras();var r=g.generate(M,h,c,t,!n.all&&!!n.positions);M.startGeneratingForExtras();at=g.getResizePrimitive();ht(e);i.generate(M,h,c,Ge,e);lt();return r}function ht(e){if(!e&&Ge&&Ge.generate){var t=M.getLayerPath();M.setLayerPath(null);M.setLayer(Zi.DRAGGERS);Ge.generate(M);M.setLayerPath(t)}}function vt(e,t){g.setDirty(e);dt(!1,!0,{});return g.labelPosition(e,t,M)}function gt(e,t){ct(h,!1);if(s){s.setAlpha(qe,x.backgroundAlpha);if(u.hasUpdatedImages()){e.all=!0;s.updateTextures(x._rendering.showImageAtlas)}s.build(M,e,x);if(t&&t.getPixels)return s.getPixels(c,d,x,!!l,M.getAnchorBuffer());s.draw(c,d,x,!!l,M.getAnchorBuffer(),e)}}function pt(e){ci(h);ct(h,e);var t=!!l||void 0;hi(M,h,c,u,x,!1,Qe,!1,i.drawOverviewContent,e,x.backgroundAlpha,qe,t);u.hasUpdatedImages()&&u.imagesUpdated()}function mt(e,t){if(u.isReady()){var KtnYs;if(90174757<eT){return;}KtnYs=0;dt(e,!1,t)&&(t.all=!0);g.getAlwaysRedraw()&&Ve({drawOnly:!0});if(l){ci(l);hi(M,l,c,u,x,!1,Qe,!1,i.drawOverviewContent,!1,x.backgroundAlpha,qe,!1)}h.webgl?gt(t):pt(e)}}function yt(){return!!l}function bt(){if(null!==h&&h.webgl)return gt({all:!0},{getPixels:!0});throw new Error("Not in WebGL mode")}function xt(){p.dirty()}function wt(e,t){return p.test(e,t,M)}function At(){Ge&&Ge.mouseMoved&&Ge.afterDraw&&Ge.mouseMoved()&&Ge.afterDraw(wt(St,kt),St,kt);u.hasPendingImages()&&Ve()}function Mt(e){if(x.truncateLabels&&x.truncateLabels.showOnHover){g.showFullLabelOnHover(e);Ve()}}var It,Et,Ct,St,kt,Rt,Tt,Lt=null;function Bt(e,t){return function(){var n=wt(e,t);if((null===n||g.getByID(n))&&n!==It){It=n;var i=N(n);Mt(i);g.setLastHoverId(i);r.trigger("hover",i,e,t,U(n))}}}function Gt(e,t){Lt&&clearTimeout(Lt);Lt=v(Bt(e,t),x.hover)}function Zt(e,t){Bt(e,t)()}function Ot(){Ge=null}function Ft(e,t,n,r){if(g){var i=c.worldToViewX(n),o=c.worldToViewY(r);if((Ge=g.startDragger(Nn,c,e,i,o,t))&&e){var a=Ge.getCursor(i,o);Ze(a)}}}function zt(e){var t=x.drag&&!x.drag.links;return!(!e||!t||"link"!==e.type)}function Dt(e,t,n,r,i){if(x._linkSelection&&!x.handMode&&!Ct&&g){if(!(x.drag&&x.drag.links)){var o=wt(t,n);if(o&&o===Et){var a=g.getByID(o);a&&"link"===a.type&&g.setSelection(o,r,i)}}}Ct=!1}function Yt(e,t,n,o,a){if(!g)return null;Ct=!1;m=e;var u,s=wt(t,n);if(Ge)Qt(!0,t,n,o,a);else{Et=s;s!==It&&null!==s&&(It=null);var f=r.trigger("mousedown",N(s),t,n,e,U(s)),l=g.getByID(s);if(l||!s){var d=zt(l);if(!d){var v=!1,p=g.isSelected(N(s));v=0===e?x.handMode?!!s&&(!p||o):!p||o||!s:!s||!p;f&&(v=!1);var y=oe()&&!s&&x.handMode;(v||y)&&g.setSelection(s,o,a)}if(0===e){var b=d?null:s;if((Ge=g.createDragger(Nn,h,c,b,t,n,x,at,oe()))&&s){u=Ge.getCursor(t,n);Ze(u)}}2===e?r.trigger("contextmenu",N(s),t,n,U(s)):Ct=r.trigger("click",N(s),t,n,e,U(s))}else{if(0===e&&(Ge=i.createDragger(s,t,n))&&s){u=Ge.getCursor(t,n);Ze(u)}if(0===e||1===e){var w=N(s),A=U(s);Ct=r.trigger("click",w,t,n,e,A)}}}return s}function Vt(){var e=x.drag&&!x.drag.panAtBoundary,t=!x.dragPan;return!(e||t)}function Wt(e,t,n,r){if(Ge.scrollable&&Vt()){var i=c.maybeScroll(e,t,Ge,n,r);i&&Ne(i)}}function Xt(e,t,n,r,o){St=e;kt=t;var a="auto";if(Ge&&!o){Ge.mouseMoved&&Ge.mouseMoved(!0);Wt(e,t,n,r);Ge.dragMove(e,t,n,r);a=Ge.getCursor(e,t)}else if(g){var u=g?wt(e,t):null;Gt(e,t);var s=g.getByID(u);if(s){if(x.drag&&x.drag.links||"node"===s.type)a=g.getCursor(u);else{a=x.drag&&!x.drag.links&&!x.handMode?"pointer":"hand"}}else a=i.getCursor(u)}if(Rt!==a&&!o){Ze(a);Rt=a}}function Nt(){Ge&&Qt(!0,St,kt)}function Ut(e,t,n,r){Ge&&Qt(!0,e,t,n,r)}function Kt(e,t,n){if(c){var i=Date.now();if(Tt&&i-Tt<100)return!1;Tt=i;r.trigger("mousewheel",e,t,n)||Ne(c.wheelToPosition(e,t,n))}return!1}function jt(e,t,n,r){arguments.length&&Ge&&(!Vt()||oe()&&x.handMode)&&Qt(oe(),e,t,n,r)}function _t(e,t){var n=Et;Ge&&Qt(!1,e,t);if(2!==m){!n&&c&&(r.trigger("dblclick",null,e,t,null)||rn(!0));if(n&&g.getByID(n)){var i=N(n);r.trigger("dblclick",i,e,t,U(n))||Nn.combo.internalUse.dblclick(i)}}}function Qt(e,t,n,r,i){void 0===r&&(r=!1);void 0===i&&(i=!1);if(Ge){var o=Ge;Ge=null;o.endDrag(e,t,n,r,i,M);Ve()}Ze("auto");Ve({drawOnly:!0})}function $t(e){27===e&&Qt(!1)}function en(e,t,n){if(g&&!r.trigger("keydown",e,t,n)){if(65===e&&t){g.selectAll();Ve();return!0}if(g.hasSelection()){var i=0,o=0,a=20;switch(e){case 37:i=-a;break;case 38:o=-a;break;case 39:i=a;break;case 40:o=a}if(0!==i||0!==o){r.trigger("prechange","move");g.moveSelection(i,o);Ve();return!0}if(46===e){if(!r.trigger("delete")){r.trigger("prechange","delete");ve(g.selectionPlusDummyNodes())}Ve();return!0}113===e&&r.trigger("edit",g.doSelection())}return!1}}function tn(e,t,n,r,i){Ne(c.panBy(e,t,n,!1,r,i));Ve({drawOnly:!0})}function nn(e,t,n,r){if(oe())o.internalUse.pan(e,t,n,r);else{Ne(c.pan(e,t,n,r));Ve({drawOnly:!0})}}function rn(e,t,n){if(oe())o.internalUse.zoom("in",e,t,void 0,n);else{Ne(c.zoomIn(e,t,n));Ve({drawOnly:!0})}}function on(e,t,n){if(oe())o.internalUse.zoom("out",e,t,void 0,n);else{Ne(c.zoomOut(e,t,n));Ve({drawOnly:!0})}}function an(e,t,n,r){if(oe())o.internalUse.setZoom(e,t,n,r);else{Ne(c.setZoom(e,t,n,r));Ve({drawOnly:!0})}}function un(){g.generate(M,h,c);return M.itemExtents(null,h)}function sn(e){return function(t,n,r,i,a){if(u.isReady()&&g){var s=r;s=V(s)||0===s.length?void 0:O(s);if(oe())o.internalUse.zoom(e,t,n,s,i);else{Ne(c[e](g,M,h,t,n,s,i,a)||null);Ve()}}}}function fn(e,t){var n=z(t,{fixed:[]});return g.extractStructure(h,n,e)}function ln(e,t){var n=e;return ur(function(e){var r=(n-=e)<0;r&&R(t);return!r})}function cn(e,t,n){var i,o;if(e&&t){var a=Math.max(0,Math.min(t.time||700,2e3)),u="linear"===t.easing?r.linearEasing:r.cubicEasing,s=e.extents;g.updateLinkStyles(t);e.updatedEdges&&g.applyUpdatedOffsets(e.updatedEdges);i=g.makeNodePositionAnimator(e.vertices,a,u);o=c.fitWorldExtents(e.extents,!0,!0,!0,!0,a,n);if(t.animate){Ue(i);t.fit?Ue(o):s&&Ue(ln(a,n))}else{g.applyVertices(e.vertices);Ve();s&&(t.fit?c.fitWorldExtents(e.extents,!1,!0,!0,!0,0,n):R(n))}}else R(n)}var dn,hn,vn,gn,pn,mn,yn,bn,xn,wn,An,Mn,In,En,Cn=!1;function Sn(e){return function(t,n){Cn=!1;cn(t,n,e)}}function kn(e,t,n){if(g){Cn=!0;var i=t||{},o=fn(e,i);g.layout(e,r,o,h,i,Sn(n))}}function Rn(){return Cn}function Tn(e,t,n,i){if(g){var o=fn(e);g.arrange(e,r,t,o,n,Sn(i))}}function Ln(e,t,n){function r(e){g.updateLinkStyles(t.layout);e&&g.applyUpdatedOffsets(e)}function i(e){if(t.layout.fit){var n=c.fitWorldExtents(e,t.animate,!0,!0,!0,t.time);Ne(n)}}Nn.combo.internalUse.arrangeAndLayout(e,t,r,i,n)}function Bn(){if(dn){clearTimeout(dn);dn=null}}function Gn(e){if(g){if(2===e.length){Mn=(e[0].x+e[1].x)/2;In=(e[0].y+e[1].y)/2;wn=Mn;An=In}if(1===e.length){gn=e[0].x;pn=e[0].y;yn=e[0].id;var t=wt(gn,pn);if(dn)t!==mn?Bn():hn=!0;else{hn=!1;dn=v(Bn,600)}mn=t;vn=v(function(){Zn();Ge&&Qt(!1);r.trigger("contextmenu",N(mn),gn,pn,U(mn))},600);if(!mn||g.getByID(mn)){if(!r.trigger("touchdown",N(mn),gn,pn,U(mn))){var n=zt(g.getByID(mn));n||(mn?g.isSelected(N(mn))||g.setSelection(mn,!1,!1):x.handMode||g.setSelection(null,!1,!1));var o=n?null:mn;Ge=g.createDragger(Nn,h,c,o,gn,pn,x,at)}Ve()}else Ge=i.createDragger(mn,gn,pn)}}}function Zn(){if(vn){clearTimeout(vn);vn=null}}function On(e){if(e.length>=2){wn=(e[0].x+e[1].x)/2;An=(e[0].y+e[1].y)/2}for(var t=0;t<e.length;t++)if(yn===e[t].id){bn=e[t].x;xn=e[t].y}if(vn){var n=bn-gn,r=xn-pn;n*n+r*r>100&&Zn()}if(!En&&Ge&&yn===e[0].id&&1===e.length){St=e[0].x;kt=e[0].y;Ge.mouseMoved&&Ge.mouseMoved(!0);Wt(e[0].x,e[0].y);Ge.dragMove(e[0].x,e[0].y,!1,!1)}}function Fn(e,t){Ve();var n=N(mn);if(vn){Zn();if(!oe()){var i=U(mn);Ct=r.trigger("click",n,gn,pn,0,i)}}if(dn&&hn&&2!==m){Bn();Et=mn;Nn.dblclick(gn,pn)}if(Ge){for(var o=-1,a=0;a<t.length;a++)t[a].id===yn&&(o=a);if(o>-1&&0===e.length){Qt(!0,t[o].x,t[o].y,!1,!1);if(zt(g.getByID(n))){Et=mn;Dt(0,gn,pn,!1,!1)}}else if(e.length>0){gn=e[0].x;pn=e[0].y;yn=e[0].id;if(!(mn=wt(gn,pn))||g.getByID(mn)){g.setSelection(mn,!1,!1);Qt(!0,St,kt);Ge=g.createDragger(Nn,h,c,mn,gn,pn,x,at)}}}}function zn(){Zn();Ge&&Qt(!1)}var eT=window[String.fromCharCode(68,97,116,101)][String.fromCharCode(110,111,119)]()/17510;function Vn(){}function Wn(e,t){Zn();if(x.gestures&&b(Mn)&&b(In)){En||(En=g.createGestureDragger(c,Mn,In));En.dragMove(e,t,wn,An);Ve({all:!0})}}function Xn(e,t){En&&En.endDrag(!0,e,t,wn,An);En=null}var Nn={afterDraw:At,animate:Xe,animateBackgroundOpacity:je,animateProperties:ke,appendCombos:le,arrange:Tn,arrangeAndLayout:Ln,backgroundOpacity:Ke,cancelAnimation:Pe.cancel,cancelLayoutAnimation:We.cancel,click:Dt,combo:C,dblclick:_t,destroy:de,dragover:Zt,draw:mt,drawBackground:ct,drawoffscreen:xt,fitToModel:sn("fitToModel"),fitToSelection:sn("fitToSelection"),fitModelHeight:sn("fitModelHeight"),gesturechange:Wn,gestureend:Xn,gesturestart:Vn,getCanvasContext:G,getWebGLPixels:bt,hide:it,hittest:wt,imageGenFn:ze,inMapMode:oe,initOverlays:X,isLayingOut:Rn,isMapMode:yt,keydown:en,keyup:$t,labelPosition:vt,layout:kn,load:se,makeGhostCanvas:Je,merge:fe,modelExtents:un,mousedown:Yt,mouseleave:jt,mousemove:Xt,mouseup:Ut,mousewheel:Kt,options:ie,pan:nn,panBy:tn,ping:Te,removeDragger:Nt,removeItem:ve,render:Ve,resetState:Ot,setCanvasContext:Z,setContainer:ce,setCreateCanvasFn:Fe,setCursorFn:Oe,setItem:he,setModel:W,setOverlayContext:L,setOverviewView:D,setProperties:ge,setShadowCanvas:Y,setStartGameLoopFn:Ye,setView:F,setViewSettings:pe,setZoom:an,show:ot,startDragger:Ft,touchcancel:zn,touchend:Fn,touchmove:On,touchstart:Gn,wait:B,watermarkSize:ue,zoomIn:rn,zoomOut:on};return Nn}function Sv(e){function t(t,n,r,i,o,a,u,s,f,l){if(e.trigger("dragstart","resize",r,u,s,null))return null;var c=Sn(t,i),d=i.r,h={},v=$n({},i);m();an(v,.5);function g(e,t){return{dx:n.viewToWorldDistance(e-u),dy:n.viewToWorldDistance(t-s)}}function p(e,t,n,r){var i,o,u=e,s=t;if(a.length>0||f){i={x1:0,x2:0,y1:0,y2:0};for(var l=0;l<a.length;l++){var d="x"===(o=a[l]).charAt(0)?u:s;i[o]=d}if(n||f){0!==i.x1&&(i.x2=-i.x1);0!==i.x2&&(i.x1=-i.x2);0!==i.y1&&(i.y2=-i.y1);0!==i.y2&&(i.y1=-i.y2)}}else{r&&(s=0!==(u=Math.abs(u)>Math.abs(s)?u:0)?0:s);i={x1:u,x2:u,y1:s,y2:s}}for(var h={},v=["x1","y1","x2","y2"],g=0;g<v.length;g++)h[o=v[g]]=c[o]+i[o];if(r){var p=c.x2-c.x1,m=c.y2-c.y1;if(Math.abs(p)>0&&Math.abs(m)>0){var y=m/p,b=h.x2-h.x1,x=h.y2-h.y1,w=void 0
;if(Math.abs(u)>Math.abs(s)){var A=Math.floor(y*(p+b)-m)-x;if(f||n||!K(a,"y1")&&!K(a,"y2")){w=Math.floor(A/2);h.y1-=w;h.y2+=w}else{K(a,"y1")&&(h.y1-=A);K(a,"y2")&&(h.y2+=A)}}else{var M=Math.floor((m+x)/y-p)-b;if(f||n||!K(a,"x1")&&!K(a,"x2")){w=Math.floor(M/2);h.x1-=w;h.x2+=w}else{K(a,"x1")&&(h.x1-=M);K(a,"x2")&&(h.x2+=M)}}}}return h}function m(){v.wc&&(h.c=v.wc[3]);v.wfc&&(h.fc=v.wfc[3]);v.wbc&&(h.bc=v.wbc[3])}function y(){v.wc&&(v.wc[3]=h.c);v.wfc&&(v.wfc[3]=h.fc);v.wbc&&(v.wbc[3]=h.bc)}function b(e,t,n){return"1"===n.charAt(1)?d-("x"===n.charAt(0)?e:t):d+("y"===n.charAt(0)?t:e)}function x(e,t,n,r,o){var u,s=g(t,n);if("C"===i.p)if(a.length>1){var f=b(s.dx,s.dy,a[0]),l=b(s.dx,s.dy,a[1]);u=Math.abs(Math.min(f,l))}else u=Math.abs(b(s.dx,s.dy,a[0]));var c=p(s.dx,s.dy,r,o);En(e,c.x1,c.y1,c.x2,c.y2,u)}return{rebuild:{all:!0},animate:void 0,scrollable:!0,getCursor:function(){return o?"crosshair":"move"},generate:function(e){e.copyPrimitive(v)},dragMove:function(e,t,n,r){x(v,e,t,n,r)},endDrag:function(t,o,a,u,s){n.cancelScroll();var f=e.trigger("dragend","resize",r,o,a);y();if(!f&&t){x(i,o,a,u,s);l(i)}e.trigger("dragcomplete","resize",r,o,a)}}}function r(t,n,r,i){var o={x:!0,y:!0},a=t.offsetX(),u=t.offsetY(),s=0,f=0,l=!1,c="hand",d=e.trigger("dragstart",c,null,n,r,null);if(d){if(!I(d)){i();return null}ne(o,d)}function h(e,t){l=l||Math.abs(n-e)>10||Math.abs(r-t)>10;s=e-n;f=t-r;if(o){o.x||(s=0);o.y||(f=0)}}function v(){if(l){t.offsetX(a+s);t.offsetY(u+f);e.trigger("viewchange")}}return{rebuild:{drawOnly:!0},animate:v,direction:o,dragMove:h,getCursor:function(){return"move"},endDrag:function(t,n,r){var o=e.trigger("dragend",c,null,n,r);if(l){if(!o&&t)h(n,r);else{s=0;f=0}v()}else i();e.trigger("dragcomplete",c,null,n,r)}}}function i(t,n,r,i){var o=n?"move":"hand",a=N(n);e.trigger("dragstart",o,a,r,i,U(n));return{rebuild:void 0,animate:void 0,direction:{},dragMove:function(){},getCursor:function(){return"move"},endDrag:function(t,n,r){e.trigger("dragend",o,a,n,r);e.trigger("dragcomplete",o,a,n,r)}}}function o(t,n,r,i,o,a,u,s,f){var l={x:!0,y:!0,add:null,combos:!0},c=N(u),d=n[c],h="move",v=e.trigger("dragstart",h,c,s,f,U(u));if(v)if(Array.isArray(v))l.add=J(v);else{if(!I(v))return null;ne(l,v);Array.isArray(l.add)&&(l.add=J(l.add))}if(l.combos){var g=o();if(g.length){l.add=l.add||{};g.forEach(function(e){l.add[e]=!0})}}function p(e){return!!l.add&&l.add[e]}var m=a?a.viewToWorldX(s):s,y=a?a.viewToWorldY(f):f,b=Object.keys(n),x=R(s,f),w={x:0,y:0},A=!0,M=!1;d&&(M=!(!d.w||!d.h));function E(){var e=x.dx-w.x,n=x.dy-w.y;w.x=x.dx;w.y=x.dy;var r=b.filter(function(e){return e!==c&&(i(e)||p(e))});i(c)&&(M?r.unshift(c):r.push(c));t.moveAllNodesBy(r,e,n);if(A){A=!1;t.setDirty(c)}t.drawInTransientLayer(r)}function C(){var e=b.filter(function(e){return i(e)||p(e)});t.moveAllNodesBy(e,-w.x,-w.y)}var S=!1,k=!1;function R(e,t){S=S||Math.abs(s-e)>10||Math.abs(f-t)>10;var n=a?a.viewToWorldX(e):e,r=a?a.viewToWorldY(t):t;if(l){l.x||(n=m);l.y||(r=y)}return{dx:S?n-m:0,dy:S?r-y:0}}var T,L=!1;return{rebuild:{positions:!0},scrollable:!0,direction:l,animate:E,generate:function(t){S&&t.setHitTesting(c,!1);if(S&&!k){k=!0;e.privateTrigger("redraw",{all:!0})}},getCursor:function(){return"move"},dragMove:function(e,t){x=R(e,t)},mouseMoved:function(e){e&&(L=!0);return L},afterDraw:function(t,n,r){L=!1;var i=N(t);if(c!==i)if(void 0===T)T=i;else if(i!==T){e.trigger("dragover",i,n,r,U(t));T=i}},endDrag:function(n,r,i,o,s,f){a.cancelScroll();if(e.trigger("dragend",h,N(u),r,i))C();else if(n&&S){C();x=R(r,i);w={x:0,y:0};e.trigger("prechange","move");E()}else C();f.setHitTesting(c,!0);t.setDirty(c);l.add&&Object.keys(l.add).forEach(t.setDirty);e.trigger("dragcomplete",h,N(u),r,i)}}}function u(t,n,r,i,o,u,s,f,l){if(e.trigger("dragstart","dummy",l,s,f,null))return null;var c=r?r.viewToWorldX(s):s,d=r?r.viewToWorldY(f):f,h=i[o[u]].x,v=i[o[u]].y;function g(e,t){n.moveNode(o[u],e,t)}var p,m=x(s,f),y=null,b=!1;function x(e,t){var n=r?r.viewToWorldX(e):e,i=r?r.viewToWorldY(t):t;return{dx:n-c,dy:i-d}}function w(){return o["id1"===u?"id2":"id1"]}return{rebuild:{all:!0},scrollable:!0,animate:function(){g(h+m.dx,v+m.dy)},getCursor:function(){return"move"},dragMove:function(e,n){m=x(e,n);y=t.hittest(e,n)},mouseMoved:function(e){e&&(b=!0);return b},afterDraw:function(t,n,r){b=!1;var i=N(t),o=U(t);if(l===i){i=null;o=null}if(void 0===p)p=i;else if(i!==p){e.trigger("dragover",i,n,r,o);p=i}},endDrag:function(s,f,l){r.cancelScroll();if(!e.trigger("dragend","dummy",y,f,l))if(s){g(h,v);e.trigger("prechange","move");y=N(y);if(i[y]&&y!==w()){var c=a(o);c[u]=y;delete c.off;n.removeItem([o[u],o.id]);t.merge([c])}else{m=x(f,l);g(h+m.dx,v+m.dy);y=null}}else g(h,v);e.trigger("dragcomplete","dummy",y,f,l)}}}function s(t,r,i,o,a,u,s,f){if(e.trigger("dragstart","offset",f,u,s,U(f)))return null;function l(e,t,n,r,i,o){return((n-e)*(t-o)-(e-i)*(r-t))/Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}var c={},d={},h={};o.privateSelection().forEach(function(e){if(e){var t=o.getByID(e);if(t&&"link"===t.type){c[e]=t.off||0;d[e]=t.off||0;h[e]=!0}}});var v=!1;function g(e,n,r){var o=e===a,u=o?i.viewToWorldX(n):n,s=o?i.viewToWorldY(r):r,f=t(1,e),v=t(2,e),g=l(f.x,f.y,v.x,v.y,u,s);h[e.id]&&Math.abs(g-c[e.id])>8&&(h[e.id]=!1);if(!h[e.id]){Math.abs(o?g:g+c[e.id])<12&&(g=o?0:-c[e.id]);d[e.id]=o?g:g+c[e.id]}}function p(e){o.setLinkOffset(e,d[e])}return{rebuild:{all:!0},scrollable:!0,animate:function(){n(d,function(e,t){p(t)})},getCursor:function(){return"move"},dragMove:function(e,r){var f=i.viewToWorldX(e)-i.viewToWorldX(u),l=i.viewToWorldY(r)-i.viewToWorldY(s);n(d,function(n,i){var u=o.getByID(i);if(u)if(u===a){g(u,e,r);v=!0}else{var s=t(1,u),c=t(2,u),d=(s.x+c.x)/2,h=(s.y+c.y)/2;g(u,d+f,h+l)}})},endDrag:function(t,r,a){i.cancelScroll();if(!e.trigger("dragend","offset",f,r,a)&&o.getByID(f))if(t&&v){n(c,function(e,t){o.getByID(t).off=e});e.trigger("prechange","offset");n(d,function(e,t){o.getByID(t).off=e})}else{n(d,function(e,t){d[t]=c[t]});this.animate()}e.trigger("dragcomplete","offset",f,r,a)}}}return{createDefaultDragger:o,createHandDragger:r,createLinkDragger:s,createLinkEndDragger:u,createMapDragger:i,primitiveMover:t}}function kv(e,t,n){var r=null,i=null,o=null,u=null;t.privateBind("redraw",function(){r=null;i=null});function s(e,t,s){if(!e.type||!e.type.match(/^(node|link|all)$/))throw new TypeError("options type property should be either 'node', 'link' or 'all'");if(!e.items||!e.items.match(/^(underlying|toplevel|all)$/))throw new TypeError("options items property should be either 'underlying', 'toplevel' or 'all'");if(!r){i=n.privateGetRawItems();o=i;if(t)u=i;else{r=a(i,"d");u=r}}if(A(s))for(var f=0;f<o.length;f++){var l=o[f];h(e.type,l)&&v(e.items,l)&&s(u[f])}}function f(t,r,i){var o="underlying"===r.items,u=g(t,"hi","shown","hidden",r.type,r.hideSingletons,o),s=u.shown.nodes.concat(u.shown.links),f=u.hidden.nodes.concat(u.hidden.links),l=e.combo.internalUse.filter(s,f,u,r);s=l.toShow;function c(){R(i,a({shown:u.shown,hidden:u.hidden,combos:u.combos},!0))}if((f=l.toHide).length>0)if(s.length>0){r.time/=2;n.privateHideWithoutCombos(f,r,function(){n.privateShowWithoutCombos(s,!1,r,c)})}else n.privateHideWithoutCombos(f,r,c);else s.length>0?n.privateShowWithoutCombos(s,!1,r,c):c()}function l(t,r,i){var o="link"===r.type,u="underlying"===r.items,s=g(t,"bg","foreground","background",r.type,o,u),f=s.foreground.nodes.concat(s.foreground.links),l=s.background.nodes.concat(s.background.links),c=e.combo.internalUse.foreground(f,l,s,r),d=c.toHide.map(function(e){return{id:e,bg:!0}}),h=c.toShow.map(function(e){return{id:e,bg:!1}});n.setProperties(d.concat(h),!1,function(){R(i,a({foreground:s.foreground,background:s.background},!0))})}function c(e,t){t.forEach(function(t){if(e[t.id]){e[t.id1]=!0;e[t.id2]=!0}})}function d(e,t){t.forEach(function(t){e[t.id]=!(!e[t.id1]||!e[t.id2])})}function h(e,t){return"all"===e||e===t.type}function v(e,t){var n;switch(e){case"toplevel":n=!t.parentId;break;case"all":n=!0;break;case"underlying":default:n=!t._combo}return n}function g(e,t,n,r,i,o,a){var u={},f={all:{}};f[n]={nodes:[],links:[]};f[r]={nodes:[],links:[]};f.all[n]={nodes:[],links:[]};f.all[r]={nodes:[],links:[]};var l=h();v(l);g(l);p(l);m(l);y(l);l.all.forEach(function(e){var i="node"===e.type?"nodes":"links",o=u[e.id]?n:r;!u[e.id]==!e[t]&&f[o][i].push(e.id);f.all[o][i].push(e.id)});return f;function h(){var e={all:[],nodes:[],links:[]};s({type:"all",items:a?"underlying":"toplevel"},!1,function(t){e.all.push(t);"node"===t.type?e.nodes.push(t):e.links.push(t)});return e}function v(t){("node"===i?t.nodes:"link"===i?t.links:t.all).forEach(function(t){e(t)&&(u[t.id]=!0)})}function g(e){"link"===i&&(o?c(u,e.links):e.nodes.forEach(function(e){u[e.id]=!0}))}function p(e){"node"===i&&d(u,e.links)}function m(e){"all"===i&&"bg"!==t&&e.links.forEach(function(e){u[e.id]=!(!u[e.id1]||!u[e.id2]||!u[e.id])})}function y(e){if("link"!==i&&o){var t={};e.links.forEach(function(e){t[e.id1]=t[e.id1]||u[e.id]&&u[e.id2];t[e.id2]=t[e.id2]||u[e.id]&&u[e.id1]});e.nodes.forEach(function(e){u[e.id]=u[e.id]&&t[e.id]})}}}return{each:s,filter:f,foreground:l}}var Rv=Pt.ci,Tv=_t(Rv),Lv=nn(Tv[0],Tv[1],Tv[2]);function Bv(){var e=Lv;function t(t){var n=_t(t||Rv);return on((e=nn(n[0],n[1],n[2]))[0],e[1],Lv[2])}function n(t){var n=.02,r=document.createElement("canvas");r.width=t.width;r.height=t.height;var i=r.getContext("2d");i.clearRect(0,0,t.width,t.height);i.drawImage(t.im,0,0,t.width,t.height);for(var o=i.getImageData(0,0,t.width,t.height),a=o.data,u=0;u<a.length;u+=4){var s=nn(a[u],a[u+1],a[u+2]);if(Math.abs(s[0]-Lv[0])<n){var f=on(e[0],e[1],s[2]);o.data[u]=f[0];o.data[u+1]=f[1];o.data[u+2]=f[2]}}i.putImageData(o,0,0);return r}return{colouriseImage:n,setColour:t}}function Gv(e,t,n,r){var i=document.createElement("canvas"),o=i.getContext("2d");i.id="webglDebug"+r+"Canvas"+t;i.width=e;i.height=e;var a=document.getElementById(i.id);n?a?a.parentNode.replaceChild(i,a):document.getElementsByTagName("body")[0].appendChild(i):a&&document.getElementsByTagName("body")[0].removeChild(a);return o}var Zv=512,Ov=4,Fv=264,zv=8,Dv="Image";function Yv(e){return{alphaChannel:!0,img:e,rebuild:!1,size:0}}function Vv(e,t){for(var n=[],r=4,i=4,o=4,a=0,u=e.getMissingImage(),s=Xv(e),f=Pv(s),l=1/f,c=Gv(f,0,t,Dv),d=[],h=0,v=s.length;h<v;h++){var g=s[h];if(g.isMissing)d.push(g);else{var p=g.width/g.imageRatio,m=g.height/g.imageRatio;if(r+p+zv>f){r=0;i+=a+zv;a=0}if(i+m>f){o++;i=zv;n.push(Yv(c.canvas));c=Gv(f,o,t,Dv)}g.u1=r*l;g.v1=i*l;g.u2=(r+p)*l;g.v2=(i+m)*l;if(g.isEmoji){g.v2=i*l;g.v1=(i+m)*l}g.maxDimension=g.nonSquare;g.textureBank=o;g.colourComponentTexture=-1;if(g.nonSquare){var y=g.v2-g.v1,b=g.u2-g.u1;if("width"===g.nonSquare){var x=(b-b*(y/b))/2;g.cu1=g.u1+x;g.cv1=g.v1;g.cu2=g.u2-x;g.cv2=g.v2}else{var w=(y-y*(b/y))/2;g.cu1=g.u1;g.cv1=g.v1+w;g.cu2=g.u2;g.cv2=g.v2-w}}else{g.cu1=g.u1;g.cv1=g.v1;g.cu2=g.u2;g.cv2=g.v2}c.drawImage(g.hasControlColour?g.co:g.im,r,i,p,m);m>a&&(a=m);r+=p+zv}}d.forEach(function(e){e.u1=u.u1;e.v1=u.v1;e.u2=u.u2;e.v2=u.v2;e.cu1=u.cu1;e.cv1=u.cv1;e.cu2=u.cu2;e.cv2=u.cv2;e.textureBank=u.textureBank});n.push(Yv(c.canvas));o++;for(;o<7;){var A=Gv(1,o++,!1,Dv);n.push(Yv(A.canvas))}return n}function Pv(e){for(var t=1,n=zv,r=zv,i=0,o=1024,a=0,u=e.length;a<u;a++){var s=e[a],f=s.width/s.imageRatio,l=s.height/s.imageRatio;if(n+f+zv>o){n=0;r+=i+zv;i=0}if(r+l>o){t++;r=zv}l>i&&(i=l);n+=f+zv}return t<Ov?1024:t<=4*(Ov-1)?2048:4096}function Wv(e,t){var n=1,r=!1;if(e>Fv){t>0?e>Zv&&(n=e/Zv):n=e/Fv;r=!0}return{imageRatio:n,largeImage:r}}function Xv(e){var t=[],n=2;e.forEach(function(e){if(e.isLoaded){var r=e.width>e.height?"width":"height";if(e.src&&e.src.indexOf(".svg")>-1){var i=0|Math.max(e.width,e.height);if(i){var o=256/i;e.width=Math.round(e.width*o);e.height=Math.round(e.height*o)}else{e.width=256;e.height=256}}var a=Wv(e.height,n);a.largeImage&&n>0&&n--;e.size=e[r]/a.imageRatio;e.imageRatio=a.imageRatio;e.nonSquare=e.width!==e.height&&r;t.push(e)}});return t.sort(function(e,t){return e.size-t.size})}function Nv(e){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=128;t.height=128;n.fillStyle="black";n.font="105px sans-serif";var r=n.measureText(e).width,i=r*(128/105);t.width=Math.max(1,i);n.font="105px sans-serif";n.fillText(e,(t.width-r)/2,96);return t}function Uv(){var e=0,t=new Map;function n(n){if(n&&A(n)){var r={id:e++,fn:n};t.set(r.id,r)}}function r(){if(t.size>0){var e=[];t.forEach(function(t){e.push(t)});e.forEach(function(e){t.delete(e.id)});e.forEach(function(e){e.fn()})}}function i(){t.clear()}return{destroy:i,push:n,runAll:r}}var Kv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACwklEQVR4Ae2aA8xkQRCEz7Zt27Zt20ZwZny2bdu2bdu2uVdnb/6ufZqX6eQLd7qmKtvP/nTp0qVLly5d3mvh3dzgI/AIqWmQfnTwRKi9Ffg3MoTBRAB3QHgDtGcJdV+CxEb/C0KAc0QI43zULUhotnfSKHwEOUm9IOC0UG8vCEjpmTgKx0FgQqurUOctSCVQsHQUugh14oGXQo2eTj4rvAQJBBpLhf2PEv8yy0dhtR97lxX2fQ8y8WasHYXqfuh7Wdizj0oXSLdBOC89ewv7nQHBOAP2jcLo//RKDt4KT7G57TPPj8JHkP0fvTYJ+wxX+V7hGAj8S49awvWXQShnBMCPQsdva8OC28K1RZxjnh+FFyAeGC5cN9FNt80HwAfB7296PYuoNgoEZR3mmB8FgtnqP0HiuQci85tSfxRqiPRdNgpL1X+YyvMYxKT0XTIKjXhx9UdhvRveKQQAO8kAurghgE7AQ/IGpFfZfNpvJjw+cBaEUtF8UHDUoNPgVBUD6As8BlJXtfP/B4MDeAaSqGA+NLgIPCZwCAR1egDjBYYYhjnZfCnC0AtiTQEnmo9EPNcbAhoSAVwEIZ0WwAKhicMgyLe169QehYV36xBXeKl/WR8fPCfeLeRygvnY4LHP1/gL77YlrxKD22neP9jAvMY28Kapv23+iQPYB5DNS7/k4DXxajyLHeajgIfEuzz6sxgvHAQBrA5ghnCT10EYP/QNBA4RIbS00nwRYoOVBP0zEPcSD0FkK8wHBxeEm9tA6EwlQp5gun/iC453IBWhE5c4IH4E2cw0nwS8FW5qqA96A4h/wQEQwKwAlhOvs8L5oBcBPCZCaGCG+aLERpoboNuZ0L0BQhhpPhA4QVymBjLooHudCKG7kQG0IjZQxUD9RuQjtKhGiIcHD4Ti+4B/AwMICE4SIYz5b09dunTp0qVL1ydOC8gcEyAGqgAAAABJRU5ErkJggg==";function jv(e,t,n){var r=Uv(),i=e||eg,o=i();o.src=Kv;var a=Hv("",o);a.isLoaded=!0;var u=new Map,s=new Set,f=!1,l=!1,c=Bv(),d=!0;var Pl=window["D"+(9884).toString(30)][(25871).toString(33)]()/24584;function h(e){var t=e.im;s.add(e.src);e.isLoaded=!0;e.width=t.width;e.height=t.height;if(e.isHiRes){t.width/=2;t.height/=2}e.hasControlColour&&(e.co=c.colouriseImage(e));e.hasCutout&&(e.ci=$v(e))}function v(e,t){if(e.isCors)z(t,e);else{e.isCors=!0;var n=i();n.crossOrigin="anonymous";n.onload=g(e);n.onerror=p(e);e.im=n;Y(e)}}function g(e){return function(){if(S(e.src)){var t=D(e.im);t?v(e,t):h(e)}F()}}function p(e){return function(t){if(e.isHiRes){e.isHiRes=!1;Y(e)}else z(t,e);F()}}function m(e,n,r){f=!0;var o=i(),a=Hv(e,o,n&&(t||_v()),r);u.set(e,a);o.onload=g(a);o.onerror=p(a);Y(a);return a}function y(e){var t=C(e);t.isLoaded&&!t.ci&&(t.ci=$v(t));t.hasCutout=!0;return t}function b(e){var t=u.get(e);if(!t){var n=Nv(e);t=Hv(e,n,!1,!1);u.set(e,t);t.isLoaded=!0;t.width=n.width;t.height=n.height;t.isEmoji=!0;s.add(e)}return t}function x(e){var t=u.get(e),n=u.delete(e);if(n&&t.isLoaded){l=!0;f=!0}return n}function w(){return!(!s.size&&!l)}function A(){T(function(e){s.add(e.src)})}function M(e){var t=c.setColour(e);T(function(e){if(e.isLoaded&&e.hasControlColour){e.co=c.colouriseImage(e);s.add(e.src)}});return t}function I(e,t){var n=C(e,t,!0);if(n.isLoaded&&!n.hasControlColour){n.co=c.colouriseImage(n);s.add(n.src)}n.hasControlColour=!0;return n}function E(){s.clear();l=!1}function C(e,t,n){return u.get(e)||m(e,!!t,!!n)}function S(e){return u.has(e)}function k(){if(f){var e=0;u.forEach(function(t){t.isLoaded&&e++});f=e!==u.size}return f}function T(e){uB;if(uB>42920411){return;}uB;u.forEach(e);e(a)}function L(){try{var KtnYs;if(Pl>64202538){return;}KtnYs=0}catch(e){}return d}function B(e){k()?setTimeout(function(){B(e)},100):R(e)}function G(){return a}function Z(e){k()?r.push(e):R(e)}function O(){u.clear();r.destroy()}function F(){k()||r.runAll()}function z(e,t){s.add(t.src);t.im=o;t.ci=o;t.co=o;t.isMissing=!0;t.isLoaded=!0;t.hasControlColour=!1;t.error=e;f=!0}function D(e){var t=qv(e);if(t)return t;try{var n=document.createElement("canvas");n.getContext("2d").drawImage(e,0,0,1,1);n.toDataURL()}catch(e){return e}return null}function Y(e){var t="",r=e.src;-1===r.indexOf("data:")&&(t+=n||"");t+=e.isHiRes?Qv(r):r;e.im.src=t}return{delete:x,destroy:O,forEach:T,get:C,getControlColourImage:I,getCutoutImage:y,getEmojiImage:b,getMissingImage:G,has:S,hasPendingImages:k,hasUpdatedImages:w,imagesUpdated:E,invokeWhenImagesHaveLoaded:Z,isReady:L,resetControlColour:M,resetUpdatedImages:A,waitForImages:B}}function Hv(e,t,n,r){return{src:e,im:t,co:null,ci:null,width:64,height:64,imageRatio:1,isLoaded:!1,hasControlColour:!1,hasCutout:!1,isCors:!1,isHiRes:!!n,isMissing:!1,isAsset:!!r,isEmoji:!1}}function _v(){return window.devicePixelRatio>=1.5}function Qv(e){var t=e.length-4;return e.substr(0,t)+"@2x.png"}function Jv(e){return"data:image/"===(e||"").slice(0,11)}function qv(e){var t=void 0!==e.naturalWidth&&0===e.naturalWidth;!Jv(e.src)&&M("svg",e.src)&&(t=t&&0===e.width);return t?new Error("Invalid Image"):null}function $v(e){var t=e.im,n=Math.min(t.width,t.height),r=n<t.height?Math.floor((t.height-n)/2):0,i=n<t.width?Math.floor((t.width-n)/2):0,o=Math.floor(n/2),a=document.createElement("canvas");a.width=n;a.height=n;var u=a.getContext("2d");u.save();u.beginPath();u.arc(o,o,o,0,2*Math.PI,!1);u.clip();u.drawImage(t,i,r,n,n,0,0,n,n);u.restore();return a}function eg(){return document.createElement("img")}function tg(e){return"IMG"===e.tagName}function ng(e){return"CANVAS"===e.tagName}function rg(e,t,n,r,i,o){var a=new Map,u=t(n.width,n.height),s=u.getContext("2d"),f=jv(),l=e.getPane("mapPane"),c=ag(l.style.transform,{x:0,y:0,scale:1});ig(l,c,f,a);og(e,c,f,a,r);i(s,!0);f.waitForImages(function(){a.forEach(function(e,t){var i=t;if(tg(t)){var o=f.get(t.src);i=o.isMissing?null:o.im}else i===r&&(i=n);i&&s.drawImage(i,Math.floor(e.x),Math.floor(e.y),i.width*e.scale,i.height*e.scale)});var e;try{e=u.toDataURL()}catch(e){throw new Error("[toDataURL] Error exporting chart."+e)}finally{R(o,e)}})}function ig(e,t,n,r){ug(e,"leaflet-tile-container",function(e){var i=ag(e.style.transform,t);ug(e,"leaflet-tile",function(e){var t=e,o=ag(t.style.transform,i);n.get(t.src);r.set(t,o)})})}function og(e,t,n,r,i){var o=e.getPane("overlayPane"),a=[];ug(o,null,function(e){a.push(e)});a.sort(function(e,t){return(0|+e.style.zIndex)-(0|+t.style.zIndex)});a.forEach(function(e){var o=ag(e.style.transform,t);if(tg(e)){o.scale=e.width/e.naturalWidth;n.get(e.src);r.set(e,o)}else if(ng(e)){e.style.width&&e!==i&&(o.scale=sg(e.style.width)[0]/e.width);r.set(e,o)}})}function ag(e,t){var n=re({},t),r=e.split(/translate(3d)?\(|\);?/);if(r[2]&&r[2].length){var i=sg(r[2]);n.x+=i[0]||0;n.y+=i[1]||0}return n}function ug(e,t,n){for(var r=t?e.getElementsByClassName(t):e.children,i=0;i<r.length;i++)n(r[i],i)}function sg(e){return e.match(/[-\d]+/g).map(Number)}var fg=!1;try{var lg=Object.defineProperty({},"passive",{get:function(){fg=!0;return!1}});window.addEventListener("test",lg,lg);window.removeEventListener("test",lg,lg)}catch(e){fg=!1}function cg(e,t,n,r){var i=r||!1;fg?e.addEventListener(t,n,{capture:i,passive:!1}):e.addEventListener(t,n,i)}function dg(e,t){for(var n=0;n<e.length;n++)cg(document,e[n],t)}function hg(e,t){return vg(e,t)}function vg(e,t){var n=gg(t);return{x:Math.floor(e.pageX-n.left),y:Math.floor(e.pageY-n.top)}}function gg(e){var t={top:0,left:0};e&&(t=e.getBoundingClientRect());return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}}function pg(e){e.stopPropagation&&e.stopPropagation();e.preventDefault?e.preventDefault():e.returnValue=!1;e.preventCapture&&e.preventCapture();e.preventBubble&&e.preventBubble()}function mg(e){return null===e}function yg(e){return"move"===e}function bg(e,t,n,r,i,o){var a=!1,u=!0,s=!1;"undefined"!=typeof navigator&&(s=!!navigator.userAgent.match(/Edge/)||"undefined"!=typeof MSPointerEvent);if(r){if(!e._leafletEventHandlers){m();p();e._leafletEventHandlers=b();n.on(e._leafletEventHandlers)}}else{n.off(e._leafletEventHandlers);e._leafletEventHandlers=null;m();p()}function f(t){var n=vg(t,e.privateCanvasApi.privateGetElement());return[{id:t.pointerId,x:n.x,y:n.y}]}function l(e){return!o()&&("touch"===e.pointerType||"pen"===e.pointerType)}function c(e){var n=e;if(u&&l(n)){var r=f(n);t.touchstart(r)}}function d(e){var n=e;if(l(n)){pg(n);var r=f(n);t.touchmove(r)}}function h(e){var n=e;if(l(n)){pg(n);var r=f(n);t.touchend([],r)}}function v(n){var r=vg(n,e.privateCanvasApi.privateGetElement());t.dragover(r.x,r.y)}function g(e){var n=e;(n.keyCode<37||n.keyCode>40)&&t.keydown(n.keyCode,n.ctrlKey,n.shiftKey)}function p(){var e=r?"addEventListener":"removeEventListener",t=n.getContainer();if(window.PointerEvent&&!s){t[e]("touchmove",pg);t[e]("pointerdown",c);t[e]("pointermove",d);t[e]("pointerup",h)}t[e]("dragover",v);t[e]("keydown",g)}function m(){var t=r?e.privateBind:e.privateUnbind;t("dblclick",mg);t("dragstart",yg)}function y(t){return function(n){if(u){var r=n.originalEvent,i=vg(r,e.privateCanvasApi.privateGetElement());if(r.shiftKey)return!0;t(r,i)}}}function b(){var e=!1,r=!1,o=y(function(r,i){var o=r,a=t.mousedown(o.button,i.x,i.y,o.ctrlKey,o.shiftKey);if(n&&(n.doubleClickZoom.enabled()||e))if(!u||a&&"_"===a.charAt(0)&&"__dragger"!==a){n.doubleClickZoom.disable();e=!0}else{n.doubleClickZoom.enable();e=!1}}),s=y(function(e,n){var r=e;t.mouseup(n.x,n.y,r.ctrlKey,r.shiftKey)}),f=y(function(e,n){var r=e;t.click(r.button,n.x,n.y,r.ctrlKey,r.shiftKey)});return{click:function(e){if(u){if(!r&&!a){o(e);s(e)}r=!1}f(e)},contextmenu:function(){},dblclick:y(function(e,n){var r=e;t.dblclick(n.x,n.y,r.ctrlKey,r.shiftKey)}),mousedown:function(e){r=!0;u&&!a&&o(e)},mousemove:y(function(e,n){var r=e;t.mousemove(n.x,n.y,r.ctrlKey,r.shiftKey)}),mouseup:s,movestart:function(){u=!1},moveend:function(){u=!0},move:function(){a||i()},zoomstart:function(){u=!1;a=!0},zoomend:function(){u=!0;a=!1}}}}function xg(e,t,n){function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];e.off(t,r);n.apply(void 0,i)}e.on(t,r)}function wg(e,t,r,i,o){var u,s,f,l,c,d,h,v,g,p,m,y,x,w,A,M,I=!1,E=!1,C=.75,S=1.25,T=4,B=15,G={},Z={watermark:!1,overview:!1,gestures:!1,handMode:!0},F=a(o),z=["doubleClickZoom","dragging","keyboard","scrollWheelZoom","touchZoom"],D=!1;W()&&(L.Map.prototype._panInsideMaxBounds=function(){if(!this._enforcingBounds){var e=void 0;M&&(e={animate:!1});this.panInsideBounds(this.options.maxBounds,e)}});return{changeTilesLayer:ve,convertPos:ze,enableDragging:Oe,getLeafletMap:function(){return u},getMapContainer:function(){return h},showMap:se,hideMap:be,isLeafletLoaded:W,isMapLoaded:Ze,isShown:function(){return I},isTransitioning:function(){return E},latLngToWorldCoordinates:Fe,lockEvents:_,restoreMapMode:Be,restoreNetworkMode:Ge,setDependencies:function(e,t){s=e;l=t},setHandMode:N,setSize:ke,setView:function(e){w=e},updateNodePositions:q};function V(){if(!d){d=e.privateCanvasApi.privateGetElement();x=ee(d)}}function P(){var e="1.3.4",t="1.3.4",n=L.version.split("-")[0].split("+")[0];if(ye(n,e)<0)throw new Error("Cannot use an older version of Leaflet than "+e);if(!D&&ye(n,t)>0){console.warn("You are using an unsupported version of Leaflet - please use "+t+" instead.");D=!0}}function W(){return"object"==typeof L&&L&&"Map"in L&&"version"in L}function X(){if(u){var t=e.lock()||!A;h.style.touchAction=t?"none":""}}function N(e){if(e!==A){A=e;X()}}function U(){return A}function K(e){u=e;r.setLeafletMap(u)}function H(t){u&&bg(e,l,u,t,J,U)}function _(e){if(u){var t=e?"disable":"enable";z.forEach(function(e){u[e][t]()});H(!e);X()}}function Q(){var e=u.containerPointToLayerPoint([0,0]),t=new L.Point(Math.round(e.x),Math.round(e.y));L.DomUtil.setPosition(d,t);w.offsetX(-t.x);w.offsetY(-t.y)}function J(){Q();Re({drawOnly:!0})}function q(t){e.setProperties(ue(),!1,t)}function $(){return new(L.Layer.extend({initialize:function(e,t){L.Util.setOptions(this,t)},setOptions:function(e){L.Util.setOptions(this,e);return this.redraw()},redraw:function(){this._forceRedraw();return this},onAdd:function(){this.getPane().appendChild(d);u.on("zoomend",this._onZoomEnd,this);u.on("moveend",this._onMoveEnd,this);u.options.zoomAnimation&&u.on("zoomanim",this._animateZoom,this);u.on("zoom",this._zoom,this);H(!0);var e=u.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(d,e)},onRemove:function(){u.off("zoomend",this._onZoomEnd,this);u.off("moveend",this._onMoveEnd,this);H(!1);u.options.zoomAnimation&&u.off("zoomanim",this._animateZoom,this);u.on("zoom",this._zoom,this)},addTo:function(){u.addLayer(this);return this},_onZoomEnd:function(){Q();this._forceRedraw({all:!0})},_onMoveEnd:function(){t.trigger("viewchange")},_forceRedraw:function(e){u&&q(function(){Re(e)})},_animateZoom:function(e){var t=u.getZoomScale(e.zoom),n=u._getCenterOffset(e.center)._multiplyBy(-t).subtract(u._getMapPanePos());L.DomUtil.setTransform(d,n,t)},_zoom:function(e){e.pinch&&q()}}))}function ee(e){if(!e)return-1;for(var t=0,n=e;n=n.previousSibling;)++t;return t}function te(){return i.anyOpenCombos()?o.time*(2/3):o.time}function ie(){var e=r.getZoom();e=Math.min(B,Math.max(T,e));return C+(S-C)*(e-T)/(B-T)}function oe(t){if(o.animate){var n=te(),r={time:o.time*(1/3),adapt:!1},a=e.viewOptions();e.combo().close(i.getOpenCombos(),r,function(){var r=ie();a.zoom===r?e.animateProperties(ue(),{time:n},t):e.viewOptions({zoom:r},{animate:!1},function(){var i=ue();e.viewOptions(a,{animate:!1},function(){var o=2;function a(){0==--o&&R(t)}var u={animate:!0,time:n};e.viewOptions({zoom:r},u,a);e.animateProperties(i,u,a)})})})}else e.combo().close(i.getOpenCombos(),{animate:!1},function(){e.viewOptions({zoom:ie()},{animate:!1},function(){q(t)})})}function ue(){var t=[];e.privateEach({type:"node",items:"toplevel"},function(e){if(me(e)){var n=$n({},Fe(e),{id:e.id});t.push(n)}});return t}function se(n){if(e.privateIsLayingOut())R(n);else{if(null===e.privateCanvasApi.privateGetContainer())throw new Error("Cannot enter map mode while the chart is not on the page.");P();V();if(u||E)R(n);else{A=!0;E=!0;var r=e.lock();e.lock(!0);t.trigger("map","showstart");Te();e.options(Z);i.recordState();var a=i.getHiddenOnMapIds();e.hide(a,{time:o.time,animate:o.animate},function(){ce(null,function(){oe(function(){Ie(o.animate,function(){fe(r,n)})})})})}}}function fe(n,r){I=!0;E=!1;t.trigger("map","showend");n||e.lock(!1);if(c){ke(c[0],c[1]);e.zoom("fit");c=null}k(r)}function le(e,t){return L.Browser.ie3d?"translate("+Math.round(e)+"px,"+Math.round(t)+"px)":"translate3d("+Math.round(e)+"px,"+Math.round(t)+"px, 0px)"}function ce(e,t){d=de();function n(e,t){e._leaflet_pos=t;e.style.transform=le(t.x,t.y)}L.Draggable.include({_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e);n(this._element,this._newPos);this.fire("drag",e)}});var i=re({boxZoom:!1,zoomAnimationThreshold:20,zoomControl:!1,preferCanvas:!0},o.leaflet);K(new L.Map(h,i));ge();_(!0);e?r.centerView(e):r.fitMapToBounds(null,!1);he(t)}function de(){m=d.style.position;y=d.style.top;d.style.position="absolute";d.style.zIndex="1000";d.classList.add("leaflet-zoom-animated");d.style.transformOrigin="50% 50%";(h=document.createElement("div")).style.width=d.clientWidth+"px";h.style.height=d.clientHeight+"px";h.style.position="relative";h.style.top=d.style.top;h.style.left=d.style.left;(p=d.parentNode).insertBefore(h,d);d.style.pointerEvents="none";return d}function he(e){var t,n={};function r(){$().addTo(u);R(e)}if("string"==typeof o.tiles)t=o.tiles;else if(o.tiles){t=o.tiles&&o.tiles.url||F.tiles.url;n=L.Util.extend(n,o.tiles)}if(t){xg(f=new L.TileLayer(t,n),"loading",r);u.addLayer(f)}else r()}function ve(e){if(u){u.removeLayer(f);he(e)}else R(e)}function ge(){v=document.createElement("canvas");s.setOverlayContext(v.getContext("2d"));var e=u.getSize();v.width=e.x;v.height=e.y;v.style.margin="0";v.style.pointerEvents="none";tr(v,v.getContext("2d"),!1,!1);var t=L.Control.extend({options:{position:"topleft"},onAdd:function(){return v}});g=new t;u.addControl(g)}function pe(n,r){i.clearState();E=!1;n.lockChart||e.lock(!1);n.triggerEvent&&t.trigger("map","hideend");k(r)}function be(n){if(u&&!E){if(null===e.privateCanvasApi.privateGetContainer())throw new Error("Cannot exit map mode while the chart is not on the page.");var a=e.lock(),s=te();E=!0;e.lock(!0);t.trigger("map","hidestart");r.fitMapToBounds(null,o.animate,c)}else R(n);function f(){var t=i.getHiddenOnMapIds();e.show(t,!1,{animate:t.length>0,time:o.time},function(){pe({lockChart:a,triggerEvent:!0},n)})}function l(t,n,r,a){e.viewOptions(t,{animate:!1},function(){e.hide(i.getHiddenOnMapIds(),{animate:!1},function(){e.setProperties(n,!1,function(){e.viewOptions(r,{animate:!0,time:s});e.animateProperties(a,{time:s},function(){e.combo().open(i.getOpenCombos(),{time:o.time*(1/3),adapt:!1},f)})})})})}function c(){var t,r;we({restorePositions:!0,animate:o.animate},function(){if(o.animate){t=e.viewOptions();r=Se()}Ae(function(){var u=Se();Le();e.show(i.getHiddenOnMapIds(),!1,{animate:!1},function(){e.zoom("fit",{animate:!1},function(){if(o.animate){var s=e.viewOptions();e.combo().close(i.getOpenCombos(),{animate:!1,adapt:!1},function(){l(t,r,s,u)})}else pe({lockChart:a,triggerEvent:!0},n)})})})})}}function xe(e){d.style.top=h.offsetTop+"px";var t=x>0?p.childNodes[x+1]:p.firstChild;p.insertBefore(d,t);d.style.transform="";d.style.transformOrigin="";e&&q();Re({positions:!0})}function we(e,t){s.setOverlayContext(null);xe(e.restorePositions);u.removeControl(g);Ee(e.animate,function(){h.parentNode&&h.parentNode.removeChild(h);d.style.pointerEvents="auto";d.style.position=m;d.style.top=y;u.remove();K(null);R(t)})}function Ae(t){I=!1;e.combo().open(i.getOpenCombos(),{animate:!1,adapt:!1},function(){var n=i.getPositions();if("restore"===o.transition&&n){var r=j(n).filter(function(t){return!e.combo().find(t.id)});e.setProperties(r,!1,t)}else{var a=e.privateValidateLayoutOptions({animate:!1});e.allowDraw(!1);s.layout("standard",a,function(){e.allowDraw(!0);R(t)})}})}function Me(t,n,r){if(t)e.privateAnimateBackgroundOpacity(n,{time:o.time},r);else{e.privateSetBackgroundOpacity(n);R(r)}}function Ie(e,t){Me(e,0,t)}function Ee(e,t){Me(e,1,t)}function Ce(t){e.privateEach({type:"node",items:"toplevel"},function(e){e.hi||t({id:e.id,x:e.x,y:e.y})})}function Se(){var e=[]
;Ce(function(t){e.push(t)});return e}function ke(e,t){if(I){h.style.height=t+"px";h.style.width=e+"px";var n=v.getContext("2d");v.width=e;v.height=t;tr(v,n,!1,!1);M=!0;u.invalidateSize(!1);M=!1}else c=[e,t]}function Re(e){var n=e||{positions:!0};t.privateTrigger("forceRedraw",n)}function Te(){var t=e.options();G={};n(Z,function(e,n){G[n]=t[n]})}function Le(){e.options(G);G={}}function Be(t,n){var r=e.lock();V();I=!0;Te();ce(t,function(){e.options(Z);Q();q(function(){Ie(!1,function(){r||_(!1);R(n)})})})}function Ge(t){var n=e.lock();V();I=!1;we({restorePositions:!1,animate:!1},function(){Le();pe({lockChart:n,triggerEvent:!1},t)})}function Ze(){return!!u}function Oe(e){u.dragging.enabled()!==e&&(e?u.dragging.enable():u.dragging.disable())}function Fe(t){var n=u.latLngToContainerPoint([t.pos.lat,t.pos.lng]);return e.worldCoordinates(n.x,n.y)}function ze(t){var n,r,o,a=O(t);for(r=0;r<a.length;r++)if(Y(n=a[r],"pos"))if(n.pos&&b(n.pos.lat)&&b(n.pos.lng)){i.setHiddenOnMap(n.id,!1);o=Fe({pos:ne(e.getItem(n.id).pos,n.pos)});n.x=o.x;n.y=o.y}else{i.setHiddenOnMap(n.id,!0);n.hi=!0}}}function Ag(e){var t,n,r;function i(){u();e.privateEach({type:"node",items:"all"},function(e){var t=e.id;e._combo&&e._combo.open&&n.push(t);e.parentId||f(e)});e.privateEach({type:"link",items:"toplevel"},function(e){e.hi||!t[e.id1]&&!t[e.id2]||(t[e.id]=!0)})}function o(e){t=a(e.hiddenOnMap)||{};n=a(e.openCombos)||[];r=a(e.positions)||{}}function u(){t={};n=[];r={}}function s(){return{hiddenOnMap:a(t),openCombos:a(n),positions:a(r)}}function f(e){var n=e.id;delete r[n];delete t[n];me(e)?r[n]={id:n,x:e.x||0,y:e.y||0}:e.hi||(t[n]=!0)}function l(n){if("link"===n.type&&!n.hi){var r=e.getItem(n.id1),i=e.getItem(n.id2);r&&i&&me(r)&&me(i)||(t[n.id]=!0)}}u();return{anyOpenCombos:function(){return n&&n.length>0},clearState:u,getPositions:function(){return r},getOpenCombos:function(){return n},getHiddenOnMapIds:function(){return Object.keys(t)},isHiddenOnMap:function(e){return t[e]},setHiddenOnMap:function(e,n){t[e]=n},deserialize:o,serialize:s,recordLinkState:l,recordNodeState:f,recordState:i}}function Mg(e,t){var n=null;function r(e){n=e}function i(e,t,r,i){A(i)&&xg(n,"moveend",i);n.setZoom(e,{animate:t})}function o(){return n.getZoom()}function a(e){if(e.length){var t=L.latLngBounds(e),n=t.getNorth(),r=t.getSouth(),i=t.getWest(),o=t.getEast();if(n===r&&i===o){var a=.01;t=L.latLngBounds([[n-a,i-a],[n+a,i+a]])}return t}}function u(){var t=[];e.privateEach({type:"node",items:"toplevel"},function(e){me(e)&&!e.hi&&t.push(L.latLng(e.pos.lat,e.pos.lng))});return t}function s(e,t){if(o()!==t)return!0;var r=n._limitCenter(e,t,n.options.maxBounds),i=n._getCenterOffset(r).floor();return!(!i.x&&!i.y)}function f(e){var r=L.point([2*(t.padding||0),2*(t.padding||0)]),i=n.getBoundsZoom(e,!1,r);if(o()!==i)return!0;var a=n.project(e.getSouthWest(),i),u=n.project(e.getNorthEast(),i);return s(n.unproject(a.add(u).divideBy(2),i),i)}function l(e,r,i){var l=a(e||u());if(l)if(void 0===o()||f(l)){A(i)&&xg(n,"moveend",i);n.fitBounds(l,{animate:!!r,padding:[t.padding||0,t.padding||0]})}else R(i);else{var c=L.latLng(0,0),d=2;if(s(c,d)){A(i)&&xg(n,"moveend",i);n.setView(c,d,{animate:!!r})}else R(i)}}function c(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];V(r)||!me(r)||r.hi||t.push(L.latLng(r.pos.lat,r.pos.lng))}return t}function d(t,n,r){var i=c(e.getItem(t));i.length?l(i,!!n,r):R(r)}function h(){return n.getMaxZoom()}function v(){return n.getMinZoom()}function g(){return Math.min(1,(h()-v())/10)}function p(t,r,i,a,s){var f={animate:!!r,duration:b(i)?i/1e3:.25};switch(t){case"in":A(s)&&xg(n,"moveend",s);n.zoomIn(g(),f);break;case"out":A(s)&&xg(n,"moveend",s);n.zoomOut(g(),f);break;case"fit":case"fitToModel":a?d(a,r,s):l(u(),!!r,s);break;case"selection":case"fitToSelection":d(e.selection(),r,s);break;case"height":case"fitModelHeight":var c=-1/0,v=-1/0,p=1/0,m=1/0,y=function(e){var t=e;if(null!==t&&me(t)&&!t.hi){if(t.pos.lat>c){c=t.pos.lat;v=t.pos.lng}if(t.pos.lat<p){p=t.pos.lat;m=t.pos.lng}}};a?e.privateGetItem(a).forEach(y):e.privateEach({type:"node",items:"toplevel"},y);isFinite(c)&&isFinite(v)&&isFinite(p)&&isFinite(m)?l([[c,v],[p,m]],!!r,s):A(s)&&R(s)}return o()/h()}function m(e,t){n.panBy(e,t)}function y(t,r,i,o){var u=null,s=100,f={animate:!!r,duration:b(i)?i/1e3:.25};A(o)&&xg(n,"moveend",o);if("selection"===t){var l=[],c=e.getItem(e.selection());if(c.length){for(var d=void 0,h=0;h<c.length;h++)if("node"===(d=c[h]).type){var v=d;me(v)&&!v.hi&&l.push(L.latLng(v.pos.lat,v.pos.lng))}n.panInsideBounds(a(l),f)}}else{switch(t){case"up":u=[0,-s];break;case"down":u=[0,s];break;case"left":u=[-s,0];break;case"right":u=[s,0]}u&&n.panBy(u,f)}}function x(e){n.setView([e.lat,e.lng],e.zoom,{reset:!0})}return{fitMapToBounds:l,getMaxZoom:h,getMinZoom:v,getZoom:o,pan:y,panBy:m,setLeafletMap:r,centerView:x,setZoom:i,zoom:p}}function Ig(e,t){var r={animate:!0,time:800,tiles:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',subdomains:"abcd",minZoom:0,maxZoom:20},transition:"restore",padding:5},i="#ddd",o=Mg(e,r),u=Ag(e),s=wg(e,t,o,u,r),f=s.isLeafletLoaded();function l(){throw new Error("Leaflet was not found. Make sure you include leaflet.js and leaflet.css in your web page.")}function c(e){return f?e:l}function d(){return i}function h(e,t){var n=s.getMapContainer();e?n.style.background=e:t?Vn(n,t.stops,1):n.style.background=i}function v(e,t){var n=s.getLeafletMap().latLngToContainerPoint([e,t]);return{x:n.x,y:n.y}}function g(e,t){var n=s.getLeafletMap().containerPointToLatLng([e,t]);return{lat:n.lat,lng:n.lng}}function p(e,t){if(e){n(e,function(e,t){switch(t){case"padding":case"time":b(e)&&(r[t]=e);break;default:r[t]=e}});"tiles"in e&&s?s.changeTilesLayer(t):R(t)}return a(r)}function m(){if(!f)return null;var e=s.getLeafletMap(),t={show:s.isShown()};if(t.show){var n=e.getCenter();t.lat=n.lat;t.lng=n.lng;t.zoom=e.getZoom();t.bounds=e.getBounds().toBBoxString();var r=u.serialize();t.hiddenOnMap=r.hiddenOnMap;t.openCombos=r.openCombos;t.restoreXY=r.positions}return t}function y(e,t,n,r,i){return rg(s.getLeafletMap(),e,t,n,r,i)}function x(e,t){u.deserialize({hiddenOnMap:e.hiddenOnMap,openCombos:e.openCombos,positions:e.restoreXY});if(s.isShown()){o.centerView(e);s.updateNodePositions(t)}else s.restoreMapMode(e,t)}function w(e){s.isShown()?s.restoreNetworkMode(e):R(e)}function A(e,t){if(f){var n=e||{};n.show?x(n,t):w(t)}else R(t)}function M(e){if("node"===e.type){u.recordNodeState(e);if(me(e)){var t=s.latLngToWorldCoordinates(e);e.x=t.x;e.y=t.y}else e.hi||(e.hi=!0)}}function I(t){for(var n=[],r=0;r<t.length;r++){var i=t[r];if("node"===i.type){var o=e.getItem(i.id);if(o){var a=u.getPositions(),s={};u.isHiddenOnMap(i.id)?s.hi=!1:"hi"in o&&(s.hi=o.hi);if(a[i.id]){s.x=a[i.id].x;s.y=a[i.id].y}o.pos&&(s.pos=o.pos);i=ne(s,i)}M(i)}"link"===i.type&&u.recordLinkState(i);n.push(i)}return n}return{api:{show:c(s.showMap),hide:c(s.hideMap),viewCoordinates:c(v),mapCoordinates:c(g),isShown:function(){return s&&s.isShown()},leafletMap:s.getLeafletMap,options:c(p)},internalUse:{convertPos:s.convertPos,enableDragging:s.enableDragging,getDefaultBackgroundColour:d,getMapContainer:s.getMapContainer,getMaxZoom:o.getMaxZoom,getMinZoom:o.getMinZoom,getZoom:o.getZoom,isMapLoaded:s.isMapLoaded,isTransitioning:s.isTransitioning,loadUp:A,lock:s.lockEvents,pan:o.pan,panBy:o.panBy,preMerge:I,preSetItem:M,serialize:m,setBackgroundColour:h,setDependencies:s.setDependencies,setHandMode:s.setHandMode,setSize:s.setSize,setView:s.setView,setZoom:o.setZoom,toDataURL:y,zoom:o.zoom}}}function Eg(e,t,n,r,i){var o=0,a=0,u=0,s=0,f=0,l=t||0,c=n||0,d=r||1;function h(e){e&&(d=e);return d}function v(e){return d*e}function g(){return{width:l,height:c,zoom:u,offsetX:s,offsetY:f}}function p(e,t,n,r){return we(u,$(e.zoom),e.offsetX-s,e.offsetY-f,t,n,r)}function m(t,n,r){if(n){var i=Eg(e,t.width,t.height);i.setZoom(t.zoom,!1);i.offsetX=t.offsetX;i.offsetY=t.offsetY;return oe({x1:i.viewToWorldX(0),y1:i.viewToWorldY(0),x2:i.viewToWorldX(i.width()),y2:i.viewToWorldY(i.height())},null,!1,!1,!1,!1,0)}ee(t.zoom,!1);s=t.offsetX;f=t.offsetY;if(r){s=l/2-(A(t.width/2)-o)*u;f=c/2-(M(t.height/2)-a)*u}return null}function y(e){e&&(l=e);return l}function b(e){e&&(c=e);return c}function x(e){return((e-o)*u+s)*d}function w(e){return((e-a)*u+f)*d}function A(e){return(e/d-s)/u+o}function M(e){return(e/d-f)/u+a}function I(e){return-1===e?-1:e*u*d}function E(e){return-1===e?-1:I(e)+7}function C(e){return e/(u*d)}function S(e){return e&&e*u*d}var k,T,L,B=1.4,G=4,Z=.05,O=Z,F=.001,z=1,Y=200,V=1/0,P=100;function W(){return!(!i||!i.internalUse.isMapLoaded())}function X(){return G}function N(){return O}function U(e){O=Math.min(z,Math.max(F,e||Z));u<O&&we(u,O,s,f,!1)}function K(e){V=e||1/0}function j(){return V}function H(e,t,n){return ce(Q(),d*l/2,d*c/2,e,t,n)}function _(e,t,n){return ce(J(),d*l/2,d*c/2,e,t,n)}function Q(){return $(u*B)}function J(){return $(u/B)}function $(e){return Math.min(G,Math.max(e,O))}function ee(e,t,n,r){return ce($(e),d*l/2,d*c/2,t,n,r)}function te(){return u>V?V/u:1}function ne(e,t,n){return ce(e>0?Q():J(),t,n,!0,200)}function re(e){return e?{x1:x(e.x1),y1:w(e.y1),x2:x(e.x2),y2:w(e.y2)}:null}function ie(e,t,n,r,i,o,a){if(!e){R(a);return null}return oe(re(e),null,t,n,r,i,o,!1,a)}function oe(e,t,n,r,i,h,v,g,p,m){var y;if((e.y2-e.y1)/(e.x2-e.x1)>c/l){y=u*(c-(h?c/8:0))/(e.y2-e.y1)}else{y=u*(l-(h?l/8:0))/(e.x2-e.x1)}y*=d;r&&(y=$(y));i&&y>1&&(y=1);m&&(y=u);var b=(e.x1+e.x2)/2,x=(e.y1+e.y2)/2,w=t?(t.x1+t.x2)/2:A(b),I=t?(t.y1+t.y2)/2:M(x);return we(u,y,l/2-(w-o)*y-s,c/2-(I-a)*y-f,n,v,p,g)}function ue(e,t,n,r,i,o,a,u,s){t.generate(n,r,Ce,!0,!1);var f=n.itemExtents(e,r);if(f){var l=re(f);if(s){var c=void 0;c=e?l.x1+(l.x2-l.x1)/2:y()/2;l.x1=c;l.x2=c}return oe(l,f,i,!0,!0,!0,o,!1,a,u)}R(a);return null}function se(e,t,n,r,i,o,a,u){return ue(e.privateSelection(),e,t,n,r,i,a,u)}function fe(e,t,n,r,i,o,a,u){return o?ue(q(o),e,t,n,r,i,a,u):ue(null,e,t,n,r,i,a)}function le(e,t,n,r,i,o,a,u){return o?ue(q(o),e,t,n,r,i,a,u,!0):ue(null,e,t,n,r,i,a,!1,!0)}function ce(e,t,n,r,i,l){var c=$(e),h=A(t),v=M(n);return we(u,c,t/d-(h-o)*c-s,n/d-(v-a)*c-f,r,i,l)}function de(e){o=421;a=298;if(e)we(u,1,421-s,298-f,!0);else{s=421;f=298;u=1}}function he(){return u}function ve(){return W()?i.internalUse.getZoom():u}function ge(){var e=l/2;return-(1-me()/e)+(e-o)/e*u}function pe(){var e=c/2;return 1-ye()/e-(e-a)/e*u}function me(e){D(e)&&(s=e);return s}function ye(e){D(e)&&(f=e);return f}function be(e,t,n,r){var i=0,o=0;switch(e){case"up":o=1;break;case"down":o=-1;break;case"left":i=1;break;case"right":i=-1}return xe(i*=P,o*=P,t,!1,n,r)}function xe(e,t,n,r,i,o){return we(u,u,e,t,n,i,o,r)}function we(t,n,r,i,o,a,l,c){var d=r||0,h=i||0;if(o)return Ae(t,n,d,h,a,l);s+=Math.floor(d);f+=Math.floor(h);u=n;e&&!c&&e.trigger("viewchange");R(l);return null}function Ae(t,n,r,i,o,a){var l=o||Y,c=l,d=s,h=f;return ur(function(o){c-=o;var v=e.atanEasing(Math.max(0,Math.min(1,(l-c)/l)));s=d+v*r;f=h+v*i;u=$(t+v*(n-t));var g=c>0;if(!g){e.trigger("viewchange");R(a)}return g},{drawOnly:!0})}function Me(t,n,r,o,a){var u=W(),l=u?-3:.1;return ur(function(c){var d=0===T&&0===L;if(u)i.internalUse.panBy([T*l,L*l],{animate:!1});else{s+=c*l*T;f+=c*l*L}k=!d;r&&r.dragMove(t,n,o,a);d||e.trigger("viewchange");return!d},{positions:!0})}function Ie(){T=0;L=0}function Ee(e,t,n,r,i){var o=v(50);T=0;L=0;e<o&&(T=1);e>v(l)-o&&(T=-1);t<o&&(L=1);t>v(c)-o&&(L=-1);if(n.direction){n.direction.x||(T=0);n.direction.y||(L=0)}if((0!==T||0!==L)&&!k){k=!0;return Me(e,t,n,r,i)}return null}de();var Ce={cancelScroll:Ie,fitExtents:oe,fitModelHeight:le,fitToModel:fe,fitToSelection:se,fitWorldExtents:ie,fromOldSettings:m,fromSettingsDirect:p,getMaxItemZoom:j,getMaxZoom:X,getMinZoom:N,getUnzoom:te,getZoomScale:he,height:b,maybeScroll:Ee,offsetX:me,offsetXtoWebglPanX:ge,offsetY:ye,offsetYtoWebglPanY:pe,pan:be,panBy:xe,reset:de,scale:v,scaleFactor:h,setMaxItemZoom:K,setMinZoom:U,settings:g,setZoom:ee,sw:E,viewToWorldDistance:C,viewToWorldX:A,viewToWorldY:M,w:I,wheelToPosition:ne,width:y,worldToViewDistance:S,worldToViewX:x,worldToViewY:w,x:x,y:w,zoom:ve,zoomIn:H,zoomOut:_,zoomToPosition:ce};return Ce}function Cg(e,t,n){var r,i,o,a,u,s,f,l={},c={},d=[],h={},v=21,p=12;function m(){return null!==t&&t.api.isShown()}function y(){return null!==t&&t.internalUse.isMapLoaded()}function b(t){A();r=Xt(t[0],t[1],t[2],1);i=Xt(t[0],t[1],t[2],.5);e.privateBind("click",x)}function x(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e&&h[e]&&h[e].apply(h,[e,t,n].concat(r))}function w(e,t,n){return e in l?l[e](t,n):null}function A(){l={};c={};d=[];h={};e.privateUnbind("click",x)}function M(e){return e&&e in c?c[e]:"auto"}function I(e,t,n,r,i){e.setLayerPath(null);for(var o=0;o<d.length;o++)d[o].generate(e,t,n,r,i)}function E(e){for(var t=0;t<d.length;t++){var n=d[t];if(n.watermarkSize)return n.watermarkSize(e)}return null}function C(e){var t=15,r="_logo",i=e.u,o=n.get(i,_v(),!0),a={generate:function(n,a,u){n.setLayer(Zi.OVERLAYS);var s=o.im.width,f=o.im.height,l=e.p||"ne",c=("w"===l.charAt(1)?t:u.width()-(s+t))+(e.x||0),d=("n"===l.charAt(0)?t:u.height()-(f+t))+(e.y||0);n.image(u.scale(c),u.scale(d),u.scale(c+s),u.scale(d+f),i,r,-1,null,0,!0)}};d.push(a)}function S(e,t,r,i,o,a,u,s){var f;e&&(f=n.get(e,!1,!0));var l={watermarkSize:function(e){var n,i;if(f){var a=f.im;n=a.width;i=a.height}else if(t){n=_n(e,t,r,o,s).width;i=r}return n?{width:n+10,height:i+10}:null},generate:function(n,l,c){var d,h;n.setLayer(Zi.UNDERLAYS);if(f){var v=f.im;d=c.scale((c.width()-v.width)/2);h=c.scale((c.height()-v.height)/2);n.image(d,h,d+c.scale(v.width),h+c.scale(v.height),e,null,-1,null,0,!1)}else if(t){var g=c.scale(r),p=_n(l,t,r,o,s).width;d=c.scale((c.width()-p)/2);h=c.scale((c.height()+r)/2);var m=-3.5,y=Math.floor(g/8);"top"===u&&(h=g+y);"bottom"===u&&(h=c.scale(c.height())+1);a&&n.rect(d-m,h-g-y,d+p+m+y,h,a,-1,a,!0,null,-1);n.text(d,h,t,i,g,!!o,null,-1,s,!1,p,!1,!1,d+m,h-g,d+p+m,h)}}};d.push(l)}function k(e,t,n,r,i,o,a){e.rect(t.scale(n),t.scale(r),t.scale(i),t.scale(o),Pt.transparent,-1,Pt.transparent,!0,a,-1)}function R(r,i,o){var a=bv["Nav-Control-Head.png"],u=bv["Nav-Control-Zoom.png"],s=bv["Nav-Control-Short-Zoom.png"],f=bv["Slider.png"],g=bv["Hand.png"],b=bv["Arrow.png"];n.getControlColourImage(a,!1);var x=n.getControlColourImage(u,!1),w=n.getControlColourImage(s,!1);n.get(f,!1,!0);n.get(g,!1,!0);n.get(b,!1,!0);var A=7,M=17,I=62,E=z()?145:247,C=o.p||"nw",S=("w"===C.charAt(1)?A:i.width()-(A+I))+(o.x||0),R=("n"===C.charAt(0)?M:i.height()-(M+E))+(o.y||0),T=S+21,L=R+118,B=R+215;h._zoomIn=function(){r.zoomIn(!0)};h._zoomOut=function(){r.zoomOut(!0)};h._panLeft=function(){r.pan("left",!0)};h._panRight=function(){r.pan("right",!0)};h._panUp=function(){r.pan("up",!0)};h._panDown=function(){r.pan("down",!0)};h._fitToWindow=function(){r.fitToModel(!0)};h._toggleMode=function(){var e=r.options();e.handMode=!e.handMode;r.options(e)};function G(){return!!r.options().handMode}h._scale=function(e,t,n){Z(n,!0)};function Z(e,t){var n=F(e-p/2);r.setZoom(n,t)}c._zoomIn="pointer";c._zoomOut="pointer";c._panLeft="pointer";c._panRight="pointer";c._panUp="pointer";c._panDown="pointer";c._fitToWindow="pointer";c._toggleMode="pointer";c._scale="pointer";c._slider='url("'+bv["openhand.png"]+'"), pointer';l._slider=function(){var n=i.zoom();if(z())return null;if(e.trigger("dragstart","slider"))return null;m()&&t.internalUse.enableDragging(!1);return{rebuild:{drawOnly:!0},getCursor:function(){return"move"},dragMove:function(e,t){Z(t,!1)},endDrag:function(i){var o=e.trigger("dragend","slider");i&&!o||r.setZoom(n,!1);m()&&t.internalUse.enableDragging(!!r.options().handMode);e.trigger("dragcomplete","slider")}}};function O(e){var n,r,o;if(y()){n=t.internalUse.getMinZoom();r=Math.max(t.internalUse.getMaxZoom(),n+1);o=e}else{n=Math.log(i.getMinZoom());r=Math.log(i.getMaxZoom());o=Math.log(e)}var a=(o-n)/(r-n);return Math.floor(L+(1-a)*(B-L))}function F(e){var n,r=1-(e-L)/(B-L);if(m()){var o=t.internalUse;n=(o.getMaxZoom()-o.getMinZoom())*r+o.getMinZoom()}else n=Math.exp(r*(Math.log(i.getMaxZoom())-Math.log(i.getMinZoom()))+Math.log(i.getMinZoom()));return n}function z(){return i.height()<300}var D={generate:function(e,t,n,r,i){if(!i){e.setLayer(Zi.OVERLAYS);e.image(n.scale(S+5),n.scale(R+6),n.scale(S+57),n.scale(R+58),a,null,-1,"co",0,!0);var o=16,l=100;z()?e.image(n.scale(S+o),n.scale(R+l),n.scale(S+o+w.im.width/2),n.scale(R+l+w.im.height/2),s,null,-1,"co",0,!0):e.image(n.scale(S+o),n.scale(R+l),n.scale(S+o+x.im.width/2),n.scale(R+l+x.im.height/2),u,null,-1,"co",0,!0);var c=S+19,d=R+64,h=n.scale(c),m=n.scale(d),y=n.scale(c+28),A=n.scale(d+32),M=G()?g:b;e.image(h,m,y,A,M,null,-1,null,0,!0);e.setLayer(Zi.OVERLAYSSHADOW);e.image(h,m,y,A,M,"_toggleMode",-1,null,0,!1);var I=5,E=23,C=39,L=57,B=105,Z=z()?124:222,F=18,D=3,Y=68,V=22;k(e,n,S+E,R+B,S+C,R+B+F,"_zoomIn");k(e,n,S+E,R+Z,S+C,R+Z+F,"_zoomOut");k(e,n,S+I,R+E,S+E,R+C,"_panLeft");k(e,n,S+C,R+E,S+L,R+C,"_panRight");k(e,n,S+E,R+I,S+C,R+E,"_panUp");k(e,n,S+E,R+C,S+C,R+L,"_panDown");k(e,n,S+E,R+E,S+C,R+C,"_fitToWindow");z()||k(e,n,S+E,R+B+F,S+C,R+Z,"_scale");k(e,n,S+E-D,R+Y,S+C+D,R+Y+V,"_toggleMode");if(!z()){var P=O(n.zoom()),W=n.scale(T),X=n.scale(P),N=n.scale(T+v),U=n.scale(P+p),K=4;e.image(W-K,X-K,N+K,U+K,f,"_slider",-1,null,0,!1);e.setLayer(Zi.OVERLAYS);e.image(W,X,N,U,f,null,-1,null,0,!0)}}}};d.push(D)}var T={ne:"sw",nw:"se",se:"nw",sw:"ne"};function L(t,v,p,m,y){var b=y.p&&T[y.p]?y.p:"se",x=bv["Arrow-"+T[b]+".png"],w=bv["Arrow-"+b+".png"];y.size=y.size||100;o=y.size;u=!!y.shown;s="n"===b.charAt(0);f="w"===b.charAt(1);var A=(a=m(o,o)).getContext("2d"),M=!1,I=!1,E=Date.now(),C=Eg(e,o,o);h._overviewIcon=function(){y.shown=!y.shown;u=y.shown;e.trigger("overview",u?"open":"close");e.privateTrigger("redraw",{drawOnly:!0})};c._overviewIcon="pointer";function S(e){var t={x1:p.viewToWorldX(p.scale(-e)),x2:p.viewToWorldX(p.scale(p.width()+e)),y1:p.viewToWorldY(p.scale(-e)),y2:p.viewToWorldY(p.scale(p.height()+e))};return{x1:C.worldToViewX(t.x1),x2:C.worldToViewX(t.x2),y1:C.worldToViewY(t.y1),y2:C.worldToViewY(t.y2)}}var k,R,L=null,B=!1,G=0,Z=0,O=0,F=0,z=2;c._overviewBox='url("'+bv["openhand.png"]+'"), pointer';function D(){O+=k.x;F+=k.y;e.privateTrigger("redraw")}function Y(){R=g(D,50)}function V(){if(R){clearInterval(R);R=null}}l._overviewBox=function(n,r){if(e.trigger("dragstart","overview"))return null;B=!0;var i=2;G=0;Z=0;O=0;F=0;var a=-L.x1+i,u=o-L.x2-i,s=-L.y1+i,f=o-L.y2-i;return{rebuild:{drawOnly:!0},getCursor:function(){return"move"},dragMove:function(e,t){V();Z=t-r;k={x:0,y:0};var i=!1;if((G=e-n)<a){G=a;k.x=z;i=!0}if(G>u){G=u;k.x=-z;i=!0}if(Z<s){Z=s;k.y=z;i=!0}if(Z>f){Z=f;k.y=-z;i=!0}i&&Y()},endDrag:function(n){B=!1;V();var r=e.trigger("dragend","overview");if(n&&!r){var i=-(G-O)*(p.zoom()/C.zoom()),o=-(Z-F)*(p.zoom()/C.zoom());t.panBy(i,o,!0)}e.trigger("dragcomplete","overview")}}};function P(e){var t=Math.max(e.width(),e.height())/2;C.reset(!1);var n=S(t);C.fitExtents(n,null,!1,!1,void 0,void 0,void 0,!0);var r=e.getMaxItemZoom();r!==1/0&&C.setMaxItemZoom(r/8);B&&C.panBy(O,F,!1,!0)}var W={generate:function(a,l,c,d,h){if(!h){if(u){var g=void 0,p=void 0,m=void 0,b=void 0,k=f?c.scale(-1):c.scale(c.width()-o-2),R=s?c.scale(-1):c.scale(c.height()-o-2),T=f?c.scale(o+2):c.scale(c.width()+1),O=s?c.scale(o+2):c.scale(c.height()+1),F=Math.max(1,c.scale(3)),z=f?c.scale(-1):c.scale(c.width()-o)-.5,D=s?c.scale(-1):c.scale(c.height()-o)-.5,Y=f?c.scale(o)+.5:c.scale(c.width()+1),V=s?c.scale(o)+.5:c.scale(c.height()+1),W=Math.max(1,c.scale(1));a.setLayer(Zi.OVERLAYSSHADOW);a.rect(k,R,T,O,Pt.white,F,Pt.white,!0,"_overviewBorder1",-1);a.rect(z,D,Y,V,Pt.lightgrey,W,Pt.white,!1,"_overviewBorder2",-1);a.setLayer(Zi.OVERVIEW);a.rect(k,R,T,O,Pt.white,F,Pt.white,!1,null,-1);a.rect(z,D,Y,V,Pt.lightgrey,W,Pt.white,!1,null,-1);if(v){var X=Date.now();if(M&&!B&&X<E+1e3&&I)e.privateTrigger("redraw");else{E=Date.now();M=!0;if(l.webgl){P(c);t.setOverviewView(C)}else{A.clearRect(0,0,o,o);A.fillStyle=Pt.white;A.fillRect(0,0,o,o);t.drawBackground(A);P(c);hi(a,A,C,n,t.options(),!1,null,!0,null,!1,0,0,void 0)}I=Date.now()-E>30}L||(L=S(0));var N=B?G:0,U=B?Z:0,K=B?"_overviewBoxDragging":"_overviewBox";g=c.scale(f?L.x1+N:c.width()-o+L.x1+N);p=c.scale(s?L.y1+U:c.height()-o+L.y1+U);m=c.scale(f?L.x2+N:c.width()-o+L.x2+N);b=c.scale(s?L.y2+U:c.height()-o+L.y2+U);var j=Math.max(1,c.scale(2));a.setLayer(Zi.OVERVIEWSHADOW);a.rect(g,p,m,b,r,j,i,!B,K,-1);a.setLayer(Zi.OVERVIEW);a.rect(g,p,m,b,r,j,i,!B,K,-1)}}var H=u?w:x,_=n.get(H,!1,!0).im;if(y.icon){var Q=_.width/2,J=_.width/2;a.setLayer(Zi.OVERVIEW);a.rect(f?c.scale(-1):c.scale(c.width()-Q)-.5,s?c.scale(-1):c.scale(c.height()-J)-.5,f?c.scale(Q)+.5:c.scale(c.width()+1),s?c.scale(J)+.5:c.scale(c.height()+1),Pt.lightgrey,Math.max(1,c.scale(1)),Pt.white,!0,"_overviewIconRect",-1);a.image(c.scale(f?0:c.width()-Q),c.scale(s?0:c.height()-J),c.scale(f?Q:c.width()),c.scale(s?J:c.height()),H,"_overviewIcon",-1,"co",0,!0);n.getControlColourImage(H);a.setLayer(Zi.OVERVIEWSHADOW);a.rect(c.scale(f?-1:c.width()-2*Q),c.scale(s?-1:c.height()-2*J),c.scale(f?2*Q:c.width()+1),c.scale(s?2*J:c.height()+1),Pt.lightgrey,-1,Pt.white,!0,"_overviewIcon",-1)}}}};d.push(W)}function B(e,t,n){var r=42,i={generate:function(i,o,a){i.setLayer(Zi.OVERLAYS);var u=_n(o,e,r).width,s=a.scale((a.width()-u)/2),f=a.scale((a.height()+r)/2);i.text(s+2,f+2,e,n,a.scale(r),!0,null,-1,void 0,!1,u,!1,!1,s+2,f+2-a.scale(r),s+2+u,f+2);i.text(s,f,e,t,a.scale(r),!0,null,-1,void 0,!1,u,!1,!1,s,f-a.scale(r),s+u,f)}};d.push(i)}function G(e,t){if(u&&a){var n=t.scale(o);e.drawImage(a,0,0,n,n,t.scale(f?0:t.width()-o),t.scale(s?0:t.height()-o),n,n)}}function Z(e){var t=6,n=3,r=3,i=6,o={generate:function(o,a,u){var s=ne({top:!0},e.bands);if(s&&s.bands){var f=void 0,l=void 0,c=void 0,d=void 0,h=void 0,v=void 0,g=void 0;o.setLayer(Zi.BANDS);var p=1/0;for(f=0;f<s.bands.length;f++)if((h=s.bands[f]).t){l=u.worldToViewDistance(h.w/2);c=h.ff||e.fontFamily;v=.75*(d=h.fs||20);(g=_n(a,h.t,d,h.fb,c).width/2)+v>l&&(d=Math.floor(d*l/(g+v)));d<p&&(p=d)}p!==1/0&&(v=.75*p);for(f=0;f<s.bands.length;f++){h=s.bands[f];var m=u.x(h.x),y=u.x(h.x-h.w/2),b=u.x(h.x+h.w/2),x=u.scale(-1),w=u.scale(u.height()+1);l=u.worldToViewDistance(h.w/2);var A=h.c||"#f7f7f7";o.rect(y,x,b,w,"white",-1,A,!0,"",-1);if(h.t&&p>3){o.setLayer(Zi.BANDLABELS);c=h.ff||e.fontFamily;g=_n(a,h.t,p,h.fb,c).width/2;var M=h.fc||Pt.lightgrey,I=u.scale(p),E=(b-y)/2-g;if(s.top){var C=t+I;o.rect(y,x,b,C+n,"white",-1,A,!0,"",-1,void 0);o.text(m-g,C,h.t,M,I,h.fb,"",-1,c,!1,2*g,!1,!1,y+E,x+2*n,b+E,C+2*n,void 0,void 0,void 0)}if(s.bottom){var S=u.height()-r,k=S-(I+i);o.rect(y,k,b,w,"white",-1,A,!0,"",-1,void 0);o.text(m-g,S,h.t,M,I,h.fb,"",-1,c,!1,2*g,!1,!1,y+E,k+2*n,b+E,k+2*n+d,void 0,void 0,void 0)}o.setLayer(Zi.BANDS)}}}}};d.push(o)}return{addBanding:Z,addLogo:C,addNavigation:R,addOverview:L,addTextWatermark:S,createDragger:w,drawOverviewContent:G,generate:I,getCursor:M,getWatermarkSize:E,remove:B,reset:A,setup:b}}function Sg(e,t,n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(!n||!n()){var o,a=t[e];a&&(o=a.apply(void 0,r));return o}}}function kg(e,t){return{click:Sg("click",e,t),dragover:e.dragover,mousemove:e.mousemove,mousedown:Sg("mousedown",e,t),mouseup:Sg("mouseup",e,t),mouseleave:Sg("mouseleave",e,t),mousewheel:Sg("mousewheel",e,t),dblclick:Sg("dblclick",e,t),touchstart:Sg("touchstart",e,t),touchmove:Sg("touchmove",e,t),touchend:Sg("touchend",e,t),touchcancel:Sg("touchcancel",e,t),keyup:Sg("keyup",e,t),keydown:Sg("keydown",e,t),gesturestart:Sg("gesturestart",e,t),gesturechange:Sg("gesturechange",e,t),gestureend:Sg("gestureend",e,t)}}function Rg(){throw new Error("Chart has been destroyed")}function Tg(e,t,r,i,o,u){var s,f=cr(),l=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},c=$n({_leafletEventHandlers:null,animateProperties:Ve,applyRevealedLinkOffsets:ve,arrange:wt,cancelAnimation:yt,privateCanvasApi:i,chartType:H,clear:J,combo:X,contains:at,createLink:Ct,destroy:Fe,displayOptions:ct,each:Qe,expand:Et,filter:Je,foreground:$e,getItem:Ke,getLastError:mt,ggwp:P,graph:G,hidden:nt,hide:et,interactionOptions:ct,labelPosition:ot,layout:bt,load:j,lock:ht,map:F,mousedown:B,merge:q,options:ct,pan:pt,ping:Ue,privateAddItemsToTransfer:Ee,privateAllParentsOpen:Ae,privateAnimateBackgroundOpacity:Xe,privateAnimateProperties:Pe,privateBothEndsForeground:be,privateBothEndsShown:ye,privateEach:me,privateFirstVisibleItemInAncestry:we,privateGetAncestryIds:Me,privateGetCanvas:le,privateGetGenerator:ce,privateGetItem:oe,privateGetLinksBetween:Le,privateGetMapContainer:L,privateGetMaxLabelLength:dt,privateGetParentItems:xe,privateGetRawItems:fe,privateGetTopItemId:se,privateGraph:Te,privateHideWithoutCombos:tt,privateInit:C,privateIsLayingOut:l,privateItemIsShown:ue,privateMapSetSize:T,privateMerge:pe,privateNeighbourLinkIds:ke,privateRedrawItem:de,privateRemoveItem:Re,privateRemoveItemsFromTransfer:Ce,privateReveal:ie,privateSetAllDirty:Ie,privateSetAllItemsInComboDirty:he,privateSetBackgroundOpacity:Ne,privateSetGlobalEvents:Ge,privateSetNonImageProperties:Se,privateSetRemoveComponentReference:Ze,privateSetSize:S,privateShowWithoutCombos:it,privateTopParentId:ge,privateUseAutoSizing:k,privateValidateLayoutOptions:xt,removeItem:He,selection:Mt,serialize:ut,setContainer:ze,setItem:je,setProperties:De,show:rt,toDataURL:K,validateCombos:Be,viewCoordinates:ft,viewOptions:lt,worldCoordinates:st,zoom:gt},f,{allowDraw:l,frameRate:l,redraw:l,update:l}),d=Sv(f),h=Va(f,c,u),g=Ev(c,f,d,h,t),p=Ig(c,f),m=Cg(f,p,t),y=Cv(c,f,m,p,t,o),x=kg(y,c.lock);p.internalUse.setDependencies(y,x);var w,M,I=kv(y,f,c);y.setModel(g);var E=function(){};function C(e,t,n,r,i,o,a){w=r;y.setCursorFn(i);y.setCreateCanvasFn(r);y.imageGenFn(o);y.setStartGameLoopFn(a);S(e,t,n,!1)}function S(e,t,n,r){var i=w(t,n,!1);y.makeGhostCanvas(t,n);var o=s;s=Eg(f,t,n,1,p);y.setView(s);y.setCanvasContext(e);y.setShadowCanvas(i.getContext("2d"));bn();if(o){s.setMinZoom(o.getMinZoom());s.setMaxItemZoom(o.getMaxItemZoom());s.fromOldSettings(o.settings(),!1,r)}p.internalUse.setView(s);y.initOverlays()}function k(){return!c.map().isShown()}function T(e,t){p.internalUse.setSize(e,t)}function L(){return p.internalUse.getMapContainer()}c.privateIsLayingOut=y.isLayingOut;function B(e,t,n,r,i){return x.mousedown(e,t,n,r,i)}function G(){return g.graph()}function F(){return p.api}function D(){return p&&p.api.isShown()}function Y(){return p&&p.internalUse.isTransitioning()}function P(){return y.getWebGLPixels()}function X(){return y.combo.api}function U(e){return z(!0===e?{animate:!0}:e,{animate:!1,time:1e3})}function K(e,n,r,i){var o,a,u;if(!i)throw new Error("[toDataURL] callback is required");if(y.isMapMode()){o=s.width();a=s.height()}else{o=Math.floor(e);a=Math.floor(n)}var f=s.settings();o=o>0?o:f.width;a=a>0?a:f.height;var l=z(r,{fit:"exact",watermark:!0,gradient:!0,logo:!0});D()&&(l.fit="exact");if("oneToOne"===l.fit){(u=y.modelExtents())||(u={x1:0,y1:0,x2:100,y2:100});var d=10;u.x1-=d;u.y1-=d;u.x2+=d;u.y2+=d;var h=y.watermarkSize();if(h&&l.watermark){var v=(h.width-(u.x2-u.x1))/2;if(v>0){u.x1-=v;u.x2+=v}var m=(h.height-(u.y2-u.y1))/2;if(m>0){u.y1-=m;u.y2+=m}}o=u.x2-u.x1;a=u.y2-u.y1;l.noScale=!0}function b(e){o=Math.floor(o/e);a=Math.floor(a/e)}var x=o*a/16e6;if(x>1){b(Math.sqrt(x))}var A=8e3,M=o/A;M>1&&b(M);var I=a/A;I>1&&b(I);var E=w(o,a,!0),C=l.noScale?1:o/s.width(),S=cr(),k=Eg(S,Math.floor(o/C),Math.floor(a/C),C,p),T=Cg(S,null,t),L=Cv(c,S,T,null,t,null);L.setCreateCanvasFn(w);L.setModel(g);L.setView(k);L.setCanvasContext(E.getContext("2d"));L.setShadowCanvas(null);L.imageGenFn(y.imageGenFn());B();function B(){var e=y.options();e.overview={shown:!1};l.watermark||(e.watermark=void 0);l.gradient||(e.gradient=void 0);l.logo||(e.logo=void 0);L.options(e);L.backgroundOpacity(y.backgroundOpacity());var n=L.makeGhostCanvas(o,a),r=[];if(!l.selection){r=g.doSelection();g.doSelection([])}switch(l.fit){case"chart":L.fitToModel(!1);break;case"view":k.fromOldSettings(s.settings(),!0,!1);break;case"exact":k.fromOldSettings(s.settings(),!1,!1);break;case"oneToOne":k.fitWorldExtents(u,!1,!1,!1,!1,0)}k.scaleFactor(C);L.initOverlays();L.draw(!0,{all:!0});t.waitForImages(function(){L.draw(!0,{all:!0});var e;try{e=E.toDataURL()}catch(e){throw new Error("[toDataURL] There is a problem exporting the chart."+e)}finally{if("rtl"===E.dir){var t=document.getElementsByTagName("body")[0];t.removeChild(E);t.removeChild(n)}}l.selection||g.doSelection(r);g.setAllDirty();if(D()){var o=void 0,a=y.getCanvasContext();o=a.webglCanvas?a.webglCanvas:a.canvas;p.internalUse.toDataURL(w,E,o,y.drawBackground,i)}else R(i,e)})}}function j(e,n){switch(e&&e.type){case"LinkChart":if(p&&p.internalUse.isTransitioning())throw new Error("Cannot load chart during map show or hide operation");g=Ev(c,f,d,h,t);y.setModel(g);y.load(e,function(){y.initOverlays();t.invokeWhenImagesHaveLoaded(n)});break;default:throw new Error("Unknown chart type passed to load")}}function H(){return g.type()}function J(){f.trigger("prechange","delete");y.load({type:"LinkChart",items:[],map:{keepSameMode:!0}},function(){y.render()})}function q(e,n){$(e,{updateGlyph:!0});y.render();t.invokeWhenImagesHaveLoaded(n)}function $(e,t){if(V(e))throw new Error("Null or undefined object passed to merge");var n=Z(e);y.merge(n,t)}function ee(e,t){var n=g.getByID(e);return!n||!t&&n.parentId?null:n}function re(e,t){return g?Array.isArray(e)?e.map(function(e){return ee(e,t)}):ee(e,t):null}function ie(e){var t=e;if(t){t=O(t);var n=c.privateGetItem(t).filter(function(e){return e&&"link"===e.type&&!e._combo});g.reveal(te(n),!0);c.privateTrigger("redraw",{all:!0})}return g.getRevealedLinks()}function oe(e){return re(e,!0)}function ue(e){return!!g&&g.isItemShown(e)}
function se(e){return g.topParentId(e)}function fe(){return g?g.getRawItems():[]}function le(){return y.getCanvasContext()}function ce(){return h}function de(e){g&&g.setDirty(e)}function he(e){c.privateGetItem(e).forEach(function(e){if(e){c.privateRedrawItem(e.id);if(e._combo){c.privateSetAllItemsInComboDirty(e._combo.linkIds);e._combo.nodeIds&&c.privateSetAllItemsInComboDirty(e._combo.nodeIds)}}})}function ve(e){g&&g.applyRevealedLinkOffsets(e)}function ge(e){return g?g.topParentId(e):e}function pe(e){var t=e;p&&p.api.isShown()&&(t=p.internalUse.preMerge(t));g.merge(t);y.render()}function me(e,t){var n=z(e,{type:"all",items:"underlying"});return I.each(n,!0,t)}function ye(e){return g.bothEndsShown(e)}function be(e){return g.bothEndsForeground(e)}function xe(e){return g.getParentItems(e)}function we(e){return g?g.firstVisibleItemInAncestry(e):null}function Ae(e,t){void 0===t&&(t=!1);return null!==g&&g.allParentsOpen(e,t)}function Me(e){return g.getAncestryIds(e,!1)}function Ie(){y.render();g.setAllDirty()}function Ee(e){g.addItemsToTransfer(e)}function Ce(e){g.removeItemsFromTransfer(e)}function Se(e,t){void 0===t&&(t=!1);var n={};g.setProperties(e,!1,n,t);y.render(n)}function ke(e){return g.neighbourLinkIds(e)}function Re(e){g.removeItem(e);y.render()}function Te(){return g.graph()}function Le(e,t){return g.privateGetLinksBetween(e,t)}function Be(){g.validateCombos()}function Ge(e){M=e}function Ze(e){E=e}function Oe(e){Object.keys(e).forEach(function(t){e[t]=Rg})}function Fe(){c.setContainer(null);if(y.isMapMode()){p.api.leafletMap().remove();y.setOverlayContext(null)}_(M).forEach(function(e){document.removeEventListener(e,M[e])});y.destroy();E();ln();Qn();bn();u.destroy();g.destroy();Oe(r.map());Oe(r.combo());Oe(g.graph());Oe(r);g.graph=Rg;y=null;s=null;d=null;h=null;g=null;m=null;f=null;y=null;I=null;c=null}function ze(e){var t=or(e);i.privateSetContainer(t);y.setContainer(t)}function De(e,n,r){void 0===n&&(n=!1);if(e){var i={};y.setProperties(e,n,!1,i);y.render(i)}t.invokeWhenImagesHaveLoaded(r)}function Ye(e,t,n,r,i){var o=z(t,{time:1e3,easing:"linear",queue:!0});(o.time<0||!b(o.time))&&(o.time=0);var a=O(e);y.animateProperties(a,o,n,r,i)}function Ve(e,t,n){Ye(e,t,n)}function Pe(e,t,n,r){Ye(e,t,n,!0,r)}function We(e){return"number"==typeof e?Math.min(Math.max(0,e),1):e?1:0}function Xe(e,t,n){var r=z(t,{time:500});y.animateBackgroundOpacity(We(e),r.time,n)}function Ne(e){y.backgroundOpacity(We(e))}function Ue(e,t,n){var r=z(t,{c:"#909090",w:20,r:80,time:800,repeat:1,lw:40});y.ping(e,r,n)}function Ke(e){return Array.isArray(e)?e.map(g.getItem):g?g.getItem(e):null}function je(e,n){if(e){f.trigger("prechange","properties");y.setItem(e);y.render();t.invokeWhenImagesHaveLoaded(n)}}function He(e){f.trigger("prechange","delete");y.removeItem(e);y.render()}function _e(e){e&&"boolean"==typeof e.combos&&!e.items&&(e.items=e.combos?"underlying":"toplevel")}function Qe(e,t){var n=z(e,{type:"all",items:"underlying"});return I.each(n,!1,t)}function Je(e,t,n){var r=qe(t);I.filter(e,r,n)}function qe(e){_e(e);var t=z(e,{type:"all",items:"underlying",animate:!0,time:1e3,updateGlyph:!0});return z(t,{hideSingletons:"link"===t.type})}function $e(e,t,n){_e(t);var r=z(t,{type:"node",items:"underlying",foregroundOpenCombos:!0});I.foreground(e,r,n)}function et(e,t,n){if(V(e)||""===e)R(n);else{f.trigger("prechange","hide");var r=O(e),i=U(t);i=z(i,{updateGlyph:!0});var o=y.combo.internalUse.hide(r,i);y.hide(o,i,n)}}function tt(e,t,n){f.trigger("prechange","hide");var r=O(e),i=U(t);y.hide(r,i,n)}function nt(){return g.hidden()}function rt(e,t,n,r){if(V(e)||""===e)R(r);else{f.trigger("prechange","show");var i=O(e),o=U(n);o=z(o,{updateGlyph:!0});var a=y.combo.internalUse.show(i);y.show(a,!!t,o,r);var u=[];a.forEach(function(e){var t=c.privateGetItem(e);if("node"===t.type){t._combo&&u.push(t.id);t.parentId&&u.push(t.parentId)}return!1});y.combo.internalUse.ensureMinimumOpenComboSize(u)}}function it(e,t,n,r){f.trigger("prechange","show");var i=O(e),o=U(n);y.show(i,t,o,r)}function ot(e){return g?y.labelPosition(e,s):null}function at(e){return g?g.contains(e):[]}function ut(){var e=g.serialize();y.appendCombos(e);var t=p.internalUse.serialize();t&&(e.map=t);e.viewSettings=s.settings();return e}function st(e,t){var n=s.scale(e),r=s.scale(t);return{x:Math.floor(s.viewToWorldX(n)),y:Math.floor(s.viewToWorldY(r))}}function ft(e,t){return{x:s.worldToViewX(e),y:s.worldToViewY(t)}}function lt(e,t,n){if(!e)return s.settings();var r=U(t),i=z(e,{offsetX:0,offsetY:0,zoom:1});y.setViewSettings(i,r.animate,r.time,function(){y.render({drawOnly:!0});R(n)})}function ct(e,t){return y.options(e,t)}function dt(){return wa(ct().truncateLabels)}function ht(e,t){if(void 0!==e&&!!e!==vt){vt=!vt;p&&p.internalUse.lock(vt);if(e){var n=t||{};y.wait(n.wait);y.removeDragger()}else y.wait(!1);y.render()}return vt}var vt=!1;function gt(e,t,n){var r=U(t);switch(e){case"in":y.zoomIn(r.animate,r.time,n);break;case"out":y.zoomOut(r.animate,r.time,n);break;case"one":y.setZoom(1,r.animate,r.time,n);break;case"fit":y.fitToModel(r.animate,r.time,r.ids,n);break;case"selection":y.fitToSelection(r.animate,r.time,void 0,n);break;case"height":y.fitModelHeight(r.animate,r.time,r.ids,n)}}function pt(e,t,n){var r=U(t);"selection"!==e||D()?y.pan(e,r.animate,r.time,n):y.fitToSelection(r.animate,r.time,void 0,n,!0)}function mt(){return f.getErrors()}function yt(){y.cancelAnimation()}function bt(e,t,n){if(D()||Y())R(n);else{var r=xt(t);y.layout(e||"standard",r,n)}}function xt(e){var t=e||{},n=c.viewOptions(),r=n.height>0?n.width/n.height:1;V(t.tightness)||(t.tightness=+t.tightness);return z(t,{fit:!0,animate:!0,expanding:!1,tidy:!0,ratio:r,tightness:5,straighten:!0})}function wt(e,t,n,r){var i=At(n);y.arrange(e||"grid",t,i,r)}function At(e){var t=e||{};V(t.tightness)||(t.tightness=+t.tightness);return z(t,{fit:!1,animate:!0,tidy:!1,ratio:1})}function Mt(e){var t=V(e)?e:O(e),n=g?g.doSelection(t):[];t&&y.render();return n}function It(e,t,r,i,o){var u=o.layout.fix,s=!o.filter||o.filter.updateGlyph,f=a(e);function l(e,t){c.privateEach({type:"link",items:"toplevel"},function(n){if(!e[n.id1]||!e[n.id2]){var r=e[n.id1]||e[n.id2],i=e[n.id1]?n.id2:n.id1;if(r&&i){t[i]||(t[i]={x:0,y:0,_counter:0,id:i});t[i].x+=r.x;t[i].y+=r.y;t[i]._counter++}}});var r=0;n(t,function(t){if(!e[t.id]){t.x/=t._counter;t.y/=t._counter;e[t.id]=t;r++}});return r}function d(e,t,r){if(D())r();else{for(var i,o={},a=[];0!==i;)i=l(t,o);e.forEach(function(e){var t=e;if("node"===t.type&&!o[t.id]){t.x=w[t.id].x;t.y=w[t.id].y}});n(o,function(e){a.push(e)});c.setProperties(a,!1,r)}}function h(){var e=[],t={};g.each({type:"node"},function(n){e.push(n.id);t[n.id]=n});return{list:e,dict:t}}function v(){var e={};g.each({type:"all"},function(t){e[t.id]=!0});return e}function p(e){var t={},n={};f.forEach(function(r){var i=r;t[i.id]=i;if(("adjacent"===u||"nonadjacent"===u)&&"link"===i.type){var o=c.privateTopParentId(i.id);if(!e[o]){var a=c.privateTopParentId(i.id1);a&&e[a]&&(n[a]=!0);var s=c.privateTopParentId(i.id2);s&&e[s]&&(n[s]=!0)}}});return{dict:t,touched:n}}function m(){var e=0;c.privateEach({items:"toplevel"},function(){e++});return e}function y(e,t){switch(u){case"all":return e;case"adjacent":return Object.keys(t);case"nonadjacent":return e.filter(function(e){return!t[e]});case"none":default:return[]}}function b(){var e={open:[],closed:[]};f.forEach(function(t){var n=t;"node"===n.type&&n.parentId&&(c.combo().isOpen(n.parentId)?e.open.push(n.parentId):e.closed.push(n.parentId))});return e}function x(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r];if(!V(i)&&!n[i.id]){n[i.id]=!0;w[i.id]={x:i.x,y:i.y};delete i.x;delete i.y;t.push(i)}}return t}var w={};f=x(f);var A=b(),M=h(),I=M.dict,E=v(),C=m();$(f,{updateGlyph:s});var S=p(E),k=S.dict,R=y(M.list,S.touched);t(k,function(){d(f,I,function(){r(E,function(){i(A,m()!==C,R)})})})}function Et(e,t,n){var r=t;function i(e){function t(t,n){function r(e){var n=e;return t[n.id]?g.filter.filterFn(n):!n.hi}if(g.filter&&Q(t)){var i=a(g.filter);i.animate=e;return c.filter(r,i,n)}return n()}return t}function o(e,t,n){g.arrange.animate=t;c.combo().arrange(e,g.arrange,n)}function u(e){g.layout.fixed=e;c.layout(g.layout.name,g.layout,n)}function s(e,t){g.layout.fixed=t;y.arrangeAndLayout(e,g,n)}function l(e,t,r){var i=!1;if(g.animate)for(var a=0;a<e.open.length;a++)if(c.privateItemIsShown(e.open[a])){i=!0;break}var f=e.open.concat(e.closed);t?i?s(f,r):o(f,!1,function(){u(r)}):o(f,i,n)}function d(e,t){var n;if(e.filter&&A(e.filter.filterFn)){var r=e.filter.filterFn;(n=qe(e.filter)).time=Math.floor(t.time/5);n.filterFn=r;return n}}function h(e){e.arrange.animate=e.animate;e.arrange.time=e.time;e.arrange.easing=e.layout.easing;e.filter&&(e.arrange.updateGlyph=e.filter.updateGlyph);return z(e.arrange,{name:"lens",resize:!0,updateGlyph:!0})}function v(e,t){t.layout.animate=t.animate;t.layout.time=t.time;var n=t;t.layout=z(t.layout,{fit:n.fit,straighten:n.straighten,tidy:n.tidy,tightness:n.tightness});t.layout.absoluteFixed=!0;var r={name:"standard",expanding:!0,easing:"cubic",tidy:!1,fit:!1,fix:e.layout?"nonadjacent":"all"},i=z(t.layout,r);"none"===i.packing&&(i.packing=void 0);return xt(i)}var g=z(r=r||{},{animate:!0,time:1e3,layout:{},arrange:{}});g.filter=d(r,g);g.filter&&(g.time-=g.filter.time);g.layout=v(r,g);g.arrange=h(g);f.trigger("prechange","expand");It(O(Z(e)),i(!1),i(g.animate),l,g)}function Ct(e,t,n,r){var i=c.getItem(e);if(c.getItem(t))throw new Error("LinkId ("+t+") already exists and must be unique");if(e&&i&&"node"===i.type&&t){var o=N(t),a=z(n,{style:{}});c.privateBind("dragcomplete",l);var u="dummyEnd"+Math.floor(1e7*Math.random()),s={type:"node",du:!0,id:u,x:i.x,y:i.y},f=ne(a.style,{id:o,id1:e,id2:u,type:"link"});c.merge([s,f],function(){v(function(){y.startDragger(o,u+W()+"id2",i.x,i.y)})})}function l(e,t){if("dummy"===e){c.removeItem(u);c.privateUnbind("dragcomplete",l);var n=N(t)===o?null:t;R(r,n)}}}function St(e,t){y.draw(e,t);y.drawoffscreen();y.afterDraw()}var kt=ar(St,y.animate,y.getCanvasContext);ne(c,kt);c.privateBind("redraw",kt.redraw);return{api:c,actions:x}}
var Lg="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247YXR0cmlidXRlIGZsb2F0IGFfcmFkaXVzO2F0dHJpYnV0ZSBmbG9hdCBhX3N0YXJ0QW5nbGU7YXR0cmlidXRlIGZsb2F0IGFfZW5kQW5nbGU7YXR0cmlidXRlIGZsb2F0IGFfd2lkdGg7YXR0cmlidXRlIHZlYzQgYV9jb2xvdXI7YXR0cmlidXRlIHZlYzQgYV9jb2xvdXIyO2F0dHJpYnV0ZSB2ZWMzIGFfaGl0VGVzdENvbG91cjthdHRyaWJ1dGUgZmxvYXQgYV9saW5lVHlwZTthdHRyaWJ1dGUgdmVjMyBhX2NvcmU7dW5pZm9ybSBmbG9hdCB1X2hpdFRlc3Q7dW5pZm9ybSBmbG9hdCB1X3pvb207dW5pZm9ybSB2ZWMzIHVfcmVzb2x1dGlvbjt1bmlmb3JtIG1hdDQgdV90cmFuc2Zvcm07dW5pZm9ybSBmbG9hdCB1X3RpbWU7dW5pZm9ybSBib29sIHVfYWRhcHRpdmVTdHlsaW5nO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjt2YXJ5aW5nIHZlYzQgdl9jb2xvdXIyO3ZhcnlpbmcgdmVjNCB2X2NvcmU7dmFyeWluZyB2ZWM0IHZfbGluZURhdGE7dmFyeWluZyB2ZWMzIHZfaGl0VGVzdENvbG91cjt2YXJ5aW5nIHZlYzQgdl9iYXJ5Y2VudHJpYzt2YXJ5aW5nIHZlYzQgdl9wb3NpdGlvbjt2YXJ5aW5nIHZlYzMgdl9kYXNoaW5nO2Zsb2F0IGE9My4xNDE1OTI2NTM1OTtpbnQgYj0yO2ludCBjPTM7aW50IGQ9NDtpbnQgZT01O2Zsb2F0IGY9MTUuMDtjb25zdCBmbG9hdCBnPTQuMDtjb25zdCBmbG9hdCBoPWctMC41O2Zsb2F0IGk9MC4wMDAxO2ludCBqKGZsb2F0IGEpe3JldHVybiBpbnQoZmxvb3IoYSswLjUpKTt9ZmxvYXQgayhmbG9hdCBsLGZsb2F0IG0sZmxvYXQgbil7ZmxvYXQgbz1tYXgobi1sLDAuMCk7ZmxvYXQgcD1tYXgoaSxtLWwpO3JldHVybiBtaW4oMS4wLG8vcCk7fWZsb2F0IHEoKXtpZih1X3pvb20+MC4xNSl7cmV0dXJuIG1peCgwLjc1LDEuMCxrKDAuMTUsMC4yLHVfem9vbSkpO31pZih1X3pvb20+MC4wOCl7cmV0dXJuIG1peCgwLjQsMC43NSxrKDAuMDgsMC4xNSx1X3pvb20pKTt9cmV0dXJuIG1peCgwLjIsMC40LGsoMC4wMSwwLjA4LHVfem9vbSkpO312ZWMyIHIodmVjMiBzLGZsb2F0IHQsZmxvYXQgdSxmbG9hdCB2LGZsb2F0IHcpe3JldHVybiB2ZWMyKHMueCsodCpjb3ModSt2KncpKSxzLnkrKHQqc2luKHUrdip3KSkpO31mbG9hdCB4KGZsb2F0IHksZmxvYXQgeil7ZmxvYXQgQT15LzIuMDtmbG9hdCBCPWZsb29yKCgoeitBKS8oeStBKSkrMC41KTtpZigoQip5KT56KXtCPTEuMDt9cmV0dXJuIEI7fXZlYzIgQyh2ZWMyIEQsdmVjMiBFLHZlYzIgRixpbnQgRyl7dmVjMiBIO3ZlYzIgSTtpZihHPT0wKXtIPUQ7ST0oRStGKS8yLjA7fWVsc2UgaWYoRz09MSl7SD1FO0k9KEQrRikvMi4wO31lbHNlIGlmKEc9PTIpe0g9RjtJPShFK0QpLzIuMDt9dmVjMiBKPW5vcm1hbGl6ZShILUkpO0grPUovdV96b29tO3JldHVybiBIO312b2lkIG1haW4oKXt2ZWM0IEs9YV9jb2xvdXIvMjU1LjA7dmVjNCBMPWFfY29sb3VyMi8yNTUuMDtmbG9hdCBNPTEuMC91X3pvb207aW50IE49aihhX2xpbmVUeXBlKTtib29sIE89Tj09Yjtib29sIFA9Tj09Yztib29sIFE9Tj09ZDtib29sIFI9Tj49ZTt2ZWMyIEg7aWYoUil7aW50IEc9aihhX2xpbmVUeXBlKS1lO3ZlYzIgRD1hX3Bvc2l0aW9uO3ZlYzIgRT12ZWMyKGFfcmFkaXVzLGFfc3RhcnRBbmdsZSk7dmVjMiBGPXZlYzIoYV9lbmRBbmdsZSxhX3dpZHRoKTtmbG9hdCBTPWRpc3RhbmNlKEUsRik7ZmxvYXQgVD1TL3Vfem9vbTtmbG9hdCBVPTEuMC9UO0g9QyhELEUsRixHKTt2X2JhcnljZW50cmljPXZlYzQoYV9jb3JlLnh5eixVKTt2X2NvcmU9dmVjNCgxLjApO3ZfbGluZURhdGE9dmVjNCgwLjAsMC4wLDAuMCxhX2xpbmVUeXBlKTt9ZWxzZXt2ZWMyIHM9YV9wb3NpdGlvbjtmbG9hdCB0PWFfcmFkaXVzO2Zsb2F0IFY9YV9zdGFydEFuZ2xlO2Zsb2F0IFc9YV9lbmRBbmdsZTtmbG9hdCBYO2Zsb2F0IFk7ZmxvYXQgTT0xLjAvdV96b29tO2lmKHVfaGl0VGVzdD09MS4wKXtNPTcuMC91X3pvb207fWJvb2wgWj1qKHNpZ24oYV9jb3JlLnIpKT09MTtmbG9hdCB3PWFicyhhX2NvcmUuciktMS4wO2Zsb2F0IHY9KGFfZW5kQW5nbGUtYV9zdGFydEFuZ2xlKS9nO2Zsb2F0IGJhPTEuMC91X3Jlc29sdXRpb24uejtpZihQKXtiYT1tYXgoYmEsc3RlcCgyLjUsYV9saW5lVHlwZSkqMi4wKTt9ZmxvYXQgYmI9bWF4KGFfd2lkdGgqdV96b29tLGJhKS91X3pvb207ZmxvYXQgYmM9bWF4KHEoKSxzbW9vdGhzdGVwKDAuMCwxLjAsYV93aWR0aCp1X3pvb20pKTtpZih1X2FkYXB0aXZlU3R5bGluZyl7Sy5hKj1iYztMLmEqPWJjO31mbG9hdCBiZD1iYitNO2Zsb2F0IGJlPWJkLzIuMDtmbG9hdCBiZj1iYi8yLjA7aWYodzxnKXtZPTEuMDt9ZWxzZXtZPS0xLjA7fWZsb2F0IGJnPWFfcmFkaXVzKihXLVYpO3ZlYzIgYmg9cihzLG1heCh0K2JmLDAuMCksYV9zdGFydEFuZ2xlLHYsdysoWS8yLjApKTtmbG9hdCBiaT12LzIuMDtmbG9hdCBiaj1sZW5ndGgoYmgtcyk7ZmxvYXQgYms9YmovY29zKGJpKTtmbG9hdCBibD1zbW9vdGhzdGVwKDQwMDAuMCwyMDAwMC4wLHQpKjMuMDtpZihaKXtYPWJrK00rYmw7fWVsc2V7YmwqPTIuMDtYPXQtYmUtYmw7fXZfbGluZURhdGE9dmVjNCgwLjAsYmIsYmcsLWFfbGluZVR5cGUpO1g9bWF4KFgsMC4wKTtmbG9hdCBibT0oMS4wL2JnKS91X3pvb207ZmxvYXQgYm49YmcqdV96b29tO2Zsb2F0IGJvPShXLVYpL2JuO2Zsb2F0IGJwPVY7ZmxvYXQgYnE9Ym87YnAtPSgxLjAtc3RlcCgwLjUsdykpKmJxO2JwKz1zdGVwKGgsdykqYnE7SD1yKHMsWCxicCx2LHcpO2lmKFApe2Zsb2F0IGJyPWJuLzQuMDtmbG9hdCBicz1iZy8oYmIqMi4wKTtmbG9hdCBidD1taW4oYnIsYnMpO3ZfY29yZT12ZWM0KGJwLGNlaWwoYnQpLGJtLGFfcmFkaXVzKTt2X2Rhc2hpbmc9dmVjMyhiYixiYiwwLjUpO31lbHNlIGlmKE8pe2Zsb2F0IHk9bWF4KDIuMC91X3pvb20sYmIqMi4wKTtmbG9hdCBidT14KHksYmcpO2Zsb2F0IEE9KGJnLXkqYnUpLyhidS0xLjApO2Zsb2F0IGJ2PUEqYnUvKGJnK0EpO3ZfY29yZT12ZWM0KGJwLGJ1LWJ2LGJtLGFfcmFkaXVzKTtmbG9hdCBidz0oeS8oeStBKSkvMi4wO3ZfZGFzaGluZz12ZWMzKHksQSxidyk7fWVsc2UgaWYoUSl7ZmxvYXQgYng9YV9jb3JlLnk7ZmxvYXQgYnk9ZipieDtmbG9hdCBiej1tYXgoMzAuMCxiYiozLjApO2Zsb2F0IGJBPWJ6O2J5PW1pbihiQSoxNi4wLGFicyhieSkpKnNpZ24oYngpO2Zsb2F0IGJCPTEwMDAuMCpiQS9ieTtmbG9hdCBiQz1tb2QodV90aW1lL2JCLDEuMCk7ZmxvYXQgYkQ9YnovYV9yYWRpdXM7ZmxvYXQgYkU9YkQqKDIuMC8zLjApO2Zsb2F0IGJGPWJDKmJEO3ZfY29yZT12ZWM0KGJwLHcvZyxibSxhX3JhZGl1cyk7dl9kYXNoaW5nPXZlYzMoYkQsMC4wLGJGKTt9ZWxzZXt2X2NvcmU9dmVjNChicCx3L2csYm0sYV9yYWRpdXMpO312X3Bvc2l0aW9uPXZlYzQoSCxzKTt9dmVjMiBiRz1IL3VfcmVzb2x1dGlvbi54eTt2ZWMyIGJIPWJHKjIuMDt2ZWMyIGJJPWJILTEuMDt2X2NvbG91cj1LO3ZfY29sb3VyMj1MO3ZfaGl0VGVzdENvbG91cj1hX2hpdFRlc3RDb2xvdXI7Z2xfUG9zaXRpb249dV90cmFuc2Zvcm0qdmVjNChiSSp2ZWMyKDEsLTEpLDAsMSk7fQ==",Bg="CiNpZmRlZiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMKCiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlCgojZW5kaWYKcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O3VuaWZvcm0gZmxvYXQgdV9oaXRUZXN0O3VuaWZvcm0gZmxvYXQgdV9zaGFkb3dUeXBlO3VuaWZvcm0gZmxvYXQgdV96b29tO3VuaWZvcm0gZmxvYXQgdV9ncmFkaWVudFN0YXJ0RnJhY3Rpb247dmFyeWluZyB2ZWM0IHZfY29sb3VyO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjI7dmFyeWluZyB2ZWMzIHZfaGl0VGVzdENvbG91cjt2YXJ5aW5nIHZlYzQgdl9jb3JlO3ZhcnlpbmcgdmVjNCB2X2xpbmVEYXRhO3ZhcnlpbmcgdmVjNCB2X2JhcnljZW50cmljO3ZhcnlpbmcgdmVjNCB2X3Bvc2l0aW9uO3ZhcnlpbmcgdmVjMyB2X2Rhc2hpbmc7aW50IGE9MjtpbnQgYj0zO2ludCBjPTQ7aW50IGQ9NTtmbG9hdCBlPTMuMTQxNTkyNjUzNTk7ZmxvYXQgZj0wLjcwNzEwNjc4MTE4NjU0NzU3O2Zsb2F0IGcoZmxvYXQgaCxmbG9hdCBpKXtmbG9hdCBqPWxlbmd0aCh2ZWMyKGRGZHgoaSksZEZkeShpKSkpKmY7cmV0dXJuIHNtb290aHN0ZXAoaC1qLGgraixpKTt9ZmxvYXQgaz0wLjAwMDE7ZmxvYXQgbChmbG9hdCBtLGZsb2F0IG4sZmxvYXQgaSl7ZmxvYXQgbz1tYXgoaS1tLDAuMCk7ZmxvYXQgcD1tYXgoayxuLW0pO3JldHVybiBtaW4oMS4wLG8vcCk7fWZsb2F0IHEodmVjMyByKXt2ZWMzIHM9ZndpZHRoKHIpO3ZlYzMgdD1zbW9vdGhzdGVwKHZlYzMoMC4wKSxzKjIuMCxyKTtyZXR1cm4gbWluKG1pbih0LngsdC55KSx0LnopO31pbnQgdShmbG9hdCBhKXtyZXR1cm4gaW50KGZsb29yKGErMC41KSk7fXZlYzQgdihmbG9hdCB3KXtmbG9hdCB4PWwodV9ncmFkaWVudFN0YXJ0RnJhY3Rpb24sMS4wLXVfZ3JhZGllbnRTdGFydEZyYWN0aW9uLHcpO3ZlYzMgeT1taXgodl9jb2xvdXIucmdiLHZfY29sb3VyMi5yZ2IseCk7ZmxvYXQgej1taXgodl9jb2xvdXIuYSx2X2NvbG91cjIuYSx4KTtyZXR1cm4gdmVjNCh5Knoseik7fXZlYzQgQSh2ZWM0IHksZmxvYXQgQixmbG9hdCBDKXtmbG9hdCBoPShDLzIuMCkqdV96b29tO2Zsb2F0IEQ9YWJzKEIpKnVfem9vbTt5Kj0xLjAtc21vb3Roc3RlcChoLWYsaCtmLEQpO3JldHVybiB5O31mbG9hdCBFKGZsb2F0IEQsZmxvYXQgRixmbG9hdCBHKXtyZXR1cm4gKEQvRikqRzt9dmVjNCBIKGJvb2wgSSxib29sIEosYm9vbCBLLGJvb2wgTCl7ZmxvYXQgQj12X2xpbmVEYXRhLngvMi4wO2Zsb2F0IEM9dl9saW5lRGF0YS55O2Zsb2F0IE09dl9jb3JlLng7dmVjNCBOPXYoTSk7ZmxvYXQgTz12X2NvcmUuejtmbG9hdCBQPXZfbGluZURhdGEuejtpZihMKXtmbG9hdCBRPXZfZGFzaGluZy54O2Zsb2F0IFI9USooMi4wLzMuMCk7ZmxvYXQgUz12X2Rhc2hpbmcuejtmbG9hdCBUPU0qUDtmbG9hdCBVPW1vZChULShQLzIuMCktKFEvMi4wKSxRKTtmbG9hdCBWPW1vZChTLVUsUSk7ZmxvYXQgVz1kaXN0YW5jZShWLFEvMi4wKTtOKj0xLjAtZyhSLzIuMCxXKTtOPUEoTixCLEMpO04qPWcoTyx2X2NvcmUueCk7Tio9MS4wLWcoMS4wLU8sdl9jb3JlLngpO31lbHNlIGlmKEkpe2Zsb2F0IFg9dl9jb3JlLnk7ZmxvYXQgWT1DLzIuMDtmbG9hdCBaPXZfZGFzaGluZy54O2Zsb2F0IGJhPXZfZGFzaGluZy56O2Zsb2F0IGJiPU0qWDt2ZWMyIGJjPXZlYzIoTSpQLEIpO2Zsb2F0IGJkPWZyYWN0KGJiKS1iYTtmbG9hdCBiZT1mbG9vcihiZCswLjUpO2Zsb2F0IGJmPWJiLWJkK2JlO3ZlYzIgYmc9dmVjMigoYmYvWCkqUCwwLjApO2Zsb2F0IGJoPVk7aWYoSil7YmMueT0wLjA7Ymg9Wi8yLjA7Tj1BKE4sQixDKTt9ZmxvYXQgVz1kaXN0YW5jZShiYyxiZyk7Tio9MS4wLWcoYmgsVyk7fWVsc2V7Tj1BKE4sQixDKTtOKj1nKE8sdl9jb3JlLngpO04qPTEuMC1nKDEuMC1PLHZfY29yZS54KTt9cmV0dXJuIE47fXZlYzQgYmkoYm9vbCBJLGJvb2wgSixib29sIEssYm9vbCBMKXtmbG9hdCBDPXZfbGluZURhdGEueTtmbG9hdCBPPXZfY29yZS56O2Zsb2F0IFA9dl9saW5lRGF0YS56O2Zsb2F0IFk9Qy8yLjA7ZmxvYXQgYmo9dl9jb3JlLmE7ZmxvYXQgYms9UC9iajt2ZWMyIEQ9dl9wb3NpdGlvbi54eTt2ZWMyIGJsPXZfcG9zaXRpb24uenc7ZmxvYXQgYm09ZGlzdGFuY2UoRCxibCk7ZmxvYXQgYm49YXRhbihELnktYmwueSxELngtYmwueCk7aWYoYm48dl9jb3JlLngpe2JuKz0yLjAqZTt9ZmxvYXQgYm89dl9jb3JlLng7ZmxvYXQgYnA9KGJuLWJvKS8oYmspO3ZlYzQgTj12KGJwKTtpZihMKXtmbG9hdCBicT12X2Rhc2hpbmcueDtmbG9hdCBicj1icSooMi4wLzMuMCk7ZmxvYXQgUz12X2Rhc2hpbmcuejtmbG9hdCBicz1icCpiaztmbG9hdCBidD1tb2QoYnMtKGJrLzIuMCktKGJxLzIuMCksYnEpO2Zsb2F0IGJ1PW1vZChTLWJ0LGJxKTtmbG9hdCBXPWRpc3RhbmNlKGJ1LGJxLzIuMCk7ZmxvYXQgYnY9dl9jb3JlLnk7Tio9MS4wLWcoYnIvMi4wLFcpO04qPWcoYmosYm0rWSk7Tio9MS4wLWcoYmorWSxibSk7Tio9ZyhPLGJ2KTtOKj0xLjAtZygxLjAtTyxidik7fWVsc2UgaWYoSSl7ZmxvYXQgWj12X2Rhc2hpbmcueDtmbG9hdCBiYT12X2Rhc2hpbmcuejtmbG9hdCBYPXZfY29yZS55O2Zsb2F0IGJ3PWJwKlg7dmVjMiBieD1EO2Zsb2F0IGJkPWZyYWN0KGJ3KS1iYTtmbG9hdCBiZT1mbG9vcihiZCswLjUpO2Zsb2F0IGJnPWJ3LWJkK2JlO2Zsb2F0IGJ5PUUoYmcsWCxiaykrYm87aWYoSyl7dmVjMiBiZz12ZWMyKGJsLngrKGJqKmNvcyhieSkpLGJsLnkrKGJqKnNpbihieSkpKTtmbG9hdCBXPWRpc3RhbmNlKGJ4LGJnKTtmbG9hdCBiej1ZO04qPTEuMC1nKGJ6LFcpO31lbHNle2Zsb2F0IGJBPWRpc3RhbmNlKGJuLGJ5KTtmbG9hdCBiej1FKFovMi4wLFAsYmspO04qPTEuMC1nKGJ6LGJBKTtOKj1nKGJqLGJtK1kpO04qPTEuMC1nKGJqK1ksYm0pO319ZWxzZXtmbG9hdCBidj12X2NvcmUueTtOKj1nKGJqLGJtK1kpO04qPTEuMC1nKGJqK1ksYm0pO04qPWcoTyxidik7Tio9MS4wLWcoMS4wLU8sYnYpO31yZXR1cm4gTjt9dm9pZCBtYWluKCl7aW50IGJCPWludCh1X3NoYWRvd1R5cGUpO2Zsb2F0IGJDPWFicyh2X2xpbmVEYXRhLncpO2ludCBiRD11KGJDKTtib29sIGJFPXNpZ24odl9saW5lRGF0YS53KTwwLjA7Ym9vbCBJPWJDPjEuNTtib29sIEo9YkQ9PWE7Ym9vbCBLPWJEPT1iO2Jvb2wgTD1iRD09Yztib29sIGJGPWJEPj1kO2Jvb2wgYkc9YkI9PS0xO2Jvb2wgYkg9YkI9PTE7aWYodV9oaXRUZXN0PjAuNSl7aWYoYkcpe2Rpc2NhcmQ7fWVsc2V7Z2xfRnJhZ0NvbG9yPXZlYzQodl9oaXRUZXN0Q29sb3VyLzI1NS4wLDEuMCk7fX1lbHNlIGlmKGJIKXtkaXNjYXJkO31lbHNle3ZlYzQgTjtpZihiRil7Tj12ZWM0KHZfY29sb3VyLnJnYip2X2NvbG91ci5hLHZfY29sb3VyLmEpO04qPWcodl9iYXJ5Y2VudHJpYy5hLHEodl9iYXJ5Y2VudHJpYy5yZ2IpKTt9ZWxzZXtpZihiRSl7Tj1iaShJLEosSyxMKTt9ZWxzZXtOPUgoSSxKLEssTCk7fX1nbF9GcmFnQ29sb3I9Tjt9fQ==",Gg="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb24xO2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb24yO2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb24zO2F0dHJpYnV0ZSB2ZWM0IGFfdmVydGV4SW5mbzthdHRyaWJ1dGUgdmVjNCBhX2NvbG91cjthdHRyaWJ1dGUgdmVjNCBhX2NvbG91cjI7YXR0cmlidXRlIHZlYzMgYV9oaXRUZXN0Q29sb3VyO2F0dHJpYnV0ZSBmbG9hdCBhX2luZGV4O3VuaWZvcm0gZmxvYXQgdV9oaXRUZXN0O3VuaWZvcm0gdmVjMyB1X3Jlc29sdXRpb247dW5pZm9ybSBtYXQ0IHVfdHJhbnNmb3JtO3VuaWZvcm0gZmxvYXQgdV96b29tO3VuaWZvcm0gZmxvYXQgdV92aWV3SW5kZXBlbmRlbnQ7dW5pZm9ybSBmbG9hdCB1X3RpbWU7dW5pZm9ybSBib29sIHVfYWRhcHRpdmVTdHlsaW5nO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjt2YXJ5aW5nIHZlYzQgdl9jb2xvdXIyO3ZhcnlpbmcgdmVjNCB2X2NvcmU7dmFyeWluZyB2ZWMzIHZfaGl0VGVzdENvbG91cjt2YXJ5aW5nIHZlYzQgdl9saW5lRGF0YTt2YXJ5aW5nIHZlYzQgdl9iYXJ5Y2VudHJpYzt2YXJ5aW5nIHZlYzQgdl9wb3NpdGlvbjt2YXJ5aW5nIHZlYzMgdl9kYXNoaW5nO2ludCBhPTI7aW50IGI9MztpbnQgYz00O2ludCBkPTU7ZmxvYXQgZT0wLjAwMDE7ZmxvYXQgZj0xNS4wO2ludCBnKGZsb2F0IGEpe3JldHVybiBpbnQoZmxvb3IoYSswLjUpKTt9ZmxvYXQgaChmbG9hdCBpLGZsb2F0IGope2Zsb2F0IGs9aS8yLjA7ZmxvYXQgbD1mbG9vcigoKGoraykvKGkraykpKzAuNSk7aWYoKGwqaSk+ail7bD0xLjA7fXJldHVybiBsO312ZWMyIG0odmVjMiBuLHZlYzIgbyx2ZWMyIHAsaW50IHEpe3ZlYzIgcjt2ZWMyIHM7aWYocT09MCl7cj1uO3M9KG8rcCkvMi4wO31lbHNlIGlmKHE9PTEpe3I9bztzPShuK3ApLzIuMDt9ZWxzZSBpZihxPT0yKXtyPXA7cz0obytuKS8yLjA7fXZlYzIgdD1ub3JtYWxpemUoci1zKTtyKz10L3Vfem9vbTtyZXR1cm4gcjt9ZmxvYXQgdShmbG9hdCB2LGZsb2F0IHcsZmxvYXQgeCl7ZmxvYXQgeT1tYXgoeC12LDAuMCk7ZmxvYXQgej1tYXgoZSx3LXYpO3JldHVybiBtaW4oMS4wLHkveik7fWZsb2F0IEEoKXtpZih1X3pvb20+MC4xNSl7cmV0dXJuIG1peCgwLjc1LDEuMCx1KDAuMTUsMC4yLHVfem9vbSkpO31pZih1X3pvb20+MC4wOCl7cmV0dXJuIG1peCgwLjQsMC43NSx1KDAuMDgsMC4xNSx1X3pvb20pKTt9cmV0dXJuIG1peCgwLjIsMC40LHUoMC4wMSwwLjA4LHVfem9vbSkpO312b2lkIG1haW4oKXtmbG9hdCBCPTEuMC91X3Jlc29sdXRpb24uejt2ZWM0IEM9YV9jb2xvdXIvMjU1LjA7dmVjNCBEPWFfY29sb3VyMi8yNTUuMDtpbnQgRT1nKGFfdmVydGV4SW5mby53KTtib29sIEY9RT09YTtib29sIEc9RT09Yjtib29sIEg9RT09Yztib29sIEk9RT09ZDt2ZWMyIHI7ZmxvYXQgSjtmbG9hdCBLO2lmKEkpe2ludCBxPWludChhX2luZGV4KTt2ZWMyIG49YV9wb3NpdGlvbjE7dmVjMiBvPWFfcG9zaXRpb24yO3ZlYzIgcD1hX3Bvc2l0aW9uMztmbG9hdCBMPWRpc3RhbmNlKG8scCk7ZmxvYXQgTT1ML3Vfem9vbTtmbG9hdCBLPTEuMC9NO3I9bShuLG8scCxxKTt2X2xpbmVEYXRhPXZlYzQoMC4wLDAuMCwwLjAsYV92ZXJ0ZXhJbmZvLncpO3ZfYmFyeWNlbnRyaWM9dmVjNChhX3ZlcnRleEluZm8ueHl6LEspO31lbHNle2Zsb2F0IE49MS4wL3Vfem9vbTtpZih1X2hpdFRlc3Q9PTEuMCl7Tj03LjAvdV96b29tO31mbG9hdCBCPTEuMC91X3Jlc29sdXRpb24uejtpZihHKXtCPW1heChCLHN0ZXAoMi41LGFfdmVydGV4SW5mby53KSoyLjApO312ZWMyIE89bm9ybWFsaXplKGFfcG9zaXRpb24yLWFfcG9zaXRpb24xKTt2ZWMyIFA9Ty91X3pvb207ZmxvYXQgUT1hX3ZlcnRleEluZm8ueS0xLjA7ZmxvYXQgUj1hX3ZlcnRleEluZm8ueCthX3ZlcnRleEluZm8uejt2ZWMyIFM9YV9wb3NpdGlvbjItYV9wb3NpdGlvbjE7dmVjMiBUPW5vcm1hbGl6ZSh2ZWMyKC1TLnksUy54KSk7aWYoaW50KGFfdmVydGV4SW5mby54KT09MCl7cj1hX3Bvc2l0aW9uMS1QO31lbHNle3I9YV9wb3NpdGlvbjIrUDt9ZmxvYXQgVT1hX3Bvc2l0aW9uMy54O2Zsb2F0IFY9bWF4KEEoKSxzbW9vdGhzdGVwKDAuMCwxLjAsVSp1X3pvb20pKTtpZihpbnQodV92aWV3SW5kZXBlbmRlbnQpPT0wKXtVPW1heCgoVSkqdV96b29tLEIpL3Vfem9vbTt9ZmxvYXQgVz1VK047dmVjMiBYPVQqKFcvMi4wKSpRO3I9citYO2Zsb2F0IFk9ZGlzdGFuY2UoYV9wb3NpdGlvbjEsYV9wb3NpdGlvbjIpO2Zsb2F0IFo9WSp1X3pvb207ZmxvYXQgYmE9KDEuMC9ZKS91X3pvb207aWYoRyl7ZmxvYXQgYmI9Wi80LjA7ZmxvYXQgYmM9WS8oVSoyLjApO2Zsb2F0IGJkPW1pbihiYixiYyk7dl9jb3JlPXZlYzQoUixjZWlsKGJkKSxiYSwwLjApO3ZfZGFzaGluZz12ZWMzKFUsVSwwLjUpO31lbHNlIGlmKEYpe2Zsb2F0IGk9bWF4KDIuMC91X3pvb20sVSoyLjApO2Zsb2F0IGJlPWgoaSxZKTtmbG9hdCBrPShZLWkqYmUpLyhiZS0xLjApO2Zsb2F0IGJmPWsqYmUvKFkrayk7dl9jb3JlPXZlYzQoUixiZS1iZixiYSwwLjApO2Zsb2F0IGJnPShpLyhpK2spKS8yLjA7dl9kYXNoaW5nPXZlYzMoaSxrLGJnKTt9ZWxzZSBpZihIKXtmbG9hdCBiaD1hX3Bvc2l0aW9uMy55O2Zsb2F0IGJpPWYqYmg7ZmxvYXQgYmo9bWF4KDMwLjAsVSozLjApO2Zsb2F0IGJrPWJqO2JpPW1pbihiayoxNi4wLGFicyhiaSkpKnNpZ24oYmgpO2Zsb2F0IGJsPTEwMDAuMCpiay9iaTtmbG9hdCBibT1tb2QodV90aW1lL2JsLDEuMCk7ZmxvYXQgYm49Ym0qYmo7dl9kYXNoaW5nPXZlYzMoYmosMC4wLGJuKTt2X2NvcmU9dmVjNChSLDAuMCxiYSwwLjApO31lbHNle3ZfY29yZT12ZWM0KFIsMC4wLGJhLDAuMCk7fWlmKGludChRKT09MSl7dl9saW5lRGF0YT12ZWM0KC1XLFUsWSxhX3ZlcnRleEluZm8udyk7fWVsc2V7dl9saW5lRGF0YT12ZWM0KFcsVSxZLGFfdmVydGV4SW5mby53KTt9aWYodV9hZGFwdGl2ZVN0eWxpbmcpe0MuYSo9VjtELmEqPVY7fX12ZWMyIGJvPXIvdV9yZXNvbHV0aW9uLnh5O3ZlYzIgYnA9Ym8qMi4wO3ZlYzIgYnE9YnAtMS4wO3ZfY29sb3VyPUM7dl9jb2xvdXIyPUQ7dl9oaXRUZXN0Q29sb3VyPWFfaGl0VGVzdENvbG91cjtnbF9Qb3NpdGlvbj11X3RyYW5zZm9ybSp2ZWM0KGJxKnZlYzIoMSwtMSksMCwxKTt9",Zg="CiNpZmRlZiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMKCiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlCgojZW5kaWYKcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O3VuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2VbN107dW5pZm9ybSBsb3dwIGZsb2F0IHVfaGl0VGVzdDt1bmlmb3JtIHZlYzMgdV9yZXNvbHV0aW9uO3VuaWZvcm0gZmxvYXQgdV9zaGFkb3dUeXBlO3VuaWZvcm0gZmxvYXQgdV96b29tO3ZhcnlpbmcgdmVjNCB2X3RleENvb3JkO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjt2YXJ5aW5nIHZlYzMgdl9oaXRUZXN0Q29sb3VyO3ZhcnlpbmcgdmVjMiB2X3RleHR1cmVCYW5rO3ZhcnlpbmcgZmxvYXQgdl9ib3JkZXJXaWR0aDt2YXJ5aW5nIHZlYzQgdl9zaGFwZVNpemU7dmFyeWluZyBmbG9hdCB2X3BpeGVsO3ZhcnlpbmcgdmVjMiB2X2RvbnV0U2VnbWVudDtjb25zdCBmbG9hdCBhPTMuMTQxNTkyNjUzNTg5NzkzMjM4NDYyNjQzMzgzMjc5NTtmbG9hdCBiKGZsb2F0IGMsZmxvYXQgZCl7ZmxvYXQgZT1sZW5ndGgodmVjMihkRmR4KGQpLGRGZHkoZCkpKSowLjcwNzEwNjc4MTE4NjU0NzU3O3JldHVybiBzbW9vdGhzdGVwKGMtZSxjK2UsZCk7fWludCBmKGZsb2F0IGEpe3JldHVybiBpbnQoZmxvb3IoYSswLjUpKTt9ZmxvYXQgZyhmbG9hdCBoKXtmbG9hdCBpPTEuMC1zdGVwKDEuMCxoKnVfem9vbSk7ZmxvYXQgaj0oMS4wL3Vfem9vbSk7cmV0dXJuIG1heChoLGkqaik7fWZsb2F0IGsoZmxvYXQgaCl7ZmxvYXQgbD1iKHZfdGV4Q29vcmQueCxoKTtmbG9hdCBtPWIodl90ZXhDb29yZC55LGgpO2Zsb2F0IG49Yih2X3RleENvb3JkLnotdl90ZXhDb29yZC54LGgpO2Zsb2F0IG89Yih2X3RleENvb3JkLnctdl90ZXhDb29yZC55LGgpO2Zsb2F0IHA9bWF4KGwsbSk7ZmxvYXQgcT1tYXgobixvKTtyZXR1cm4gbWF4KHAscSk7fWZsb2F0IHIodmVjMyBzKXt2ZWMzIHQ9ZndpZHRoKHMpO3ZlYzMgdT1zbW9vdGhzdGVwKHZlYzMoMC4wKSx0KjMuMCxzKTtyZXR1cm4gbWluKG1pbih1LngsdS55KSx1LnopO31mbG9hdCB2KGZsb2F0IHcsdmVjNCB4KXtmbG9hdCB5O2ludCB6PWYodyk7aWYoej09MCl7eT14LnI7fWVsc2UgaWYoej09MSl7eT14Lmc7fWVsc2V7eT14LmI7fXJldHVybiB5O312ZWM0IEEoZmxvYXQgQix2ZWM0IEMsZmxvYXQgRCl7ZmxvYXQgRT0oQy5yK0MuYitDLmcpLzMuMDtmbG9hdCBGPXN0ZXAoMS4wLEUpKkQ7ZmxvYXQgRz1GKihzdGVwKDAuMjUsQikqbWluKEUsMC4yNSkpO3ZlYzQgSD12ZWM0KChDLnJnYitHKSpDLmEsQy5hKTtyZXR1cm4gQipIO31mbG9hdCBJKHZlYzIgSixmbG9hdCBLLGZsb2F0IEwsZmxvYXQgaCxmbG9hdCBNKXtNPW1heCgwLjAsTS1oKTtmbG9hdCBOPUsvMi4wO2Zsb2F0IE89TC8yLjA7ZmxvYXQgYT1OLU0taDtmbG9hdCBiPU8tTS1oO2Zsb2F0IHg9Si54LU47ZmxvYXQgeT1KLnktTztmbG9hdCBQPXBvdyhtYXgoYWJzKHgpLWEsMC4wKSwyLjApO2Zsb2F0IFE9cG93KG1heChhYnMoeSktYiwwLjApLDIuMCk7cmV0dXJuIFArUTt9ZmxvYXQgUihmbG9hdCBTKXtyZXR1cm4gKGRpc3RhbmNlKHZfdGV4Q29vcmQuencsdmVjMigwLjUpKSpTKSp1X3pvb207fXZlYzQgVCh2ZWM0IEgsZmxvYXQgVSxmbG9hdCBNKXtmbG9hdCBWPXBvdyhNLDIuMCk7ZmxvYXQgVz1JKHZfdGV4Q29vcmQueHksdl90ZXhDb29yZC56LHZfdGV4Q29vcmQudywwLjAsTSk7aWYoYWJzKHZfYm9yZGVyV2lkdGgpPjAuMCl7SCo9MS4wLWIoVixXKTtXPUkodl90ZXhDb29yZC54eSx2X3RleENvb3JkLnosdl90ZXhDb29yZC53LHZfYm9yZGVyV2lkdGgsTSk7ZmxvYXQgWD1tYXgoMC4wLE0tdl9ib3JkZXJXaWR0aCk7ZmxvYXQgWT1wb3coWCwyLjApO0gqPWIoWSxXKTt9ZWxzZXtIKj0xLjAtYihWLFcpO31yZXR1cm4gSDt9dmVjNCBaKHZlYzQgYmEsdmVjNCBiYixmbG9hdCBEKXtmbG9hdCBCPXYodl90ZXh0dXJlQmFuay55LGJhKTtyZXR1cm4gQShCLGJiLEQpO31mbG9hdCBiYyhmbG9hdCBiZCl7cmV0dXJuIG1heCgwLjIsc21vb3Roc3RlcCgwLjAsNS4wLGJkKSk7fXZvaWQgbWFpbigpe2Zsb2F0IGJlPWFicyh2X3NoYXBlU2l6ZS56KTtmbG9hdCBiZj12X3NoYXBlU2l6ZS53O2Zsb2F0IGJnPWFicyh2X3NoYXBlU2l6ZS54KTtmbG9hdCBiaD12X3NoYXBlU2l6ZS55O2Zsb2F0IGJpPW1pbihiZyxiaCk7ZmxvYXQgYmQ9KChiaS8yLjApKnVfem9vbSktMC41O2Zsb2F0IGg9YWJzKHZfYm9yZGVyV2lkdGgpO3ZlYzQgSDtpbnQgYmo9Zih1X3NoYWRvd1R5cGUpO2Jvb2wgYms9Zih2X3NoYXBlU2l6ZS54KT4wO2Jvb2wgYmw9Zih2X2JvcmRlcldpZHRoKTwwO2Jvb2wgYm09Ymo9PTE7Ym9vbCBibj1mKHVfaGl0VGVzdCk9PTE7dmVjMiBibz12X3RleENvb3JkLnp3O2Zsb2F0IGJwPXZfZG9udXRTZWdtZW50Lng7ZmxvYXQgYnE9dl9kb251dFNlZ21lbnQueTtmbG9hdCBNPXZfZG9udXRTZWdtZW50Lng7ZmxvYXQgVTtpbnQgdz1mKHZfdGV4dHVyZUJhbmsueCk7Ym9vbCBicj12X2JvcmRlcldpZHRoPjAuMCYmZih2X3NoYXBlU2l6ZS54KTwwO2Jvb2wgYnM9dz09LTM7Ym9vbCBidD1icCE9MC4wfHxicSE9MC4wO2Zsb2F0IGJ1O2lmKGJ0fHxibCl7aWYoYnA+YSl7YnAtPTIuMCphO31pZihicT5hKXticS09Mi4wKmE7fWZsb2F0IHg9Ym8ueC0wLjU7ZmxvYXQgeT1iby55LTAuNTtidT1hdGFuKHkseCk7fWlmKGJuKXtpZihiaj09LTEpe2Rpc2NhcmQ7fWVsc2V7SD12ZWM0KHZfaGl0VGVzdENvbG91ci8yNTUuMCwxLjApO2lmKGJrKXtmbG9hdCBidj1SKGJlKTtIKj0xLjAtYihiZCxidik7aWYoaD4wLjApe2Zsb2F0IGJ3PWgqdV96b29tO0gqPWIoYmQtYncsYnYpO31pZihidCl7aWYoYnA+PWJxKXtIKj1zdGVwKGJwLGJ1KSsoMS4wLXN0ZXAoYnEsYnUpKTt9ZWxzZXtIKj1zdGVwKGJwLGJ1KTtIKj0xLjAtc3RlcChicSxidSk7fX19ZWxzZSBpZih2X2RvbnV0U2VnbWVudC54PjAuMCl7VT1nKGgpO2Zsb2F0IGJ4PXBvdyhNLDIuMCk7ZmxvYXQgYnk9SSh2X3RleENvb3JkLnh5LHZfdGV4Q29vcmQueix2X3RleENvb3JkLncsMC4wLE0pO0gqPTEuMC1zdGVwKGJ4LGJ5KTt9ZWxzZSBpZihicil7SCo9ayhoKTt9fX1lbHNlIGlmKGJtKXtkaXNjYXJkO31lbHNle0g9dl9jb2xvdXIvMjU1LjA7ZmxvYXQgYno9SC5hO2lmKHc+PTApe3ZlYzQgeDtmbG9hdCBiQT0tMi4wLzMuMDtmbG9hdCBiQj0tMC44O2lmKHc9PTApe3g9dGV4dHVyZTJEKHVfaW1hZ2VbMF0sdl90ZXhDb29yZC54eSxiQik7SD1aKHgsSCwxLjApO31lbHNlIGlmKHc9PTEpe3g9dGV4dHVyZTJEKHVfaW1hZ2VbMV0sdl90ZXhDb29yZC54eSxiQik7SD1aKHgsSCwxLjApO31lbHNlIGlmKHc9PTIpe3g9dGV4dHVyZTJEKHVfaW1hZ2VbMl0sdl90ZXhDb29yZC54eSxiQik7SD1aKHgsSCwxLjApO31lbHNlIGlmKHc9PTMpe3g9dGV4dHVyZTJEKHVfaW1hZ2VbM10sdl90ZXhDb29yZC54eSxiQSk7SD1aKHgsSCwwLjApO31lbHNlIGlmKHc9PTQpe0g9dGV4dHVyZTJEKHVfaW1hZ2VbNF0sdl90ZXhDb29yZC54eSxiQSkqYno7fWVsc2UgaWYodz09NSl7SD10ZXh0dXJlMkQodV9pbWFnZVs1XSx2X3RleENvb3JkLnh5LGJBKSpiejt9ZWxzZSBpZih3PT02KXtIPXRleHR1cmUyRCh1X2ltYWdlWzZdLHZfdGV4Q29vcmQueHksYkEpKmJ6O319ZWxzZXtmbG9hdCBiej1ILmE7SD12ZWM0KEgucmdiKmJ6LGJ6KTt9aWYoYmspe2Zsb2F0IGJ2PVIoYmUpO0gqPTEuMC1iKGJkLGJ2KTtpZihoPjAuMCl7ZmxvYXQgYnc9bWF4KDEuMCxoKnVfem9vbSk7SCo9YihiZC1idyxidik7SCo9YmMoYmQpO31mbG9hdCBiQz12X3BpeGVsKjEuNTtmbG9hdCBiRD1icC1iQztmbG9hdCBiRT1icCtiQztmbG9hdCBiRj1icS1iQztmbG9hdCBiRz1icStiQztpZihidCl7aWYoYnA+PWJxKXtIKj1zbW9vdGhzdGVwKGJELGJFLGJ1KSsoMS4wLXNtb290aHN0ZXAoYkYsYkcsYnUpKTt9ZWxzZXtIKj1zbW9vdGhzdGVwKGJELGJFLGJ1KTtIKj0xLjAtc21vb3Roc3RlcChiRixiRyxidSk7fX1lbHNlIGlmKGJsKXtmbG9hdCBiSD1oKjIuMDtmbG9hdCBiST1iSC8yLjA7ZmxvYXQgYko9Mi4wKihhKihiZy8yLjApKTtmbG9hdCBiSz1idS8oMi4wKmEpO2Zsb2F0IGJMPWZsb29yKChiSitiSSkvKGJIK2JJKS0xLjApO2Zsb2F0IGJNPXNpbigoKGJLKmJMKSkqKDIuMCphKSk7SCo9YigtMC41LGJNKTt9fWVsc2UgaWYodl9kb251dFNlZ21lbnQueD4wLjApe1U9ZyhoKTtIPVQoSCxVLE0pO31lbHNlIGlmKGJyKXtVPWcoaCk7SCo9ayhVKTtIKj1iYyhiZCk7aWYoYnMpe2Zsb2F0IGJIPVUqMi4wO2Zsb2F0IGJJPVU7ZmxvYXQgYkw9Zmxvb3IoKHZfdGV4Q29vcmQueitiSSkvKGJIK2JJKSkrMC41O2Zsb2F0IGJNPXNpbigoKCh2X3RleENvb3JkLngvdl90ZXhDb29yZC56KSpiTCkpKigyLjAqYSkpO0gqPXN0ZXAoLTAuNDksYk0pO2JMPWZsb29yKCh2X3RleENvb3JkLncrYkkpLyhiSCtiSSkpKzAuNTtiTT1zaW4oKCgodl90ZXhDb29yZC55L3ZfdGV4Q29vcmQudykqYkwpKSooMi4wKmEpKTtIKj1iKC0wLjQ5LGJNKTt9fX1nbF9GcmFnQ29sb3I9SDt9",Og="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247YXR0cmlidXRlIHZlYzQgYV90ZXhDb29yZDthdHRyaWJ1dGUgdmVjMyBhX2hpdFRlc3RDb2xvdXI7YXR0cmlidXRlIGZsb2F0IGFfdmVydGV4SW5kZXg7YXR0cmlidXRlIHZlYzIgYV90ZXh0dXJlQmFuazthdHRyaWJ1dGUgdmVjNCBhX2NvbG91cjthdHRyaWJ1dGUgZmxvYXQgYV9jaXJjbGVSYWRpdXM7YXR0cmlidXRlIGZsb2F0IGFfd2lkdGg7YXR0cmlidXRlIGZsb2F0IGFfc3RhcnRBbmdsZTthdHRyaWJ1dGUgZmxvYXQgYV9lbmRBbmdsZTthdHRyaWJ1dGUgZmxvYXQgYV9hbmNob3I7dW5pZm9ybSB2ZWMzIHVfcmVzb2x1dGlvbjt1bmlmb3JtIG1hdDQgdV90cmFuc2Zvcm07dW5pZm9ybSBmbG9hdCB1X3pvb207dW5pZm9ybSBsb3dwIGZsb2F0IHVfaGl0VGVzdDt1bmlmb3JtIHNhbXBsZXIyRCB1X2FuY2hvclRleHR1cmU7dW5pZm9ybSBmbG9hdCB1X2FuY2hvclRleHR1cmVTaXplO3VuaWZvcm0gYm9vbCB1X3VzZUFuY2hvcjt1bmlmb3JtIGJvb2wgdV92aWV3SW5kZXBlbmRlbnQ7dW5pZm9ybSBib29sIHVfYWRhcHRpdmVTdHlsaW5nO3ZhcnlpbmcgZmxvYXQgdl9ib3JkZXJXaWR0aDt2YXJ5aW5nIHZlYzQgdl9zaGFwZVNpemU7dmFyeWluZyB2ZWM0IHZfdGV4Q29vcmQ7dmFyeWluZyB2ZWM0IHZfY29sb3VyO3ZhcnlpbmcgdmVjMyB2X2hpdFRlc3RDb2xvdXI7dmFyeWluZyB2ZWMyIHZfdGV4dHVyZUJhbms7dmFyeWluZyBmbG9hdCB2X3BpeGVsO3ZhcnlpbmcgdmVjMiB2X2RvbnV0U2VnbWVudDtpbnQgYShmbG9hdCBhKXtyZXR1cm4gaW50KGZsb29yKGErMC41KSk7fWZsb2F0IGIoZmxvYXQgYyl7dmVjMiBkPXZlYzIobW9kKGMsdV9hbmNob3JUZXh0dXJlU2l6ZSksZmxvb3IoYy91X2FuY2hvclRleHR1cmVTaXplKSk7ZCs9MC41O3ZlYzIgZT12ZWMyKGQvdV9hbmNob3JUZXh0dXJlU2l6ZSk7cmV0dXJuIHRleHR1cmUyRCh1X2FuY2hvclRleHR1cmUsZSkucjt9dmVjMiBmKGZsb2F0IGMpe3JldHVybiB2ZWMyKGIoYyksYihjKzEuMCkpO312ZWMyIGcodmVjMiBhKXtyZXR1cm4gZmxvb3IoYSswLjUpO312ZWMyIGgodmVjMiBpKXt2ZWMyIGo9aS91X3Jlc29sdXRpb24ueHk7dmVjMiBrPWoqMi4wO3JldHVybiBrLTEuMDt9dmVjMiBsKHZlYzIgaSl7aSs9MS4wO2kvPTIuMDtyZXR1cm4gaSp1X3Jlc29sdXRpb24ueHk7fXZlYzIgbSh2ZWMyIG4pe2Zsb2F0IG89bGVuZ3RoKG4qdV96b29tKTt2ZWMyIHA9bm9ybWFsaXplKG4pO3JldHVybiBwKihtYXgoMC4wLDIuMC1vKS91X3pvb20pO31mbG9hdCBtKGZsb2F0IHEpe2Zsb2F0IG89bGVuZ3RoKHEqdV96b29tKTtyZXR1cm4gbWF4KHEsKDIuMC1vKS91X3pvb20pO31mbG9hdCByKGZsb2F0IHEpe2Zsb2F0IG89cSp1X3pvb207cmV0dXJuIHNtb290aHN0ZXAoMi4wLDMuMCxvKTt9dmVjMiBzKGludCB0LGZsb2F0IHEpe3ZlYzIgcDtpZih0PT0wKXtwPW5vcm1hbGl6ZSh2ZWMyKC0xLjAsLTEuMCkpO31lbHNlIGlmKHQ9PTEpe3A9bm9ybWFsaXplKHZlYzIoMS4wLC0xLjApKTt9ZWxzZSBpZih0PT0yKXtwPW5vcm1hbGl6ZSh2ZWMyKC0xLjAsMS4wKSk7fWVsc2UgaWYodD09Myl7cD1ub3JtYWxpemUodmVjMigxLjAsMS4wKSk7fXJldHVybiBwKmxlbmd0aCh2ZWMyKHEpKTt9dm9pZCBtYWluKCl7dmVjNCB1PWFfY29sb3VyO2Jvb2wgdj1hKHVfaGl0VGVzdCk9PTE7Ym9vbCB3PWFfY2lyY2xlUmFkaXVzPjAuMDtmbG9hdCB4PWFfY2lyY2xlUmFkaXVzO2ludCB5PWEoYV90ZXh0dXJlQmFuay54KTtmbG9hdCB6PTAuMDtib29sIEE9ZmFsc2U7dmVjMiBCPWFfcG9zaXRpb24ueHk7dmVjMiBDPWFfcG9zaXRpb247ZmxvYXQgRDtmbG9hdCBFO2Zsb2F0IEY7ZmxvYXQgRzt2ZWMyIHA7aW50IHQ9YShhX3ZlcnRleEluZGV4KTtpZih3KXtpZih1X2FkYXB0aXZlU3R5bGluZyYmIXVfdmlld0luZGVwZW5kZW50KXt4PW0oeCk7fUQ9YWJzKHgpO0U9RDt9ZWxzZXtEPWFfdGV4Q29vcmQuei8yLjA7RT1hX3RleENvb3JkLncvMi4wO31GPUQqMi4wO0c9RyoyLjA7ZmxvYXQgSD0wLjA7aWYoeT4zKXtpZih1X2FkYXB0aXZlU3R5bGluZyYmIXVfdmlld0luZGVwZW5kZW50KXtDKz1tKEIpO31IPWFfd2lkdGg7Qys9cyh0LEgvdV96b29tKTt9ZWxzZSBpZigoeT4tMSYmeTwzKXx8eT09LTQpe3o9YWJzKGFfd2lkdGgpO0E9YSh6KT4wO2lmKHVfYWRhcHRpdmVTdHlsaW5nKXt1LmEqPXIobWluKEQsRSkpO319ZWxzZXtpZih1X2FkYXB0aXZlU3R5bGluZyYmIXVfdmlld0luZGVwZW5kZW50KXtDKz1tKEIpO316PWFicyhhX3dpZHRoKTtBPWEoeik+MDt9ZmxvYXQgST1jZWlsKHovMi4wKTtpZihBKXtpZih2KXtmbG9hdCBKPSg3LjAvdV96b29tKSpzaWduKGFfd2lkdGgpO3orPUo7SSs9Y2VpbChKLzIuMCk7fXZlYzIgSz1zKHQsSSk7Qys9SztGKz1hYnMoSy54KjIuMCk7Rys9YWJzKEsueSoyLjApO31pZih1X3VzZUFuY2hvciYmYV9hbmNob3I+LTAuNSl7ZmxvYXQgTD1iKGFfYW5jaG9yKzIuMCk7dmVjMiBNPXZlYzIoc2luKC1MKSxjb3MoLUwpKTt2ZWMyIE49dmVjMigoQy54Kk0ueSkrQy55Kk0ueCwoQy55Kk0ueSktQy54Kk0ueCk7Qz1OK2YoYV9hbmNob3IpO31pZih2KXtDKj0xLjAtc3RlcChhX2hpdFRlc3RDb2xvdXIueCthX2hpdFRlc3RDb2xvdXIueSthX2hpdFRlc3RDb2xvdXIueiwwLjApO31nbF9Qb3NpdGlvbj11X3RyYW5zZm9ybSp2ZWM0KGgoQykqdmVjMigxLC0xKSwwLDEpO2lmKEEmJiF3KXt2ZWMyIE89Z2xfUG9zaXRpb24ueHk7Tz1sKE8pO089ZyhPKTtnbF9Qb3NpdGlvbi54eT1oKE8pO312X3RleENvb3JkPWFfdGV4Q29vcmQ7dl9jb2xvdXI9dTt2X2hpdFRlc3RDb2xvdXI9YV9oaXRUZXN0Q29sb3VyO3ZfdGV4dHVyZUJhbms9YV90ZXh0dXJlQmFuaztmbG9hdCBQPSh6LzIuMCkqc2lnbihhX2NpcmNsZVJhZGl1cyk7aWYodyl7ZmxvYXQgUT0oeCtQKSoyLjA7dl9zaGFwZVNpemU9dmVjNChRLFEsRixGKTt9ZWxzZXt2X3NoYXBlU2l6ZT12ZWM0KC1hX3RleENvb3JkLnorUCxhX3RleENvb3JkLnctUCwtYV90ZXhDb29yZC56K0kqc2lnbihhX2NpcmNsZVJhZGl1cyksYV90ZXhDb29yZC53LUkqc2lnbihhX2NpcmNsZVJhZGl1cykpO312X2JvcmRlcldpZHRoPXoqc2lnbihhX3dpZHRoKTt2X3BpeGVsPSgxLjAvKGFfY2lyY2xlUmFkaXVzKjIuMCkpL3Vfem9vbTt2X2RvbnV0U2VnbWVudD12ZWMyKGFfc3RhcnRBbmdsZSxhX2VuZEFuZ2xlKTt9",Fg="CiNpZmRlZiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMKCiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlCgojZW5kaWYKcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O3VuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2U7dW5pZm9ybSBmbG9hdCB1X2dsb2JhbEFscGhhO3ZhcnlpbmcgdmVjMiB2X3RleENvb3JkO3ZvaWQgbWFpbigpe2dsX0ZyYWdDb2xvcj10ZXh0dXJlMkQodV9pbWFnZSx2X3RleENvb3JkKSp1X2dsb2JhbEFscGhhO30=",zg="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247YXR0cmlidXRlIHZlYzIgYV90ZXhDb29yZDt2YXJ5aW5nIHZlYzIgdl90ZXhDb29yZDt2b2lkIG1haW4oKXtnbF9Qb3NpdGlvbj12ZWM0KGFfcG9zaXRpb24sMC4wLDEuMCk7dl90ZXhDb29yZD1hX3RleENvb3JkO30=",Dg={};Dg["line-arc-vertex"]=Lg;Dg["line-fragment"]=Bg;Dg["line-vertex"]=Gg;Dg["triangle-fragment"]=Zg;Dg["triangle-vertex"]=Og;Dg["renderToTexture-fragment"]=Fg;Dg["renderToTexture-vertex"]=zg;function Yg(e,t){for(var n=["webgl","experimental-webgl"],r=null,i=0;i<n.length;i++){try{r=e.getContext(n[i],t)}catch(e){}if(r)break}return r}function Vg(e){return Yg(document.createElement("canvas"),e)}function Pg(e,t,n){var r=Ug(e,[t,n]);r.vertexShader=t;r.fragmentShader=n;return r}function Wg(e,t){e.useProgram(t);e.bindBuffer(e.ARRAY_BUFFER,null);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);e.bindRenderbuffer(e.RENDERBUFFER,null);e.bindFramebuffer(e.FRAMEBUFFER,null)}function Xg(){var e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),t=1;function n(n){t=n;e[0]*=n;e[4]*=n;e[8]*=1;e[1]*=n;e[5]*=n;e[9]*=1;e[2]*=n;e[6]*=n;e[10]*=1;e[3]*=n;e[7]*=n;e[11]*=1}function r(){return t}function i(t,n){e[12]+=e[0]*t+e[4]*n;e[13]+=e[1]*t+e[5]*n;e[14]+=e[2]*t+e[6]*n;e[15]+=e[3]*t+e[7]*n}function o(){return e}return{get:o,getZoomLevel:r,pan:i,zoom:n}}function Ng(e,t,n){var r=e.createShader(n),i=atob(Dg[t]);e.shaderSource(r,i);e.compileShader(r);if(!e.getShaderParameter(r,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(r);e.deleteShader(r);throw new Error("Error in shader: "+o)}return r}function Ug(e,t){for(var n=e.createProgram(),r=0;r<t.length;++r)e.attachShader(n,t[r]);e.linkProgram(n);if(!e.getProgramParameter(n,e.LINK_STATUS)){var i=e.getProgramInfoLog(n);e.deleteProgram(n);throw new Error("Error in program linking:"+i)}return n}var Kg="undefined"!=typeof window,jg=!1,Hg=!1;function _g(){jg=!0}function Qg(e,t){return e.some(function(e){return t.indexOf(e)>-1})}function Jg(){if(Hg)return!jg;if(Kg){var e="file:"!==document.location.protocol,t=["Google SwiftShader","Microsoft Basic Render Driver","VirtualBox","Parallels","VMware"],n=["VMware","VirtualBox"],r=["OES_standard_derivatives","OES_element_index_uint","ANGLE_instanced_arrays"],i=Vg({failIfMajorPerformanceCaveat:!0}),o=void 0;if(e=e&&!!i){var a=i.getSupportedExtensions(),u={};for(o=0;o<a.length;o++)u[a[o]]=!0;for(o=0;e&&o<r.length;o++)e=e&&u[r[o]]}if(e){var s=i.getExtension("WEBGL_debug_renderer_info");if(s){var f=i.getParameter(s.UNMASKED_VENDOR_WEBGL),l=i.getParameter(s.UNMASKED_RENDERER_WEBGL);e=!(Qg(n,f)||Qg(t,l))}s=null}i=null;jg=jg||!e;Hg=!0;return e}return!jg}var qg={longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ampm:["AM","PM"],quarter:"Q",half:"H"},$g=[31,28,31,30,31,30,31,31,30,31,30,31],ep={milli:0,sec:1,min:2,hour:3,day:4,week:5,month:6,year:7};function tp(e,t){return t?e-e%t:0}function np(e){if(e<ep.milli||ep.year<e)throw new Error("bad unit range")}function rp(e,t){return 1===e&&ip(t)?29:$g[e]}function ip(e){return 1===new Date(e,1,29).getMonth()}function op(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function ap(e){var t=new Date(e);return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())}function up(e,t,n){np(t);var r=new Date(e);t>ep.milli&&r.setUTCMilliseconds(0);t>ep.sec&&r.setUTCSeconds(0);t>ep.min&&r.setUTCMinutes(0);t>ep.hour&&r.setUTCHours(0);t>=ep.month&&r.setUTCDate(1);t>=ep.year&&r.setUTCMonth(0);switch(t){case ep.milli:r.setUTCMilliseconds(tp(r.getUTCMilliseconds(),n));break;case ep.sec:r.setUTCSeconds(tp(r.getUTCSeconds(),n));break;case ep.min:r.setUTCMinutes(tp(r.getUTCMinutes(),n));break;case ep.hour:r.setUTCHours(tp(r.getUTCHours(),n));break;case ep.day:break;case ep.week:var i=r.getUTCDay(),o=i>=1?i-1:6;r.setTime(r.getTime()-24*o*60*60*1e3);break;case ep.month:r.setUTCMonth(tp(r.getUTCMonth(),n));break;case ep.year:r.setUTCFullYear(tp(r.getUTCFullYear(),n))}return r.getTime()}function sp(e,t,n){np(t);if(t<=ep.week){var r=n;t>ep.milli&&(r*=1e3);t>ep.sec&&(r*=60);t>ep.min&&(r*=60);t>ep.hour&&(r*=24);t>ep.day&&(r*=7);return e+r}var i=new Date(e);switch(t){case ep.month:var o=i.getUTCMonth()+n,a=o%12,u=Math.floor(o/12);a<0&&(a+=12);var s=i.getUTCDate();s=Math.min(s,rp(a,i.getUTCFullYear()+u));i.setUTCDate(s);i.setUTCMonth(a);0!==u&&i.setTime(sp(i.getTime(),ep.year,u));break;case ep.year:if(1===i.getUTCMonth()&&29===i.getUTCDate()){ip(i.getUTCFullYear()+n)||i.setTime(sp(i.getTime(),ep.day,-1))}i.setUTCFullYear(i.getUTCFullYear()+n)}return i.getTime()}function fp(e){for(var t=""+e;t.length<2;)t="0"+t;return t}var lp=new RegExp("(f?f?f)|(s?s)|(m?m)|(h?h)|(H?H)|(t?t?t)|(d?d?d?d)|(M?M?M?M?M)|(Q?Q)|yyyy|yy","gm"),cp={f:function(e){return Math.floor(e.getUTCMilliseconds()/100)},ff:function(e){return fp(Math.floor(e.getUTCMilliseconds()/10))},fff:function(e){return fp(Math.floor(e.getUTCMilliseconds()))},s:function(e){return e.getUTCSeconds()},ss:function(e){return fp(e.getUTCSeconds())},m:function(e){return e.getUTCMinutes()},mm:function(e){return fp(e.getUTCMinutes())},h:function(e){return e.getUTCHours()%12||12},hh:function(e){return fp(e.getUTCHours()%12||12)},H:function(e){return e.getUTCHours()},HH:function(e){return fp(e.getUTCHours())},t:function(e,t){return t.ampm[Math.floor(e.getUTCHours()/12)].charAt(0)},
tt:function(e,t){return t.ampm[Math.floor(e.getUTCHours()/12)]},ttt:function(e,t){var n=Math.floor(e.getUTCHours()/12);return t.ampm[n+2]||t.ampm[n]},d:function(e){return e.getUTCDate()},dd:function(e){return fp(e.getUTCDate())},ddd:function(e,t){return t.shortDays[e.getUTCDay()]},dddd:function(e,t){return t.longDays[e.getUTCDay()]},M:function(e){return e.getUTCMonth()+1},MM:function(e){return fp(e.getUTCMonth()+1)},MMM:function(e,t){return t.shortMonths[e.getUTCMonth()]},MMMM:function(e,t){return t.longMonths[e.getUTCMonth()]},MMMMM:function(e,t){return t.shortMonths[e.getUTCMonth()].substr(0,1)},Q:function(e,t){var n=e.getUTCMonth(),r=Math.floor(n/3)+1;return t.quarter+r},QQ:function(e,t){var n=e.getUTCMonth(),r=Math.floor(n/6)+1;return t.half+r},yyyy:function(e){return e.getUTCFullYear()},yy:function(e){return fp(e.getUTCFullYear()%100)}};function dp(e,t,n){var r="number"==typeof e?new Date(e):e;return t.replace(lp,function(e){return cp[e](r,n||qg)})}var hp="(?::)?",vp="(?:-|$)";new RegExp("^(\\d{4})"+vp+"(\\d{2})?"+vp+"(\\d{2})?"+"(?:T|$)"+"(\\d{2})?"+hp+"(\\d{2})?"+hp+"(\\d{2})?(?:Z)?(\\+|-)?(\\d{2})?"+hp+"(\\d{2})?");function gp(e){var t;e instanceof Date?t=op(e):"number"==typeof e&&(t=Math.round(e));return t}var pp=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],mp="rgba(32, 32, 200, 0.67)";function yp(e){for(var t=[],n=0;n<e.length;n++)t[n]=cn(e[n],.8);return t}function bp(){var e=ep,t={fontFamily:"sans-serif",fontSize:12},r={colours:["backColour","fontColour","sliderColour","sliderLineColour"]};function i(e,t){return dp(e,t,m.options.locale)}function o(t,n){var r=new Date(sp(t,e.year,n-1));return i(t,"yyyy - ")+i(r,"yyyy")}function u(e){return o(e,10)}function s(e){return o(e,50)}function f(e){return i(e,"yyyy")+"s"}function l(e){return i(e,"dmy"===m.options.locale.order?"d MMM yyyy":"MMM d, yyyy")}function c(e){return i(e,m.options.locale.h12?"h:mm tt":"HH:mm")}function d(e){return i(e,m.options.locale.h12?"h:mm:ss tt":"HH:mm:ss")}function h(e,t){if("histogram"===e){if("object"!=typeof t||!t)return!1;var n=t;if(n.colour&&("string"!=typeof n.colour||!Ht(n.colour)))return!1;if(n.highlightColour&&("string"!=typeof n.highlightColour||!Ht(n.highlightColour)))return!1}if("maxRange"===e&&"string"==typeof t)return"auto"===t;if("maxRange"===e||"minScale"===e){var i=["sec","min","hour","day","week","month","year"],o=t;return!!o.value&&"number"==typeof o.value&&!!o.units&&-1!==i.indexOf(o.units)}return!K(r.colours,e)||"string"==typeof t&&Ht(t)}function v(e){if(I(e)){var t=e;"string"!=typeof t.groupBy&&null!==t.groupBy||(m.options.groups.groupBy=t.groupBy);null===t.categories?m.options.groups.categories=null:Array.isArray(t.categories)&&(t.categories.some(function(e){return!("string"==typeof e||"number"==typeof e)})||(m.options.groups.categories=t.categories));if(Array.isArray(t.colours)&&t.colours.length){if(!t.colours.some(function(e){return!("string"==typeof e&&Ht(e))})){m.options.groups.colours=t.colours;m.computedGroupColours=t.colours}}else if(null===t.colours){m.options.groups.colours=null;m.computedGroupColours=pp}Array.isArray(t.hiColours)&&t.hiColours.length?t.hiColours.some(function(e){return!("string"==typeof e&&Ht(e))})||(m.options.groups.hiColours=t.hiColours):null===t.hiColours&&(m.options.groups.hiColours=null);m.computedGroupHiColours=m.options.groups.hiColours||yp(m.computedGroupColours)}}function g(e,n){"fontFamily"===e&&(m.options.fontFamily="string"==typeof n&&Pn(n)||t.fontFamily);if("fontSize"===e){var r=+n;b(r)&&r>0&&(m.options.fontSize=r)}}function p(e){e.showPlay?m.playingExtend=!1:e.showExtend?m.playingExtend=!1:m.playingExtend=null}var m={displayTime:function(e,t){return A(t)?t(e):i(e,t)},baseRangeLimits:{max:315576e7,min:3e3},options:{_area:{stdDev:7},area:{colour:mp},scale:{highlightColour:"#F2F2F2",showMajor:!0,showMinor:!0},backColour:"#FFFFFF",fontColour:Pt.grey,fontFamily:t.fontFamily,fontSize:t.fontSize,groups:{groupBy:null,categories:null,colours:null,hiColours:null},showControlBar:!0,showPlay:!0,showExtend:!1,showFit:!0,sliderColour:"rgba(255, 255, 255, 0.6)",sliderLineColour:"#bbb",sliders:"fixed",maxRange:"auto",minRange:3e3,minScale:{units:"sec",value:1},_showShadowCanvas:!1,histogram:{colour:"#d0d0d0",highlightColour:"#a9a9a9",markColour:"#ea7378",markHiColour:"#e03038"},heightChange:{animate:!0,time:200},locale:z(qg,{order:"mdy",h12:!0}),playSpeed:60,type:"histogram"},getOptions:function(){return a(m.options,!0)},setOptions:function(e){if(I(e)){var r=e;p(r);n(r,function(e,n){if(Y(m.options,n)){var r=n;if(r in t)g(r,e);else if("groups"===r)v(e);else{var i=e;I(m.options[r])&&(i=z(e,m.options[r]));h(r,i)&&(m.options[r]=i)}}})}},hoverTime:50,defaultAnimationTime:200,sliderReleaseTime:200,doubleClickZoomTime:500,doubleClickZoomTimeFree:250,playingExtend:!1,defaultPlaySpeed:60,bars:{defaultFontSize:t.fontSize,major:{height:19,textbase:3,tickHeight:10},minor:{height:17,textbase:0,tickHeight:8}},grip:{lines:2,space:4,length:14,margin:2},controlbar:{height:30,space:4,colour:"#ddd"},fixedSideFactor:.5,freeSideFactor:.2,histogram:{dy:2,topdy:16,bardx:1,minwidth:11},computedGroupColours:pp,computedGroupHiColours:yp(pp),selection:{maxNumber:3,reducingFactor:.75,dotsize:3.5},rates:[{max:6,major:{units:e.sec,by:2,f:l},minor:{units:e.sec,by:1,f:d}},{max:15,major:{units:e.sec,by:5,f:l},minor:{units:e.sec,by:1,f:d}},{max:24,major:{units:e.sec,by:10,f:l},minor:{units:e.sec,by:2,f:d}},{max:60,major:{units:e.sec,by:15,f:l},minor:{units:e.sec,by:5,f:d}},{max:120,major:{units:e.sec,by:30,f:l},minor:{units:e.sec,by:10,f:d}},{max:360,major:{units:e.min,by:1,f:l},minor:{units:e.sec,by:30,f:d}},{max:1e3,major:{units:e.min,by:5,f:l},minor:{units:e.min,by:1,f:c}},{max:5e3,major:{units:e.min,by:15,f:l},minor:{units:e.min,by:5,f:c}},{max:15e3,major:{units:e.hour,by:1,f:l},minor:{units:e.min,by:15,f:c}},{max:6e4,major:{units:e.hour,by:6,f:l},minor:{units:e.hour,by:1,f:c}},{max:12e4,major:{units:e.day,by:1,f:l},minor:{units:e.hour,by:2,f:c}},{max:18e4,major:{units:e.day,by:1,f:l},minor:{units:e.hour,by:3,f:c}},{max:36e4,major:{units:e.day,by:1,f:l},minor:{units:e.hour,by:6,f:c}},{max:72e4,major:{units:e.day,by:1,f:l},minor:{units:e.hour,by:12,f:"ttt"}},{max:5e6,major:{units:e.week,by:1,f:function(t){var n,r,o=new Date(t),a=new Date(sp(t,e.day,6)),u="dmy"===m.options.locale.order;if(o.getUTCFullYear()===a.getUTCFullYear())if(o.getUTCMonth()===a.getUTCMonth()){n=u?"d - ":"MMM d - ";r=u?"d MMM yyyy":"d, yyyy"}else{n=u?"d MMM - ":"MMM d - ";r=u?"d MMM yyyy":"MMM d, yyyy"}else{n=u?"d MMM yyyy - ":"MMM d, yyyy - ";r=u?"d MMM yyyy":"MMM d, yyyy"}return i(o,n)+i(a,r)}},minor:{units:e.day,by:1,f:"d"}},{max:15e6,major:{units:e.month,by:1,f:"MMMM yyyy"},minor:{units:e.week,by:1,f:function(t){var n=sp(t,e.day,6);return i(t,"d - ")+i(n,"d")}}},{max:3e7,major:{units:e.month,by:3,f:"Q  yyyy"},minor:{units:e.month,by:1,f:"MMMM"}},{max:75e6,major:{units:e.month,by:3,f:"Q  yyyy"},minor:{units:e.month,by:1,f:"MMM"}},{max:1e8,major:{units:e.month,by:3,f:"Q  yyyy"},minor:{units:e.month,by:1,f:"MMMMM"}},{max:2e8,major:{units:e.month,by:6,f:"QQ  yyyy"},minor:{units:e.month,by:1,f:"MMMMM"}},{max:36e7,major:{units:e.year,by:1,f:"yyyy"},minor:{units:e.month,by:3,f:"Q"}},{max:6e8,major:{units:e.year,by:1,f:"yyyy"},minor:{units:e.month,by:6,f:"QQ"}},{max:15e8,major:{units:e.year,by:10,f:u},minor:{units:e.year,by:1,f:"'yy"}},{max:25e8,major:{units:e.year,by:10,f:u},minor:{units:e.year,by:2,f:"'yy"}},{max:35e8,major:{units:e.year,by:10,f:u},minor:{units:e.year,by:5,f:"'yy"}},{max:115e8,major:{units:e.year,by:50,f:s},minor:{units:e.year,by:10,f:"'yy"}},{max:2e10,major:{units:e.year,by:50,f:s},minor:{units:e.year,by:25,f:"'yy"}},{max:35e9,major:{units:e.year,by:100,f:f},minor:{units:e.year,by:25,f:"'yy"}},{max:8e10,major:{units:e.year,by:100,f:f},minor:{units:e.year,by:50,f:"'yy"}},{max:16e10,major:{units:e.year,by:200,f:"yyyy"},minor:{units:e.year,by:100,f:""}},{max:4e11,major:{units:e.year,by:500,f:"yyyy"},minor:{units:e.year,by:100,f:""}},{max:1/0,major:{units:e.year,by:500,f:""},minor:{units:e.year,by:100,f:""}}]};return m}function xp(e,t,n){var r=[];e(function(e){if(e.startTotals.length){var i=e.startTotals[n]-e.endTotals[t];r.push(i)}});return r}function wp(e,t,n,r,i,o){e(function(e,a){if(e){var u=e.startTotals[i]-e.endTotals[r];t.selvalues[a][n]=u;u>t.maxselvalue&&!o&&(t.maxselvalue=u)}})}function Ap(e,t,n,r,i,o,a,u){var s,f,l=n.histogram,c=up(t.t1,l.units,l.by),d=r(c),h=0;e.bars=[];e.maxvalue=0;e.maxselvalue=0;a(function(t,n){e.hasSel[n]=!!t;e.selvalues[n]=e.selvalues[n]||[]});do{f=c>t.t2;var v=i(c),g=c,p=xp(o,d,s=r(c=sp(c,l.units,l.by))),m=p.reduce(function(e,t){return e+t},0);m>e.maxvalue&&!f&&(e.maxvalue=m);var y=Mp(u,g,c);wp(a,e,h,d,s,f);e.bars.push({x:v,mark:y,groupValues:p,value:m});h++;d=s}while(!f);e.count=h-1}function Mp(e,t,n){return e.some(function(e){if(I(e)){var r=e;if(!V(r.dt1)&&!V(r.dt2)){var i=gp(r.dt1),o=gp(r.dt2);if(i<n&&o>t)return!0}}else{var a=gp(e);if(a>=t&&a<n)return!0}return!1})}function Ip(e,t,n,r,i,o){var a,u,s,f,l,c=[],d=e*t,h=sp(r.t1,ep.milli,-d),v=sp(r.t2,ep.milli,d),g=h,p=i(g);function m(e){s+=e.startTotals[u]-e.endTotals[u];f+=e.startTotals[u]-e.startTotals[p];l+=e.endTotals[u]-e.endTotals[p]}do{a=g>v;g=sp(g,ep.milli,e/n);u=i(g);s=0;f=0;l=0;o(m);c.push({t:g,startValue:f,endValue:l,solidValue:s});p=u}while(!a);return c}var Ep=8,Cp=null,Sp=null,kp=null;function Rp(e,t,n){for(var r=[],i=0;i<2*n;i++){var o=(i-n)*e/Ep;r.push(Math.exp(-o*o/t))}return r}function Tp(e,t,n,r,i,o,a,u){var s,f=1,l=n.timeRate*f,c=t.t1,d=0,h=0,v=e.options._area.stdDev,g=Math.ceil(4*v),p=g*Ep,m=Ip(l,g,Ep,t,r,o);if(v!==Sp||l!==Cp){var y=n.timeRate*v*2*(n.timeRate*v);kp=Rp(l,y,p);Cp=l;Sp=v}do{s=c>t.t2;var b=i(c);c=sp(c,ep.milli,l);for(var x=0,w=p+d*Ep,A=Math.max(0,w-p),M=Math.min(m.length,w+p),I=A;I<M;I++){var E=m[I],C=void 0;C=I<=w?E.endValue:E.startValue;x+=kp[I-w+p]*C}x+=m[w].solidValue;x>h&&!s&&(h=x);a(d,b,x);d++}while(!s);u(d-1,h)}function Lp(e,t,n,r,i,o,a,u){function s(t,n,r){e.bars.push({x:n,value:r})}function f(t,n){e.count=t;e.maxvalue=n}u(function(t,n){e.hasSel[n]=!!t;e.selvalues[n]=e.selvalues[n]||[]});e.bars=[];Tp(t,n,r,i,o,a,s,f);function l(t){return function(n,r,i){e.selvalues[t][n]=i}}function c(t){return function(t,n){n>e.maxselvalue&&(e.maxselvalue=n)}}e.maxselvalue=0;u(function(e,a){e&&Tp(t,n,r,i,o,function(t){return t(e)},l(a),c(a))})}function Bp(e){return e.t<=e.other}function Gp(e){return e.t>=e.other}function Zp(){return{startTotals:[0],endTotals:[0]}}function Op(e,t){var r,i,o=0,u=0,s=t.rates,f=[],l={named:new Map,other:Zp()},c=[],d={t1:0,t2:0},h={t1:0,t2:0},v={},g={t1:0,t2:0},p=[],m=[],y=null,x=[1,1e3,6e4,36e5,864e5,6048e5,2592e6,31536e6];function w(){e.privateTrigger("redraw")}function A(e,t,n,o){d.t1=e;d.t2=t;h.t1=n;h.t2=o;if(r){i=R(h);w()}ue=!0;fe=!0}function M(e,n){return x[e.units]*e.by/n>=t.histogram.minwidth}function E(){return t.options.fontSize/t.bars.defaultFontSize}function C(e){for(var t=E(),n=0;s[n].max<e*t&&n<s.length;)n++;return n}function S(e,t){for(var n=ep[e],r=0;r<s.length;r++){var i=s[r].minor;if(i.units>n||i.units===n&&i.by>=t)return r>0?r-1:r}return s.length-2}function k(){var e=0;if(B()){var n=T(t.options.minScale);e=S(n.units,n.value)}return e}function R(e){for(var t=(e.t2-e.t1)/(r.x2-r.x1),n=C(t),i=k(),o=s[n=n<=i?i+1:n].major,a=s[n].minor;n>0&&M(s[n-1].minor,t)&&n-1>i;)n--;return{histogram:s[n].minor,major:o,minor:a,timeRate:t}}function T(e){return{units:Y(ep,e.units)?e.units:ep.sec,value:b(e.value)?Math.round(Math.abs(e.value)):1}}function L(e){return{units:Y(ep,e.units)?e.units:ep.sec,value:b(e.value)?Math.round(Math.abs(e.value)):t.baseRangeLimits.max}}function B(){return!!t.options.minScale}function G(){return"auto"!==t.options.maxRange}function Z(e){return t.options.sliders===e}function F(){var e,n=k(),r=s[n].max;if(Z("fixed"))e=o/(1+t.freeSideFactor);else if(Z("free")){r=1;var i=s[n+1].minor;e=x[i.units]*i.by}else e=o;return Math.round(r*e)}function z(){y=null;for(var e=0;e<p.length;e++){m[e]=null;p[e]=null}m.length=0;p.length=0}function D(e){c=[];for(var t,n=0;n<e.length;n++){var r=e[n];if(I(r)){var i="dt1"in r,o="dt2"in r;if(!i&&!o)throw new Error("mark: TimePeriod object must have a dt1 or dt2 property.");t=r;var u=i?Ce(t.dt1):-1/0;if((o?Ce(t.dt2):1/0)<u)throw new Error("mark: TimePeriod dt2 time must be after dt1 time.")}else t=r;c.push(a(t))}}function P(e){y=e;var n,r;for(n=0;n<e.length;n++){var i=e[n].index||0;if(i<t.selection.maxNumber&&e[n].id){var o=O(e[n].id);if(o.length){p[i]=J(o);m[i]={startTotals:[],endTotals:[]};var a=0,u=0;for(r=0;r<f.length;r++){var s=f[r];m[i].startTotals[r]=a;m[i].endTotals[r]=u;if(s.id in p[i]){Bp(s)&&(a+=s.v);Gp(s)&&(u+=s.v)}}m[i].startTotals[r]=a;m[i].endTotals[r]=u;W(i,e[n].c)}else if(!o.length&&m[i]){m[i]=null;p[i]=null}}}}function W(e,n){var r={colour0:"rgb(114, 179, 0)",colour1:"rgb(255, 153, 0)",colour2:"rgb(178, 38, 9)"}["colour"+e];n&&Ht(n)&&(r=n);t.selection["colour"+e]=r}function X(e){for(var t=0,n=f.length;t<n;){var r=Math.floor((t+n)/2),i=f[r].t;i!==e||Bp(f[r])||i--;i<e?t=r+1:n=r}return t}function N(e){return r.x1+(e-h.t1)/pe()}function U(e){return h.t1+(e-r.x1)*pe()}function K(e){return e>=r.bars.major.y1?"major":e>=r.bars.minor.y1?"minor":"histogram"}function j(e,t,n){var r,i=n||K(t),o=U(e);ie(i,function(e,t){if(t>o){r={t1:e,t2:t,bar:i};return!0}return!1});return r}function H(e,t){var r,i,o=X(e),a=X(t),u={},s={};for(r=0;r<o;r++)(i=f[r]).t!==i.other&&(s[i.id]=(s[i.id]||0)+(i.t<i.other?1:-1));n(s,function(e,t){e>0&&(u[t]=!0)});for(r=o;r<a;r++)u[f[r].id]=!0;return Object.keys(u)}function _(){var e=t.options.groups;return!(!e.groupBy||!e.categories)}function Q(e,t,n,r){for(var i=X(e),o=X(t),a=i;a<o;a++){var u=f[a];if(n?Bp(u):Gp(u)){var s=u.id;v[s]=(v[s]||0)+r}}}function $(){var e=d.t1,t=d.t2,n=g.t1,r=g.t2;e<n?Q(e,n,!1,1):e>n&&Q(n,e,!1,-1);t>r?Q(r,t,!0,1):t<r&&Q(t,r,!0,-1);g.t1=e;g.t2=t}function ee(){var e=re(),n=e?2*(e.t2-e.t1):t.baseRangeLimits.max,r=t.baseRangeLimits.min;B()?r=F():t.options.minRange&&(r=Math.max(r,t.options.minRange));if(G()){var i=L(t.options.maxRange),o=ep[i.units];n=i.value*x[o]}else n=Math.max(n,Math.floor(4*r));return{max:n,min:r=Math.min(r,Math.floor(n/4))}}function te(){var e=0,n=o,i=t.options.showControlBar?t.controlbar.height:0,a=E(),s=t.options.scale.showMinor?t.bars.minor.height*a:0,f=t.options.scale.showMajor?t.bars.major.height*a:0,l=u-i,c=l-f,d=c-s,h=d-t.histogram.dy,v=h-t.histogram.topdy,g=v*t.selection.reducingFactor;r={bars:{major:{y1:c,y2:l},minor:{y1:d,y2:c}},histogram:{ybase:h,maxbarh:v,maxselh:g},x1:e,y1:d,x2:n,y2:l,width:o,height:u}}function re(){if(f.length>0){for(var e=0;f[e].t===-1/0;)e++;for(var t=f[e].t,n=f.length-1;f[n].t===1/0;)n--;return{t1:t,t2:f[n].t+1}}}function ie(e,t){var n,r=i[e],o=up(h.t1,r.units,r.by),a=!1;do{a=t(o,n=sp(o,r.units,r.by),N(o),N(n),r.f);o=n}while(!a&&o<=h.t2)}var oe={count:0,bars:[],hasSel:[],selvalues:[],maxvalue:0,maxselvalue:0},ue=!0,se={bars:[],count:0,hasSel:[],maxselvalue:0,maxvalue:0,selvalues:[]},fe=!0;function le(){if(ue){Ap(oe,h,i,X,N,et,tt,c);ue=!1}return oe}function de(){if(fe){Lp(se,t,h,i,X,N,et,tt);fe=!1}return se}function he(){return r}function ve(){return d}function ge(){return h}function pe(){return i.timeRate}function me(e){var t=d.t1,n=d.t2,r="back"===e?-1:1,i=ep.month;if(t===up(t,i,1)&&n===up(n,i,1)){var o=new Date(t),a=new Date(n),u=12*(a.getUTCFullYear()-o.getUTCFullYear())+(a.getUTCMonth()-o.getUTCMonth());t=sp(t,i,r*u);n=sp(n,i,r*u)}else{var s=r*(n-t);t+=s;n+=s}return{t1:t,t2:n}}function ye(){return f}function be(n){var r=re();r&&d.t1>=r.t1&&n<=r.t1&&!t.playingExtend&&e.trigger("start","data")}function xe(t){var n=re();n&&d.t2<=n.t2&&t>=n.t2&&e.trigger("end","data")}function we(e,t){"t1"===e?be(t):xe(t);d[e]=t}function Ae(e){var t,n;if("t1"===e){t=h.t1;n=d.t2}else{t=d.t1;n=h.t2}if(Z("fixed")){var r=n-t,i=Math.floor(.1*r);t+=i;n-=i}var o=ee();if("t1"===e){t=Math.max(t,d.t2-o.max);n=Math.min(n,d.t2-o.min)}else{t=Math.max(t,d.t1+o.min);n=Math.min(n,d.t1+o.max)}var a=re();a&&("t1"===e?n=Math.min(n,a.t2):t=Math.max(t,a.t1));return{min:t,max:n}}function Me(){return f.length>0}function Ie(e,t,n){var r,i=e,o=t,a=re(),u=n?(i+o)/2:(d.t1+d.t2)/2,s=ee(),f=o-i;if(f>s.max){i=Math.ceil(u-s.max/2);o=Math.floor(u+s.max/2)}else if(f<s.min){i=Math.floor(u-s.min/2);o=Math.ceil(u+s.min/2)}if(a)if(o<a.t1){i+=r=a.t1-o;o+=r}else if(i>a.t2){i-=r=i-a.t2;o-=r}return{t1:i,t2:o}}function Ee(e,t){return e>=r.x1&&e<=r.x2&&t>=0&&t<=r.y2}function Ce(e){var t=gp(e);if(!b(t))throw new Error("load: invalid date in dt property. Value was: "+e);return t}function Se(e){for(var t=[],n=O(e),r=0;r<n.length;r++){var i=n[r];if("object"==typeof i&&i){var o=i;if(o.id&&o.dt)for(var a=""+o.id,u=O(o.dt),s=void 0===o.v?void 0:O(o.v),f=I(o.d)?{d:o.d}:{},l=0;l<u.length;l++){var c=u[l],d=s&&s[l]||1;if(!b(d))throw new Error("load: invalid value in v property - must be numeric. Value was: "+d);if("object"!=typeof c||c instanceof Date){var h=Ce(c);t.push(ne({id:a,t:h,v:d,other:h},f))}else{var v=null!==c&&"dt1"in c,g=null!==c&&"dt2"in c;if(!c||!v&&!g)throw new Error("load: TimePeriod object must have a dt1 or dt2 property. Id was: "+a);var p=c,m=v?Ce(p.dt1):-1/0,y=g?Ce(p.dt2):1/0;if(y<m)throw new Error("load: TimePeriod dt2 time must be after dt1 time. Id was: "+a);t.push(ne({id:a,t:m,v:d,other:y},f));y!==m&&t.push(ne({id:a,t:y,v:d,other:m},f))}}}}return t.sort(Ge)}function ke(e,t,n,r,i){e.startTotals[t+1]=e.startTotals[t]+(n?i:0);e.endTotals[t+1]=e.endTotals[t]+(r?i:0)}function Re(e,n){var r=t.options.groups.categories,i=!1,o=Bp(e),a=Gp(e);if(_())for(var u=0;u<r.length;u++){var s=r[u],f=t.options.groups.groupBy,c=!(!e.d||e.d[f]!==s);i=i||c;ke(l.named.get(s),n,o,a,c?e.v:0)}ke(l.other,n,o,a,i?0:e.v)}function Te(e){var t=Bp(e),n=Gp(e),r=0;t&&e.t<d.t2&&(r=1);n&&e.t<d.t1&&(r-=1);0!==r&&(v[e.id]=(v[e.id]||0)+r)}function Le(){y&&P(y);v={};l.named=new Map;l.other=Zp();_()&&t.options.groups.categories.forEach(function(e){l.named.set(e,Zp())});for(var e=0;e<f.length;e++){var n=f[e];Te(n);Re(n,e)}g.t1=d.t1;g.t2=d.t2;var r=Ie(g.t1,g.t2,!0);w();return r}function Be(e,t){return e===t?0:e===1/0||t===-1/0?1:e===-1/0||t===1/0?-1:e-t}function Ge(e,t){var n=e.t===t.t?Be(e.other,t.other):Be(e.t,t.t);0===n&&(n=e.id===t.id?e.v-t.v:e.id>t.id?1:-1);return n}function Ze(e){var t=(e||{}).items;f=Se(t);z();c=[];return Le()}function Oe(e,t){for(var n=[],r=0,i=0;r<e.length&&i<t.length;){var o=Ge(e[r],t[i]);if(0===o){n.push(e[r]);r++;i++}else if(o<0){n.push(e[r]);r++}else{n.push(t[i]);i++}}for(;r<e.length;){n.push(e[r]);r++}for(;i<t.length;){n.push(t[i]);i++}return n}function Fe(e){var t=Se(e);if(t.length>0){f=0===f.length?t:t[0].t>f[f.length-1].t?f.concat(t):t[t.length-1].t<f[0].t?t.concat(f):Oe(f,t);Le()}}function ze(e){var t=q(e);f=f.filter(function(e){return!t.has(e.id)});Le()}function De(e,t){var n=d.t1,r=d.t2;Xe(n+(t?0:e),r+e);return n!==d.t1||r!==d.t2}function Ye(e){var t=V(e)?e:O(e);if(t){t.length?D(t):c=[];ue=!0;w()}return c}function Ve(e){var t=V(e)?e:O(e);t&&(t.length?P(t):z());fe=!0;ue=!0;w();for(var n=[],r=0;r<p.length;r++){var i=p[r];n[r]=i?Object.keys(i):null}return n}function Pe(e,t){var n=(e.t2-e.t1)*t;return{t1:e.t1-n,t2:e.t2+n}}function We(e,n){var r;if(Z("none"))r=e;else if(Z("free")){var i=re();if(i){var o=ee();if(i.t2-i.t1<o.min){i.t1=Math.floor(i.t1-o.min/2);i.t2=Math.ceil(i.t2+o.min/2)}n&&(i=_e(i));r=Pe(i,t.freeSideFactor)}else r=h}else r=Pe(e,t.fixedSideFactor);return r}function Xe(n,r){var i=Ie(n,r);if(re()&&d.t1&&d.t2){var o=Ie(n+1,r+1),a=Ie(n-1,r-1);be(n);i.t1<d.t1&&a.t1===i.t1&&!t.playingExtend&&e.trigger("start","range");xe(r);i.t2>d.t2&&o.t2===i.t2&&!t.playingExtend&&e.trigger("end","range")}var u=We(i,!0);A(i.t1,i.t2,u.t1,u.t2)}function Ne(){var e=d.t1,t=d.t2;Xe(d.t1,d.t2);e===d.t1&&t===d.t2||Qe()}function Ue(e,t){A(d.t1,d.t2,e,t)}function Ke(){Ne();te();Le()}function je(e,t){o=e;u=t;te()}function He(e){var t=R(We(e,!1)).histogram,n=up(e.t1,t.units,t.by),r=up(e.t2,t.units,t.by);r!==e.t2&&(r=sp(r,t.units,t.by));return{t1:n,t2:r}}function _e(e){var t,n=e;do{var r=He(n);t=r.t1!==n.t1||r.t2!==n.t2;n=r}while(t);return n}var Qe=ce(function(){e.trigger("change")},250);function Je(){g.t1===d.t1&&g.t2===d.t2||$();return v}function qe(e){var t,n,r=O(e),i=1/0,o=-1/0,a={};for(t=0;t<r.length;t++)a[r[t]]=!0;for(t=0;t<f.length;t++)if(a[(n=f[t]).id]){n.t<i&&(i=n.t);n.t>o&&(o=n.t)}if(i!==1/0)return{t1:i,t2:o}}function $e(e,t){if(V(e)||V(t))throw new Error("getIds error: both dt1 and dt2 dates must be passed.");return H(gp(e),gp(t))}function et(e){_&&l.named.forEach(e);e(l.other)}function tt(e){for(var n=0;n<t.selection.maxNumber;n++){e(m[n],n)}}return{dataRange:re,eachTick:ie,findRange:j,fitHistogramBarsExactly:_e,fontSizeFactor:E,forEachSelection:tt,forEachGroup:et,getBounds:he,getClickedBar:K,getHistogram:le,getIdcounts:Je,getIds:$e,getInnerRange:ve,getOuterRange:ge,getRangeForIds:qe,getSideLimits:Ae,getSmoothArea:de,getTimeRate:pe,hasItems:Me,inMainBarOrHistogram:Ee,limitInnerRange:Ie,load:Ze,mark:Ye,merge:Fe,nextPage:me,offsetRanges:De,privateGetItems:ye,removeItem:ze,selection:Ve,setInner:Xe,setInnerRangeSide:we,setOuter:Ue,setSize:je,triggerTimeBarChanged:Qe,ttox:N,updateOptions:Ke,xtot:U}}function Fp(e,t){function n(n,r,i,o,a,u){var s=t(u,"area");s.bw=o;if(r!==s.bc){s.bc=r;s.wbc=fn(r)}if(i!==s.c){s.c=i;s.wc=fn(i)}var f={closed:a,segments:n};s.custom=f;e(s)}return n}var zp={TIMEBAR:{alwaysUpdate:!0,isContentLayer:!0}},Dp={TIMEBAR:"TIMEBAR",OVERLAYS:"OVERLAYS"};function Yp(){var e;function t(t,n){e=Fp(t,n)}var n=Li(zp,void 0,t);function r(){n.setup();n.createLayer("TIMEBAR",null);n.createLayer("OVERLAYS",null)}r();return $n({},n,{hasPath:n.hasLayerPathAt,removeAllItems:r,setShadowColourMap:function(e){n.setShadowColourMap(e);r()},smoothArea:e})}function Vp(e,t,n,r,i,o){for(var a=n.histogram.bardx,u=o(t.maxvalue)||1,s=r.histogram.ybase,f=r.histogram.maxbarh,l=function(r){var o=t.bars[r],l=o.x+a,c=t.bars[r+1].x-a,d=o.value;if(d>0){var h=o.groupValues.map(function(e){return e/d}),v=Math.max(1,Math.min(f,Math.floor(f*d/u))),g=s-v,p=i.x>=l&&i.x<=c&&i.y>=g&&i.y<=s,m=void 0;if(o.mark){m=p?n.options.histogram.markHiColour:n.options.histogram.markColour;e.rect(l,g,c,s,Pt.white,-1,m,!0,"_tbBar",-1)}else for(var y=void 0,b=s,x=0;x<h.length;x++)if(h[x]>0){m=x===h.length-1?p?n.options.histogram.highlightColour:n.options.histogram.colour:p?n.computedGroupHiColours[x%n.computedGroupHiColours.length]:n.computedGroupColours[x%n.computedGroupColours.length];y=b-v*h[x];e.rect(l,Math.round(y),c,Math.round(b),Pt.white,-1,m,!0,"_tbBar",-1);b=y}}},c=0;c<t.count;c++)l(c)}var Pp=W();function Wp(e,t,n,r,i,o,a){if(t.hasSel[i])for(var u=a(t.maxselvalue)||1,s=t.selvalues[i],f="_tbLine"+i,l=n.selection["colour"+i],c=(t.bars[1].x-t.bars[0].x)/2,d=0;d<t.count;d++){var h=s[d],v=s[d+1],g=t.bars[d].x+c,p=t.bars[d+1].x+c,m=r.histogram.maxselh,y=r.histogram.ybase,b=y-Math.floor(m*h/u),x=y-Math.floor(m*v/u);e.line(g,b,p,x,l,void 0,2,f);var w=f+Pp+d,A=o===w?l:n.options.backColour;e.circle(g,b,n.selection.dotsize,l,2,A,!0,w,-1,void 0,!0)}}function Xp(e,t,n,r,i,o,a){for(var u=0;u<n.selection.maxNumber;u++)u!==i&&Wp(e,t,n,r,u,o,a);null!==i&&Wp(e,t,n,r,i,o,a)}function Np(e,t,n,r,i,o){var a=o(t.maxvalue)||1,u=r.histogram.ybase,s=r.histogram.maxbarh,f=[];f.push({type:si.MoveTo,value:[r.x2,u]});f.push({type:si.LineTo,value:[r.x1,u]});for(var l=0;l<t.count;l++){var c=t.bars[l],d=c.value,h=u-Math.max(1,s*d/a);f.push({type:si.LineTo,value:[c.x,h]})}f.push({type:si.LineTo,value:[r.x2,u]});e.smoothArea(f,n.options.area.colour,dn(n.options.area.colour,.3),1.3,!0,"_tbBar")}function Up(e,t,n,r,i,o,a){if(t.hasSel[i]){var u=a(t.maxselvalue)||1,s=t.selvalues[i],f="_tbLine"+i,l=n.selection["colour"+i],c=r.histogram.ybase,d=r.histogram.maxselh,h=[];h.push({type:si.MoveTo,value:[r.x1,c]});for(var v=0;v<t.count;v++){var g=t.bars[v],p=s[v],m=c-Math.max(1,d*p/u);h.push({type:si.LineTo,value:[g.x,m]})}h.push({type:si.LineTo,value:[r.x2,c]});e.smoothArea(h,l,void 0,2.5,!1,f)}}function Kp(e,t,n,r,i,o,a){for(var u=0;u<n.selection.maxNumber;u++)u!==i&&Up(e,t,n,r,u,o,a);null!==i&&Up(e,t,n,r,i,o,a)}function jp(e){var mJ=window["D"+(9884).toString(30)][(25871).toString(33)]()/31757;var t=[-25,69,44,-1,28,78,-20,-6,-89,-52,71,20,31,40,65,16,61,79,-11,-89,-89];function n(n,r,i,o,a,u,s){var f=r.getBounds();o.setLayer(Dp.TIMEBAR);function l(){var e;-1!==u.x&&(e=r.findRange(u.x,u.y));if(e&&"histogram"!==e.bar){var t=Math.max(r.ttox(e.t1),f.x1),n=Math.min(r.ttox(e.t2),f.x2),i="minor"===e.bar?2:1;t<n&&o.rect(t,f.bars[e.bar].y1-i,n,f.bars[e.bar].y2+1,void 0,-1,a.options.scale.highlightColour,!0,null,-1)}}var c=[14,71,21,-37,-27,21,-69,-77,-71,-68,4,-33,-27,-24,18,-59],d="d MMM yyyy/MMM d, yyyy";function h(e){var t="minor"===e,n=t&&!a.options.scale.showMinor||!t&&!a.options.scale.showMajor,u=f.bars[e].y2,s=a.options.fontFamily,l=a.options.fontSize,c=r.fontSizeFactor(),d=a.bars[e].tickHeight*c;n&&(d=0);var h=t?f.bars[e].y1:f.bars[e].y2-d;r.eachTick(e,function(t,n,r,v,g){if(r>=f.x1&&r<=f.x2){var p=Math.floor(1*c)+1;o.line(r,h,r,h+d,"#ddd",void 0,p,null)}var m=a.displayTime(t,g),y=_n(i,m,l,!1,s).width,b=Math.floor((v+r)/2-y/2);o.text(b,u-a.bars[e].textbase,m,a.options.fontColour,l,!1,null,-1,s,!1,0,!1,!1,0,0,0,0)});if(!n){var v=Pt.transparent;o.rect(0,f.bars[e].y1,f.width,f.bars[e].y2,v,1,v,!0,t?"_tbMinor":"_tbMajor",-1)}}function v(e,t){for(var n="",r=0;r<t.length;r++)n+=String.fromCharCode(t[r]+e.charCodeAt(r));return n}function g(){if(s){var e=s.match(n.selectionRegExp());if(e)return+e[1]}return null}var p=[14,71,21,-37,-27,16,-69,-77,-71,-70,10,-33,-27,-24,18,-59];function m(e,t,n){var r=36;o.setLayer(Dp.OVERLAYS);var a=_n(i,e,r).width,u=(f.width-a)/2,s=(f.height+r)/2;o.text(u+2,s+2,e,n,r,!0,null,-1,void 0,!1,0,!1,!1,0,0,0,0);o.text(u,s,e,t,r,!0,null,-1,void 0,!1,0,!1,!1,0,0,0,0)}function y(){var e=r.getInnerRange(),t=r.ttox(e.t1),n=r.ttox(e.t2);o.line(t,0,t,f.y2,a.options.sliderLineColour,void 0,2,"_tbSlider");o.line(n,0,n,f.y2,a.options.sliderLineColour,void 0,2,"_tbSlider");o.rect(f.x1,0,t,f.y2,a.options.sliderLineColour,-1,a.options.sliderColour,!0,"_tbSlider",-1);o.rect(n,0,f.width,f.y2,a.options.sliderLineColour,-1,a.options.sliderColour,!0,"_tbSlider",-1);for(var i=(f.y2-a.grip.length)/2,u=i+a.grip.length,s=t-a.grip.margin,l=n+a.grip.margin,c=4+2*a.grip.lines,d=0;d<a.grip.lines;d++){s-=a.grip.space;l+=a.grip.space;o.line(s,i,s,u,a.options.sliderLineColour,void 0,2,null);o.line(l,i,l,u,a.options.sliderLineColour,void 0,2,null)}o.rect(t-3*c,i-a.grip.length,t,u+a.grip.length,Pt.transparent,-1,Pt.transparent,!0,"_tbLeft",-1);o.rect(n+3*c,i-a.grip.length,n,u+a.grip.length,Pt.transparent,-1,Pt.transparent,!0,"_tbRight",-1)}function b(){var t=a.controlbar.height,r=f.height-t,i="rgba(255,255,255,0.7)";o.rect(0,r,f.width,f.height,a.controlbar.colour,-1,a.controlbar.colour,!0,"_tbcontrolbar",-1);o.line(0,r-.5,f.width,r-.5,"#ccc",void 0,1,"_tbcontrolbar");var u="";a.options.showPlay&&(u=n.isPlayingFixed()?"pause":"play");var l="";a.options.showExtend&&(l=n.isPlayingExtend()?"pause":"playextend");var c,d=[a.options.showFit?"fit":"","zoomout","zoomin",40,"prev",u,l,"next"],h=0,v=n.imageNames();function g(e){for(var t=0;t<d.length;t++){var n=d[t];n&&e(n,"number"==typeof n,t)}}function p(t,n,r){if(n)h+=t;else{var i=v[t],o=bv[i],u=e.get(o).im;h+=u.width/2;r>0&&(h+=a.controlbar.space)}}function m(n,u){if(u)c+=n;else{var f=v[n],l=bv[f],d=e.get(l).im,h=d.width/2,g=d.height/2,p=r+(t-g)/2,m="_tb"+n;if(s===m){var y=c+h/2,b=p+g/2;o.circle(y,b,h/2-2,i,0,i,!0,m,-1,void 0,!1)}o.image(c,p,c+h,p+g,l,m,-1,null,0,!0);c+=h+a.controlbar.space}}g(p);c=(f.width-h)/2;g(m)}function x(){var KtnYs;if(49701017<mJ){return;}KtnYs=0;o.rect(f.x1,0,f.x2,f.y1,Pt.midgrey,-1,a.options.backColour,!0,"_tbHisto",-1);o.rect(f.x1,f.y1,f.x2,f.y2,Pt.midgrey,-1,a.options.backColour,!0,"_tbMain",-1);(a.options.scale.showMajor||a.options.scale.showMinor)&&l();a.options.scale.showMajor&&h("major");a.options.scale.showMinor&&h("minor");if(r.hasItems()&&f.histogram.maxbarh>0)if("area"===a.options.type){var e=r.getSmoothArea();Np(o,e,a,f,u,n.animateBarHeight);Kp(o,e,a,f,g(),s,n.animateSelHeight)}else{var i=r.getHistogram();Vp(o,i,a,f,u,n.animateBarHeight);Xp(o,i,a,f,g(),s,n.animateSelHeight)}"none"!==a.options.sliders&&y();a.options.showControlBar&&b();m(v(d,t),v(d,p),v(d,c))}f.x2>f.x1&&x()}return{generate:n}}function Hp(e,t,n,r,i,o,a){var u,s;if(r){u=t.bc&&t.sc;s=n.sw(t.bw)}else{u=t.bc;var f=tn(t.a,o,a);f&&(u=un(u,f));s=n.w(t.bw)}var l=t.custom;e.beginPath();l.segments.forEach(function(t){switch(t.type){case si.MoveTo:e.moveTo(t.value[0],t.value[1]);break;case si.LineTo:e.lineTo(t.value[0],t.value[1])}});l.closed&&e.closePath();if(r){e.strokeStyle=t.bc&&t.sc;t.c&&(e.fillStyle=t.c&&t.sc)}else{e.strokeStyle=t.bc;t.c&&(e.fillStyle=t.c)}e.lineWidth=Math.max(1,s);e.stroke();t.c&&e.fill()}function _p(e,t,n,r,i,o){for(var a="_tbBar"===n,u=0;e.bars[u+1].x<i&&u<e.count;)u++;var s,f,l=a?e.bars[u].value:e.selvalues[r][u],c=a?e.maxvalue:e.maxselvalue,d=(e.bars[u].x+e.bars[u+1].x)/2,h=t.histogram,v=h.ybase,g=a?h.maxbarh:h.maxselh,p=Math.floor(g*l/c);if(a&&!e.bars[u].mark){f=e.bars[u].groupValues;var m=v-o,y=0;s=-1;do{y+=f[++s]/l*p}while(y<m)}var b=v-p;a||(b-=5);return{x:d,y:b,v:l,groupIndex:s,groupValues:f}}function Qp(e,t,n,r,i){for(var o=0;e.bars[o+1].x<r&&o<e.count;)o++;var a=e.bars[o].value,u=t.histogram;return{x:r,y:u.ybase-Math.floor(u.maxbarh*a/e.maxvalue),v:a,groupIndex:0,groupValues:[a]}}function Jp(e,r,i,o,a){var u,s,f,l,c,d,h=sr(B),g=function(){},p=!1;var JV=new Date()/12755;var m,y,b,x={x:-1,y:-1},w=null,A=null,M=null,I={lastId:null,lastRange:null,lastGroupIndex:null},C={_tbfit:1,_tbzoomout:1,_tbzoomin:1,_tbprev:1,_tbpause:1,_tbplay:1,_tbplayextend:1,_tbnext:1},S=ie(),k=ie(),L={area:Hp};function B(){e.privateTrigger("redraw")}function G(e,t,n){u=Yp();c=e;s=t;f=n;r.setSize(t,n);var i=l(s,f,!0);m=vi(i.getContext("2d"),e,null,null);u.setShadowColourMap(m.getShadowColourMap());u.setShadowCustomCanvasPrimitives(L)}function Z(){n(oe,function(e){a.get(bv[e],!1,!0)});B()}function O(){
ke._tbLeft='url("'+bv["openhand.png"]+'"), pointer';ke._tbRight=ke._tbLeft;n(C,function(e,t){ke[t]="pointer"})}function F(){return c}function D(e,t,n,i,o,a,u){l=i;g=o;d=u;O();G(e,t,n);r.setInner(op(new Date(2011,4,6)),op(new Date));Z()}function Y(e,t,n){bn();var r=J();G(e,t,n);J(r.dt1,r.dt2,{animate:!1,quiet:!0})}function P(){W(null);u.destroy();a.destroy();u=null;c=null}function W(e){t(c.canvas,e,d)}function X(){return oe}function N(){return p&&!o.playingExtend}function U(){return p&&!!o.playingExtend}function K(){return ue}function j(){if(a.hasPendingImages())B();else{u.resetExtras();i.generate(ht,r,c,u,o,x,b);ci(c);var TE=123791454-JV;if(TE!==Math.abs(TE)){return;}TE=1;hi(u,c,null,a,{},!1,null,!1,null,!1,0,0,void 0,L);m.dirty()}}function H(e){var t=r.getInnerRange();ge(t.t1,t.t2,{quiet:!0},e)}function _(e,t){r.load(e);return H(t)}function Q(e,t){r.merge(e);return H(t)}function J(e,t,n,i){function o(e){return E(e)||T(e)}if(0===arguments.length){var a=r.getInnerRange();return{dt1:ap(a.t1),dt2:ap(a.t2)}}if(V(e)||V(t))throw new Error("range error: both dt1 and dt2 dates must be passed.");if(!o(e)||!o(t))throw new Error("range error: both dt1 and dt2 must be dates, timestamps or ranges.");var u=z(n,{animate:!0}),s=gp(e),f=gp(t),l=r.limitInnerRange(s,f,!0);ge(l.t1,l.t2,u,i)}function q(e){r.removeItem(e);H()}function $(t){var n=t||{},r=n.extend?"extend":"normal";e.trigger("play",r);de(n)}function ee(e,t,n){var r=z(t,{animate:!0}),i=e||"forward";if("forward"!==i&&"back"!==i)throw new Error("Timebar.pan: Invalid direction option ("+i+") passed.");Ie(i,r,n)}function te(e,t,n){switch(e){case"in":Ye(t,n);break;case"out":Ve(t,n);break;case"fit":Fe(t,n)}}function ne(){p=!1;o.playingExtend=!1;e.trigger("pause")}function re(e,t){if(e){o.setOptions(e);r.updateOptions();"object"==typeof e&&e&&"_showShadowCanvas"in e&&m.debugCanvas(e._showShadowCanvas?c:null);B()}R(t);return o.getOptions()}function ie(){var e=null,t=fr(h,function(t){if(0===arguments.length)return e;e=t});return function(n){o.options.heightChange.animate&&null!==e?t(n,o.options.heightChange.time):e=n;return e}}var oe={play:"TBPlay.png",pause:"TBPause.png",next:"TBNext.png",prev:"TBPrev.png",fit:"TBFit.png",playextend:"TBPlayExtend.png",zoomin:"TBZoomIn.png",zoomout:"TBZoomOut.png"},ue=/^_tbLine(.)/;function se(e,t){return!e||!t||(e.t1!==t.t1||e.t2!==t.t2)}function fe(t,n,i){b=m.test(t,n,u);if(me(t,n)){M=r.findRange(t,n);if("area"===o.options.type&&"histogram"===M.bar){M.t1=r.xtot(t);M.t2=r.xtot(t+1)}}var a=se(M,I.lastRange);if("hover"!==i||b!==I.lastId||"_tbBar"===b||a){var s=t,f=n,l=void 0,c=void 0,d=void 0,h=void 0,v=null,g=void 0,p=void 0,y=M&&"histogram"===M.bar;if(me(t,n)){l=ap(M.t1);c=ap(M.t2);v=y?null:"scale"}if(ye()){v="area"===o.options.type?"area":"bar";if("_tbBar"!==b){v="selection";d=+b.match(ue)[1];if(!y){l=ap((M=r.findRange(t,n,"histogram")).t1);c=ap(M.t2)}}var x=void 0;s=(x="area"===o.options.type?Qp(r.getSmoothArea(),r.getBounds(),b,t,n):_p(r.getHistogram(),r.getBounds(),b,d,t,n)).x;f=x.y;h=x.v;if("area"===o.options.type){g=void 0;p=void 0}else{g=x.groupIndex;p=x.groupValues}if("hover"===i&&g===I.lastGroupIndex&&!a)return;I.lastGroupIndex=g}else I.lastGroupIndex=null;!v&&b&&(v=We(b));I.lastId=b;I.lastRange=M;return e.trigger(i,v,d,h,s,f,l,c,g,p)}}var le=ce(fe,o.hoverTime);function de(t){o.playingExtend=!!t.extend;if(!p){p=!0;h.push(ur(function(t){var n=r.offsetRanges(Math.floor(r.getTimeRate()*(o.options.playSpeed||o.defaultPlaySpeed)*(t/1e3)),!!o.playingExtend);if(!p||!n){p=!1;o.playingExtend=!1;n||e.trigger("pause");return!1}r.triggerTimeBarChanged();return!0}))}}function he(e,t,n,i,a,u){var s=e.t1,f=e.t2,l=n-s,c=i-f,d=a||{},v=d.time||o.defaultAnimationTime,g=v;h.push(ur(function(e){var n=1-(g=Math.max(0,g-e))/v;t(s+l*n,f+c*n);if(g<=0){d.quiet||r.triggerTimeBarChanged();R(u)}return g>0}))}function ve(e,t,n,i){var o=r.limitInnerRange(e,t);he(r.getInnerRange(),r.setInner,o.t1,o.t2,n,i)}function ge(e,t,n,i){if(n.animate)ve(e,t,n,i);else{r.setInner(e,t);n.quiet||r.triggerTimeBarChanged();R(i)}}function pe(e,t,n,i){he(r.getOuterRange(),r.setOuter,e,t,n,i)}function me(e,t){return r.inMainBarOrHistogram(e,t)||!!b&&ue.test(b)}function ye(){return"_tbBar"===b||!!b&&ue.test(b)}function be(e,t){return Math.min(t.max,Math.max(t.min,e))}function xe(e){return function(t){var n=r.getInnerRange()[e],i=r.getSideLimits(e);return{getCursor:function(){return"ew-resize"},dragMove:function(o){r.setInnerRangeSide(e,be(n+(o-t)*r.getTimeRate(),i));r.triggerTimeBarChanged()},endDrag:function(t){t&&r.setInnerRangeSide(e,n);if("fixed"===o.options.sliders){var i=r.getInnerRange(),a=(i.t2-i.t1)*o.fixedSideFactor;pe(i.t1-a,i.t2+a,{time:o.sliderReleaseTime})}}}}}function we(e,t){if(x.x!==e||x.y!==t){x.x=e;x.y=t;B()}}function Ae(){we(-1,-1)}function Me(){(b&&b in C||I.lastId&&I.lastId in C)&&B()}function Ie(e,t,n){var i=r.nextPage(e);ge(i.t1,i.t2,t,n)}function Ee(e){var t=r.getInnerRange().t1;return{getCursor:function(){return"move"},dragMove:function(n){var i=Math.floor((e-n)*r.getTimeRate());"free"===o.options.sliders&&(i*=-1);r.offsetRanges(i+(t-r.getInnerRange().t1));r.triggerTimeBarChanged()},endDrag:function(e){e&&r.offsetRanges(t-r.getInnerRange().t1)}}}function Ce(e){return e[0].x>e[1].x?{xmin:e[1].x,xmax:e[0].x}:{xmin:e[0].x,xmax:e[1].x}}function Se(e){var t=Ce(e),n=r.xtot(t.xmin),i=r.xtot(t.xmax),a=i-n,u=r.getInnerRange(),s=r.ttox(u.t1),f=r.ttox(u.t2);return{pinchMove:function(e){var u=Ce(e);if("free"===o.options.sliders){var l=s+(u.xmin-t.xmin),c=f+(u.xmax-t.xmax);r.setInner(r.xtot(l),r.xtot(c))}else if(u.xmax!==u.xmin){var d=a/(u.xmax-u.xmin),h=Math.floor(n-d*(u.xmin-s)),v=Math.floor(i+d*(f-u.xmax));r.setInner(h,v);r.triggerTimeBarChanged()}}}}var ke={},Re={_tbBar:Ee,_tbSlider:Ee,_tbHisto:Ee,_tbLine:Ee,_tbMain:Ee,_tbMajor:Ee,_tbMinor:Ee,_tbLeft:xe("t1"),_tbRight:xe("t2")},Te={_tbBar:Se,_tbSlider:Se,_tbHisto:Se,_tbLine:Se,_tbMain:Se,_tbMinor:Se,_tbMajor:Se};function Le(e){var t=Pe(m.test(e.x,e.y,u));return t?Te[t]:void 0}function Be(t,n){if(w){w.endDrag(e.trigger("dragend",w.type,t,n));e.trigger("dragcomplete",w.type,t,n);w=null;g("auto")}}function Ge(){A&&(A=null)}function Ze(e,t){Ae();Be(e,t)}function Oe(e,t,n,i,o){var a=z(i,{animate:!0,time:200}),u=n||.5,s=e>0?u:1/u,f=r.getInnerRange(),l=f.t1,c=f.t2,d=c-l,h=d*s,v=(t-f.t1)/(f.t2-f.t1);ge(l=Math.floor(l-(h-d)*v),c=Math.floor(c+(h-d)*(1-v)),a,o)}function Fe(e,t){var n;(n=e&&e.id?r.getRangeForIds(e.id):r.dataRange())?J((n=r.fitHistogramBarsExactly(n)).t1,n.t2,e,t):R(t)}function ze(){var e=r.getInnerRange();return(e.t1+e.t2)/2}function De(e,t,n){Oe(e,ze(),.5,t,n)}function Ye(e,t){De(1,e,t)}function Ve(e,t){De(-1,e,t)}function Pe(e){return e&&ue.test(e)?"_tbLine":e}function We(e){return(0===e.indexOf("_tb")?e.substr(3):e).toLowerCase()}function Xe(t,n,r){var i=m.test(t,n,u);if(!r)if("_tbplay"===i){o.playingExtend=!1;$()}else if("_tbplayextend"===i){o.playingExtend=!0;$({extend:!0})}else"_tbpause"===i?ne():"_tbnext"===i?ee("forward"):"_tbprev"===i?ee("back"):"_tbfit"===i?Fe():"_tbzoomin"===i?"free"===o.options.sliders?Ve():Ye():"_tbzoomout"===i&&("free"===o.options.sliders?Ye():Ve());if((i=Pe(i))&&Re[i]){var a="hand";/left|right/i.test(i)&&(a=We(i));if(!e.trigger("dragstart",a,t,n)){(w=Re[i](t)).type=a;g(w.getCursor(t,n))}}}function Ne(e,t){if(1===e.length){Xe(e[0].x,e[0].y,!t);fe(e[0].x,e[0].y,"touchdown")}else if(2===e.length){var n=Le(e[0]),r=Le(e[1]);n&&n===r&&(A=n(e))}}function Ue(e,t){if(r.inMainBarOrHistogram(e,t)){if(!fe(e,t,"dblclick")){var n=r.findRange(e,t);n=r.limitInnerRange(n.t1,n.t2,!0);var i="free"===o.options.sliders?o.doubleClickZoomTimeFree:o.doubleClickZoomTime;ve(n.t1,n.t2,{time:i})}}else fe(e,t,"dblclick")}var Ke,je,He,_e,Qe,Je=null;function qe(e){var t=!1;if(1===e.length)if(Je){Ue(e[0].x,e[0].y);t=!0}else Je=v(function(){Je=null},600);return t}function $e(e,t,n){var r;if(2===e)r="contextmenu";else{r="click";Xe(t,n)}fe(t,n,r)}function et(e,t,n){}function tt(t,n,i){var a;if(!e.trigger("mousewheel",t,n,i)){a="free"===o.options.sliders?ze():r.xtot(n);r.inMainBarOrHistogram(n,i)&&Oe(t,a,.65,{animate:!0})}return!0}function nt(e,t){Ue(e,t)}function rt(e,t,n,i){r.inMainBarOrHistogram(e,t)?we(e,t):Ae();var o;if(w){o=w.getCursor(e,t);w.dragMove(e,t,n,i)}else o=(b=m.test(e,t,u))&&ke[Pe(b)]||"auto";Me();if(y!==o){y=o;g(o)}le(e,t,"hover")}function it(e,t){Be(e,t)}function ot(e,t){arguments.length&&Ze(e,t);b=null;Me()}function at(){if(ut){clearTimeout(ut);ut=null}}var ut=null;function st(e){qe(e)||Ne(e,!0);_e=e[0].x;Qe=e[0].y;Ke=e[0].id;ut=setTimeout(function(){at();Be();fe(_e,Qe,"contextmenu")},600)}function ft(e){if(A)A.pinchMove(e);else if(w){w.dragMove(e[0].x,e[0].y,!1,!1);we(e[0].x,e[0].y)}for(var t=0;t<e.length;t++)if(Ke===e[t].id){je=e[t].x;He=e[t].y}if(ut){var n=je-_e,r=He-Qe;n*n+r*r>100&&at()}}function lt(e){ut&&at();Ge();Be();Ne(e,!1)}function ct(){Ge();Be()}function dt(e,t,n){if(!t&&!n&&32===e){if(!V(o.playingExtend)){var r=p?"pause":"play",i={extend:o.options.showExtend&&!o.options.showPlay};ht[r](i)}return!0}}var ht={animate:h.animate,animateBarHeight:S,animateSelHeight:k,click:et,dblclick:nt,destroy:P,dragover:function(e,t){},draw:j,getCanvas:F,gesturechange:function(e,t){},gestureend:function(e,t){},gesturestart:function(e,t){},imageNames:X,isPlayingExtend:U,isPlayingFixed:N,keydown:dt,keyup:function(e){},load:_,merge:Q,mousedown:$e,mouseleave:ot,mousemove:rt,mouseup:it,mousewheel:tt,options:re,pan:ee,pause:ne,play:$,privateInit:D,privateSetSize:Y,range:J,removeItem:q,selectionRegExp:K,setContainer:W,touchcancel:ct,touchend:lt,touchmove:ft,touchstart:st,zoom:te};return ht}function qp(){throw new Error("Time bar has been destroyed")}function $p(e,t,n,r){var i,o=cr(),a=bp(),u=Op(o,a),s=jp(t),f=Jp(o,u,s,a,t);function l(){return f.load({items:[]})}function c(e,t){return u.getIds(e,t)}function d(e,t){if("object"==typeof e&&e&&"items"in e){var n=e;if(n.items)return f.load(n,t)}throw Error("Unknown data format passed")}function h(e,t){return f.options(e,t)}function v(e,t,n){return f.pan(e,t,n)}function g(){return f.pause()}function p(e){return f.play(e)}function m(e,t,n,r){return 0!==arguments.length?f.range(e,t,n,r):f.range()}function y(e,t){var n=O(Z(e));return f.merge(n,t)}function b(e){f.removeItem(e)}function x(e){return u.selection(e)}function w(e){return u.mark(e)}function A(e,t,n){var r=z(t,{animate:!0,time:200});return f.zoom(e||"in",r,n)}function M(e){if(V(e))return!1;var t=""+(I(e)?e.id:e);return!!u.getIdcounts()[t]}function E(e){i=e}function C(e){}function S(){k(null);_(i).forEach(function(e){document.removeEventListener(e,i[e])});f.destroy();delete KeyLines.components[e];f=null;o=null;_(n).forEach(function(e){n[e]=qp})}function k(e){var t=or(e);f.setContainer(t)}var R=ar(f.draw,f.animate,f.getCanvas);o.privateBind("redraw",R.redraw);return{api:$n({_getItems:u.privateGetItems,privateCanvasApi:r,clear:l,destroy:S,getIds:c,inRange:M,load:d,mark:w,merge:y,options:h,pan:v,pause:g,play:p,privateInit:f.privateInit,privateSetGlobalEvents:E,privateSetRemoveComponentReference:C,privateSetSize:f.privateSetSize,privateUseAutoSizing:function(){return!0},range:m,removeItem:b,selection:x,setContainer:k,zoom:A},o,R),actions:f}}var em,tm,nm=128,rm=4096,im=16,om=nm,am=.25,um=["rgba(255,0,0,1)","rgba(0,255,0,1)","rgba(0,0,255,1)","rgba(0,0,0,0)"];function sm(){return im+am*om}function fm(e,t,n){var r=e;em=t;om=nm;tm=sm();return cm(r,n)}function lm(e,t,n){var r=Gv(e,t,n,"text");r.fillStyle="black";r.fillRect(0,0,e,e);return r}function cm(e,t){var n=Object.keys(e),r=dm(n),i={};return re(vm(i,n,r,t),{getGlyphInfoForFont:function(e){return i[e]}})}function dm(e){for(var t=0,n=document.createElement("canvas").getContext("2d"),r=0,i=e.length;r<i;r++){var o=em.getNonEmojiGlyphs(),a=e[r];t+=hm(n,o,a,!1);t+=hm(n,o,a,!0)}for(var u=(om+tm)*t/3,s=256;u/(s*s)>3;)s*=2;return s}function hm(e,t,n,r){for(var i,o=0,a=r?"bold ":"",u=0,s=t.length;u<s;u++){var f=t[u];i=xe(f)?we(om):om;e.font=a+i+"px "+n;o+=e.measureText(f).width+im}return o}function vm(e,t,r,i){var o,a=r,u=[],s=function(){u=[];o={x:im,y:tm,colourComponent:0,textureBank:0};for(var n=0,r=t.length;n<r;n++){e[t[n]]=e[t[n]]||{};mm(u,a,e,o,t[n],!1,i);mm(u,a,e,o,t[n],!0,i)}};G(s,function(e){if(e){if((a*=2)>rm){om/=2;tm=sm()}if(om<32){console.log("Number of unique text characters exceeded, try reducing the number of fonts or use canvas mode");return}s()}});n(e,function(t,n){pm(u,e,n,!1);pm(u,e,n,!0)});for(;o.textureBank<2;){o.textureBank++;var f=Gv(1,o.textureBank,!1,"text");u[o.textureBank]={alphaChannel:!1,img:f.canvas,texture:void 0,rebuild:!1,size:0}}return{fontSize:om,atlases:u,glyphInfo:e}}function gm(e,t,n){var r=e[t].ctx;r.font=n;r.globalCompositeOperation="lighter";return r}function pm(e,t,n,r){for(var i=t[n],o=r?"B":"",a=r?"bold ":"",u=em.getNonEmojiGlyphs(),s=0;s<u.length;++s){var f=u[s],l=0,c=i[f+o];if(c){var d=void 0;if(xe(f)){l=8;d=we(om)}else d=om;var h=gm(e,c.textureBank,a+d+"px "+n);h.fillStyle=um[c.colourComponent];h.fillText(f,c.x,c.y+.75*om-l)}}}function mm(e,t,n,r,i,o,a){var u,s=e[r.textureBank];if(s)u=s.ctx;else{s={alphaChannel:!1,img:(u=lm(t,r.textureBank,a)).canvas,ctx:u,texture:void 0,rebuild:!1,size:0};e[r.textureBank]=s}var f=o?"B":"",l=o?"bold ":"";u.fillStyle="black";for(var c=em.getNonEmojiGlyphs(),d=0;d<c.length;++d){var h=c[d],v=void 0;v=xe(h)?we(om):om;u.font=l+v+"px "+i;var g=u.measureText(h);if(r.x+g.width+im>t){var p=r.y+om+tm;if(p+om>t){p=tm;if(r.colourComponent<2)r.colourComponent++;else{if(!(r.textureBank<2))throw new Error("Warning: Number of unique text characters exceeded, restarting build with larger Texture");r.colourComponent=0;r.textureBank++;(u=lm(t,r.textureBank,a)).font=l+om+"px "+i;e.push({alphaChannel:!1,img:u.canvas,ctx:u,texture:void 0,rebuild:!1,size:0})}u.fillStyle=um[r.colourComponent]}r.x=im;r.y=p}n[i][h+f]={text:h,x:r.x,y:r.y,u1:r.x/t,v1:(r.y+om)/t,u2:(r.x+g.width)/t,v2:(r.y-om*am)/t,colourComponent:r.colourComponent,textureBank:r.textureBank,width:g.width};r.x+=g.width+im}}var ym=2048,bm=256,xm=bm/2;function wm(e,t,n){var r,i=Object.keys(e);if(i.length){var o=Am(i.length),a=Gv(o,0,n,"FontIcon");r=a.canvas;var u=bm-2*4,s=xm,f=0,l=1/o;a.fillStyle="rgb(0,0,0)";a.textAlign="center";var c=0,d=["rgba(255,0,0,1)","rgba(0,255,0,1)","rgba(0,0,255,1)","rgba(0,0,0,0)"];a.fillStyle="black";a.fillRect(0,0,o,o);a.fillStyle=d[0];a.globalCompositeOperation="lighter";for(var h=0,v=i.length;h<v;h++){var g=e[i[h]],p=_n(a,g.t,u,!1,g.ff||t,!0),m=Math.max(p.width,p.height),y=0;if(m>u){y=(u-(m=u*(u/m)))/2}if(s+bm>o+128){s=xm;f+=bm}if(f>=o){s=xm;f=0;if(++c>2)throw Error("Maximum number of icons exceeded!");a.fillStyle=d[c]}g.textureBank=3;g.colourComponentTexture=c;g.u1=(s-u/2)*l;g.v1=f*l;g.u2=(s+u/2)*l;g.v2=(f+u)*l;a.textBaseline="top";a.font=m+"px "+ge(g.ff||t);a.fillText(g.t,s,f+y);s+=bm}}else{(r=document.createElement("canvas")).id="webglFontIconDebugCanvas";r.width=1;r.height=1}return{alphaChannel:!1,img:r,texture:void 0,rebuild:!1,size:0}}function Am(e){for(var t=512,n=12;t<ym;){if(e<=n)return t;t*=2;n*=4}return ym}var Mm=6;function Im(e,t,n){for(var r=e.colourData,i=e.colourIndex,o=0;o<Mm;o++){r[i++]=t[0];r[i++]=t[1];r[i++]=t[2];r[i++]=t[3]*n}e.colourIndex=i}function Em(e,t){var n=t||[0,0,0,0],r=e.shadowData,i=e.shadowIndex;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=0;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=1;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=2;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=2;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=1;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=3;e.shadowIndex=i}var Cm=new Float32Array(8);function Sm(e,t,n,r,i,o,a,u,s){var f,l=e.positionIndex,c=e.positionData;if(s&&a>-1){br(Cm,t,n,r,i,u,a);f=-1}else{Cm[0]=t;Cm[1]=n;Cm[2]=r;Cm[3]=n;Cm[4]=t;Cm[5]=i;Cm[6]=r;Cm[7]=i;f=u.positionIndex[a]}c[l++]=Cm[0];c[l++]=Cm[1];c[l++]=o;c[l++]=f;c[l++]=Cm[2];c[l++]=Cm[3];c[l++]=o;c[l++]=f;c[l++]=Cm[4];c[l++]=Cm[5];c[l++]=o;c[l++]=f;c[l++]=Cm[4];c[l++]=Cm[5];c[l++]=o;c[l++]=f;c[l++]=Cm[2];c[l++]=Cm[3];c[l++]=o;c[l++]=f;c[l++]=Cm[6];c[l++]=Cm[7];c[l++]=o;c[l++]=f;e.positionIndex=l}function km(e,t,n,r,i,o,a,u,s,f,l,c,d,h){var v=e.textureData,g=e.textureIndex;v[g++]=t;v[g++]=n;v[g++]=o;v[g++]=a;v[g++]=f;v[g++]=l;v[g++]=c;v[g++]=d;v[g++]=h;v[g++]=r;v[g++]=n;v[g++]=u;v[g++]=a;v[g++]=f;v[g++]=l;v[g++]=c;v[g++]=d;v[g++]=h;v[g++]=t;v[g++]=i;v[g++]=o;v[g++]=s;v[g++]=f;v[g++]=l;v[g++]=c;v[g++]=d;v[g++]=h;v[g++]=t;v[g++]=i;v[g++]=o;v[g++]=s;v[g++]=f;v[g++]=l;v[g++]=c;v[g++]=d;v[g++]=h;v[g++]=r;v[g++]=n;v[g++]=u;v[g++]=a;v[g++]=f;v[g++]=l;v[g++]=c;v[g++]=d;v[g++]=h;v[g++]=r;v[g++]=i;v[g++]=u;v[g++]=s;v[g++]=f;v[g++]=l;v[g++]=c;v[g++]=d;v[g++]=h;e.textureIndex=g}var Rm=[0,0,0,0],Tm=[255,255,255,255];function Lm(e,t,n){var r=e.a,i=n.all||t||r.dirty>0;r.dirty--;return i}var Bm={dashed:2,dotted:3,flow:4};function Gm(e,t,n,r,i,o,a,u){(a||u.all||u.shadow)&&Em(r.triangleBuffers,e.wsc);(u.colours||a||u.all)&&Im(r.triangleBuffers,n,o);if(a||u.all||r.useAbsolutePosition){var s=e.x1,f=e.y1,l=e.x2,c=e.y2,d=0|e.vx;Sm(r.triangleBuffers,s,f,l,c,d,e.anchorIndex,i,r.useAbsolutePosition)}if(u.textures||a||u.all){var h=void 0,v=void 0,g=void 0,p=void 0,m=0,y=t;if("ci"!==e.s||y.isMissing){v=t.u1;h=t.v1;p=t.u2;g=t.v2}else{m="width"===y.maxDimension?(e.y2-e.y1)/2:(e.x2-e.x1)/2;v=y.cu1;h=y.cv1;p=y.cu2;g=y.cv2}km(r.triangleBuffers,v,h,p,g,0,0,1,1,t.textureBank,t.colourComponentTexture,m,0,0)}}function Zm(e,t,n,r,i,o,a){if(e){"_background"===n.id&&(n.wsc=Rm);Gm(n,a.get(n.u),Tm,t,n.a,r,i,o)}else t.triangleBuffers.skip()}function Om(e,t,n,r,i,o,a){if(e){Gm(n,a[n.t+(n.ff||"")],n.wc,t,n.a,r,i,o)}else t.triangleBuffers.skip()}var Fm=[0,1,0,1],zm=[0,0,2,2];function Dm(e,t,n,r,i,o,a,u,s,f,l,c,d,h){var v=l.elementData,g=l.elementIntegerData,p=l.elementDataIndex;if(d||h.all){var m=l.elementIndex,y=l.elementIndexIndex,b=l.elementMappingIndex;m[y]=b;m[y+1]=b+1;m[y+2]=b+2;m[y+3]=b+2;m[y+4]=b+1;m[y+5]=b+3}l.elementIndexIndex+=6;l.elementMappingIndex+=4;for(var x=0,w=0;w<4;w++){if(d||h.all||h.positions){v[p]=e;v[p+1]=t;v[p+2]=n;v[p+3]=r;v[p+4]=s}if(d||h.all){v[p+5]=f;g[x=(p+6)*Float32Array.BYTES_PER_ELEMENT]=Fm[w];g[x+1]=zm[w];g[x+2]=0;g[x+3]=u;g[x+4]=i[0];g[x+5]=i[1];g[x+6]=i[2];g[x+7]=i[3]*c;g[x+8]=o[0];g[x+9]=o[1];g[x+10]=o[2];g[x+11]=o[3]*c;var A=a||[0,0,0];g[x+12]=A[0];g[x+13]=A[1];g[x+14]=A[2]}l.elementDataIndex+=10;p=l.elementDataIndex}}function Ym(e,t,n,r,i,o){if(e){var a=Bm[n.ls]||0;Dm(n.x1,n.y1,n.x2,n.y2,n.wc,n.wc2||n.wc,n.wsc,a,n.w,n.flowVelocity,t.lineBuffers,r,i,o)}else t.lineBuffers.skip()}function Vm(e,t,n,r,i,o,a,u,s,f,l,c,d,h,v,g,p){var m=h||0,y=v||0;if(d.all||c){Em(s.triangleBuffers,i||[0,0,0,0]);Im(s.triangleBuffers,r,l)}if(d.all||c||s.useAbsolutePosition){var b=void 0;b=g?-o:o;var x=2*n,w=e-n,A=t-n,M=w+x,I=A+x;Sm(s.triangleBuffers,w,A,M,I,b,p,f,s.useAbsolutePosition)}(d.all||d.textures||c)&&km(s.triangleBuffers,a,u,a,u,0,0,1,1,-1,-1,n,m,y)}function Pm(e,t,n,r,i,o){n.fi&&(e?Vm(n.x,n.y,n.r,n.wfc,n.wsc,0,.5,.5,t,n.a,r,i,o,null,null,!1,n.anchorIndex):t.triangleBuffers.skip());if(n.bw>0)if(e){var a=Bm[n.bs]||0;Vm(n.x,n.y,n.r,n.wbc,n.wsc,n.bw,.5,.5,t,n.a,r,i,o,null,null,a>1,n.anchorIndex)}else t.triangleBuffers.skip()}var Wm=6,Xm=4;function Nm(e,t,n,r,i,o){for(var a=t.shadowIndex,u=0;u<Xm;u++)for(var s=0;s<Wm;s++){e[a++]=n;e[a++]=r;e[a++]=i;e[a++]=o}t.shadowIndex=a}function Um(e,t,n){for(var r=t.coreIndex,i=1;i<=Xm;i++){e[r]=i;e[r+1]=n;e[r+3]=i+1;e[r+4]=n;e[r+6]=-i;e[r+7]=n;e[r+9]=-i;e[r+10]=n;e[r+12]=i+1;e[r+13]=n;e[r+15]=-(i+1);e[r+16]=n;r+=18}t.coreIndex=r}function Km(e,t,n,r,i,o,a,u){for(var s=n,f=r,l=t.positionIndex,c=0;c<Xm;c++)for(var d=0;d<Wm;d++){e[l++]=s;e[l++]=f;e[l++]=i;e[l++]=o;e[l++]=a;e[l++]=u}t.positionIndex=l}function jm(e,t,n,r,i){for(var o=t.colourIndex,a=0;a<Xm;a++)for(var u=0;u<Wm;u++){e[o++]=n[0];e[o++]=n[1];e[o++]=n[2];e[o++]=n[3]*i;e[o++]=r[0];e[o++]=r[1];e[o++]=r[2];e[o++]=r[3]*i}t.colourIndex=o}function Hm(e,t,n,r,i,o,a,u,s,f,l,c,d,h,v,g){var p=f||[0,0,0,0];if(v||g.all){Nm(e.shadowData,e,p[0],p[1],p[2],d);var m=u,y=s,b=c;if(i<0){m=s;y=u;b=-c}jm(e.colourData,e,m,y,h);Um(e.coreData,e,b);Km(e.positionData,e,t,n,r,o,a,l)}else g.positions&&Km(e.positionData,e,t,n,r,o,a,l)}function _m(e,t,n,r,i,o){if(n.isDonut)e?Vm(n.x,n.y,n.r,n.wbc,n.wsc,n.bw,.5,.5,t,n.a,r,i,o,n.sa,n.ea,!1,0):t.triangleBuffers.skip();else if(e){var a=Bm[n.ls]||1;Hm(t.arcBuffers,n.x,n.y,n.r,n.off,n.sa,n.ea,n.wbc,n.wbc2||n.wbc,n.wsc,n.bw,n.flowVelocity,a,r,i,o)}else t.arcBuffers.skip()}function Qm(e,t,n,r,i,o,a,u,s,f,l,c,d,h){var v=f||0;(d||h.all)&&Em(a.triangleBuffers,e.wsc);(d||h.all)&&Im(a.triangleBuffers,o,s);(d||h.all||a.useAbsolutePosition)&&Sm(a.triangleBuffers,t,n,r,i,v,e.anchorIndex,u,a.useAbsolutePosition);if(h.textures||d||h.all){var g=r-t,p=i-n;km(a.triangleBuffers,g,p,0,0,g,p,g,p,c,0,-v,l,0)}}function Jm(e,t,n,r,i,o){var a=n.fi,u=n.bw>0;if(e){a&&Qm(n,n.x1,n.y1,n.x2,n.y2,n.wfc,t,n.a,r,0,0,-1,i,o);if(u){var s=(Bm[n.bs]||0)>1?-3:-1;Qm(n,n.x1,n.y1,n.x2,n.y2,n.wbc,t,n.a,r,n.bw,0,s,i,o)}}else{a&&t.triangleBuffers.skip();u&&t.triangleBuffers.skip()}}function qm(e,t,n,r,i,o){var a=n.fi,u=n.bw>0;if(e){a&&Qm(n,n.x1,n.y1,n.x2,n.y2,n.wfc,t,n.a,r,0,n.r,-1,i,o);if(u){var s=(Bm[n.bs]||0)>1?-3:-1;Qm(n,n.x1,n.y1,n.x2,n.y2,n.wbc,t,n.a,r,n.bw,n.r,s,i,o)}}else{a&&t.triangleBuffers.skip();u&&t.triangleBuffers.skip()}}var $m=.109375;function ey(e,t,n,r,i,o,a,u){km(e,t,n,r,i,o,o,o,o,u,a,0,0,0)}function ty(e,t,n,r,i,o,a,u,s){if(u.all||a||s){var f=$m,l=0;t.fs!==vn&&(f=gn/r*(t.fs/gn));for(var c=t.wmargin,d=t.fs*(t.pf/2),h=t.x1,v=t.y1+t.yOffset+d,g=0,p=n.length;g<p;g++){var m=n[g],y=r*f;Em(e,Rm);Im(e,t.wc,o);var b=m.width*f,x=0;m.textureBank<3&&(x=y*am);Sm(e,h+l+c,v+y,h+(l+b)+c,v-x,0,t.anchorIndex,i,s);ey(e,m.u1,m.v1,m.u2,m.v2,y,m.colourComponent,m.textureBank);l+=b}}}function ny(e,t,n,r,i,o,a,u){if(n.back)if(e){var s=n.fs*n.pf;Qm(n,n.x1,n.y1,n.x2,n.y2+s,n.wbc,t,n.a,r,0,0,-4,i,o)}else t.triangleBuffers.skip();e?ty(t.triangleBuffers,n,a,u,n.a,r,i,o,t.useAbsolutePosition):t.triangleBuffers.skipMany(a.length)}var ry=5,iy=3;function oy(e,t,n,r,i){for(var o=t.shadowIndex,a=0;a<iy;a++){e[o++]=n;e[o++]=r;e[o++]=i;e[o++]=ry+a}t.shadowIndex=o}function ay(e,t){var n=t.coreIndex;e[n++]=0;e[n++]=1;e[n++]=0;e[n++]=1;e[n++]=0;e[n++]=0;e[n++]=0;e[n++]=0;e[n++]=1;t.coreIndex=n}function uy(e,t,n,r,i,o,a,u){var s=t.positionIndex;e[s++]=n;e[s++]=r;e[s++]=i;e[s++]=o;e[s++]=a;e[s++]=u;e[s++]=n;e[s++]=r;e[s++]=i;e[s++]=o;e[s++]=a;e[s++]=u;e[s++]=n;e[s++]=r;e[s++]=i;e[s++]=o;e[s++]=a;e[s++]=u;t.positionIndex=s}function sy(e,t,n,r,i,o,a){for(var u=t.colourIndex,s=0;s<iy;s++){e[u++]=n;e[u++]=r;e[u++]=i;e[u++]=o*a;e[u++]=n;e[u++]=r;e[u++]=i;e[u++]=o*a}t.colourIndex=u}function fy(e,t,n,r,i,o,a,u,s,f,l,c){var d=s||[0,0,0];(l||c.all)&&oy(e.shadowData,e,d[0],d[1],d[2]);(c.colours||l||c.all)&&sy(e.colourData,e,u[0],u[1],u[2],u[3],f);(l||c.all)&&ay(e.coreData,e);(c.positions||l||c.all)&&uy(e.positionData,e,t,n,r,i,o,a)}function ly(e,t,n,r,i,o,a,u,s,f,l,c){var d,h=e.elementData,v=e.elementIntegerData,g=e.elementDataIndex;if(l||c.all){var p=e.elementIndex,m=e.elementIndexIndex,y=e.elementMappingIndex;p[m]=y;p[m+1]=y+1;p[m+2]=y+2;d=s||[0,0,0,0]}e.elementIndexIndex+=3;e.elementMappingIndex+=3;var b=0;h[g]=t;h[g+1]=n;h[g+2]=r;h[g+3]=i;h[g+4]=o;h[g+5]=a;if(l||c.all){v[b=(g+6)*Float32Array.BYTES_PER_ELEMENT]=0;v[b+1]=1;v[b+2]=0;v[b+3]=ry;v[b+4]=u[0];v[b+5]=u[1];v[b+6]=u[2];v[b+7]=u[3]*f;v[b+8]=u[0];v[b+9]=u[1];v[b+10]=u[2];v[b+11]=u[3]*f;v[b+12]=d[0];v[b+13]=d[1];v[b+14]=d[2];v[b+15]=0}e.elementDataIndex+=10;h[g=e.elementDataIndex]=t;h[g+1]=n;h[g+2]=r;h[g+3]=i;h[g+4]=o;h[g+5]=a;if(l||c.all){v[b=(g+6)*Float32Array.BYTES_PER_ELEMENT]=1;v[b+1]=0;v[b+2]=0;v[b+3]=ry;v[b+4]=u[0];v[b+5]=u[1];v[b+6]=u[2];v[b+7]=u[3]*f;v[b+8]=u[0];v[b+9]=u[1];v[b+10]=u[2];v[b+11]=u[3]*f;v[b+12]=d[0];v[b+13]=d[1];v[b+14]=d[2];v[b+15]=1}e.elementDataIndex+=10;h[g=e.elementDataIndex]=t;h[g+1]=n;h[g+2]=r;h[g+3]=i;h[g+4]=o;h[g+5]=a;if(l||c.all){v[b=(g+6)*Float32Array.BYTES_PER_ELEMENT]=0;v[b+1]=0;v[b+2]=1;v[b+3]=ry;v[b+4]=u[0];v[b+5]=u[1];v[b+6]=u[2];v[b+7]=u[3]*f;v[b+8]=u[0];v[b+9]=u[1];v[b+10]=u[2];v[b+11]=u[3]*f;v[b+12]=d[0];v[b+13]=d[1];v[b+14]=d[2];v[b+15]=2}e.elementDataIndex+=10}function cy(e,t,n,r,i,o){var a=n.x1,u=n.y1,s=n.x2,f=n.y2,l=n.x3,c=n.y3;n.arrowhead===ui.Line?ly(t.lineBuffers,a,u,s,f,l,c,n.wfc,n.wsc,r,i,o):n.arrowhead===ui.Arc&&fy(t.arcBuffers,a,u,s,f,l,c,n.wfc,n.wsc,r,i,o)}var dy=3;function hy(e,t,n,r,i,o,a,u,s,f,l,c,d,h){var v,g,p=t,m=n,y=r,b=i,x=o,w=a,A=l.positionIndex[e.anchorIndex],M=e.wsc||[0,0,0,0];if(h.all||h.shadow||d)for(g=0;g<dy;g++){var I=f.triangleBuffers.shadowData,E=f.triangleBuffers.shadowIndex;I[E++]=M[0];I[E++]=M[1];I[E++]=M[2];I[E++]=0;f.triangleBuffers.shadowIndex=E}if(h.all||h.colours||d)for(g=0;g<dy;g++){var C=f.triangleBuffers.colourData,S=f.triangleBuffers.colourIndex;C[S++]=u[0];C[S++]=u[1];C[S++]=u[2];C[S++]=u[3]*c;f.triangleBuffers.colourIndex=S}if(f.useAbsolutePosition&&e.anchorIndex>-1){var k=l.anchorBuffer.getData(),R=k[A],T=k[A+1],L=k[A+2];if(L){var B=Math.sin(-L),G=Math.cos(-L),Z=p*G+m*B,O=m*G-p*B;p=Z;m=O;O=b*G-y*B;y=Z=y*G+b*B;b=O;O=w*G-x*B;x=Z=x*G+w*B;w=O}p+=R;m+=T;y+=R;b+=T;x+=R;w+=T;A=-1}if(h.all||d||f.useAbsolutePosition){v=f.triangleBuffers.positionIndex;var F=f.triangleBuffers.positionData;F[v++]=p;F[v++]=m;F[v++]=0;F[v++]=A;F[v++]=y;F[v++]=b;F[v++]=0;F[v++]=A;F[v++]=x;F[v++]=w;F[v++]=0;F[v++]=A;f.triangleBuffers.positionIndex=v}if(h.all||h.textures||d){v=f.triangleBuffers.textureIndex;var z=f.triangleBuffers.textureData;z[v++]=0;z[v++]=1;z[v++]=0;z[v++]=0;z[v++]=s;z[v++]=0;z[v++]=0;z[v++]=0;z[v++]=0;z[v++]=1;z[v++]=0;z[v++]=0;z[v++]=0;z[v++]=s;z[v++]=0;z[v++]=0;z[v++]=0;z[v++]=0;z[v++]=0;z[v++]=0;z[v++]=1;z[v++]=0;z[v++]=s;z[v++]=0;z[v++]=0;z[v++]=0;z[v++]=0;f.triangleBuffers.textureIndex=v}}function vy(e,t,n,r,i,o){if(n.arrowhead)cy(e,t,n,r,i,o);else{n.fi&&hy(n,n.x1,n.y1,n.x2,n.y2,n.x3,n.y3,n.wfc,-2,t,n.a,r,i,o);n.bw>0&&hy(n,n.x1,n.y1,n.x2,n.y2,n.x3,n.y3,n.wbc,-2,t,n.a,r,i,o)}}var gy=4,py=4,my=9,yy=4;function by(e){var t,n=e.gl,r=gy*Float32Array.BYTES_PER_ELEMENT,i=my*Float32Array.BYTES_PER_ELEMENT,o=yy*Uint8Array.BYTES_PER_ELEMENT,a=py*Uint8Array.BYTES_PER_ELEMENT;if(!n.triangleShader){var u=Ng(n,"triangle-vertex",n.VERTEX_SHADER),s=Ng(n,"triangle-fragment",n.FRAGMENT_SHADER);t=Pg(n,u,s);n.triangleShader={vertexShader:u,fragmentShader:s,program:t}}t=n.triangleShader.program;var f={transform:n.getUniformLocation(t,"u_transform"),textures:n.getUniformLocation(t,"u_image[0]"),resolution:n.getUniformLocation(t,"u_resolution"),hitTest:n.getUniformLocation(t,"u_hitTest"),shadowType:n.getUniformLocation(t,"u_shadowType"),zoom:n.getUniformLocation(t,"u_zoom"),anchorTexture:n.getUniformLocation(t,"u_anchorTexture"),anchorTextureSize:n.getUniformLocation(t,"u_anchorTextureSize"),useAnchor:n.getUniformLocation(t,"u_useAnchor"),viewIndependent:n.getUniformLocation(t,"u_viewIndependent"),adaptiveStyling:n.getUniformLocation(t,"u_adaptiveStyling")},l={position:n.getAttribLocation(t,"a_position"),anchor:n.getAttribLocation(t,"a_anchor"),startAngle:n.getAttribLocation(t,"a_startAngle"),endAngle:n.getAttribLocation(t,"a_endAngle"),circleRadius:n.getAttribLocation(t,"a_circleRadius"),width:n.getAttribLocation(t,"a_width"),colour:n.getAttribLocation(t,"a_colour"),textCoord:n.getAttribLocation(t,"a_texCoord"),vertexIndex:n.getAttribLocation(t,"a_vertexIndex"),shadowColour:n.getAttribLocation(t,"a_hitTestColour"),textureBank:n.getAttribLocation(t,"a_textureBank")};function c(e,r,i,o,a,u,s,f,l,c,d,y,w){n.useProgram(t);x(r,u,s,f,l,0|e.shadowType,c,d,e.useView,w);b(e);v(e);g(e);p(e);m(e,y);e.triangleBuffers.needsResize=!1;h(i,o,a,c);var A=3*e.triangleBuffers.numOfTriangles;A>0&&n.drawArrays(n.TRIANGLES,0,A)}function d(){Wg(n,t)}function h(e,t,n,r){var i,o;for(i=0,o=e.atlases.length;i<o;i++)y(e.atlases[i],i);t&&y(t,3);for(i=0,o=n.length;i<o;i++)y(n[i],i+4);y(r,7)}function v(e){n.bindBuffer(n.ARRAY_BUFFER,e.triangleBuffers.shadowBuffer);(e.alwaysUpdate||e.rebuildOptions.all||e.rebuildOptions.shadow)&&(e.triangleBuffers.needsResize?n.bufferData(n.ARRAY_BUFFER,e.triangleBuffers.shadowData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,e.triangleBuffers.shadowData));n.enableVertexAttribArray(l.shadowColour);n.enableVertexAttribArray(l.vertexIndex);n.vertexAttribPointer(l.shadowColour,3,n.UNSIGNED_BYTE,!1,a,0);n.vertexAttribPointer(l.vertexIndex,1,n.UNSIGNED_BYTE,!1,a,3)}function g(e){n.bindBuffer(n.ARRAY_BUFFER,e.triangleBuffers.textureBuffer);(e.rebuildOptions.textures||e.alwaysUpdate||e.rebuildOptions.all)&&(e.triangleBuffers.needsResize?n.bufferData(n.ARRAY_BUFFER,e.triangleBuffers.textureData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,e.triangleBuffers.textureData));n.enableVertexAttribArray(l.textCoord);n.enableVertexAttribArray(l.textureBank);n.enableVertexAttribArray(l.circleRadius);n.enableVertexAttribArray(l.startAngle);n.enableVertexAttribArray(l.endAngle);n.vertexAttribPointer(l.textCoord,4,n.FLOAT,!1,i,0);n.vertexAttribPointer(l.textureBank,2,n.FLOAT,!1,i,16);n.vertexAttribPointer(l.circleRadius,1,n.FLOAT,!1,i,24);n.vertexAttribPointer(l.startAngle,1,n.FLOAT,!1,i,28);n.vertexAttribPointer(l.endAngle,1,n.FLOAT,!1,i,32)}function p(e){n.bindBuffer(n.ARRAY_BUFFER,e.triangleBuffers.colourBuffer);(e.rebuildOptions.colours||e.alwaysUpdate||e.rebuildOptions.all)&&(e.triangleBuffers.needsResize?n.bufferData(n.ARRAY_BUFFER,e.triangleBuffers.colourData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,e.triangleBuffers.colourData));n.enableVertexAttribArray(l.colour);n.vertexAttribPointer(l.colour,4,n.UNSIGNED_BYTE,!1,o,0)}function m(e,t){n.bindBuffer(n.ARRAY_BUFFER,e.triangleBuffers.positionBuffer);(e.rebuildOptions.all||e.alwaysUpdate||e.rebuildOptions.positions&&t)&&(e.triangleBuffers.needsResize?n.bufferData(n.ARRAY_BUFFER,e.triangleBuffers.positionData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,e.triangleBuffers.positionData));n.enableVertexAttribArray(l.position);n.enableVertexAttribArray(l.width);n.enableVertexAttribArray(l.anchor);n.vertexAttribPointer(l.position,2,n.FLOAT,!1,r,0);n.vertexAttribPointer(l.width,1,n.FLOAT,!1,r,8);n.vertexAttribPointer(l.anchor,1,n.FLOAT,!1,r,12)}function y(e,t){n.activeTexture(n["TEXTURE"+t])
;if(!e.texture||e.rebuild){e.texture=n.createTexture();n.bindTexture(n.TEXTURE_2D,e.texture);n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);if(e.data){n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,e.size,e.size,0,n.LUMINANCE,n.FLOAT,e.data);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);e.data=void 0}else{var r=e.alphaChannel?n.RGBA:n.RGB;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);n.texImage2D(n.TEXTURE_2D,0,r,r,n.UNSIGNED_BYTE,e.img);n.generateMipmap(n.TEXTURE_2D);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR);e.img=void 0}e.rebuild=!1}else n.bindTexture(n.TEXTURE_2D,e.texture)}function b(e){e.triangleBuffers.positionBuffer||(e.triangleBuffers.positionBuffer=n.createBuffer());e.triangleBuffers.textureBuffer||(e.triangleBuffers.textureBuffer=n.createBuffer());e.triangleBuffers.colourBuffer||(e.triangleBuffers.colourBuffer=n.createBuffer());e.triangleBuffers.shadowBuffer||(e.triangleBuffers.shadowBuffer=n.createBuffer())}function x(e,t,r,i,o,a,u,s,l,c){n.uniform3f(f.resolution,t,r,i);n.uniform1f(f.hitTest,o?1:0);n.uniform1iv(f.textures,[0,1,2,3,4,5,6]);n.uniformMatrix4fv(f.transform,!1,e.get());n.uniform1f(f.shadowType,a);n.uniform1f(f.zoom,e.getZoomLevel());n.uniform1f(f.viewIndependent,l?0:1);n.uniform1i(f.anchorTexture,7);n.uniform1f(f.anchorTextureSize,u.size);n.uniform1i(f.useAnchor,s?1:0);n.uniform1f(f.adaptiveStyling,c&&c.zoom&&c.zoom.adaptiveStyling?1:0)}return{drawItems:c,finish:d}}var xy=10;function wy(e){var t,n=e,r=xy*Float32Array.BYTES_PER_ELEMENT;if(!n.lineShader){var i=Ng(n,"line-vertex",n.VERTEX_SHADER),o=Ng(n,"line-fragment",n.FRAGMENT_SHADER);t=Pg(n,i,o);n.lineShader={vertexShader:i,fragmentShader:o,program:t}}t=n.lineShader.program;n.getExtension("OES_standard_derivatives");n.getExtension("OES_element_index_uint");var a={position1:n.getAttribLocation(t,"a_position1"),position2:n.getAttribLocation(t,"a_position2"),position3:n.getAttribLocation(t,"a_position3"),colour:n.getAttribLocation(t,"a_colour"),colour2:n.getAttribLocation(t,"a_colour2"),vertexInfo:n.getAttribLocation(t,"a_vertexInfo"),shadowColour:n.getAttribLocation(t,"a_hitTestColour"),index:n.getAttribLocation(t,"a_index")},u={hitTest:n.getUniformLocation(t,"u_hitTest"),zoom:n.getUniformLocation(t,"u_zoom"),transform:n.getUniformLocation(t,"u_transform"),resolution:n.getUniformLocation(t,"u_resolution"),shadowType:n.getUniformLocation(t,"u_shadowType"),viewIndependent:n.getUniformLocation(t,"u_viewIndependent"),gradientStartFraction:n.getUniformLocation(t,"u_gradientStartFraction"),time:n.getUniformLocation(t,"u_time"),adaptiveStyling:n.getUniformLocation(t,"u_adaptiveStyling")};function s(){Wg(n,t)}function f(e,r,i,o,a,u,s,f,p){n.useProgram(t);g();l(i,o,a,u,s,0|e.shadowType,e.useView,f,p);c(r);h(e,r);r.needsResize=!1;d(r);v(r);g()}function l(e,t,r,i,o,a,s,f,l){n.uniform3f(u.resolution,t,r,i);n.uniformMatrix4fv(u.transform,!1,e.get());n.uniform1f(u.hitTest,o?1:0);n.uniform1f(u.zoom,e.getZoomLevel());n.uniform1f(u.shadowType,a);n.uniform1f(u.viewIndependent,s?0:1);n.uniform1f(u.adaptiveStyling,f&&f.zoom&&f.zoom.adaptiveStyling?1:0);var c=0;o||(c=(1-f.linkStyle.transition)/2);n.uniform1f(u.gradientStartFraction,c);n.uniform1f(u.time,l)}function c(e){e.elementBuffer||(e.elementBuffer=n.createBuffer());e.indexBuffer||(e.indexBuffer=n.createBuffer())}function d(e){n.bindBuffer(n.ARRAY_BUFFER,e.elementBuffer);n.enableVertexAttribArray(a.position1);n.enableVertexAttribArray(a.position2);n.enableVertexAttribArray(a.position3);n.enableVertexAttribArray(a.vertexInfo);n.enableVertexAttribArray(a.colour);n.enableVertexAttribArray(a.colour2);n.enableVertexAttribArray(a.shadowColour);n.enableVertexAttribArray(a.index);n.vertexAttribPointer(a.position1,2,n.FLOAT,!1,r,0);n.vertexAttribPointer(a.position2,2,n.FLOAT,!1,r,8);n.vertexAttribPointer(a.position3,2,n.FLOAT,!1,r,16);n.vertexAttribPointer(a.vertexInfo,4,n.UNSIGNED_BYTE,!1,r,24);n.vertexAttribPointer(a.colour,4,n.UNSIGNED_BYTE,!1,r,28);n.vertexAttribPointer(a.colour2,4,n.UNSIGNED_BYTE,!1,r,32);n.vertexAttribPointer(a.shadowColour,3,n.UNSIGNED_BYTE,!1,r,36);n.vertexAttribPointer(a.index,1,n.UNSIGNED_BYTE,!1,r,39)}function h(e,t){if(e.alwaysUpdate||e.rebuildOptions.all||e.rebuildOptions.positions||e.rebuildOptions.colours||e.rebuildOptions.textures||e.rebuildOptions.shadow){n.bindBuffer(n.ARRAY_BUFFER,t.elementBuffer);t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.elementData,n.DYNAMIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.elementData);n.bindBuffer(n.ARRAY_BUFFER,null);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer);if(t.needsResize){n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.elementIndex,n.DYNAMIC_DRAW);t.needsResize=!1}else n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,t.elementIndex);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}}function v(e){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer);var t=6*e.numOfLines+3*e.numOfArrowheads;t>0&&n.drawElements(n.TRIANGLES,t,n.UNSIGNED_INT,0)}function g(){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null);n.bindBuffer(n.ARRAY_BUFFER,null)}return{drawItems:f,finish:s}}var Ay=6,My=3,Iy=4,Ey=8,Cy=Ay*Float32Array.BYTES_PER_ELEMENT,Sy=My*Float32Array.BYTES_PER_ELEMENT,ky=Iy*Uint8Array.BYTES_PER_ELEMENT,Ry=Ey*Uint8Array.BYTES_PER_ELEMENT;function Ty(e){var t,n=e;if(!n.arcShader){var r=Ng(n,"line-arc-vertex",n.VERTEX_SHADER),i=Ng(n,"line-fragment",n.FRAGMENT_SHADER);t=Pg(n,r,i);n.arcShader={vertexShader:r,fragmentShader:i,program:t}}t=n.arcShader.program;var o={position:n.getAttribLocation(t,"a_position"),radius:n.getAttribLocation(t,"a_radius"),startAngle:n.getAttribLocation(t,"a_startAngle"),endAngle:n.getAttribLocation(t,"a_endAngle"),width:n.getAttribLocation(t,"a_width"),colour:n.getAttribLocation(t,"a_colour"),colour2:n.getAttribLocation(t,"a_colour2"),core:n.getAttribLocation(t,"a_core"),type:n.getAttribLocation(t,"a_lineType"),shadowColour:n.getAttribLocation(t,"a_hitTestColour")},a={hitTest:n.getUniformLocation(t,"u_hitTest"),zoom:n.getUniformLocation(t,"u_zoom"),transform:n.getUniformLocation(t,"u_transform"),resolution:n.getUniformLocation(t,"u_resolution"),shadowType:n.getUniformLocation(t,"u_shadowType"),gradientStartFraction:n.getUniformLocation(t,"u_gradientStartFraction"),time:n.getUniformLocation(t,"u_time"),adaptiveStyling:n.getUniformLocation(t,"u_adaptiveStyling")};function u(){Wg(n,t)}function s(e,r,i,o,a,u,s,p){n.useProgram(t);f(r,i,o,a,u,0|e.shadowType,s,p);l(e);c(e);d(e);v(e);h(e);e.arcBuffers.needsResize=!1;e.arcBuffers.totalnumOfVertices>0&&n.drawArrays(n.TRIANGLES,0,e.arcBuffers.totalnumOfVertices);g()}function f(e,t,r,i,o,u,s,f){n.uniform3f(a.resolution,t,r,i);n.uniformMatrix4fv(a.transform,!1,e.get());n.uniform1f(a.hitTest,o?1:0);n.uniform1f(a.zoom,e.getZoomLevel());n.uniform1f(a.shadowType,u);n.uniform1f(a.adaptiveStyling,s&&s.zoom&&s.zoom.adaptiveStyling?1:0);var l=0;o||(l=(1-s.linkStyle.transition)/2);n.uniform1f(a.gradientStartFraction,l);n.uniform1f(a.time,f)}function l(e){e.arcBuffers.positionBuffer||(e.arcBuffers.positionBuffer=n.createBuffer());e.arcBuffers.colourBuffer||(e.arcBuffers.colourBuffer=n.createBuffer());e.arcBuffers.shadowBuffer||(e.arcBuffers.shadowBuffer=n.createBuffer());e.arcBuffers.coreBuffer||(e.arcBuffers.coreBuffer=n.createBuffer())}function c(e){var t=e.arcBuffers;n.bindBuffer(n.ARRAY_BUFFER,t.colourBuffer);(e.rebuildOptions.colours||e.alwaysUpdate||e.rebuildOptions.all)&&(t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.colourData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.colourData));n.enableVertexAttribArray(o.colour);n.enableVertexAttribArray(o.colour2);n.vertexAttribPointer(o.colour,4,n.UNSIGNED_BYTE,!1,Ry,0);n.vertexAttribPointer(o.colour2,4,n.UNSIGNED_BYTE,!1,Ry,4)}function d(e){var t=e.arcBuffers;n.bindBuffer(n.ARRAY_BUFFER,t.shadowBuffer);(e.alwaysUpdate||e.rebuildOptions.all||e.rebuildOptions.shadow)&&(t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.shadowData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.shadowData));n.enableVertexAttribArray(o.shadowColour);n.enableVertexAttribArray(o.type);n.vertexAttribPointer(o.shadowColour,3,n.UNSIGNED_BYTE,!1,ky,0);n.vertexAttribPointer(o.type,1,n.UNSIGNED_BYTE,!1,ky,3)}function h(e){var t=e.arcBuffers;n.bindBuffer(n.ARRAY_BUFFER,t.coreBuffer);(e.alwaysUpdate||e.rebuildOptions.all||e.rebuildOptions.shadow)&&(t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.coreData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.coreData));n.enableVertexAttribArray(o.core);n.vertexAttribPointer(o.core,3,n.FLOAT,!1,Sy,0)}function v(e){var t=e.arcBuffers;n.bindBuffer(n.ARRAY_BUFFER,t.positionBuffer);(e.rebuildOptions.positions||e.alwaysUpdate||e.rebuildOptions.all)&&(t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.positionData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.positionData));n.enableVertexAttribArray(o.position);n.enableVertexAttribArray(o.radius);n.enableVertexAttribArray(o.startAngle);n.enableVertexAttribArray(o.endAngle);n.enableVertexAttribArray(o.width);n.vertexAttribPointer(o.position,2,n.FLOAT,!1,Cy,0);n.vertexAttribPointer(o.radius,1,n.FLOAT,!1,Cy,8);n.vertexAttribPointer(o.startAngle,1,n.FLOAT,!1,Cy,12);n.vertexAttribPointer(o.endAngle,1,n.FLOAT,!1,Cy,16);n.vertexAttribPointer(o.width,1,n.FLOAT,!1,Cy,20)}function g(){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null);n.bindBuffer(n.ARRAY_BUFFER,null)}return{drawItems:s,finish:u}}var Ly=4;function By(e,t,n){var r,i,o={},a={},u="",s="",f={},l={textAtlas:!1,fontIcons:!1,imageAtlas:!1};function c(t,r){t.clearTextureAtlas(e.imageAtlases);e.imageAtlases=Vv(n,r)}function d(t,n,o,a){i=a.isFloatingPointSupported(o._rendering.disableFloatTexture);if(n.all){e.layersToDraw.length=0;r=qn(e.canvas);l.textAtlas=!1;l.fontIcons=!1;l.imageAtlas=!1}var u=o.linkStyle,s=!(!u||"along"!==u.glyphs);t.forEach(function(t){var r=L(e.allLayers,t,!!n.all);n.all&&e.layersToDraw.push(r);r.useAbsolutePosition=!i&&(n.all||n.positions||t.alwaysUpdate)||s&&r.id.indexOf("LINK")>-1;g(r,n,t.fbAlpha);if(p(n,t.alwaysUpdate)||r.useAbsolutePosition){var a=t.primitives,u=t.numOfPrimitives;h(o);v(o);if(n.all||t.alwaysUpdate){var f=r.lineBuffers,c=r.arcBuffers,d=r.triangleBuffers;m(f,c,d);for(var y=0;y<u;y++){T(t.primitives[y],f,c,d)}}if(!l.textAtlas&&!l.fontIcons&&!l.imageAtlas){E(r);w(a,u,r)}}});A(a,o._rendering.showTextAtlas);M(a,o._rendering.showFontIconAtlas);I(a,o._rendering.showImageAtlas);if(l.textAtlas||l.fontIcons||l.imageAtlas){l.fontIcons=!1;l.textAtlas=!1;l.imageAtlas=!1;n.all=!0;d(t,n,o,a)}f={}}function h(e){V(e.fontFamily)&&(e.fontFamily="sans-serif");if(u!==e.fontFamily||null===u){u=e.fontFamily;l.textAtlas=!0}f[u]=!0;a[u]=!0}function v(e){if(e.iconFontFamily&&s!==e.iconFontFamily){s=e.iconFontFamily;l.fontIcons=!0}}function g(e,t,n){e.fbAlpha=n;e.rebuildOptions={all:t.all,colours:t.colours,textures:t.textures,shadow:t.shadow,positions:t.positions}}function p(e,t){return e.all||e.textures||e.positions||e.shadow||e.colours||t}function m(e,t,n){t.numOfTriangles=0;e.numOfLines=0;e.numOfArrowheads=0;n.numOfTriangles=0}var y={A:_m,L:Ym,I:b,TR:vy,R:Jm,RR:qm,C:Pm,T:x};function b(e,t,r,i,o,a){Zm(e,t,r,i,o,a,n)}function x(n,i,a,s,f,c){if(c.all||f||i.useAbsolutePosition)if(a.isfi)Om(n,i,a,s,f,c,o);else{ny(n,i,a,s,f,c,t.getGlyphsFromText(a.t,a.ff,u,a.bo,l,r,e.textAtlas),e.textAtlas.fontSize)}}function w(t,n,r){for(var i,o=r.rebuildOptions,a=r.alwaysUpdate,u=0;u<n;u++){var s=1;(i=t[u]).a.bg&&(s*=e.alpha.background);i.a.gh&&(s*=e.alpha.ghost);var f=Lm(i,a,o);y[i.p](f,r,i,s,a,o)}}function A(n,r){if(l.textAtlas||r){e.textAtlas&&n.clearTextureAtlas(e.textAtlas.atlases);e.textAtlas=fm(f,t,r);a=f}}function M(t,n){if(l.fontIcons||!e.fontIconAtlas||n){t.clearTextureAtlas(e.fontIconAtlas);e.fontIconAtlas=wm(o,s,n)}}function I(e,t){(l.imageAtlas||t)&&c(e,t)}function E(e){S(e.lineBuffers);k(e.arcBuffers);R(e.triangleBuffers)}function C(e,t,n){e.needsResize=e.needsResize||!t||n>t.length}function S(e){e.elementIndexIndex=0;e.elementMappingIndex=0;e.elementDataIndex=0;e.elementIntegerDataIndex=0;var t=e.numOfLines*xy*4;t+=e.numOfArrowheads*xy*3;var n=6*e.numOfLines+3*e.numOfArrowheads;C(e,e.elementData,t);C(e,e.elementIndex,n);if(e.needsResize){e.elementData=new Float32Array(t);e.elementIntegerData=new Uint8Array(e.elementData.buffer,0,e.elementData.length*Float32Array.BYTES_PER_ELEMENT);e.elementIndex=new Uint32Array(n)}}function k(e){e.positionIndex=0;e.colourIndex=0;e.shadowIndex=0;e.coreIndex=0;e.totalnumOfVertices=3*e.numOfTriangles;C(e,e.positionData,e.totalnumOfVertices*Ay);t();n();r();i();function t(){var t=e.totalnumOfVertices*Ay;e.needsResize&&(e.positionData=new Float32Array(t))}function n(){var t=e.totalnumOfVertices*Ey;e.needsResize&&(e.colourData=new Uint8Array(t))}function r(){var t=e.totalnumOfVertices*Iy;e.needsResize&&(e.shadowData=new Uint8Array(t))}function i(){var t=e.totalnumOfVertices*My;e.needsResize&&(e.coreData=new Float32Array(t))}}function R(e){var t=3;e.positionIndex=0;e.colourIndex=0;e.textureIndex=0;e.shadowIndex=0;e.totalnumOfVertices=e.numOfTriangles*t;var n=e.totalnumOfVertices*gy;C(e,e.positionData,n);r();i();o();a();function r(){e.needsResize&&(e.positionData=new Float32Array(e.totalnumOfVertices*gy))}function i(){e.needsResize&&(e.colourData=new Uint8Array(e.totalnumOfVertices*yy))}function o(){e.needsResize&&(e.textureData=new Float32Array(e.totalnumOfVertices*my))}function a(){e.needsResize&&(e.shadowData=new Uint8Array(e.totalnumOfVertices*py))}}function T(t,n,i,u){switch(t.p){case hn.arc:t.isDonut?u.numOfTriangles+=2:i.numOfTriangles+=2*Ly;break;case hn.line:n.numOfLines+=1;break;case hn.circle:t.bw>0&&(u.numOfTriangles+=2);t.fi&&(u.numOfTriangles+=2);break;case hn.rect:case hn.roundrect:t.fi&&(u.numOfTriangles+=2);t.bw>0&&(u.numOfTriangles+=2);break;case hn.text:var s=t.t,c=e.stringSplitter.unicodeAwareCharacters(s),d=c.length;if(t.isfi){var h=s+(t.ff||"");u.numOfTriangles+=2;if(!o[h]){l.fontIcons=!0;o[h]={t:s,ff:t.ff}}}else{if(t.ff){f[t.ff]=!0;if(!a[t.ff]){l.textAtlas=!0;a[t.ff]=!0}}t.back&&(u.numOfTriangles+=2);r&&(d=it(c,s).result.length);u.numOfTriangles+=2*d}break;case hn.triangle:if(t.arrowhead>0)1===t.arrowhead?n.numOfArrowheads++:i.numOfTriangles++;else{t.fi&&u.numOfTriangles++;t.bw>0&&u.numOfTriangles++}break;case"I":u.numOfTriangles+=2}}function L(e,t,n){var r=e.get(t.id);if(r&&n)Gy(r,t);else if(!r){r=Zy(t);e.set(t.id,r)}return r}return{generate:d,updateImageTextures:c}}function Gy(e,t){e.useFramebuffer=t.useFramebuffer;e.drawFramebuffer=t.drawFramebuffer;e.framebuffer=null;e.renderbuffer=null;e.framebufferTexture=null;e.fbAlpha=t.fbAlpha;e.useView=t.useView;e.shadowType=t.shadowType;e.rebuildOptions={};e.alwaysUpdate=t.alwaysUpdate;e.blatOverview=t.blatOverview;e.numOfPrimitives=t.numOfPrimitives;e.primitives=t.primitives;e.overview=t.overview;e.useAbsolutePosition=!1}function Zy(e){var t={triangleBuffers:{colourIndex:0,needsResize:!1,numOfTriangles:0,positionIndex:0,shadowIndex:0,textureIndex:0,totalnumOfVertices:0,skip:function(){t.triangleBuffers.positionIndex+=6*gy},skipMany:function(e){t.triangleBuffers.positionIndex+=6*gy*e}},lineBuffers:{numOfLines:0,numOfArrowheads:0,needsResize:!1,elementDataIndex:0,elementDataIndexIndex:0,elementIndexIndex:0,elementIntegerDataIndex:0,elementMappingIndex:0,skip:function(){t.lineBuffers.elementDataIndex+=4*xy}},arcBuffers:{colourIndex:0,coreIndex:0,numOfTriangles:0,needsResize:!1,positionIndex:0,shadowIndex:0,totalnumOfVertices:0,skip:function(){t.arcBuffers.positionIndex+=6*Ay*Xm}},id:e.id,useFramebuffer:e.useFramebuffer,drawFramebuffer:e.drawFramebuffer,framebuffer:null,renderbuffer:null,framebufferTexture:null,fbAlpha:e.fbAlpha,useView:e.useView,shadowType:e.shadowType,rebuildOptions:{},alwaysUpdate:e.alwaysUpdate,blatOverview:e.blatOverview,numOfPrimitives:e.numOfPrimitives,primitives:e.primitives,overview:e.overview,useAbsolutePosition:!1};return t}function Oy(e){var t,n=e;if(!n.rttShader){var r=Ng(n,"renderToTexture-vertex",n.VERTEX_SHADER),i=Ng(n,"renderToTexture-fragment",n.FRAGMENT_SHADER);t=Pg(n,r,i);n.rttShader={vertexShader:r,fragmentShader:i,program:t}}t=n.rttShader.program;var o=new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,-1,1,0,1,1,-1,1,0,1,1,1,1]),a=n.createBuffer(),u={position:n.getAttribLocation(t,"a_position"),textCoord:n.getAttribLocation(t,"a_texCoord")},s={globalAlpha:n.getUniformLocation(t,"u_globalAlpha"),backgroundColour:n.getUniformLocation(t,"u_backgroundColour"),textures:n.getUniformLocation(t,"u_image")};function f(){Wg(n,t)}function l(e,r,i){n.useProgram(t);h(e);c(i||o);d(r,0);n.drawArrays(n.TRIANGLES,0,6)}function c(e){n.bindBuffer(n.ARRAY_BUFFER,a);n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW);n.enableVertexAttribArray(u.position);n.enableVertexAttribArray(u.textCoord);n.vertexAttribPointer(u.position,2,n.FLOAT,!1,4*Float32Array.BYTES_PER_ELEMENT,0);n.vertexAttribPointer(u.textCoord,2,n.FLOAT,!1,4*Float32Array.BYTES_PER_ELEMENT,8)}function d(e,t){n.activeTexture(n["TEXTURE"+t]);n.bindTexture(n.TEXTURE_2D,e)}function h(e){n.uniform1f(s.globalAlpha,e)}return{drawItems:l,finish:f}}function Fy(e){var t,n,r,i,o,a,u=e.canvas,s=e.framebuffers,f=R(),l=wy(f),c=Ty(f),d=by(e),h=Oy(f),v=null,g=new Uint8Array(4);function p(e){return!0!==e&&!!f.getExtension("OES_texture_float")}function m(t){y();c.finish();l.finish();d.finish();e.imageAtlases.forEach(function(e){P(e)});e.textAtlas&&b(e.textAtlas.atlases);P(e.fontIconAtlas);e.layersToDraw=[];e.allLayers=new Map;f.flush();f.finish();if(t){f.deleteProgram(f.arcShader.program);f.deleteProgram(f.lineShader.program);f.deleteProgram(f.rttShader.program);f.deleteProgram(f.triangleShader.program);Object.keys(e).forEach(function(t){delete e[t]})}f=void 0;e.gl=void 0;l=void 0;c=void 0;d=void 0;h=void 0}function y(){j(e.framebuffers).forEach(function(e){f.deleteFramebuffer(e.framebuffer);f.deleteRenderbuffer(e.renderbuffer);f.deleteTexture(e.texture)});e.framebuffers={};s=e.framebuffers}function b(e){e&&(Array.isArray(e)?e.forEach(P):P(e))}var x={data:new Float32Array(4),size:2,rebuild:!1};function w(t,s,l,c,d,h,v,g,p,m){n=u.clientWidth;r=u.clientHeight;a=p;var y=u.width/n;i=f.drawingBufferWidth;o=f.drawingBufferHeight;var b=e.layersToDraw,w=B(t),A=performance.now();e.view=t;if(a&&(m.positions||m.all)){x.rebuild=!0;x.size=g.getTextureSize();x.data=g.getData()}if(0===d.length){d.push(E());d.push(E());d.push(E())}var M=!1,C=h._showShadowCanvas;D();f.viewport(0,0,f.drawingBufferWidth,f.drawingBufferHeight);f.clear(f.COLOR_BUFFER_BIT);for(var S=0,R=b.length;S<R;S++){var T=b[S];if(h.overview&&h.overview.shown&&T.blatOverview&&s)I(s,l,c,d,h,A);else{if(!(v&&!T.useView)){T.drawFramebuffer&&(M=!0);k(T.drawFramebuffer);G(T,w,n,r,y,l,c,d,h._showShadowCanvas,h,A);Y(T)}if(T.useFramebuffer&&M){M=!1;D();L(T.useFramebuffer,C?1:T.fbAlpha);k(T.useFramebuffer);f.clearColor(0,0,0,0);f.clear(f.COLOR_BUFFER_BIT)}}}V()}function A(a,s){n=u.clientWidth;r=u.clientHeight;var l=u.width/n;i=f.drawingBufferWidth;o=f.drawingBufferHeight;if(e.layersToDraw.length>0){var c=B(e.view),d=i/u.clientWidth,h=a*d,v=o-s*d;k("shadow");f.viewport(0,0,f.drawingBufferWidth,f.drawingBufferHeight);f.clear(f.COLOR_BUFFER_BIT);for(var g=0,p=e.layersToDraw.length;g<p;g++){G(e.layersToDraw[g],c,n,r,l,e.textAtlas,e.fontIconAtlas,e.imageAtlases,!0,null,0)}h>=0&&v>=0&&h<i&&v<o&&f.readPixels(h,v,1,1,f.RGBA,f.UNSIGNED_BYTE,t);f.clear(f.COLOR_BUFFER_BIT);D()}return t}function M(e,t,n,r,i,o,a,u,s){D();f.clearColor(1,1,1,1);w(e,t,n,r,i,o,a,u,s,{all:!0});var l=new Uint8Array(f.drawingBufferWidth*f.drawingBufferHeight*4);f.readPixels(0,0,f.drawingBufferWidth,f.drawingBufferHeight,f.RGBA,f.UNSIGNED_BYTE,l);return l}function I(t,i,o,a,s,l){n=u.clientWidth;var c=u.width/n,d=t.width(),h=t.height()+1,v=B(t);k("overview",d*c,h*c);f.clearColor(1,1,1,1);f.clear(f.COLOR_BUFFER_BIT);f.clearColor(0,0,0,0);for(var g=e.layersToDraw,p=0,m=g.length;p<m;p++){var y=g[p];y.overview&&G(y,v,d,h,c,i,o,a,s._showShadowCanvas,s,l)}k(null);L("overview",1,T(d,h,n,r,s))}function E(){var e={alphaChannel:!1,img:g,rebuild:!1,size:0,texture:C()};f.texImage2D(f.TEXTURE_2D,0,f.RGBA,1,1,0,f.RGBA,f.UNSIGNED_BYTE,g);return e}function C(){var e=f.createTexture();f.bindTexture(f.TEXTURE_2D,e);f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!1);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);return e}function S(e){e?f.bindFramebuffer(f.FRAMEBUFFER,e.framebuffer):D()}function k(e,t,n){void 0===t&&(t=0);void 0===n&&(n=0);var r=s[e]||null,i=f.RGBA,o=t||f.drawingBufferWidth,a=n||f.drawingBufferHeight;if(e&&!r){r={framebuffer:f.createFramebuffer(),renderbuffer:f.createRenderbuffer(),texture:C()};s[e]=r;"shadow"===e&&(i=f.RGB);f.texImage2D(f.TEXTURE_2D,0,i,o,a,0,i,f.UNSIGNED_BYTE,null);f.bindFramebuffer(f.FRAMEBUFFER,r.framebuffer);f.bindRenderbuffer(f.RENDERBUFFER,r.renderbuffer);f.clearColor(0,0,0,0);f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_COMPONENT16,o,a);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,r.texture,0);f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,r.renderbuffer);var u=f.checkFramebufferStatus(f.FRAMEBUFFER);if(f.FRAMEBUFFER_COMPLETE!==u)throw new Error(u.toString())}S(r);f.viewport(0,0,o,a)}function R(){f=Yg(u,{antialias:!1,preferLowPowerToHighPerformance:!1,depth:!1,stencil:!1});e.gl=f;n=u.width;r=u.height;i=f.drawingBufferWidth;o=f.drawingBufferHeight;f.getExtension("OES_standard_derivatives");f.getExtension("OES_element_index_uint");f.viewport(0,0,i,o);f.blendFunc(f.ONE,f.ONE_MINUS_SRC_ALPHA);f.enable(f.BLEND);f.clearColor(0,0,0,0);e.framebuffers={};s=e.framebuffers;t=new Uint8Array(4);return f}function T(e,t,n,r,i){var o,a=1-e/n*2,u=1-t/r*2;switch(i.overview.p){case"ne":o=new Float32Array([a,u,0,0,1,u,1,0,a,1,0,1,a,1,0,1,1,u,1,0,1,1,1,1]);break;case"nw":o=new Float32Array([-1,u,0,0,-a,u,1,0,-1,1,0,1,-1,1,0,1,-a,u,1,0,-a,1,1,1]);break;case"sw":o=new Float32Array([-1,-1,0,0,-a,-1,1,0,-1,-u,0,1,-1,-u,0,1,-a,-1,1,0,-a,-u,1,1]);break;case"se":default:o=new Float32Array([a,-1,0,0,1,-1,1,0,a,-u,0,1,a,-u,0,1,1,-1,1,0,1,-u,1,1])}return o}function L(e,t,n){var r;s[e]&&(r=s[e].texture);h.drawItems(t,r,n)}function B(e){return e?{panX:e.offsetXtoWebglPanX(),panY:e.offsetYtoWebglPanY(),zoom:e.getZoomScale()}:{panX:0,panY:0,zoom:1}}function G(e,t,n,r,i,o,a,u,s,f,l){Z(e.useView,t.panX,t.panY,t.zoom);O(e,e.lineBuffers,n,r,i,s,f,l);F(e,n,r,i,s,f,l);z(e,o,a,u,n,r,i,s,f)}function Z(e,t,n,r){v=Xg();if(e){v.pan(t,n);v.zoom(r)}else{v.pan(0,0);v.zoom(1)}}function O(e,t,n,r,i,o,a,u){l.drawItems(e,t,v,n,r,i,o,a,u)}function F(e,t,n,r,i,o,a){c.drawItems(e,v,t,n,r,i,o,a)}function z(e,t,n,r,i,o,u,s,f){d.drawItems(e,v,t,n,r,i,o,u,s,x,a,e.useAbsolutePosition,f)}function D(){f.bindFramebuffer(f.FRAMEBUFFER,null)}function Y(e){e.rebuildOptions.colours=!1;e.rebuildOptions.positions=!1;e.rebuildOptions.textures=!1;e.rebuildOptions.shadow=!1;e.rebuildOptions.all=!1}function V(){for(var e=0;e<8;e++){f.activeTexture(f["TEXTURE"+e]);f.bindTexture(f.TEXTURE_2D,null)}}function P(e){if(e&&e.texture){f.deleteTexture(e.texture);e.texture=void 0;e.ctx=void 0;e.img=void 0}}return{finish:m,isFloatingPointSupported:p,clearFramebuffers:y,clearTextureAtlas:b,render:w,drawShadowCanvas:A,getPixels:M}}function zy(e,t){var n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$£1234567890() ",r=new Map;function i(){return Object.keys(o).filter(function(e){return!r.get(e)})}for(var o={},a=0,u=n.length;a<u;a++)o[n[a]]=!0;function s(e,t){for(var n=!1,i=!1,a=0,u=e.length;a<u;a++){var s=e[a];r.get(s)?n=!0:i=!0;o[s]||(o[s]=!0)}n&&(t.imageAtlas=!0);i&&(t.textAtlas=!0)}function f(n,i,o,a,u,f,l){var c,d,h=e.unicodeAwareCharacters(n);f&&(h=it(h,n).result);var v,g,p,m,y=!1,b={},x=[],w=l.getGlyphInfoForFont(i||o),A=0;for(v=0,g=h.length;v<g;v++){d=c=h[v].text||h[v];r.has(c)||r.set(c,Ie(c));if(r.get(c)){m=t.has(c);p=t.getEmojiImage(c)}else{a&&(d+="B");m=!!(p=w[d])}if(m)x[A++]=p;else{b[c]=!0;y=!0}}y&&s(Object.keys(b),u);return x}return{getNonEmojiGlyphs:i,getGlyphsFromText:f}}function Dy(e,t){return{canvas:e,layersToDraw:[],textAtlas:null,fontIconAtlas:null,imageAtlases:[],allLayers:new Map,framebuffers:{},alpha:{background:1,ghost:1},stringSplitter:t,imageList:null}}function Yy(e,t,n,r){var i,o=n.all;if(n.all){i=[];t.layersToDraw.length=0}else i=t.layersToDraw.slice();var a={alwaysUpdate:!1,bg:!1,blatOverview:!1,drawFramebuffer:"",fbAlpha:0,id:"",numOfPrimitives:0,overview:!1,primitives:[],shadowType:0,useFramebuffer:"",useView:!1},u=null;function s(e,o){if(n.all){if(o.bg&&a&&!e.bg){a.useFramebuffer=u;u=null}a={id:e.path,blatOverview:e.blatOverview,shadowType:e.shadowType,overview:e.overview,useView:e.useView,alwaysUpdate:e.alwaysUpdate,bg:e.bg,fbAlpha:r.backgroundAlpha,primitives:[],numOfPrimitives:0,drawFramebuffer:"",useFramebuffer:""};if(e.bg){o.bg&&(u="bg");a.drawFramebuffer=u}i.push(a)}else(a=t.allLayers.get(e.path)).numOfPrimitives=0}function f(e){a.primitives[a.numOfPrimitives++]=e}e.forEach(f,s,!o,!1);if(u){a.useFramebuffer=u;u=null}return i}function Vy(e,t,n){var r=null,i=null,o=null,a=null;function u(){r=Dy(e,n);i=zy(n,t);o=By(r,i,t);a=Fy(r);t.resetUpdatedImages()}u();function s(e,t){if(r){r.alpha.ghost=e;r.alpha.background=t}}function f(){a.finish(!0);a=null;o=null;i=null;r=null}function l(){a.finish();u()}function c(e){return a.isFloatingPointSupported(e)}function d(){a.clearFramebuffers()}function h(e){o.updateImageTextures(a,e);t.imagesUpdated()}function v(e,t,n){var i=Yy(e,r,t,n);o.generate(i,t,n,a)}function g(e,t,n,i,o,u){a.render(e,t,r.textAtlas,r.fontIconAtlas,r.imageAtlases,n,i,o,c(n._rendering.disableFloatTexture),u)}function p(e,t,n,i,o){return a.getPixels(e,t,r.textAtlas,r.fontIconAtlas,r.imageAtlases,n,i,o,c(n._rendering.disableFloatTexture))}function m(e,t){return a.drawShadowCanvas(e,t)}return{build:v,clearFramebuffers:d,destroy:f,draw:g,drawShadowCanvas:m,getPixels:p,isFloatingPointSupported:c,setAlpha:s,shutdownAndReset:l,updateTextures:h}}function Py(){var e=new Map;function t(){e=null}function n(t){var n=e.get(t);if(!n){n=Ce(Ee(t));e.set(t,n)}return n}function r(e){return n(e).length}function i(e,t){return n(e).slice(0,Math.max(t,0)).join("")}return{destroy:t,unicodeAwareCharacters:n,unicodeAwareLength:r,unicodeAwareTruncate:i}}var Wy=8888;function Xy(e,t,i,o,a){var u,s,f=jv(eg,!1,o),l=Py(),c=e.id,v=e.containerElement,g=void 0!==v,p=e.type;g||(u=e.elementToReplace);var m=!1;(v||u)&&(m=r(v||u));function y(e,t,n){var r,i=document.createElement("canvas");if(n&&m){i.dir="rtl";document.body.appendChild(i);i.style.display="none"}r=a?document.createElement("canvas").getContext("2d"):i.getContext("2d");i.context2d=r;i.height=t;i.width=e;return i}function b(){if(!wn.minimumFontChecked){for(var e="Hello",t=y(100,100).context2d,n=!1,r=function(n){In(t,n);return t.measureText(e).width},i=r(1),o=2;!n&&o<30;){(n=i!==r(o))&&An(o-1);o++}Mn(!0)}}function x(e){var t=w;"map"in C&&C.map().isShown()&&(t=C.privateGetMapContainer());t.style.cursor=e}var w=y(t,i,!0);w.style.display="block";var A=w.context2d;w.setAttribute("id",c);var M=null;if(a&&Jg()&&"chart"===p){M=Vy(w,f,l);w.webgl=!0}if(v)v.appendChild(w);else if(!g){u.style.display="block";u.parentNode.replaceChild(w,u)}w.canvas=!0;var I=w;if(w.webgl){A.webgl=!0;A.webglCanvas=w}else A.webgl=!1;tr(w,A,a,!!v);b();var E,C,S=I.getAttribute("style")||"";S+="touch-action: none; outline: none;";I.setAttribute("style",S);I.setAttribute("tabindex",""+Wy++);var k={},R={id:T,privateGetContainer:B,privateGetElement:O,privateGetWebGLRenderer:Z,privateInternalSetSize:G,privateSetContainer:L};E="chart"===p?Tg(c,f,k,R,M,l):$p(c,f,k,R);function T(){return c}n(C=E.api,function(e,t){-1===t.indexOf("private")&&(k[t]=e)});k.id=T;C.privateInit(A,t,i,y,x,eg,F);function L(e){(v=e)&&(m=r(v))}function B(){return v}function G(e,t){"privateMapSetSize"in C&&C.privateMapSetSize(e,t);I.width=e;I.height=t;var n=v&&C.privateUseAutoSizing();tr(I,A,a,!!n);C.privateSetSize(A,e,t,!!n)}function Z(){return M}function O(){return w}function F(){h(s);s=d(z)}function z(){if(!!I.parentElement){if(v&&v.clientWidth>0&&v.clientHeight>0){var e=v.clientWidth*devicePixelRatio,t=v.clientHeight*devicePixelRatio;if(I._currentWidth!==e||I._currentHeight!==t){I._currentWidth=e;I._currentHeight=t;hb(I,v.clientWidth,v.clientHeight)}}try{C.update()}finally{s=d(z)}}}C.privateBind("forceRedraw",function(e){C.privateTrigger("redraw",e);C.update()});s=d(z);return{element:w,publicApi:k,privateApi:C,actions:E.actions}}function Ny(e,t,n){var r={},i=0,o={};void 0!==e&&u();function a(t,n){for(var r=[],i=0;i<t[n].length;i++){var o=hg(t[n][i],e);r.push({id:t[n][i].identifier,x:o.x,y:o.y})}return r}function u(){cg(e,"contextmenu",function(e){pg(e);return!1});cg(e,"dragover",function(e){var n=hg(e);t.dragover(n.x,n.y)});function u(n,r){cg(e,n,function(e){t[n](a(e,"targetTouches"),a(e,"changedTouches"));r&&e.preventDefault()})}function s(t){cg(e,t,function(e){e.preventDefault()})}function f(n){cg(e,n,function(e){t[n](e.scale,e.rotation);e.preventDefault()})}if("onpointerdown"in document.documentElement){s("touchstart");s("touchmove");s("touchend");s("touchcancel")}else if("ontouchstart"in document.documentElement){u("touchstart",!0);u("touchmove");u("touchend");u("touchcancel");f("gesturestart");f("gesturechange");f("gestureend")}var l=null;function c(t,n){var o=t.pointerId||0,a=vg(t,l||e);switch(n){case"ADD":r[o]||(r[o]={id:o,x:a.x,y:a.y});break;case"DEL":if(r[o]){delete r[o];i--}break;case"MOVE":r[o]&&(r[o]={id:o,x:a.x,y:a.y})}return j(r)}function d(t,n){var i=t.pointerId||0,o=vg(t,l||e),a=[];switch(n){case"ADD":case"MOVE":a=[{id:i,x:o.x,y:o.y}];break;case"DEL":r[i]&&(a=[r[i]])}return a}function h(e){return e.pointerType===(e.MSPOINTER_TYPE_TOUCH||"touch")}function v(){
o[e.id]=new MSGesture;o[e.id].target=e}var g=1,p=0;function m(){g=1;p=0}function y(e,n){return function(r){if(h(r)){t[e](c(r,n));r.preventDefault()}}}function b(e,n){function r(r){if(h(r)){var i="DEL",o=d(r,i);t[e](c(r,i),o);n||r.preventDefault();l=null}}return r}if(window.PointerEvent){cg(e,"pointerdown",function(n){if(h(n)){l=e;if("undefined"!=typeof MSGesture){o[e.id]&&o[e.id].target||v();o[e.id].addPointer(n.pointerId)}i++;t.touchstart(c(n,"ADD"));n.preventDefault()}else{o[e.id]&&(o[e.id]=null);i=0;r={}}});cg(e,"pointermove",y("touchmove","MOVE"));cg(e,"pointerup",b("touchend"));cg(e,"pointercancel",b("touchcancel"));cg(e,"MSHoldVisual",function(e){e.preventDefault()});cg(e,"MSGestureStart",function(e){i>1&&e.preventDefault()});cg(e,"MSGestureChange",function(e){if(i>1&&e.detail!==e.MSGESTURE_FLAG_INERTIA){g*=e.scale;p+=e.rotation*(180/Math.PI);t.gesturechange(g,p);e.preventDefault()}});cg(e,"MSGestureEnd",function(e){t.gestureend(g,p);m();e.preventDefault()})}cg(e,"dblclick",function(n){if(!((navigator.msMaxTouchPoints||navigator.maxTouchPoints)&&("touch"===n.pointerType||"pen"===n.pointerType))){var r=hg(n,e);t.dblclick(r.x,r.y,n.ctrlKey,n.shiftKey);n.preventDefault()}});var x=null,w=null;cg(e,"mousedown",function(n){x=e;if(0===i){var r=hg(n,e);t.mousedown(n.button,r.x,r.y,n.ctrlKey,n.shiftKey)}});cg(e,"click",function(n){if(0===i){var r=hg(n,e);t.click(n.button,r.x,r.y,n.ctrlKey,n.shiftKey)}});cg(e,"mouseup",function(n){x=null;var r=hg(n,e);t.mouseup(r.x,r.y,n.ctrlKey,n.shiftKey);if(w){A("mouseup");w=null}});n.mouseup=function(e){if(x){var n=hg(w?w.evt:e,x);t.mouseup(n.x,n.y,e.ctrlKey,e.shiftKey);w=null;x=null}};n.pointerup=b("touchend",!0);cg(document,"mouseup",n.mouseup);cg(document,"pointerup",n.pointerup);cg(e,"mouseout",function(t){w={element:e,evt:t}});function A(n){var r=w.evt,i=w.element;if(e!==i&&null!==i&&t){var o=vg(r,i);t[n](o.x,o.y,r.ctrlKey,r.shiftKey)}}cg(e,"mousemove",function(n){var r=hg(n,e);t.mousemove(r.x,r.y,n.ctrlKey,n.shiftKey)});function M(n){var r=hg(n,e);t.mousewheel(-n.deltaY,r.x,r.y);pg(n)}cg(e,"wheel",M);cg(e,"keyup",function(e){t.keyup(e.keyCode)});cg(e,"keydown",function(e){var n=!1;(n=n||t.keydown(e.keyCode,e.ctrlKey,e.shiftKey))&&e.preventDefault&&e.preventDefault()})}}var Uy={},Ky={},jy="";function Hy(e){e in Uy&&delete Uy[e]}var _y="auto";function Qy(e){e&&(_y=e);return _y}function Jy(){for(var e,t,n,r,i,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];switch(o.length){case 0:throw new Error("createChart called with zero arguments");case 1:case 2:e=o[0];r=o[1];if(!(i=document.getElementById(e))){eb(e,r);return}t=i.clientWidth;n=i.clientHeight;break;default:e=o[0];t=+o[1];n=+o[2];r=o[3];if(!(i=document.getElementById(e))){eb(e,r);return}}sb({id:e,type:"chart",options:void 0,elementToReplace:i,containerElement:void 0},t,n,r)}function qy(e){throw $y(e)}function $y(e){return new Error('Cannot create KeyLines component. No element with id "'+e+'" exists in the DOM')}function eb(e,t){R(t,$y(e))}function tb(e){return+e.replace(/px$/,"")}function nb(e,t){var n,r,i=e.containerElement||e.elementToReplace,o=e.options;function a(e){t&&d(function(){t(null,e)})}function u(n,r){n?R(t,n):o?r.options(e.options,function(){a(r)}):a(r)}if(i){n=i.clientWidth||tb(i.style.width);r=i.clientHeight||tb(i.style.height)}sb(e,n,r,u)}var rb,ib={chart:0,timebar:0};function ob(e,t){function n(e){return V(e)||"chart"===e||"timebar"===e}var r=O(e),i=r.every(function(e){return n(e.type)});r.length<1?R(t,Error("No definition passed to KeyLines.create")):i?o(r,0,[]):R(t,Error("The type of component passed to KeyLines.create is not valid"));function o(e,n,r){function i(e){var t,n=e.type?e.type:"chart",r=void 0!==e.container,i="string"==typeof e&&e||e.id||!r&&e.element&&e.element.id||ub(n);if(r){if(Uy[i])throw new Error("Component with id: "+i+" already exists");var o=e.container;if("string"==typeof o){if(!(t=document.getElementById(o)))throw new Error("Container not found, "+e.container)}else{if(null!==o&&!o.parentNode)throw new Error("Container not found, "+e.container);t=o}}if(!r){if(ab(e.element)&&e.id)throw new Error("Cannot pass a DOM element and an id to create, please pass only one.");if(e.element&&!ab(e.element))throw new Error("You must pass a DOM element to the components element property.")}var a={id:i,type:n,options:e.options,containerElement:t,elementToReplace:null};if(ab(e)){n="chart";a.type=n;a.elementToReplace=e;a.elementToReplace.id=i}else if(ab(e.element)){a.elementToReplace=e.element;a.elementToReplace.id=i}a.elementToReplace&&!a.elementToReplace.parentNode&&qy();if(!a.elementToReplace&&!r){a.elementToReplace=document.getElementById(i);a.elementToReplace||qy(i)}return a}var a;try{a=i(e[n])}catch(e){R(t,e);return}nb(a,function(i,a){if(i)R(t,i);else{r.push(a);var u=n+1;if(u>=e.length){var s=1===r.length?r[0]:r;t&&t(null,s)}else o(e,u,r)}})}}function ab(e){return"object"==typeof e&&null!==e&&("object"==typeof HTMLElement&&e instanceof HTMLElement||1===e.nodeType)}function ub(e){ib[e]++;var t="KeyLines-"+e+"-"+ib[e];return Uy[t]||document.getElementById(t)?ub(e):t}function sb(e,t,n,r){Hy(e.id);var i=t||100,o=n||100;if("canvas"!==_y&&"chart"===e.type&&Jg())try{cb(e,i,o,!0,r)}catch(t){_g();cb(e,i,o,!1,r)}else if(lb())cb(e,i,o,!1,r);else{r("Could not create HTML5 canvas.")}}function fb(e){e&&(jy=e);return jy}function lb(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}function cb(e,t,n,r,i){var o=e.id;try{var a=Xy(e,t,n,jy,r);Uy[o]=a.publicApi;Ky[o]=a.privateApi;var u=a.actions;a.privateApi.privateSetRemoveComponentReference(function(){delete Uy[o];delete Ky[o]});var s={};Ky[o].privateSetGlobalEvents(s);Ny(a.element,u,s)}catch(e){if(i){i(e);return}}Uy[o].webgl=r;Uy[o].canvas=!0;i&&i(null,Uy[o])}function db(e,t,n){var r=ab(e)?e:document.getElementById(e);if(!r)throw new Error("You must pass a valid id or DOM element.");var i=Math.round(t),o=Math.round(n);if(!(i<=0||o<=0)){var a=r.id,u=Ky[a];if(u){if(void 0!==u.privateCanvasApi.privateGetContainer()){var s="KeyLines.setSize cannot be used on components created with the ";s+="container property, ";s+="the component will automatically resize to fill its container.";throw new Error(s)}hb(r,t,n)}else{r.style.width=t+"px";r.style.height=n+"px"}}}function hb(e,t,n){if(!b(t)||!b(n))throw new Error("KeyLines.setSize: Invalid width or height value passed. Both parameters should be numbers.");var r=e.id,i=Ky[r];if(i){i.privateCanvasApi.privateInternalSetSize(t,n);var o=i.privateCanvasApi.privateGetWebGLRenderer();o&&o.clearFramebuffers()}}function vb(e){e&&e.images&&fb(e.images);return{images:jy}}function gb(){return pb(["webkitIsFullScreen","mozFullScreen","msFullscreenElement","fullScreenElement"])}function pb(e){for(var t=D,n=0;n<e.length;n++)if(t(document[e[n]]))return!!document[e[n]];return!1}"undefined"!=typeof document&&dg(["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","MSFullscreenChange"],Ab);function yb(e){var t=D;return t(document.webkitCurrentFullScreenElement)?document.webkitCurrentFullScreenElement===e:t(document.mozFullScreenElement)?document.mozFullScreenElement===e:!!t(document.msFullscreenElement)&&document.msFullscreenElement===e}function bb(){var e=D;return!!e(document.webkitCurrentFullScreenElement)||(!!e(document.mozFullScreenElement)||!!e(document.msFullscreenEnabled)&&document.msFullscreenEnabled)}function xb(e,t){for(var n,r=0;!n&&r<t.length;r++)if(e[t[r]]){n=!0;e[t[r]]()}}function wb(e){xb(e,["requestFullScreen","mozRequestFullScreen","webkitRequestFullScreen","msRequestFullscreen"])}function Ab(){rb&&requestAnimationFrame(function(){rb(gb())})}function Mb(e,t){rb=t;gb()&&yb(e)?xb(document,["cancelFullScreen","mozCancelFullScreen","webkitCancelFullScreen","msExitFullscreen"]):wb(e)}function Ib(){if(lb()){var e=document.createElement("canvas").getContext("2d");return!!e.setLineDash||!!e.mozDash||!!e.webkitLineDash}return!1}function Eb(){var e={},t=Vg({failIfMajorPerformanceCaveat:!1});if(t){e.version=t.getParameter(t.VERSION);var n=t.getExtension("WEBGL_debug_renderer_info");if(n){e.vendor=t.getParameter(n.UNMASKED_VENDOR_WEBGL);e.renderer=t.getParameter(n.UNMASKED_RENDERER_WEBGL)}}return e}function Cb(){var e={account:"Licensed to Projectai for Pulse expires on Mon Jan 06 2020",eventErrors:{},isUsingWebGL:{},mode:Qy(),options:{},paths:a(vb()),version:"KeyLines v5.8.1-41455 eval"};Object.keys(Uy).forEach(function(t){var n=Uy[t];e.eventErrors[t]=n.getErrors();e.isUsingWebGL[t]=!!n.webgl;e.options[t]=n.options()});if("undefined"!=typeof navigator){e.platform=navigator.platform;e.userAgent=navigator.userAgent}if("undefined"!=typeof window){e.url=document.location.href;e.webgl=Eb()}return e}function Sb(e){var t=Rc(cr()),r=z(e,{selfLinks:!1}),i=Aa({numbers:{x:!0,y:!0},strings:{id:!0,id1:!0,id2:!0},booleans:{hi:!0,a1:!0,a2:!0}});function o(e){function t(t){var o=a(t);i.typeCheck(o);var u=i.filterNodesAndLinks(o.items,{},{},{selfLinks:r.selfLinks,filterComboNodes:!0});i.ensureHiddenItemConsistency(u.nodes,u.links);n(u.nodes,function(e){delete e.parentId});n(u.links,function(e){delete e.parentId});e.privateSetProperties(u.nodes,u.links)}return t}function u(e){function t(){var t={};e.privateSetProperties(t,t)}return t}return $n({},t,{load:o(t),clear:u(t)})}var kb,Rb,Tb="undefined"!=typeof window?window:global,Lb="",Bb=!1,Gb=["create"],Zb=["arrange","createLink","filter","foreground","range","animateProperties","expand","hide","layout","load","merge","options","pan","ping","setItem","setProperties","show","toDataURL","viewOptions","zoom"],Ob=["combo","getGraphEngine","graph","map"],Fb=["arrange","betweenness","close","closeness","combine","hide","transfer","open","options","show","uncombine"];function zb(e,t,n){if(!Bb){kb=Tb.Promise;Rb=kb}n&&(Lb=n);if(null==Rb&&!kb&&!e)throw Error("[promisify] There's no valid Promise constructor available. It is not possible to promisify.");if(!Wb(e))throw Error("[promisify] Promise constructor not valid. Please use a valid Promise implementation.");kb=e||Rb;if(!Bb){Db(t,Gb,Ob);j(t.components||{}).forEach(function(e){Db(e,Zb,Ob)})}Bb=!0}function Db(e,t,n){t.forEach(function(t){e[t]&&(e[t+Lb]=Yb(e[t],t,"create"===t))});n&&n.forEach(function(t){e[t]&&(e[t+Lb]=Pb(e[t],Fb))});return e}function Yb(e,t,n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=Math.max(0,e.length-1);return Vb(t,r)?e.apply(void 0,r):new kb(function(t,i){if(r.length===e.length&&A(r[o])){r.pop();p("A callback has been passed, but the function will return a Promise instead")}function a(e,n){if(e)return i(e);var r=Array.isArray(n),o=(r?n:[n]).map(function(e){return Db(e,Zb,Ob)});return t(r?o:o[0])}r[o]=n?a:t;e.apply(void 0,r)})}}function Vb(e,t){return!(!/options$/i.test(e)||!V(t[0]))||"range"===e&&!t.length}function Pb(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(void 0,n),o={},a=J(t);Object.keys(i).forEach(function(e){e in a?o[e+Lb]=Yb(i[e],e):o[e]=i[e]});return o}}function Wb(e){var t=e||kb,n=void 0!==t&&"resolve"in t&&"reject"in t;try{new t(function(e){n=n&&"function"==typeof e})}catch(e){throw new Error("You must pass a valid promise constructor")}return n}var Xb=function(){return lr.a||lr.b},Nb={charts:Uy,createChart:Jy,imageBasePath:fb,setCanvasPaths:function(){},promisify:function(e,t){return zb(e,this,t)},components:Uy,coords:function(e){return hg(e,document.getElementById(e.target.id))},create:ob,dashedLineSupport:Ib,fullScreenCapable:bb,getFontIcon:Wn,getGraphEngine:Sb,mode:Qy,info:Cb,paths:vb,setSize:db,toggleFullScreen:Mb,webGLSupport:Jg,Rendering:{mainChannel:Xb}};"undefined"!=typeof window&&(window.KeyLines=Nb);"undefined"!=typeof global&&(global.KeyLines=Nb);return Nb});
